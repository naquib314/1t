{"version":3,"file":"LineUpJSx.js","mappings":"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","sources":["webpack://LineUpJS/webpack/universalModuleDefinition","webpack://LineUpJS/./.yarn/cache/fast-deep-equal-npm-3.1.3-790edcfcf5-e21a9d8d84.zip/node_modules/fast-deep-equal/index.js","webpack://LineUpJS/./.yarn/cache/lodash.get-npm-4.4.2-7bda64ed87-e403047ddb.zip/node_modules/lodash.get/index.js","webpack://LineUpJS/./.yarn/cache/reflect-metadata-npm-0.1.13-c525998e20-798d379a7b.zip/node_modules/reflect-metadata/Reflect.js","webpack://LineUpJS/external umd {\"amd\":\"react\",\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\"}","webpack://LineUpJS/webpack/bootstrap","webpack://LineUpJS/webpack/runtime/compat get default export","webpack://LineUpJS/webpack/runtime/define property getters","webpack://LineUpJS/webpack/runtime/hasOwnProperty shorthand","webpack://LineUpJS/webpack/runtime/make namespace object","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/internal/utils.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/internal/interable.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/internal/worker.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/internal/math.js","webpack://LineUpJS/./.yarn/cache/d3-dispatch-npm-2.0.0-1417ab6cc8-cf473676ae.zip/node_modules/d3-dispatch/src/dispatch.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/internal/AEventDispatcher.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/annotations.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/interfaces.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/Column.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/INumberColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/ValueColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/CompositeColumn.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/colors.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/categorical/category10.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/categorical/Set3.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/internal/OrderedSet.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/internal.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/styles/index.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/AggregateGroupColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/CategoricalColorMappingFunction.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/missing.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/internalCategorical.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/CategoricalColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/SetColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/Ranking.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/internal/accessor.js","webpack://LineUpJS/./.yarn/cache/d3-time-npm-2.1.1-73fdf673f7-d1c7b9658c.zip/node_modules/d3-time/src/interval.js","webpack://LineUpJS/./.yarn/cache/d3-time-npm-2.1.1-73fdf673f7-d1c7b9658c.zip/node_modules/d3-time/src/duration.js","webpack://LineUpJS/./.yarn/cache/d3-time-npm-2.1.1-73fdf673f7-d1c7b9658c.zip/node_modules/d3-time/src/utcWeek.js","webpack://LineUpJS/./.yarn/cache/d3-time-npm-2.1.1-73fdf673f7-d1c7b9658c.zip/node_modules/d3-time/src/utcDay.js","webpack://LineUpJS/./.yarn/cache/d3-time-npm-2.1.1-73fdf673f7-d1c7b9658c.zip/node_modules/d3-time/src/week.js","webpack://LineUpJS/./.yarn/cache/d3-time-npm-2.1.1-73fdf673f7-d1c7b9658c.zip/node_modules/d3-time/src/day.js","webpack://LineUpJS/./.yarn/cache/d3-time-npm-2.1.1-73fdf673f7-d1c7b9658c.zip/node_modules/d3-time/src/year.js","webpack://LineUpJS/./.yarn/cache/d3-time-npm-2.1.1-73fdf673f7-d1c7b9658c.zip/node_modules/d3-time/src/utcYear.js","webpack://LineUpJS/./.yarn/cache/d3-time-format-npm-3.0.0-0803464fb3-c20c1667db.zip/node_modules/d3-time-format/src/locale.js","webpack://LineUpJS/./.yarn/cache/d3-time-format-npm-3.0.0-0803464fb3-c20c1667db.zip/node_modules/d3-time-format/src/defaultLocale.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/provider/utils.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/internal/debounce.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/RankColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/SelectionColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/ActionColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/StringColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/AnnotateColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/BooleanColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/ArrayColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/BooleansColumn.js","webpack://LineUpJS/./.yarn/cache/d3-format-npm-2.0.0-74628e435e-c4d3c8f994.zip/node_modules/d3-format/src/formatDecimal.js","webpack://LineUpJS/./.yarn/cache/d3-format-npm-2.0.0-74628e435e-c4d3c8f994.zip/node_modules/d3-format/src/exponent.js","webpack://LineUpJS/./.yarn/cache/d3-format-npm-2.0.0-74628e435e-c4d3c8f994.zip/node_modules/d3-format/src/formatSpecifier.js","webpack://LineUpJS/./.yarn/cache/d3-format-npm-2.0.0-74628e435e-c4d3c8f994.zip/node_modules/d3-format/src/formatPrefixAuto.js","webpack://LineUpJS/./.yarn/cache/d3-format-npm-2.0.0-74628e435e-c4d3c8f994.zip/node_modules/d3-format/src/formatRounded.js","webpack://LineUpJS/./.yarn/cache/d3-format-npm-2.0.0-74628e435e-c4d3c8f994.zip/node_modules/d3-format/src/formatTypes.js","webpack://LineUpJS/./.yarn/cache/d3-format-npm-2.0.0-74628e435e-c4d3c8f994.zip/node_modules/d3-format/src/identity.js","webpack://LineUpJS/./.yarn/cache/d3-format-npm-2.0.0-74628e435e-c4d3c8f994.zip/node_modules/d3-format/src/locale.js","webpack://LineUpJS/./.yarn/cache/d3-format-npm-2.0.0-74628e435e-c4d3c8f994.zip/node_modules/d3-format/src/defaultLocale.js","webpack://LineUpJS/./.yarn/cache/d3-format-npm-2.0.0-74628e435e-c4d3c8f994.zip/node_modules/d3-format/src/formatGroup.js","webpack://LineUpJS/./.yarn/cache/d3-format-npm-2.0.0-74628e435e-c4d3c8f994.zip/node_modules/d3-format/src/formatNumerals.js","webpack://LineUpJS/./.yarn/cache/d3-format-npm-2.0.0-74628e435e-c4d3c8f994.zip/node_modules/d3-format/src/formatTrim.js","webpack://LineUpJS/./.yarn/cache/d3-array-npm-2.12.1-104e51ecda-97853b7b52.zip/node_modules/d3-array/src/ticks.js","webpack://LineUpJS/./.yarn/cache/d3-array-npm-2.12.1-104e51ecda-97853b7b52.zip/node_modules/d3-array/src/ascending.js","webpack://LineUpJS/./.yarn/cache/d3-array-npm-2.12.1-104e51ecda-97853b7b52.zip/node_modules/d3-array/src/bisector.js","webpack://LineUpJS/./.yarn/cache/d3-array-npm-2.12.1-104e51ecda-97853b7b52.zip/node_modules/d3-array/src/bisect.js","webpack://LineUpJS/./.yarn/cache/d3-array-npm-2.12.1-104e51ecda-97853b7b52.zip/node_modules/d3-array/src/number.js","webpack://LineUpJS/./.yarn/cache/d3-color-npm-2.0.0-e7f04a5d87-b887354aa3.zip/node_modules/d3-color/src/define.js","webpack://LineUpJS/./.yarn/cache/d3-color-npm-2.0.0-e7f04a5d87-b887354aa3.zip/node_modules/d3-color/src/color.js","webpack://LineUpJS/./.yarn/cache/d3-interpolate-npm-2.0.1-7e198300b3-4a2018ac34.zip/node_modules/d3-interpolate/src/basis.js","webpack://LineUpJS/./.yarn/cache/d3-interpolate-npm-2.0.1-7e198300b3-4a2018ac34.zip/node_modules/d3-interpolate/src/constant.js","webpack://LineUpJS/./.yarn/cache/d3-interpolate-npm-2.0.1-7e198300b3-4a2018ac34.zip/node_modules/d3-interpolate/src/color.js","webpack://LineUpJS/./.yarn/cache/d3-interpolate-npm-2.0.1-7e198300b3-4a2018ac34.zip/node_modules/d3-interpolate/src/rgb.js","webpack://LineUpJS/./.yarn/cache/d3-interpolate-npm-2.0.1-7e198300b3-4a2018ac34.zip/node_modules/d3-interpolate/src/array.js","webpack://LineUpJS/./.yarn/cache/d3-interpolate-npm-2.0.1-7e198300b3-4a2018ac34.zip/node_modules/d3-interpolate/src/date.js","webpack://LineUpJS/./.yarn/cache/d3-interpolate-npm-2.0.1-7e198300b3-4a2018ac34.zip/node_modules/d3-interpolate/src/number.js","webpack://LineUpJS/./.yarn/cache/d3-interpolate-npm-2.0.1-7e198300b3-4a2018ac34.zip/node_modules/d3-interpolate/src/object.js","webpack://LineUpJS/./.yarn/cache/d3-interpolate-npm-2.0.1-7e198300b3-4a2018ac34.zip/node_modules/d3-interpolate/src/basisClosed.js","webpack://LineUpJS/./.yarn/cache/d3-interpolate-npm-2.0.1-7e198300b3-4a2018ac34.zip/node_modules/d3-interpolate/src/string.js","webpack://LineUpJS/./.yarn/cache/d3-interpolate-npm-2.0.1-7e198300b3-4a2018ac34.zip/node_modules/d3-interpolate/src/numberArray.js","webpack://LineUpJS/./.yarn/cache/d3-interpolate-npm-2.0.1-7e198300b3-4a2018ac34.zip/node_modules/d3-interpolate/src/value.js","webpack://LineUpJS/./.yarn/cache/d3-interpolate-npm-2.0.1-7e198300b3-4a2018ac34.zip/node_modules/d3-interpolate/src/round.js","webpack://LineUpJS/./.yarn/cache/d3-scale-npm-3.3.0-6a8f0391dc-f77e73f0fb.zip/node_modules/d3-scale/src/number.js","webpack://LineUpJS/./.yarn/cache/d3-scale-npm-3.3.0-6a8f0391dc-f77e73f0fb.zip/node_modules/d3-scale/src/continuous.js","webpack://LineUpJS/./.yarn/cache/d3-scale-npm-3.3.0-6a8f0391dc-f77e73f0fb.zip/node_modules/d3-scale/src/constant.js","webpack://LineUpJS/./.yarn/cache/d3-scale-npm-3.3.0-6a8f0391dc-f77e73f0fb.zip/node_modules/d3-scale/src/init.js","webpack://LineUpJS/./.yarn/cache/d3-scale-npm-3.3.0-6a8f0391dc-f77e73f0fb.zip/node_modules/d3-scale/src/log.js","webpack://LineUpJS/./.yarn/cache/d3-scale-npm-3.3.0-6a8f0391dc-f77e73f0fb.zip/node_modules/d3-scale/src/nice.js","webpack://LineUpJS/./.yarn/cache/d3-scale-npm-3.3.0-6a8f0391dc-f77e73f0fb.zip/node_modules/d3-scale/src/linear.js","webpack://LineUpJS/./.yarn/cache/d3-scale-npm-3.3.0-6a8f0391dc-f77e73f0fb.zip/node_modules/d3-scale/src/tickFormat.js","webpack://LineUpJS/./.yarn/cache/d3-format-npm-2.0.0-74628e435e-c4d3c8f994.zip/node_modules/d3-format/src/precisionPrefix.js","webpack://LineUpJS/./.yarn/cache/d3-format-npm-2.0.0-74628e435e-c4d3c8f994.zip/node_modules/d3-format/src/precisionRound.js","webpack://LineUpJS/./.yarn/cache/d3-format-npm-2.0.0-74628e435e-c4d3c8f994.zip/node_modules/d3-format/src/precisionFixed.js","webpack://LineUpJS/./.yarn/cache/d3-scale-npm-3.3.0-6a8f0391dc-f77e73f0fb.zip/node_modules/d3-scale/src/pow.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/MappingFunction.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/internalNumber.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/NumberColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/BoxPlotColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/MapColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/CategoricalMapColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/CategoricalsColumn.js","webpack://LineUpJS/./.yarn/cache/d3-time-npm-2.1.1-73fdf673f7-d1c7b9658c.zip/node_modules/d3-time/src/month.js","webpack://LineUpJS/./.yarn/cache/d3-time-npm-2.1.1-73fdf673f7-d1c7b9658c.zip/node_modules/d3-time/src/hour.js","webpack://LineUpJS/./.yarn/cache/d3-time-npm-2.1.1-73fdf673f7-d1c7b9658c.zip/node_modules/d3-time/src/minute.js","webpack://LineUpJS/./.yarn/cache/d3-time-npm-2.1.1-73fdf673f7-d1c7b9658c.zip/node_modules/d3-time/src/second.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/internalDate.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/DateColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/DatesColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/DatesMapColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/GroupColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/HierarchyColumn.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/ramp.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-single/Blues.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-single/Greens.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-single/Greys.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-single/Purples.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-single/Reds.js","webpack://LineUpJS/./.yarn/cache/d3-color-npm-2.0.0-e7f04a5d87-b887354aa3.zip/node_modules/d3-color/src/math.js","webpack://LineUpJS/./.yarn/cache/d3-color-npm-2.0.0-e7f04a5d87-b887354aa3.zip/node_modules/d3-color/src/cubehelix.js","webpack://LineUpJS/./.yarn/cache/d3-interpolate-npm-2.0.1-7e198300b3-4a2018ac34.zip/node_modules/d3-interpolate/src/cubehelix.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/diverging/BrBG.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/diverging/PRGn.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/diverging/PiYG.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/diverging/PuOr.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/diverging/RdBu.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/diverging/RdGy.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/diverging/Spectral.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/ColorMappingFunction.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/ImpositionCompositeColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/NumbersColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/ImpositionBoxPlotColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/ImpositionCompositesColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/CompositeNumberColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/ReduceColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/StackColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/MultiLevelCompositeColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/NestedColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/NumberMapColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/OrdinalColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/ScriptColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/StringMapColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/StringsColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/LinkColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/LinkMapColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/LinksColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/provider/internal.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/provider/ADataProvider.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/models.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/provider/interfaces.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/provider/ACommonDataProvider.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/provider/sort.js","webpack://LineUpJS/./.yarn/cache/lineupengine-npm-2.4.2-f44b303345-aa1217c807.zip/node_modules/lineupengine/build/src/abortAble.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/internal/scheduler.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/provider/tasks.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/provider/DirectRenderTasks.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/IArrayColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/ICategoricalColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/model/IDateColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/provider/ScheduledTasks.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/provider/LocalDataProvider.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/interfaces.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/constants.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/utils.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/ActionRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/AggregateGroupRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/missing.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/missing.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/StringCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/AnnotationRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/impose.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/BarCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/DefaultCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/BooleanCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/BoxplotCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/BrightnessCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/CategoricalCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/CategoricalHeatmapCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/CategoricalStackedDistributionlCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/CircleCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/DotCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/GroupCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/ANumbersCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/HeatmapCellRenderer.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getWindow.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/instanceOf.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/math.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getNodeName.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getParentNode.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/isTableElement.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/enums.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/orderModifiers.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/createPopper.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/debounce.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/mergeByName.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/modifiers/eventListeners.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/getBasePlacement.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/getVariation.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/computeOffsets.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/modifiers/computeStyles.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/modifiers/applyStyles.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/getOppositePlacement.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/contains.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/rectToClientRect.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/mergePaddingObject.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/getFreshSideObject.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/expandToHashMap.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/detectOverflow.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/within.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/modifiers/preventOverflow.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/getAltAxis.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/modifiers/hide.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/popper.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/modifiers/popperOffsets.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/modifiers/offset.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/modifiers/flip.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js","webpack://LineUpJS/./.yarn/cache/@popperjs-core-npm-2.11.5-a338f16bd4-fd7f9dca3f.zip/node_modules/@popperjs/core/lib/modifiers/arrow.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/ADialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/APopup.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/InputNumberDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/internal/drag.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/histogram.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/HistogramCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/ImageCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/AAggregatedGroupRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/MultiLevelCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/InterleavingCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/LinkCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/MapBarCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/TableCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/LinkMapCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/LoadingCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/RankCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/SelectionRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/SetCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/SparklineCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/UpSetCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/VerticalBarCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/DateCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/InputDateDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/DateHistogramCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/StringHistogramCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/ViolinPlotCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/TickCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/CategoricalTickCellRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/renderer/renderers.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/categorical/Accent.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/categorical/Dark2.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/categorical/Pastel1.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/categorical/Pastel2.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/categorical/Set1.js","webpack://LineUpJS/./.yarn/cache/d3-scale-chromatic-npm-2.0.0-75af9c90b0-9fe5b4c1d9.zip/node_modules/d3-scale-chromatic/src/categorical/Set2.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/CategoricalColorMappingDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/CategoricalFilterDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/CategoricalMappingFilterDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/ChangeRendererDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/ColorMappingDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/internal/dnd.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/toolbarResolvers.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/headerTooltip.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/MoreColumnOptionsDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/header.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/CompositeChildrenDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/CutOffHierarchyDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/DateFilterDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/EditPatternDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/GroupDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/MappingLineDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/MappingDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/NumberFilterDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/utils.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/ReduceDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/RenameDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/ScriptEditDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/SearchDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/ShowTopNDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/SortDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/StringFilterDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/WeightsEditDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/SelectionFilterDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/toolbar.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/groupNumber.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/groupString.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/groupDate.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/config.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/internal/merge.js","webpack://LineUpJS/./.yarn/cache/detect-browser-npm-5.3.0-184a56bcc6-dd6e08d55d.zip/node_modules/detect-browser/es/index.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/browser.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/DialogManager.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/ALineUp.js","webpack://LineUpJS/./.yarn/cache/lineupengine-npm-2.4.2-f44b303345-aa1217c807.zip/node_modules/lineupengine/build/src/animation/index.js","webpack://LineUpJS/./.yarn/cache/lineupengine-npm-2.4.2-f44b303345-aa1217c807.zip/node_modules/lineupengine/build/src/animation/KeyFinder.js","webpack://LineUpJS/./.yarn/cache/lineupengine-npm-2.4.2-f44b303345-aa1217c807.zip/node_modules/lineupengine/build/src/internal/scroll.js","webpack://LineUpJS/./.yarn/cache/lineupengine-npm-2.4.2-f44b303345-aa1217c807.zip/node_modules/lineupengine/build/src/internal/index.js","webpack://LineUpJS/./.yarn/cache/lineupengine-npm-2.4.2-f44b303345-aa1217c807.zip/node_modules/lineupengine/build/src/logic.js","webpack://LineUpJS/./.yarn/cache/lineupengine-npm-2.4.2-f44b303345-aa1217c807.zip/node_modules/lineupengine/build/src/mixin/IMixin.js","webpack://LineUpJS/./.yarn/cache/lineupengine-npm-2.4.2-f44b303345-aa1217c807.zip/node_modules/lineupengine/build/src/styles/index.js","webpack://LineUpJS/./.yarn/cache/lineupengine-npm-2.4.2-f44b303345-aa1217c807.zip/node_modules/lineupengine/build/src/ARowRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupengine-npm-2.4.2-f44b303345-aa1217c807.zip/node_modules/lineupengine/build/src/style/StyleManager.js","webpack://LineUpJS/./.yarn/cache/lineupengine-npm-2.4.2-f44b303345-aa1217c807.zip/node_modules/lineupengine/build/src/style/GridStyleManager.js","webpack://LineUpJS/./.yarn/cache/lineupengine-npm-2.4.2-f44b303345-aa1217c807.zip/node_modules/lineupengine/build/src/table/MultiTableRowRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/domElementCache.js","webpack://LineUpJS/./.yarn/cache/lineupengine-npm-2.4.2-f44b303345-aa1217c807.zip/node_modules/lineupengine/build/src/mixin/PrefetchMixin.js","webpack://LineUpJS/./.yarn/cache/lineupengine-npm-2.4.2-f44b303345-aa1217c807.zip/node_modules/lineupengine/build/src/table/internal/ACellAdapter.js","webpack://LineUpJS/./.yarn/cache/lineupengine-npm-2.4.2-f44b303345-aa1217c807.zip/node_modules/lineupengine/build/src/table/ACellTableSection.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/animation.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/RenderColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/MultiLevelRenderColumn.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/SelectionManager.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/EngineRanking.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/interfaces.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/SlopeGraph.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/SelectionIndicator.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/EngineRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/ChooseRankingDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/panel/SearchBox.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/RenameRankingDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/MoreRankingOptionsDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/dialogs/AddonDialog.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/panel/Hierarchy.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/panel/SidePanelEntryVis.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/panel/SidePanelRanking.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/panel/SidePanel.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/LineUp.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/builder/RankingBuilder.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/builder/adapter/ranking.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/builder/adapter/utils.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/builder/adapter/lineup.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/builder/adapter/column.js","webpack://LineUpJS/./src/column.ts","webpack://LineUpJS/./src/utils.ts","webpack://LineUpJS/./src/LineUpRanking.tsx","webpack://LineUpJS/./src/LineUp.tsx","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/taggle/TaggleRenderer.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/taggle/Taggle.js","webpack://LineUpJS/./.yarn/cache/lineupjs-npm-4.6.2-5654405d6d-ce3f7aa67e.zip/node_modules/lineupjs/build/src/ui/taggle/rules.js","webpack://LineUpJS/./src/Taggle.ts","webpack://LineUpJS/./src/bundle.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"LineUpJS\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"LineUpJS\"] = factory(root[\"React\"]);\n})(globalThis, (__WEBPACK_EXTERNAL_MODULE__672__) => {\nreturn ","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122  4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","module.exports = __WEBPACK_EXTERNAL_MODULE__672__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import * as equalImpl from 'fast-deep-equal';\n// keep here to have a \"real\" export for webpack not just interfaces\n/**\n * deep equal comparison\n */\nexport function equal(a, b) {\n    var f = typeof equalImpl === 'function' ? equalImpl : equalImpl.default;\n    return f(a, b);\n}\n/** @internal */\nexport function equalArrays(a, b) {\n    if (a.length !== b.length) {\n        return false;\n    }\n    return a.every(function (ai, i) { return ai === b[i]; });\n}\n/**\n * converts a given id to css compatible one\n * @param id\n * @return {string|void}\n * @internal\n */\nexport function fixCSS(id) {\n    return id.replace(/[\\s!#$%&'()*+,./:;<=>?@[\\\\\\]^`{|}~]+/g, '_'); //replace non css stuff to _\n}\n/**\n * clear node clearing\n * @param node\n * @internal\n */\nexport function clear(node) {\n    while (node.lastChild) {\n        node.removeChild(node.lastChild);\n    }\n    return node;\n}\n/**\n * @internal\n * to avoid [].concat(...) which doesn't work for large arrays\n * @param arrs\n */\nexport function concat(arrs) {\n    var r = [];\n    for (var _i = 0, arrs_1 = arrs; _i < arrs_1.length; _i++) {\n        var a = arrs_1[_i];\n        if (!Array.isArray(a)) {\n            r.push(a);\n            continue;\n        }\n        for (var _a = 0, a_1 = a; _a < a_1.length; _a++) {\n            var ai = a_1[_a];\n            r.push(ai);\n        }\n    }\n    return r;\n}\n/**\n * generates a label for the given sort method\n * @internal\n * @param method sort method\n */\nexport function getSortLabel(method) {\n    switch (method) {\n        case 'min':\n            return 'Minimum';\n        case 'max':\n            return 'Maximum';\n        case 'median':\n            return 'Median';\n        case 'mean':\n            return 'Mean';\n        case 'q1':\n            return '25% Quantile';\n        case 'q3':\n            return '75% Quantile';\n        default:\n            return String(method);\n    }\n}\n//# sourceMappingURL=utils.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @internal\n */\nexport function isForEachAble(v) {\n    return typeof v.forEach === 'function';\n}\n/**\n * @internal\n */\nexport function isSeqEmpty(seq) {\n    return seq.every(function () { return false; }); // more efficient than counting length\n}\n/**\n * helper function for faster access to avoid function calls\n * @internal\n */\nexport function isIndicesAble(it) {\n    return (Array.isArray(it) ||\n        it instanceof Uint8Array ||\n        it instanceof Uint16Array ||\n        it instanceof Uint32Array ||\n        it instanceof Float32Array ||\n        it instanceof Int8Array ||\n        it instanceof Int16Array ||\n        it instanceof Int32Array ||\n        it instanceof Float64Array);\n}\n/**\n * sequence implementation that does the operation lazily on the fly\n */\nvar LazyFilter = /** @class */ (function () {\n    function LazyFilter(it, filters) {\n        this.it = it;\n        this.filters = filters;\n        this._length = -1;\n    }\n    Object.defineProperty(LazyFilter.prototype, \"length\", {\n        get: function () {\n            // cached\n            if (this._length >= 0) {\n                return this._length;\n            }\n            var l = 0;\n            this.forEach(function () { return l++; });\n            this._length = l;\n            return l;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LazyFilter.prototype.filter = function (callback) {\n        // propagate filter\n        return new LazyFilter(this.it, this.filters.concat(callback));\n    };\n    LazyFilter.prototype.map = function (callback) {\n        // create lazy map out of myself\n        return new LazyMap1(this, callback);\n    };\n    LazyFilter.prototype.forEach = function (callback) {\n        if (isIndicesAble(this.it)) {\n            // fast array version\n            outer: for (var i_1 = 0; i_1 < this.it.length; ++i_1) {\n                var v_1 = this.it[i_1];\n                for (var _i = 0, _a = this.filters; _i < _a.length; _i++) {\n                    var f = _a[_i];\n                    if (!f(v_1, i_1)) {\n                        continue outer;\n                    }\n                }\n                callback(v_1, i_1);\n            }\n            return;\n        }\n        // iterator version\n        var valid = 0;\n        var it = this.it[Symbol.iterator]();\n        var v = it.next();\n        var i = 0;\n        outer: while (!v.done) {\n            for (var _b = 0, _c = this.filters; _b < _c.length; _b++) {\n                var f = _c[_b];\n                if (f(v.value, i)) {\n                    continue;\n                }\n                v = it.next();\n                i++;\n                continue outer;\n            }\n            callback(v.value, valid++);\n            v = it.next();\n            i++;\n        }\n    };\n    LazyFilter.prototype[Symbol.iterator] = function () {\n        var _this = this;\n        var it = this.it[Symbol.iterator]();\n        var next = function () {\n            var v = it.next();\n            var i = -1;\n            outer: while (!v.done) {\n                i++;\n                for (var _i = 0, _a = _this.filters; _i < _a.length; _i++) {\n                    var f = _a[_i];\n                    if (f(v.value, i)) {\n                        continue;\n                    }\n                    // invalid go to next\n                    v = it.next();\n                    continue outer;\n                }\n                return v;\n            }\n            return v;\n        };\n        return { next: next };\n    };\n    LazyFilter.prototype.some = function (callback) {\n        if (isIndicesAble(this.it)) {\n            // fast array version\n            outer: for (var i_2 = 0; i_2 < this.it.length; ++i_2) {\n                var v_2 = this.it[i_2];\n                for (var _i = 0, _a = this.filters; _i < _a.length; _i++) {\n                    var f = _a[_i];\n                    if (!f(v_2, i_2)) {\n                        continue outer;\n                    }\n                }\n                if (callback(v_2, i_2)) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        var valid = 0;\n        var it = this.it[Symbol.iterator]();\n        var v = it.next();\n        var i = 0;\n        outer: while (!v.done) {\n            for (var _b = 0, _c = this.filters; _b < _c.length; _b++) {\n                var f = _c[_b];\n                if (f(v.value, i)) {\n                    continue;\n                }\n                v = it.next();\n                i++;\n                continue outer;\n            }\n            if (callback(v.value, valid++)) {\n                return true;\n            }\n            v = it.next();\n            i++;\n        }\n        return false;\n    };\n    LazyFilter.prototype.every = function (callback) {\n        if (isIndicesAble(this.it)) {\n            // fast array version\n            outer: for (var i_3 = 0; i_3 < this.it.length; ++i_3) {\n                var v_3 = this.it[i_3];\n                for (var _i = 0, _a = this.filters; _i < _a.length; _i++) {\n                    var f = _a[_i];\n                    if (!f(v_3, i_3)) {\n                        continue outer;\n                    }\n                }\n                if (!callback(v_3, i_3)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        var valid = 0;\n        var it = this.it[Symbol.iterator]();\n        var v = it.next();\n        var i = 0;\n        outer: while (!v.done) {\n            for (var _b = 0, _c = this.filters; _b < _c.length; _b++) {\n                var f = _c[_b];\n                if (f(v.value, i)) {\n                    continue;\n                }\n                v = it.next();\n                i++;\n                continue outer;\n            }\n            if (!callback(v.value, valid++)) {\n                return false;\n            }\n            v = it.next();\n            i++;\n        }\n        return true;\n    };\n    LazyFilter.prototype.reduce = function (callback, initial) {\n        if (isIndicesAble(this.it)) {\n            // fast array version\n            var acc = initial;\n            var j = 0;\n            outer: for (var i_4 = 0; i_4 < this.it.length; ++i_4) {\n                var v_4 = this.it[i_4];\n                for (var _i = 0, _a = this.filters; _i < _a.length; _i++) {\n                    var f = _a[_i];\n                    if (!f(v_4, i_4)) {\n                        continue outer;\n                    }\n                }\n                acc = callback(acc, v_4, j++);\n            }\n            return acc;\n        }\n        var valid = 0;\n        var it = this.it[Symbol.iterator]();\n        var v = it.next();\n        var i = 0;\n        var r = initial;\n        outer: while (!v.done) {\n            for (var _b = 0, _c = this.filters; _b < _c.length; _b++) {\n                var f = _c[_b];\n                if (f(v.value, i)) {\n                    continue;\n                }\n                v = it.next();\n                i++;\n                continue outer;\n            }\n            r = callback(r, v.value, valid++);\n            v = it.next();\n            i++;\n        }\n        return r;\n    };\n    return LazyFilter;\n}());\n/**\n * lazy mapping operation\n */\nvar ALazyMap = /** @class */ (function () {\n    function ALazyMap(it) {\n        this.it = it;\n    }\n    Object.defineProperty(ALazyMap.prototype, \"length\", {\n        get: function () {\n            return this.it.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ALazyMap.prototype.filter = function (callback) {\n        return new LazyFilter(this, [callback]);\n    };\n    ALazyMap.prototype.forEach = function (callback) {\n        if (isIndicesAble(this.it)) {\n            for (var i = 0; i < this.it.length; ++i) {\n                callback(this.mapV(this.it[i], i), i);\n            }\n            return;\n        }\n        var it = this.it[Symbol.iterator]();\n        for (var v = it.next(), i = 0; !v.done; v = it.next(), i++) {\n            callback(this.mapV(v.value, i), i);\n        }\n    };\n    ALazyMap.prototype[Symbol.iterator] = function () {\n        var _this = this;\n        var it = this.it[Symbol.iterator]();\n        var i = 0;\n        var next = function () {\n            var v = it.next();\n            if (v.done) {\n                return {\n                    value: undefined,\n                    done: true,\n                };\n            }\n            var value = _this.mapV(v.value, i);\n            i++;\n            return {\n                value: value,\n                done: false,\n            };\n        };\n        return { next: next };\n    };\n    ALazyMap.prototype.some = function (callback) {\n        if (isIndicesAble(this.it)) {\n            for (var i = 0; i < this.it.length; ++i) {\n                if (callback(this.mapV(this.it[i], i), i)) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        var it = this.it[Symbol.iterator]();\n        for (var v = it.next(), i = 0; !v.done; v = it.next(), i++) {\n            if (callback(this.mapV(v.value, i), i)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    ALazyMap.prototype.every = function (callback) {\n        if (isIndicesAble(this.it)) {\n            for (var i = 0; i < this.it.length; ++i) {\n                if (!callback(this.mapV(this.it[i], i), i)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        var it = this.it[Symbol.iterator]();\n        for (var v = it.next(), i = 0; !v.done; v = it.next(), i++) {\n            if (!callback(this.mapV(v.value, i), i)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    ALazyMap.prototype.reduce = function (callback, initial) {\n        if (isIndicesAble(this.it)) {\n            var acc_1 = initial;\n            for (var i = 0; i < this.it.length; ++i) {\n                acc_1 = callback(acc_1, this.mapV(this.it[i], i), i);\n            }\n            return acc_1;\n        }\n        var it = this.it[Symbol.iterator]();\n        var acc = initial;\n        for (var v = it.next(), i = 0; !v.done; v = it.next(), i++) {\n            acc = callback(acc, this.mapV(v.value, i), i);\n        }\n        return acc;\n    };\n    return ALazyMap;\n}());\nvar LazyMap1 = /** @class */ (function (_super) {\n    __extends(LazyMap1, _super);\n    function LazyMap1(it, map12) {\n        var _this = _super.call(this, it) || this;\n        _this.map12 = map12;\n        return _this;\n    }\n    LazyMap1.prototype.mapV = function (v, i) {\n        return this.map12(v, i);\n    };\n    LazyMap1.prototype.map = function (callback) {\n        return new LazyMap2(this.it, this.map12, callback);\n    };\n    return LazyMap1;\n}(ALazyMap));\nvar LazyMap2 = /** @class */ (function (_super) {\n    __extends(LazyMap2, _super);\n    function LazyMap2(it, map12, map23) {\n        var _this = _super.call(this, it) || this;\n        _this.map12 = map12;\n        _this.map23 = map23;\n        return _this;\n    }\n    LazyMap2.prototype.map = function (callback) {\n        return new LazyMap3(this.it, this.map12, this.map23, callback);\n    };\n    LazyMap2.prototype.mapV = function (v, i) {\n        return this.map23(this.map12(v, i), i);\n    };\n    return LazyMap2;\n}(ALazyMap));\nvar LazyMap3 = /** @class */ (function (_super) {\n    __extends(LazyMap3, _super);\n    function LazyMap3(it, map12, map23, map34) {\n        var _this = _super.call(this, it) || this;\n        _this.map12 = map12;\n        _this.map23 = map23;\n        _this.map34 = map34;\n        return _this;\n    }\n    LazyMap3.prototype.map = function (callback) {\n        var _this = this;\n        var map1U = function (v, i) { return callback(_this.map34(_this.map23(_this.map12(v, i), i), i), i); };\n        return new LazyMap1(this.it, map1U);\n    };\n    LazyMap3.prototype.mapV = function (v, i) {\n        return this.map34(this.map23(this.map12(v, i), i), i);\n    };\n    return LazyMap3;\n}(ALazyMap));\nvar LazySeq = /** @class */ (function () {\n    function LazySeq(iterable) {\n        this.iterable = iterable;\n        this._arr = null;\n    }\n    Object.defineProperty(LazySeq.prototype, \"arr\", {\n        get: function () {\n            if (this._arr) {\n                return this._arr;\n            }\n            if (isIndicesAble(this.iterable)) {\n                this._arr = this.iterable;\n            }\n            else {\n                this._arr = Array.from(this.iterable);\n            }\n            return this._arr;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LazySeq.prototype[Symbol.iterator] = function () {\n        return this.iterable[Symbol.iterator]();\n    };\n    LazySeq.prototype.filter = function (callback) {\n        return new LazyFilter(this.arr, [callback]);\n    };\n    LazySeq.prototype.map = function (callback) {\n        return new LazyMap1(this.arr, callback);\n    };\n    LazySeq.prototype.forEach = function (callback) {\n        if (isIndicesAble(this.iterable)) {\n            for (var i = 0; i < this.iterable.length; ++i) {\n                callback(this.iterable[i], i);\n            }\n            return;\n        }\n        var it = this[Symbol.iterator]();\n        for (var v = it.next(), i = 0; !v.done; v = it.next(), i++) {\n            callback(v.value, i);\n        }\n    };\n    LazySeq.prototype.some = function (callback) {\n        if (isIndicesAble(this.iterable)) {\n            for (var i = 0; i < this.iterable.length; ++i) {\n                if (callback(this.iterable[i], i)) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        var it = this[Symbol.iterator]();\n        for (var v = it.next(), i = 0; !v.done; v = it.next(), i++) {\n            if (callback(v.value, i)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    LazySeq.prototype.every = function (callback) {\n        if (isIndicesAble(this.iterable)) {\n            for (var i = 0; i < this.iterable.length; ++i) {\n                if (!callback(this.iterable[i], i)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        var it = this[Symbol.iterator]();\n        for (var v = it.next(), i = 0; !v.done; v = it.next(), i++) {\n            if (!callback(v.value, i)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    LazySeq.prototype.reduce = function (callback, initial) {\n        if (isIndicesAble(this.iterable)) {\n            var acc_2 = initial;\n            for (var i = 0; i < this.iterable.length; ++i) {\n                acc_2 = callback(acc_2, this.iterable[i], i);\n            }\n            return acc_2;\n        }\n        var it = this[Symbol.iterator]();\n        var acc = initial;\n        for (var v = it.next(), i = 0; !v.done; v = it.next(), i++) {\n            acc = callback(acc, v.value, i);\n        }\n        return acc;\n    };\n    Object.defineProperty(LazySeq.prototype, \"length\", {\n        get: function () {\n            var it = this.iterable;\n            if (isIndicesAble(it)) {\n                return it.length;\n            }\n            if (it instanceof Set || it instanceof Map) {\n                return it.size;\n            }\n            return this.arr.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return LazySeq;\n}());\n/**\n * @internal\n */\nexport function lazySeq(iterable) {\n    return new LazySeq(iterable);\n}\nvar ConcatSequence = /** @class */ (function () {\n    function ConcatSequence(seqs) {\n        this.seqs = seqs;\n        //\n    }\n    ConcatSequence.prototype[Symbol.iterator] = function () {\n        var seqs = Array.from(this.seqs);\n        var it = seqs.shift()[Symbol.iterator]();\n        var next = function () {\n            var v = it.next();\n            if (!v.done) {\n                return v;\n            }\n            if (seqs.length === 0) {\n                // last last\n                return v;\n            }\n            // next iterator and compute next element\n            it = seqs.shift()[Symbol.iterator]();\n            return next();\n        };\n        return { next: next };\n    };\n    ConcatSequence.prototype.filter = function (callback) {\n        return new LazyFilter(this, [callback]);\n    };\n    ConcatSequence.prototype.map = function (callback) {\n        return new LazyMap1(this, callback);\n    };\n    ConcatSequence.prototype.forEach = function (callback) {\n        this.seqs.forEach(function (s) { return s.forEach(callback); });\n    };\n    ConcatSequence.prototype.some = function (callback) {\n        return this.seqs.some(function (s) { return s.some(callback); });\n    };\n    ConcatSequence.prototype.every = function (callback) {\n        return this.seqs.every(function (s) { return s.every(callback); });\n    };\n    ConcatSequence.prototype.reduce = function (callback, initial) {\n        return this.seqs.reduce(function (acc, s) { return s.reduce(callback, acc); }, initial);\n    };\n    Object.defineProperty(ConcatSequence.prototype, \"length\", {\n        get: function () {\n            return this.seqs.reduce(function (a, b) { return a + b.length; }, 0);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return ConcatSequence;\n}());\nexport function concatSeq(seq1, seq2) {\n    var seqs = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        seqs[_i - 2] = arguments[_i];\n    }\n    if (seq2) {\n        return new ConcatSequence([seq1, seq2].concat(seqs));\n    }\n    return new ConcatSequence(seq1);\n}\n//# sourceMappingURL=interable.js.map","// function workerMain(self: IPoorManWorkerScope) {\n//   self.addEventListener('message', (evt) => {\n//     self.postMessage(`Worker: ${evt.data} - Polo`);\n//   });\n// }\n/**\n * @internal\n */\nexport function toFunctionBody(f) {\n    var source = f.toString();\n    return source.slice(source.indexOf('{') + 1, source.lastIndexOf('}'));\n}\n/**\n * create a blob out of the given function or string\n * @internal\n */\nexport function createWorkerCodeBlob(fs) {\n    var sources = fs.map(function (d) { return d.toString(); }).join('\\n\\n');\n    var blob = new Blob([sources], { type: 'application/javascript' });\n    return URL.createObjectURL(blob);\n}\nvar MIN_WORKER_THREADS = 1;\nvar MAX_WORKER_THREADS = Math.max(navigator.hardwareConcurrency - 1, 1); // keep one for the ui\nvar THREAD_CLEANUP_TIME = 10000; // 10s\n/**\n * task scheduler based on web worker\n * @internal\n */\nvar WorkerTaskScheduler = /** @class */ (function () {\n    function WorkerTaskScheduler(blob) {\n        var _this = this;\n        this.blob = blob;\n        this.workers = [];\n        this.cleanUpWorkerTimer = -1;\n        /**\n         * worker task id\n         */\n        this.workerTaskCounter = 0;\n        this.cleanUpWorker = function () {\n            // delete workers when they are not needed anymore and empty\n            while (_this.workers.length > MIN_WORKER_THREADS) {\n                var toFree = _this.workers.findIndex(function (d) { return d.tasks.size === 0; });\n                if (toFree < 0) {\n                    break;\n                }\n                var w = _this.workers.splice(toFree, 1)[0];\n                w.worker.terminate();\n            }\n            // maybe reschedule\n            _this.finishedTask();\n        };\n        for (var i = 0; i < MIN_WORKER_THREADS; ++i) {\n            var w = new Worker(blob);\n            this.workers.push({ worker: w, tasks: new Set(), refs: new Set(), index: i });\n        }\n    }\n    WorkerTaskScheduler.prototype.terminate = function () {\n        this.workers.splice(0, this.workers.length).forEach(function (w) { return w.worker.terminate(); });\n    };\n    WorkerTaskScheduler.prototype.checkOutWorker = function () {\n        if (this.cleanUpWorkerTimer >= 0) {\n            clearTimeout(this.cleanUpWorkerTimer);\n            this.cleanUpWorkerTimer = -1;\n        }\n        var emptyWorker = this.workers.find(function (d) { return d.tasks.size === 0; });\n        if (emptyWorker) {\n            return emptyWorker;\n        }\n        if (this.workers.length >= MAX_WORKER_THREADS) {\n            // find the one with the fewest tasks\n            return this.workers.reduce(function (a, b) { return (a == null || a.tasks.size > b.tasks.size ? b : a); }, null);\n        }\n        // create new one\n        var r = {\n            worker: new Worker(this.blob),\n            tasks: new Set(),\n            refs: new Set(),\n            index: this.workers.length,\n        };\n        this.workers.push(r);\n        return r;\n    };\n    WorkerTaskScheduler.prototype.finishedTask = function () {\n        if (this.cleanUpWorkerTimer === -1 && this.workers.length > MIN_WORKER_THREADS) {\n            this.cleanUpWorkerTimer = setTimeout(this.cleanUpWorker, THREAD_CLEANUP_TIME);\n        }\n    };\n    WorkerTaskScheduler.prototype.pushStats = function (type, args, refData, data, refIndices, indices) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            var uid = _this.workerTaskCounter++;\n            var _a = _this.checkOutWorker(), worker = _a.worker, tasks = _a.tasks, refs = _a.refs;\n            var receiver = function (msg) {\n                var r = msg.data;\n                if (r.uid !== uid || r.type !== type) {\n                    return;\n                }\n                // console.log('worker', index, uid, 'finish', r);\n                worker.removeEventListener('message', receiver);\n                tasks.delete(uid);\n                _this.finishedTask();\n                resolve(r.stats);\n            };\n            worker.addEventListener('message', receiver);\n            tasks.add(uid);\n            var msg = Object.assign({\n                type: type,\n                uid: uid,\n                refData: refData,\n                refIndices: refIndices || null,\n            }, args);\n            if (!refData || !refs.has(refData)) {\n                // need to transfer to worker\n                msg.data = data;\n                if (refData) {\n                    // save that this worker has this ref\n                    refs.add(refData);\n                }\n                // console.log(index, 'set ref (i)', refData);\n            }\n            if (indices && (!refIndices || !refs.has(refIndices))) {\n                // need to transfer\n                msg.indices = indices;\n                if (refIndices) {\n                    refs.add(refIndices);\n                }\n                // console.log(index, 'set ref (i)', refIndices);\n            }\n            // console.log('worker', index, uid, msg);\n            worker.postMessage(msg);\n        });\n    };\n    WorkerTaskScheduler.prototype.push = function (type, args, transferAbles, toResult) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            var uid = _this.workerTaskCounter++;\n            var _a = _this.checkOutWorker(), worker = _a.worker, tasks = _a.tasks;\n            var receiver = function (msg) {\n                var r = msg.data;\n                if (r.uid !== uid || r.type !== type) {\n                    return;\n                }\n                // console.log('worker', index, uid, 'finish', r);\n                worker.removeEventListener('message', receiver);\n                tasks.delete(uid);\n                _this.finishedTask();\n                resolve(toResult ? toResult(r) : r);\n            };\n            worker.addEventListener('message', receiver);\n            tasks.add(uid);\n            var msg = Object.assign({\n                type: type,\n                uid: uid,\n            }, args);\n            // console.log('worker', index, uid, msg);\n            worker.postMessage(msg, transferAbles);\n        });\n    };\n    WorkerTaskScheduler.prototype.setRef = function (ref, data) {\n        for (var _i = 0, _a = this.workers; _i < _a.length; _i++) {\n            var w = _a[_i];\n            w.refs.add(ref);\n        }\n        this.broadCast('setRef', {\n            ref: ref,\n            data: data,\n        });\n    };\n    WorkerTaskScheduler.prototype.deleteRef = function (ref, startsWith) {\n        if (startsWith === void 0) { startsWith = false; }\n        var uid = this.workerTaskCounter++;\n        var msg = {\n            type: 'deleteRef',\n            uid: uid,\n            ref: ref,\n            startsWith: startsWith,\n        };\n        for (var _i = 0, _a = this.workers; _i < _a.length; _i++) {\n            var w = _a[_i];\n            // console.log(w.index, 'delete ref', ref, startsWith);\n            w.worker.postMessage(msg);\n            if (!startsWith) {\n                w.refs.delete(ref);\n                continue;\n            }\n            for (var _b = 0, _c = Array.from(w.refs); _b < _c.length; _b++) {\n                var r = _c[_b];\n                if (r.startsWith(ref)) {\n                    w.refs.delete(r);\n                }\n            }\n        }\n    };\n    WorkerTaskScheduler.prototype.deleteRefs = function () {\n        var uid = this.workerTaskCounter++;\n        var msg = {\n            type: 'deleteRef',\n            uid: uid,\n            ref: '',\n            startsWith: true,\n        };\n        for (var _i = 0, _a = this.workers; _i < _a.length; _i++) {\n            var w = _a[_i];\n            // console.log(w.index, 'delete refs');\n            w.worker.postMessage(msg);\n            w.refs.clear();\n        }\n    };\n    WorkerTaskScheduler.prototype.broadCast = function (type, args) {\n        var uid = this.workerTaskCounter++;\n        // don't store in tasks queue since there is no response\n        var msg = Object.assign({\n            type: type,\n            uid: uid,\n        }, args);\n        // console.log('broadcast', msg);\n        for (var _i = 0, _a = this.workers; _i < _a.length; _i++) {\n            var w = _a[_i];\n            w.worker.postMessage(msg);\n        }\n    };\n    return WorkerTaskScheduler;\n}());\nexport { WorkerTaskScheduler };\n//# sourceMappingURL=worker.js.map","import { isIndicesAble } from './interable';\nimport { createWorkerCodeBlob, toFunctionBody } from './worker';\n/**\n * computes the optimal number of bins for a given array length\n * @internal\n * @param {number} length\n * @returns {number}\n */\nexport function getNumberOfBins(length) {\n    if (length === 0) {\n        return 1;\n    }\n    // as by default used in d3 the Sturges' formula\n    return Math.ceil(Math.log(length) / Math.LN2) + 1;\n}\nexport function min(values, acc) {\n    var min = Number.POSITIVE_INFINITY;\n    for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n        var d = values_1[_i];\n        var v = acc ? acc(d) : d;\n        if (v < min) {\n            min = v;\n        }\n    }\n    return min;\n}\nexport function max(values, acc) {\n    var max = Number.NEGATIVE_INFINITY;\n    for (var _i = 0, values_2 = values; _i < values_2.length; _i++) {\n        var d = values_2[_i];\n        var v = acc ? acc(d) : d;\n        if (v > max) {\n            max = v;\n        }\n    }\n    return max;\n}\nexport function extent(values, acc) {\n    var max = Number.NEGATIVE_INFINITY;\n    var min = Number.POSITIVE_INFINITY;\n    for (var _i = 0, values_3 = values; _i < values_3.length; _i++) {\n        var d = values_3[_i];\n        var v = acc ? acc(d) : d;\n        if (v < min) {\n            min = v;\n        }\n        if (v > max) {\n            max = v;\n        }\n    }\n    return [min, max];\n}\n/**\n * @internal\n */\nexport function range(length) {\n    var r = new Array(length);\n    for (var i = 0; i < length; ++i) {\n        r[i] = i;\n    }\n    return r;\n}\n/**\n * an empty range\n * @internal\n */\nexport function empty(length) {\n    var r = new Array(length);\n    r.fill(null);\n    return r;\n}\n/**\n * computes the X quantile assumes the values are sorted\n * @internal\n */\nexport function quantile(values, quantile, length) {\n    if (length === void 0) { length = values.length; }\n    if (length === 0) {\n        return NaN;\n    }\n    var target = (length - 1) * quantile;\n    var index = Math.floor(target);\n    if (index === target) {\n        return values[index];\n    }\n    var v = values[index];\n    var vAfter = values[index + 1];\n    return v + (vAfter - v) * (target - index); // shift by change\n}\nexport function median(values, acc) {\n    var arr = acc ? values.map(acc) : values.slice();\n    arr.sort(function (a, b) { return (a < b ? -1 : a > b ? 1 : 0); });\n    return quantile(arr, 0.5);\n}\nfunction pushAll(push) {\n    return function (vs) {\n        if (!isIndicesAble(vs)) {\n            vs.forEach(push);\n            return;\n        }\n        for (var j = 0; j < vs.length; ++j) {\n            push(vs[j]);\n        }\n    };\n}\nvar GAUSSIAN_CONST = Math.sqrt(2 * Math.PI);\n// See <http://en.wikipedia.org/wiki/Kernel_(statistics)>.\nfunction gaussian(u) {\n    return Math.exp(-0.5 * u * u) / GAUSSIAN_CONST;\n}\nfunction toSampleVariance(variance, len) {\n    return (variance * len) / (len - 1);\n}\n/**\n *\n * The [\"normal reference distribution\"\n * rule-of-thumb](https://stat.ethz.ch/R-manual/R-devel/library/MASS/html/bandwidth.nrd.html),\n * a commonly used version of [Silverman's\n * rule-of-thumb](https://en.wikipedia.org/wiki/Kernel_density_estimation#A_rule-of-thumb_bandwidth_estimator).\n */\nfunction nrd(iqr, variance, len) {\n    var s = Math.sqrt(toSampleVariance(variance, len));\n    if (typeof iqr === 'number') {\n        s = Math.min(s, iqr / 1.34);\n    }\n    return 1.06 * s * Math.pow(len, -0.2);\n}\nfunction computeVariance(s, len, mean) {\n    var variance = 0;\n    for (var i = 0; i < len; i++) {\n        var v = s[i];\n        variance += (v - mean) * (v - mean);\n    }\n    variance /= len;\n    return variance;\n}\nfunction computeKDE(s, len, points, min, max, variance, iqr) {\n    var bandwidth = nrd(iqr, variance, len);\n    var computePoint = function (x) {\n        var i = 0;\n        var sum = 0;\n        for (i = 0; i < len; i++) {\n            var v = s[i];\n            sum += gaussian((x - v) / bandwidth);\n        }\n        return sum / bandwidth / len;\n    };\n    var step = (max - min) / (points - 1);\n    return Array.from({ length: points }, function (_, i) {\n        var v = i === points - 1 ? max : min + i * step;\n        return {\n            v: v,\n            p: computePoint(v),\n        };\n    });\n}\n/**\n * @internal\n */\nexport function boxplotBuilder(fixedLength, kdePoints) {\n    var min = Number.POSITIVE_INFINITY;\n    var max = Number.NEGATIVE_INFINITY;\n    var sum = 0;\n    var length = 0;\n    var missing = 0;\n    var kdePointCount = kdePoints !== null && kdePoints !== void 0 ? kdePoints : 100;\n    // if fixed size use the typed array else a regular array\n    var values = [];\n    var vs = fixedLength != null ? new Float64Array(fixedLength) : null;\n    var push = function (v) {\n        length += 1;\n        if (v == null || Number.isNaN(v)) {\n            missing += 1;\n            return;\n        }\n        if (v < min) {\n            min = v;\n        }\n        if (v > max) {\n            max = v;\n        }\n        sum += v;\n    };\n    var pushAndSave = function (v) {\n        push(v);\n        if (vs) {\n            vs[length] = v;\n        }\n        else {\n            values.push(v);\n        }\n    };\n    var invalid = {\n        min: NaN,\n        max: NaN,\n        mean: NaN,\n        missing: missing,\n        count: length,\n        whiskerHigh: NaN,\n        whiskerLow: NaN,\n        outlier: [],\n        median: NaN,\n        q1: NaN,\n        q3: NaN,\n        kdePoints: [],\n    };\n    var buildImpl = function (s) {\n        var valid = length - missing;\n        var median = quantile(s, 0.5, valid);\n        var q1 = quantile(s, 0.25, valid);\n        var q3 = quantile(s, 0.75, valid);\n        var iqr = q3 - q1;\n        var left = q1 - 1.5 * iqr;\n        var right = q3 + 1.5 * iqr;\n        var mean = sum / valid;\n        var variance = computeVariance(s, valid, mean);\n        var outlier = [];\n        // look for the closest value which is bigger than the computed left\n        var whiskerLow = left;\n        for (var i = 0; i < valid; ++i) {\n            var v = s[i];\n            if (left < v) {\n                whiskerLow = v;\n                break;\n            }\n            // outlier\n            outlier.push(v);\n        }\n        // look for the closest value which is smaller than the computed right\n        var whiskerHigh = right;\n        var reversedOutliers = [];\n        for (var i = valid - 1; i >= 0; --i) {\n            var v = s[i];\n            if (v < right) {\n                whiskerHigh = v;\n                break;\n            }\n            // outlier\n            reversedOutliers.push(v);\n        }\n        outlier = outlier.concat(reversedOutliers.reverse());\n        var kdePoints = computeKDE(s, valid, kdePointCount, min, max, variance, iqr);\n        return {\n            min: min,\n            max: max,\n            count: length,\n            missing: missing,\n            mean: sum / valid,\n            whiskerHigh: whiskerHigh,\n            whiskerLow: whiskerLow,\n            outlier: outlier,\n            median: median,\n            q1: q1,\n            q3: q3,\n            kdePoints: kdePoints,\n        };\n    };\n    var build = function () {\n        var valid = length - missing;\n        if (valid === 0) {\n            return invalid;\n        }\n        var s = vs ? vs.sort() : Float64Array.from(values).sort();\n        return buildImpl(s);\n    };\n    var buildArr = function (vs) {\n        var s = vs.slice().sort();\n        for (var j = 0; j < vs.length; ++j) {\n            push(vs[j]);\n        }\n        // missing are the last\n        return buildImpl(s);\n    };\n    return {\n        push: pushAndSave,\n        build: build,\n        buildArr: buildArr,\n        pushAll: pushAll(pushAndSave),\n    };\n}\n/**\n * @internal\n */\nexport function numberStatsBuilder(domain, numberOfBins) {\n    var hist = [];\n    var x0 = domain[0];\n    var range = domain[1] - domain[0];\n    var binWidth = range / numberOfBins;\n    for (var i = 0; i < numberOfBins; ++i, x0 += binWidth) {\n        hist.push({\n            x0: x0,\n            x1: x0 + binWidth,\n            count: 0,\n        });\n    }\n    var bin1 = domain[0] + binWidth;\n    var binN = domain[1] - binWidth;\n    var toBin = function (v) {\n        if (v < bin1) {\n            return 0;\n        }\n        if (v >= binN) {\n            return numberOfBins - 1;\n        }\n        if (numberOfBins === 3) {\n            return 1;\n        }\n        var low = 1;\n        var high = numberOfBins - 1;\n        // binary search\n        while (low < high) {\n            var center = Math.floor((high + low) / 2);\n            if (v < hist[center].x1) {\n                high = center;\n            }\n            else {\n                low = center + 1;\n            }\n        }\n        return low;\n    };\n    // filter out NaN\n    var min = Number.POSITIVE_INFINITY;\n    var max = Number.NEGATIVE_INFINITY;\n    var sum = 0;\n    var length = 0;\n    var missing = 0;\n    var push = function (v) {\n        length += 1;\n        if (v == null || Number.isNaN(v)) {\n            missing += 1;\n            return;\n        }\n        if (v < min) {\n            min = v;\n        }\n        if (v > max) {\n            max = v;\n        }\n        sum += v;\n        hist[toBin(v)].count++;\n    };\n    var build = function () {\n        var valid = length - missing;\n        if (valid === 0) {\n            return {\n                count: missing,\n                missing: missing,\n                min: NaN,\n                max: NaN,\n                mean: NaN,\n                hist: hist,\n                maxBin: 0,\n            };\n        }\n        return {\n            count: length,\n            min: min,\n            max: max,\n            mean: sum / valid,\n            missing: missing,\n            hist: hist,\n            maxBin: hist.reduce(function (a, b) { return Math.max(a, b.count); }, 0),\n        };\n    };\n    return { push: push, build: build, pushAll: pushAll(push) };\n}\n/**\n * guesses the histogram granularity to use based on min and max date\n */\nfunction computeGranularity(min, max) {\n    if (min == null || max == null) {\n        return { histGranularity: 'year', hist: [] };\n    }\n    var hist = [];\n    if (max.getFullYear() - min.getFullYear() >= 2) {\n        // more than two years difference\n        var minYear = min.getFullYear();\n        var maxYear = max.getFullYear();\n        for (var i = minYear; i <= maxYear; ++i) {\n            hist.push({\n                x0: new Date(i, 0, 1),\n                x1: new Date(i + 1, 0, 1),\n                count: 0,\n            });\n        }\n        return { hist: hist, histGranularity: 'year' };\n    }\n    if (max.getTime() - min.getTime() <= 1000 * 60 * 60 * 24 * 31) {\n        // less than a month use day\n        var x0_1 = new Date(min.getFullYear(), min.getMonth(), min.getDate());\n        while (x0_1 <= max) {\n            var x1 = new Date(x0_1);\n            x1.setDate(x1.getDate() + 1);\n            hist.push({\n                x0: x0_1,\n                x1: x1,\n                count: 0,\n            });\n            x0_1 = x1;\n        }\n        return { hist: hist, histGranularity: 'day' };\n    }\n    // by month\n    var x0 = new Date(min.getFullYear(), min.getMonth(), 1);\n    while (x0 <= max) {\n        var x1 = new Date(x0);\n        x1.setMonth(x1.getMonth() + 1);\n        hist.push({\n            x0: x0,\n            x1: x1,\n            count: 0,\n        });\n        x0 = x1;\n    }\n    return { hist: hist, histGranularity: 'month' };\n}\nfunction pushDateHist(hist, v, count) {\n    if (count === void 0) { count = 1; }\n    if (v < hist[0].x1) {\n        hist[0].count += count;\n        return;\n    }\n    var l = hist.length - 1;\n    if (v > hist[l].x0) {\n        hist[l].count += count;\n        return;\n    }\n    if (l === 2) {\n        hist[1].count += count;\n        return;\n    }\n    var low = 1;\n    var high = l;\n    // binary search\n    while (low < high) {\n        var center = Math.floor((high + low) / 2);\n        if (v < hist[center].x1) {\n            high = center;\n        }\n        else {\n            low = center + 1;\n        }\n    }\n    hist[low].count += count;\n}\n/**\n * @internal\n */\nexport function dateStatsBuilder(template) {\n    var min = null;\n    var max = null;\n    var count = 0;\n    var missing = 0;\n    // yyyymmdd, count\n    var byDay = new Map();\n    var templateHist = template ? template.hist.map(function (d) { return ({ x0: d.x0, x1: d.x1, count: 0 }); }) : null;\n    var push = function (v) {\n        count += 1;\n        if (!v || v == null) {\n            missing += 1;\n            return;\n        }\n        if (min == null || v < min) {\n            min = v;\n        }\n        if (max == null || v > max) {\n            max = v;\n        }\n        if (templateHist) {\n            pushDateHist(templateHist, v, 1);\n            return;\n        }\n        var key = v.getFullYear() * 10000 + v.getMonth() * 100 + v.getDate();\n        if (byDay.has(key)) {\n            byDay.get(key).count++;\n        }\n        else {\n            byDay.set(key, { count: 1, x: v });\n        }\n    };\n    var build = function () {\n        if (templateHist) {\n            return {\n                min: min,\n                max: max,\n                missing: missing,\n                count: count,\n                maxBin: templateHist.reduce(function (acc, h) { return Math.max(acc, h.count); }, 0),\n                hist: templateHist,\n                histGranularity: template.histGranularity,\n            };\n        }\n        // copy template else derive\n        var _a = computeGranularity(min, max), histGranularity = _a.histGranularity, hist = _a.hist;\n        byDay.forEach(function (v) { return pushDateHist(hist, v.x, v.count); });\n        return {\n            min: min,\n            max: max,\n            missing: missing,\n            count: count,\n            maxBin: hist.reduce(function (acc, h) { return Math.max(acc, h.count); }, 0),\n            hist: hist,\n            histGranularity: histGranularity,\n        };\n    };\n    return { push: push, build: build, pushAll: pushAll(push) };\n}\n/**\n * computes a categorical histogram\n * @param arr the data array\n * @param categories the list of known categories\n * @returns {{hist: {cat: string, y: number}[]}}\n * @internal\n */\nexport function categoricalStatsBuilder(categories) {\n    var m = new Map();\n    categories.forEach(function (cat) { return m.set(cat.name, { cat: cat.name, count: 0 }); });\n    var missing = 0;\n    var count = 0;\n    var push = function (v) {\n        count += 1;\n        if (v == null) {\n            missing += 1;\n        }\n        else {\n            var entry = m.get(v.name);\n            if (entry) {\n                entry.count++;\n            }\n            else {\n                m.set(v.name, { cat: v.name, count: 1 });\n            }\n        }\n    };\n    var build = function () {\n        var entries = categories.map(function (d) { return m.get(d.name); });\n        var maxBin = entries.reduce(function (a, b) { return Math.max(a, b.count); }, Number.NEGATIVE_INFINITY);\n        return {\n            maxBin: maxBin,\n            hist: entries,\n            count: count,\n            missing: missing,\n        };\n    };\n    return { push: push, build: build, pushAll: pushAll(push) };\n}\n/**\n * computes a string statistics\n * @internal\n */\nexport function stringStatsBuilder(topN) {\n    var missing = 0;\n    var count = 0;\n    var m = new Map();\n    if (Array.isArray(topN)) {\n        for (var _i = 0, topN_1 = topN; _i < topN_1.length; _i++) {\n            var t = topN_1[_i];\n            m.set(t, { value: t, count: 0 });\n        }\n    }\n    var push = function (v) {\n        count += 1;\n        if (v == null) {\n            missing += 1;\n        }\n        else {\n            var entry = m.get(v);\n            if (entry) {\n                entry.count++;\n            }\n            else {\n                m.set(v, { value: v, count: 1 });\n            }\n        }\n    };\n    var build = function () {\n        var byFrequency = Array.isArray(topN)\n            ? topN.map(function (d) { return m.get(d); })\n            : Array.from(m.values()).sort(function (a, b) {\n                if (a.count === b.count) {\n                    return a.value.localeCompare(b.value);\n                }\n                return b.count - a.count;\n            });\n        return {\n            count: count,\n            missing: missing,\n            topN: byFrequency.slice(0, Math.min(byFrequency.length, Array.isArray(topN) ? topN.length : topN)),\n            unique: m.size,\n        };\n    };\n    return { push: push, build: build, pushAll: pushAll(push) };\n}\n/**\n * round to the given commas similar to d3.round\n * @param {number} v\n * @param {number} precision\n * @returns {number}\n * @internal\n */\nexport function round(v, precision) {\n    if (precision === void 0) { precision = 0; }\n    if (precision === 0) {\n        return Math.round(v);\n    }\n    var scale = Math.pow(10, precision);\n    return Math.round(v * scale) / scale;\n}\n/**\n * compares two number whether they are similar up to delta\n * @param {number} a first number\n * @param {number} b second number\n * @param {number} delta\n * @returns {boolean} a and b are similar\n * @internal\n */\nexport function similar(a, b, delta) {\n    if (delta === void 0) { delta = 0.5; }\n    if (a === b) {\n        return true;\n    }\n    return Math.abs(a - b) < delta;\n}\n/**\n * @internal\n */\nexport function isPromiseLike(value) {\n    return value instanceof Promise || typeof value.then === 'function';\n}\n/**\n * @internal\n */\nexport function createIndexArray(length, dataSize) {\n    if (dataSize === void 0) { dataSize = length; }\n    if (dataSize <= 255) {\n        return new Uint8Array(length);\n    }\n    if (dataSize <= 65535) {\n        return new Uint16Array(length);\n    }\n    return new Uint32Array(length);\n}\n/**\n * @internal\n */\nexport function toIndexArray(arr, maxDataIndex) {\n    if (arr instanceof Uint8Array || arr instanceof Uint16Array || arr instanceof Uint32Array) {\n        return arr.slice();\n    }\n    var l = maxDataIndex != null ? maxDataIndex : arr.length;\n    if (l <= 255) {\n        return Uint8Array.from(arr);\n    }\n    if (l <= 65535) {\n        return Uint16Array.from(arr);\n    }\n    return Uint32Array.from(arr);\n}\nfunction createLike(template, total, maxDataIndex) {\n    if (template instanceof Uint8Array) {\n        return new Uint8Array(total);\n    }\n    if (template instanceof Uint16Array) {\n        return new Uint16Array(total);\n    }\n    if (template instanceof Uint32Array) {\n        return new Uint32Array(total);\n    }\n    return createIndexArray(total, maxDataIndex);\n}\n/**\n * @internal\n */\nexport function joinIndexArrays(groups, maxDataIndex) {\n    switch (groups.length) {\n        case 0:\n            return [];\n        case 1:\n            return groups[0];\n        default:\n            var total = groups.reduce(function (a, b) { return a + b.length; }, 0);\n            var r = createLike(groups[0], total, maxDataIndex);\n            var shift = 0;\n            for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\n                var g = groups_1[_i];\n                r.set(g, shift);\n                shift += g.length;\n            }\n            return r;\n    }\n}\nfunction asc(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\nfunction desc(a, b) {\n    return a < b ? 1 : a > b ? -1 : 0;\n}\n/**\n * sort the given index array based on the lookup array\n * @internal\n */\nexport function sortComplex(indices, comparators) {\n    if (indices.length < 2) {\n        return indices;\n    }\n    switch (comparators.length) {\n        case 0:\n            // sort by indices\n            return indices.sort();\n        case 1:\n            var c_1 = comparators[0].asc ? asc : desc;\n            var cLookup_1 = comparators[0].lookup;\n            return indices.sort(function (a, b) {\n                var r = c_1(cLookup_1[a], cLookup_1[b]);\n                return r !== 0 ? r : a - b;\n            });\n        case 2:\n            var c1_1 = comparators[0].asc ? asc : desc;\n            var c1Lookup_1 = comparators[0].lookup;\n            var c2_1 = comparators[1].asc ? asc : desc;\n            var c2Lookup_1 = comparators[1].lookup;\n            return indices.sort(function (a, b) {\n                var r = c1_1(c1Lookup_1[a], c1Lookup_1[b]);\n                r = r !== 0 ? r : c2_1(c2Lookup_1[a], c2Lookup_1[b]);\n                return r !== 0 ? r : a - b;\n            });\n        default:\n            var l_1 = comparators.length;\n            var fs_1 = comparators.map(function (d) { return (d.asc ? asc : desc); });\n            return indices.sort(function (a, b) {\n                for (var i = 0; i < l_1; ++i) {\n                    var l_2 = comparators[i].lookup;\n                    var r = fs_1[i](l_2[a], l_2[b]);\n                    if (r !== 0) {\n                        return r;\n                    }\n                }\n                return a - b;\n            });\n    }\n}\n/**\n * helper to build a value cache for dates, use dateValueCache2Value to convert back\n * @internal\n */\nexport function dateValueCacheBuilder(length) {\n    var vs = new Float64Array(length);\n    var i = 0;\n    return {\n        push: function (d) { return (vs[i++] = d == null ? NaN : d.getTime()); },\n        cache: vs,\n    };\n}\n/**\n * @internal\n */\nexport function dateValueCache2Value(v) {\n    return Number.isNaN(v) ? null : new Date(v);\n}\n/**\n * @internal\n */\nexport function categoricalValueCacheBuilder(length, categories) {\n    var vs = createIndexArray(length, categories.length + 1);\n    var name2index = new Map();\n    for (var i_1 = 0; i_1 < categories.length; ++i_1) {\n        name2index.set(categories[i_1].name, i_1 + 1); // shift by one for missing = 0\n    }\n    var i = 0;\n    return {\n        push: function (d) { return (vs[i++] = d == null ? 0 : name2index.get(d.name) || 0); },\n        cache: vs,\n    };\n}\n/**\n * @internal\n */\nexport function categoricalValueCache2Value(v, categories) {\n    return v === 0 ? null : categories[v - 1];\n}\nfunction sortWorkerMain() {\n    // eslint-disable-next-line no-restricted-globals\n    var workerSelf = self;\n    // stored refs to avoid duplicate copy\n    var refs = new Map();\n    var sort = function (r) {\n        if (r.sortOrders) {\n            sortComplex(r.indices, r.sortOrders);\n        }\n        var order = r.indices;\n        workerSelf.postMessage({\n            type: r.type,\n            uid: r.uid,\n            ref: r.ref,\n            order: order,\n        }, [r.indices.buffer]);\n    };\n    var setRef = function (r) {\n        if (r.data) {\n            refs.set(r.ref, r.data);\n        }\n        else {\n            refs.delete(r.ref);\n        }\n    };\n    var deleteRef = function (r) {\n        if (!r.startsWith) {\n            refs.delete(r.ref);\n            return;\n        }\n        for (var _i = 0, _a = Array.from(refs.keys()); _i < _a.length; _i++) {\n            var key = _a[_i];\n            if (key.startsWith(r.ref)) {\n                refs.delete(key);\n            }\n        }\n    };\n    var resolveRefs = function (r) {\n        // resolve refs or save the new data\n        var data = r.data ? r.data : refs.get(r.refData);\n        var indices = r.indices ? r.indices : r.refIndices ? refs.get(r.refIndices) : undefined;\n        if (r.refData) {\n            refs.set(r.refData, data);\n        }\n        if (r.refIndices) {\n            refs.set(r.refIndices, indices);\n        }\n        return { data: data, indices: indices };\n    };\n    var dateStats = function (r) {\n        var _a = resolveRefs(r), data = _a.data, indices = _a.indices;\n        var b = dateStatsBuilder(r.template);\n        if (indices) {\n            for (var ii = 0; ii < indices.length; ++ii) {\n                var v = data[indices[ii]];\n                b.push(dateValueCache2Value(v));\n            }\n        }\n        else {\n            for (var i = 0; i < data.length; ++i) {\n                b.push(dateValueCache2Value(data[i]));\n            }\n        }\n        workerSelf.postMessage({\n            type: r.type,\n            uid: r.uid,\n            stats: b.build(),\n        });\n    };\n    var categoricalStats = function (r) {\n        var _a = resolveRefs(r), data = _a.data, indices = _a.indices;\n        var cats = r.categories.map(function (name) { return ({ name: name }); });\n        var b = categoricalStatsBuilder(cats);\n        if (indices) {\n            for (var ii = 0; ii < indices.length; ++ii) {\n                b.push(categoricalValueCache2Value(data[indices[ii]], cats));\n            }\n        }\n        else {\n            for (var i = 0; i < data.length; ++i) {\n                b.push(categoricalValueCache2Value(data[i], cats));\n            }\n        }\n        workerSelf.postMessage({\n            type: r.type,\n            uid: r.uid,\n            stats: b.build(),\n        });\n    };\n    var stringStats = function (r) {\n        var _a;\n        var _b = resolveRefs(r), data = _b.data, indices = _b.indices;\n        var b = stringStatsBuilder((_a = r.topN) !== null && _a !== void 0 ? _a : 10);\n        if (indices) {\n            for (var ii = 0; ii < indices.length; ++ii) {\n                b.push(data[indices[ii]]);\n            }\n        }\n        else {\n            for (var i = 0; i < data.length; ++i) {\n                b.push(data[i]);\n            }\n        }\n        workerSelf.postMessage({\n            type: r.type,\n            uid: r.uid,\n            stats: b.build(),\n        });\n    };\n    var numberStats = function (r) {\n        var _a;\n        var _b = resolveRefs(r), data = _b.data, indices = _b.indices;\n        var b = numberStatsBuilder((_a = r.domain) !== null && _a !== void 0 ? _a : [0, 1], r.numberOfBins);\n        if (indices) {\n            for (var ii = 0; ii < indices.length; ++ii) {\n                b.push(data[indices[ii]]);\n            }\n        }\n        else {\n            for (var i = 0; i < data.length; ++i) {\n                b.push(data[i]);\n            }\n        }\n        workerSelf.postMessage({\n            type: r.type,\n            uid: r.uid,\n            stats: b.build(),\n        });\n    };\n    var boxplotStats = function (r) {\n        var _a = resolveRefs(r), data = _a.data, indices = _a.indices;\n        var b = boxplotBuilder(indices ? indices.length : undefined);\n        var stats;\n        if (!indices) {\n            stats = b.buildArr(data);\n        }\n        else {\n            for (var ii = 0; ii < indices.length; ++ii) {\n                b.push(data[indices[ii]]);\n            }\n            stats = b.build();\n        }\n        workerSelf.postMessage({\n            type: r.type,\n            uid: r.uid,\n            stats: stats,\n        });\n    };\n    // message type to handler function\n    var msgHandlers = {\n        sort: sort,\n        setRef: setRef,\n        deleteRef: deleteRef,\n        dateStats: dateStats,\n        categoricalStats: categoricalStats,\n        numberStats: numberStats,\n        boxplotStats: boxplotStats,\n        stringStats: stringStats,\n    };\n    workerSelf.addEventListener('message', function (evt) {\n        var r = evt.data;\n        if (typeof r.uid !== 'number' || typeof r.type !== 'string') {\n            return;\n        }\n        var h = msgHandlers[r.type];\n        if (h) {\n            h(r);\n        }\n    });\n}\n/**\n * copy source code of a worker and create a blob out of it\n * to avoid webpack imports all the code functions need to be in this file\n * @internal\n */\nexport function createWorkerBlob() {\n    return createWorkerCodeBlob([\n        pushAll.toString(),\n        quantile.toString(),\n        numberStatsBuilder.toString(),\n        boxplotBuilder.toString(),\n        computeGranularity.toString(),\n        pushDateHist.toString(),\n        dateStatsBuilder.toString(),\n        categoricalStatsBuilder.toString(),\n        stringStatsBuilder.toString(),\n        createIndexArray.toString(),\n        asc.toString(),\n        desc.toString(),\n        sortComplex.toString(),\n        dateValueCache2Value.toString(),\n        categoricalValueCache2Value.toString(),\n        toFunctionBody(sortWorkerMain),\n    ]);\n}\n//# sourceMappingURL=math.js.map","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { dispatch } from 'd3-dispatch';\n/**\n * helper function to suffix the given event types\n * @internal\n */\nexport function suffix(suffix) {\n    var prefix = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        prefix[_i - 1] = arguments[_i];\n    }\n    return prefix.map(function (p) { return \"\".concat(p).concat(suffix); });\n}\nvar __DEBUG = false;\n/**\n * base class for event dispatching using d3 event mechanism, thus .suffix is supported for multiple registrations\n */\nvar AEventDispatcher = /** @class */ (function () {\n    function AEventDispatcher() {\n        var events = this.createEventList();\n        this.listenerEvents = new Set(events);\n        this.listeners = dispatch.apply(void 0, events);\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var that = this;\n        this.forwarder = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            that.fireImpl.apply(that, __spreadArray([this.type, this.primaryType, this.origin], args, false));\n        };\n    }\n    AEventDispatcher.prototype.on = function (type, listener) {\n        var _this = this;\n        if (Array.isArray(type)) {\n            type.forEach(function (d) {\n                if (_this.listenerEvents.has(d.split('.')[0])) {\n                    _this.listenersChanged(d, Boolean(listener));\n                    _this.listeners.on(d, listener);\n                }\n                else if (__DEBUG && !d.includes('.')) {\n                    console.warn(_this, 'invalid event type', d);\n                }\n            });\n        }\n        else if (this.listenerEvents.has(type.split('.')[0])) {\n            this.listenersChanged(type, Boolean(listener));\n            this.listeners.on(type, listener);\n        }\n        else if (__DEBUG && !type.includes('.')) {\n            console.warn(this, 'invalid event type', type);\n        }\n        return this;\n    };\n    /**\n     * helper function that will be called upon a listener has changed\n     * @param _type event type\n     * @param _active registered or de registered\n     */\n    AEventDispatcher.prototype.listenersChanged = function (_type, _active) {\n        // hook\n    };\n    /**\n     * return the list of events to be able to dispatch\n     * @return {Array} by default no events\n     */\n    AEventDispatcher.prototype.createEventList = function () {\n        return [];\n    };\n    AEventDispatcher.prototype.fire = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var primaryType = Array.isArray(type) ? type[0] : type;\n        this.fireImpl.apply(this, __spreadArray([type, primaryType, this], args, false));\n    };\n    AEventDispatcher.prototype.fireImpl = function (type, primaryType, origin) {\n        var _this = this;\n        var args = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            args[_i - 3] = arguments[_i];\n        }\n        var fireImpl = function (t) {\n            if (!_this.listenerEvents.has(t)) {\n                if (__DEBUG) {\n                    console.warn(_this, 'invalid event type', t);\n                }\n                return;\n            }\n            //local context per event, set a this argument\n            var context = {\n                source: _this,\n                origin: origin,\n                type: t,\n                primaryType: primaryType,\n                args: args,\n            };\n            _this.listeners.apply(t, context, args);\n        };\n        if (Array.isArray(type)) {\n            type.forEach(fireImpl);\n        }\n        else {\n            fireImpl(type);\n        }\n    };\n    /**\n     * forwards one or more events from a given dispatcher to the current one\n     * i.e. when one of the given events is fired in 'from' it will be forwarded to all my listeners\n     * @param {IEventHandler} from the event dispatcher to forward from\n     * @param {string[]} types the event types to forward\n     */\n    AEventDispatcher.prototype.forward = function (from) {\n        var types = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            types[_i - 1] = arguments[_i];\n        }\n        from.on(types, this.forwarder);\n    };\n    /**\n     * removes the forwarding declarations\n     * @param {IEventHandler} from the originated dispatcher\n     * @param {string[]} types event types to forward\n     */\n    AEventDispatcher.prototype.unforward = function (from) {\n        var types = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            types[_i - 1] = arguments[_i];\n        }\n        from.on(types, null);\n    };\n    return AEventDispatcher;\n}());\nexport default AEventDispatcher;\n//# sourceMappingURL=AEventDispatcher.js.map","import 'reflect-metadata';\nvar supportType = Symbol.for('SupportType');\nvar category = Symbol.for('Category');\nexport function SupportType() {\n    return Reflect.metadata(supportType, true);\n}\nexport function SortByDefault(order) {\n    if (order === void 0) { order = 'ascending'; }\n    if (order === 'descending') {\n        return Reflect.metadata(Symbol.for('sortDescendingByDefault'), true);\n    }\n    return function (d) { return d; };\n}\nexport function isSortingAscByDefault(col) {\n    var clazz = col.constructor;\n    return !Reflect.hasMetadata(Symbol.for('sortDescendingByDefault'), clazz);\n}\nvar Categories = /** @class */ (function () {\n    function Categories() {\n        this.string = { label: 'label', order: 1, name: 'string', featureLevel: 'basic' };\n        this.categorical = { label: 'categorical', order: 2, name: 'categorical', featureLevel: 'basic' };\n        this.number = { label: 'numerical', order: 3, name: 'number', featureLevel: 'basic' };\n        this.date = { label: 'date', order: 4, name: 'date', featureLevel: 'basic' };\n        this.array = { label: 'matrix', order: 5, name: 'array', featureLevel: 'advanced' };\n        this.map = { label: 'map', order: 6, name: 'map', featureLevel: 'advanced' };\n        this.composite = { label: 'combined', order: 7, name: 'composite', featureLevel: 'advanced' };\n        this.support = { label: 'support', order: 8, name: 'support', featureLevel: 'advanced' };\n        this.other = { label: 'others', order: 9, name: 'other', featureLevel: 'advanced' };\n    }\n    return Categories;\n}());\nexport { Categories };\nexport var categories = new Categories();\nexport function Category(cat) {\n    return Reflect.metadata(category, cat);\n}\nexport function getSortType(col) {\n    var cat = categoryOf(col);\n    var type = col.desc.type;\n    if (cat === categories.string || cat === categories.categorical) {\n        return 'abc';\n    }\n    if (cat === categories.number || type === 'rank' || isSortingAscByDefault(col)) {\n        return 'num';\n    }\n    var numbers = new Set(['rank', 'number', 'numbers', 'ordinal', 'boxplot', 'script', 'reduce', 'stack']);\n    return numbers.has(type) ? 'num' : undefined;\n}\nexport function toolbar() {\n    var keys = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        keys[_i] = arguments[_i];\n    }\n    return Reflect.metadata(Symbol.for('toolbarIcon'), keys);\n}\nexport function dialogAddons(key) {\n    var keys = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        keys[_i - 1] = arguments[_i];\n    }\n    return Reflect.metadata(Symbol.for(\"toolbarDialogAddon\".concat(key)), keys);\n}\nexport function isSupportType(col) {\n    var clazz = col.constructor;\n    return Reflect.hasMetadata(supportType, clazz);\n}\nexport function categoryOf(col) {\n    var _a, _b;\n    var cat = ((_a = Reflect.getMetadata(category, typeof col === 'function' ? col : Object.getPrototypeOf(col).constructor)) !== null && _a !== void 0 ? _a : 'other');\n    return ((_b = categories[cat]) !== null && _b !== void 0 ? _b : categories.other);\n}\nexport function categoryOfDesc(col, models) {\n    var type = typeof col === 'string' ? col : col.type;\n    var clazz = models[type];\n    return clazz ? categoryOf(clazz) : categories.other;\n}\n//# sourceMappingURL=annotations.js.map","export var defaultGroup = {\n    name: 'Default',\n    color: 'gray',\n};\nexport var othersGroup = {\n    name: 'Others',\n    color: 'gray',\n};\nexport function isGroup(item) {\n    return item && item.group == null; // use .group as separator\n}\nexport var ECompareValueType;\n(function (ECompareValueType) {\n    ECompareValueType[ECompareValueType[\"BINARY\"] = 0] = \"BINARY\";\n    ECompareValueType[ECompareValueType[\"COUNT\"] = 1] = \"COUNT\";\n    ECompareValueType[ECompareValueType[\"UINT8\"] = 2] = \"UINT8\";\n    ECompareValueType[ECompareValueType[\"UINT16\"] = 3] = \"UINT16\";\n    ECompareValueType[ECompareValueType[\"UINT32\"] = 4] = \"UINT32\";\n    ECompareValueType[ECompareValueType[\"INT8\"] = 5] = \"INT8\";\n    ECompareValueType[ECompareValueType[\"INT16\"] = 6] = \"INT16\";\n    ECompareValueType[ECompareValueType[\"INT32\"] = 7] = \"INT32\";\n    ECompareValueType[ECompareValueType[\"FLOAT\"] = 8] = \"FLOAT\";\n    ECompareValueType[ECompareValueType[\"FLOAT_ASC\"] = 9] = \"FLOAT_ASC\";\n    ECompareValueType[ECompareValueType[\"DOUBLE\"] = 10] = \"DOUBLE\";\n    ECompareValueType[ECompareValueType[\"DOUBLE_ASC\"] = 11] = \"DOUBLE_ASC\";\n    ECompareValueType[ECompareValueType[\"STRING\"] = 12] = \"STRING\";\n})(ECompareValueType || (ECompareValueType = {}));\nexport function isMultiLevelColumn(col) {\n    return typeof col.getCollapsed === 'function';\n}\n//# sourceMappingURL=interfaces.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { AEventDispatcher, similar, fixCSS } from '../internal';\nimport { isSortingAscByDefault } from './annotations';\nimport { defaultGroup, ECompareValueType, } from './interfaces';\n/**\n * default color that should be used\n * @type {string}\n */\nexport var DEFAULT_COLOR = '#C1C1C1';\n/**\n * a column in LineUp\n */\nvar Column = /** @class */ (function (_super) {\n    __extends(Column, _super);\n    function Column(id, desc) {\n        var _this = _super.call(this) || this;\n        _this.desc = desc;\n        /**\n         * width of the column\n         * @type {number}\n         * @private\n         */\n        _this.width = 100;\n        /**\n         * parent column of this column, set when added to a ranking or combined column\n         */\n        _this.parent = null;\n        _this.uid = fixCSS(id);\n        _this.renderer = _this.desc.renderer || _this.desc.type;\n        _this.groupRenderer = _this.desc.groupRenderer || _this.desc.type;\n        _this.summaryRenderer = _this.desc.summaryRenderer || _this.desc.type;\n        _this.width = _this.desc.width != null && _this.desc.width > 0 ? _this.desc.width : 100;\n        _this.visible = _this.desc.visible !== false;\n        _this.metadata = {\n            label: desc.label || _this.id,\n            summary: desc.summary || '',\n            description: desc.description || '',\n        };\n        return _this;\n    }\n    Object.defineProperty(Column.prototype, \"fixed\", {\n        get: function () {\n            return Boolean(this.desc.fixed);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Column.prototype, \"frozen\", {\n        get: function () {\n            return Boolean(this.desc.frozen);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Column.prototype, \"id\", {\n        get: function () {\n            return this.uid;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Column.prototype.assignNewId = function (idGenerator) {\n        this.uid = fixCSS(idGenerator());\n    };\n    Object.defineProperty(Column.prototype, \"label\", {\n        get: function () {\n            return this.metadata.label;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Column.prototype, \"description\", {\n        get: function () {\n            return this.metadata.description;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Column.prototype, \"fqid\", {\n        /**\n         * returns the fully qualified id i.e. path the parent\n         * @returns {string}\n         */\n        get: function () {\n            return this.parent ? \"\".concat(this.parent.fqid, \"_\").concat(this.id) : this.id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Column.prototype, \"fqpath\", {\n        get: function () {\n            return this.parent ? \"\".concat(this.parent.fqpath, \"@\").concat(this.parent.indexOf(this)) : '';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Column.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([\n            Column.EVENT_WIDTH_CHANGED,\n            Column.EVENT_LABEL_CHANGED,\n            Column.EVENT_METADATA_CHANGED,\n            Column.EVENT_VISIBILITY_CHANGED,\n            Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED,\n            Column.EVENT_RENDERER_TYPE_CHANGED,\n            Column.EVENT_GROUP_RENDERER_TYPE_CHANGED,\n            Column.EVENT_DIRTY,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n        ]);\n    };\n    Column.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    Column.prototype.getWidth = function () {\n        return this.width;\n    };\n    Column.prototype.hide = function () {\n        this.setVisible(false);\n    };\n    Column.prototype.show = function () {\n        this.setVisible(true);\n    };\n    Column.prototype.isVisible = function () {\n        return this.visible;\n    };\n    Column.prototype.getVisible = function () {\n        return this.isVisible();\n    };\n    Column.prototype.setVisible = function (value) {\n        if (this.visible === value) {\n            return;\n        }\n        this.fire([Column.EVENT_VISIBILITY_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.visible, (this.visible = value));\n    };\n    /**\n     * visitor pattern for flattening the columns\n     * @param {IFlatColumn} r the result array\n     * @param {number} offset left offset\n     * @param {number} _levelsToGo how many levels down\n     * @param {number} _padding padding between columns\n     * @returns {number} the used width by this column\n     */\n    Column.prototype.flatten = function (r, offset, _levelsToGo, _padding) {\n        if (_levelsToGo === void 0) { _levelsToGo = 0; }\n        if (_padding === void 0) { _padding = 0; }\n        var w = this.getWidth();\n        r.push({ col: this, offset: offset, width: w });\n        return w;\n    };\n    Column.prototype.setWidth = function (value) {\n        if (similar(this.width, value, 0.5)) {\n            return;\n        }\n        this.fire([Column.EVENT_WIDTH_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.width, (this.width = value));\n    };\n    Column.prototype.setWidthImpl = function (value) {\n        this.width = value;\n    };\n    Column.prototype.setMetaData = function (value) {\n        if (value.label === this.label &&\n            this.description === value.description &&\n            this.metadata.summary === value.summary) {\n            return;\n        }\n        var bak = this.getMetaData();\n        //copy to avoid reference\n        this.metadata = {\n            label: value.label,\n            summary: value.summary,\n            description: value.description,\n        };\n        this.fire([Column.EVENT_LABEL_CHANGED, Column.EVENT_METADATA_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], bak, this.getMetaData());\n    };\n    Column.prototype.getMetaData = function () {\n        return Object.assign({}, this.metadata);\n    };\n    /**\n     * triggers that the ranking is sorted by this column\n     * @param ascending ascending order?\n     * @param priority sorting priority\n     * @returns {boolean} was successful\n     */\n    Column.prototype.sortByMe = function (ascending, priority) {\n        if (ascending === void 0) { ascending = isSortingAscByDefault(this); }\n        if (priority === void 0) { priority = 0; }\n        var r = this.findMyRanker();\n        if (r) {\n            return r.sortBy(this, ascending, priority);\n        }\n        return false;\n    };\n    Column.prototype.groupByMe = function () {\n        var r = this.findMyRanker();\n        if (r) {\n            return r.toggleGrouping(this);\n        }\n        return false;\n    };\n    /**\n     *\n     * @return {number}\n     */\n    Column.prototype.isGroupedBy = function () {\n        var r = this.findMyRanker();\n        if (!r) {\n            return -1;\n        }\n        return r.getGroupCriteria().indexOf(this);\n    };\n    /**\n     * toggles the sorting order of this column in the ranking\n     * @returns {boolean} was successful\n     */\n    Column.prototype.toggleMySorting = function () {\n        var r = this.findMyRanker();\n        if (r) {\n            return r.toggleSorting(this);\n        }\n        return false;\n    };\n    Column.prototype.isSortedByMeImpl = function (selector) {\n        var _this = this;\n        var ranker = this.findMyRanker();\n        if (!ranker) {\n            return { asc: undefined, priority: undefined };\n        }\n        var criterias = selector(ranker);\n        var index = criterias.findIndex(function (c) { return c.col === _this; });\n        if (index < 0) {\n            return { asc: undefined, priority: undefined };\n        }\n        return {\n            asc: criterias[index].asc ? 'asc' : 'desc',\n            priority: index,\n        };\n    };\n    Column.prototype.isSortedByMe = function () {\n        return this.isSortedByMeImpl(function (r) { return r.getSortCriteria(); });\n    };\n    Column.prototype.groupSortByMe = function (ascending, priority) {\n        if (ascending === void 0) { ascending = isSortingAscByDefault(this); }\n        if (priority === void 0) { priority = 0; }\n        var r = this.findMyRanker();\n        if (r) {\n            return r.groupSortBy(this, ascending, priority);\n        }\n        return false;\n    };\n    Column.prototype.toggleMyGroupSorting = function () {\n        var r = this.findMyRanker();\n        if (r) {\n            return r.toggleGroupSorting(this);\n        }\n        return false;\n    };\n    Column.prototype.isGroupSortedByMe = function () {\n        return this.isSortedByMeImpl(function (r) { return r.getGroupSortCriteria(); });\n    };\n    /**\n     * removes the column from the ranking\n     * @returns {boolean} was successful\n     */\n    Column.prototype.removeMe = function () {\n        if (this.fixed) {\n            return false;\n        }\n        if (this.parent) {\n            return this.parent.remove(this);\n        }\n        return false;\n    };\n    /**\n     * called when the columns added to a ranking\n     */\n    Column.prototype.attach = function (parent) {\n        this.parent = parent;\n    };\n    /**\n     * called when the column is removed from the ranking\n     */\n    Column.prototype.detach = function () {\n        this.parent = null;\n    };\n    /**\n     * inserts the given column after itself\n     * @param col the column to insert\n     * @returns {boolean} was successful\n     */\n    Column.prototype.insertAfterMe = function (col) {\n        if (this.parent) {\n            return this.parent.insertAfter(col, this) != null;\n        }\n        return false;\n    };\n    /**\n     * inserts the given column before itself\n     * @param col the column to insert\n     * @returns {boolean} was successful\n     */\n    Column.prototype.insertBeforeMe = function (col) {\n        if (this.parent) {\n            return this.parent.insertBefore(col, this) != null;\n        }\n        return false;\n    };\n    /**\n     * returns the next sibling\n     * @returns {Column | null}\n     */\n    Column.prototype.nextSibling = function () {\n        var _a;\n        if (this.parent) {\n            var index = this.parent.indexOf(this);\n            return index < 0 ? null : (_a = this.parent.at(index + 1)) !== null && _a !== void 0 ? _a : null;\n        }\n        return null;\n    };\n    /**\n     * returns the previous sibling\n     * @returns {Column | null}\n     */\n    Column.prototype.previousSibling = function () {\n        var _a;\n        if (this.parent) {\n            var index = this.parent.indexOf(this);\n            return index < 1 ? null : (_a = this.parent.at(index - 1)) !== null && _a !== void 0 ? _a : null;\n        }\n        return null;\n    };\n    /**\n     * finds the underlying ranking column\n     * @returns {Ranking|null} my current ranking\n     */\n    Column.prototype.findMyRanker = function () {\n        if (this.parent) {\n            return this.parent.findMyRanker();\n        }\n        return null;\n    };\n    /**\n     * dumps this column to JSON compatible format\n     * @param toDescRef helper mapping function\n     * @returns {any} dump of this column\n     */\n    Column.prototype.dump = function (toDescRef) {\n        var r = {\n            id: this.id,\n            desc: toDescRef(this.desc),\n            width: this.width,\n        };\n        if (this.label !== (this.desc.label || this.id)) {\n            r.label = this.label;\n        }\n        if (this.metadata.summary) {\n            r.summary = this.metadata.summary;\n        }\n        if (this.getRenderer() !== this.desc.type) {\n            r.renderer = this.getRenderer();\n        }\n        if (this.getGroupRenderer() !== this.desc.type) {\n            r.groupRenderer = this.getGroupRenderer();\n        }\n        if (this.getSummaryRenderer() !== this.desc.type) {\n            r.summaryRenderer = this.getSummaryRenderer();\n        }\n        return r;\n    };\n    /**\n     * restore the column content from a dump\n     * @param dump column dump\n     * @param _factory helper for creating columns\n     */\n    Column.prototype.restore = function (dump, _factory) {\n        this.uid = dump.id;\n        this.width = dump.width || this.width;\n        this.metadata = {\n            label: dump.label || this.label,\n            summary: dump.summary || '',\n            description: this.description,\n        };\n        if (dump.renderer || dump.rendererType) {\n            this.renderer = dump.renderer || dump.rendererType || this.renderer;\n        }\n        if (dump.groupRenderer) {\n            this.groupRenderer = dump.groupRenderer;\n        }\n        if (dump.summaryRenderer) {\n            this.summaryRenderer = dump.summaryRenderer;\n        }\n    };\n    /**\n     * return the label of a given row for the current column\n     * @param row the current row\n     * @return {string} the label of this column at the specified row\n     */\n    Column.prototype.getLabel = function (row) {\n        var v = this.getValue(row);\n        return v == null ? '' : String(v);\n    };\n    /**\n     * return the value of a given row for the current column\n     * @param _row the current row\n     * @return the value of this column at the specified row\n     */\n    Column.prototype.getValue = function (_row) {\n        return ''; //no value\n    };\n    /**\n     * returns the value to be used when exporting\n     * @param format format hint\n     */\n    Column.prototype.getExportValue = function (row, format) {\n        return format === 'text' ? this.getLabel(row) : this.getValue(row);\n    };\n    Column.prototype.getColor = function (_row) {\n        return DEFAULT_COLOR;\n    };\n    Column.prototype.toCompareValue = function (_row, _valueCache) {\n        return 0;\n    };\n    Column.prototype.toCompareValueType = function () {\n        return ECompareValueType.UINT8;\n    };\n    /**\n     * group the given row into a bin/group\n     * @param _row\n     * @return {IGroup}\n     */\n    Column.prototype.group = function (_row, _valueCache) {\n        return Object.assign({}, defaultGroup);\n    };\n    Column.prototype.toCompareGroupValue = function (_rows, group, _valueCache) {\n        return group.name.toLowerCase();\n    };\n    Column.prototype.toCompareGroupValueType = function () {\n        return ECompareValueType.STRING;\n    };\n    /**\n     * flag whether any filter is applied\n     * @return {boolean}\n     */\n    Column.prototype.isFiltered = function () {\n        return false;\n    };\n    /**\n     * clear the filter\n     * @return {boolean} whether the filtered needed to be reset\n     */\n    Column.prototype.clearFilter = function () {\n        // hook to clear the filter\n        return false;\n    };\n    /**\n     * predicate whether the current row should be included\n     * @param row\n     * @return {boolean}\n     */\n    Column.prototype.filter = function (row, _valueCache) {\n        return row != null;\n    };\n    /**\n     * determines the renderer type that should be used to render this column. By default the same type as the column itself\n     * @return {string}\n     */\n    Column.prototype.getRenderer = function () {\n        return this.renderer;\n    };\n    Column.prototype.getGroupRenderer = function () {\n        return this.groupRenderer;\n    };\n    Column.prototype.getSummaryRenderer = function () {\n        return this.summaryRenderer;\n    };\n    Column.prototype.setRenderer = function (renderer) {\n        if (renderer === this.renderer) {\n            // nothing changes\n            return;\n        }\n        this.fire([Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.renderer, (this.renderer = renderer));\n    };\n    Column.prototype.setGroupRenderer = function (renderer) {\n        if (renderer === this.groupRenderer) {\n            // nothing changes\n            return;\n        }\n        this.fire([Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.groupRenderer, (this.groupRenderer = renderer));\n    };\n    Column.prototype.setSummaryRenderer = function (renderer) {\n        if (renderer === this.summaryRenderer) {\n            // nothing changes\n            return;\n        }\n        this.fire([Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], this.summaryRenderer, (this.summaryRenderer = renderer));\n    };\n    /**\n     * marks the header, values, or both as dirty such that the values are reevaluated\n     * @param type specify in more detail what is dirty, by default whole column\n     */\n    Column.prototype.markDirty = function (type) {\n        if (type === void 0) { type = 'all'; }\n        switch (type) {\n            case 'header':\n                return this.fire([Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY]);\n            case 'values':\n                return this.fire([Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY]);\n            default:\n                return this.fire([\n                    Column.EVENT_DIRTY_HEADER,\n                    Column.EVENT_DIRTY_VALUES,\n                    Column.EVENT_DIRTY_CACHES,\n                    Column.EVENT_DIRTY,\n                ]);\n        }\n    };\n    /**\n     * magic variable for showing all columns\n     * @type {number}\n     */\n    Column.FLAT_ALL_COLUMNS = -1;\n    Column.EVENT_WIDTH_CHANGED = 'widthChanged';\n    Column.EVENT_LABEL_CHANGED = 'labelChanged';\n    Column.EVENT_METADATA_CHANGED = 'metaDataChanged';\n    Column.EVENT_DIRTY = 'dirty';\n    Column.EVENT_DIRTY_HEADER = 'dirtyHeader';\n    Column.EVENT_DIRTY_VALUES = 'dirtyValues';\n    Column.EVENT_DIRTY_CACHES = 'dirtyCaches';\n    Column.EVENT_RENDERER_TYPE_CHANGED = 'rendererTypeChanged';\n    Column.EVENT_GROUP_RENDERER_TYPE_CHANGED = 'groupRendererChanged';\n    Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED = 'summaryRendererChanged';\n    Column.EVENT_VISIBILITY_CHANGED = 'visibilityChanged';\n    return Column;\n}(AEventDispatcher));\nexport default Column;\n//# sourceMappingURL=Column.js.map","import Column from './Column';\nexport function isMapAbleColumn(col) {\n    return ((col instanceof Column && typeof col.getMapping === 'function') ||\n        (!(col instanceof Column) &&\n            isNumberColumn(col) &&\n            (col.type.startsWith('number') || col.type.startsWith('boxplot'))));\n}\nexport function isNumberColumn(col) {\n    return ((col instanceof Column && typeof col.getNumber === 'function') ||\n        (!(col instanceof Column) && col.type.match(/(number|stack|ordinal)/) != null));\n}\nexport var ESortMethod;\n(function (ESortMethod) {\n    ESortMethod[\"min\"] = \"min\";\n    ESortMethod[\"max\"] = \"max\";\n    ESortMethod[\"median\"] = \"median\";\n    ESortMethod[\"q1\"] = \"q1\";\n    ESortMethod[\"q3\"] = \"q3\";\n})(ESortMethod || (ESortMethod = {}));\nexport function isBoxPlotColumn(col) {\n    return typeof col.getBoxPlotData === 'function';\n}\nexport var EAdvancedSortMethod;\n(function (EAdvancedSortMethod) {\n    EAdvancedSortMethod[\"min\"] = \"min\";\n    EAdvancedSortMethod[\"max\"] = \"max\";\n    EAdvancedSortMethod[\"median\"] = \"median\";\n    EAdvancedSortMethod[\"q1\"] = \"q1\";\n    EAdvancedSortMethod[\"q3\"] = \"q3\";\n    EAdvancedSortMethod[\"mean\"] = \"mean\";\n})(EAdvancedSortMethod || (EAdvancedSortMethod = {}));\nexport function isNumbersColumn(col) {\n    return isBoxPlotColumn(col) && typeof col.getNumbers === 'function';\n}\n//# sourceMappingURL=INumberColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport Column from './Column';\n/**\n * a column having an accessor to get the cell value\n */\nvar ValueColumn = /** @class */ (function (_super) {\n    __extends(ValueColumn, _super);\n    function ValueColumn(id, desc) {\n        var _this = _super.call(this, id, desc) || this;\n        //find accessor\n        _this.accessor = desc.accessor || (function () { return null; });\n        _this.loaded = desc.lazyLoaded !== true;\n        return _this;\n    }\n    ValueColumn.prototype.onDataUpdate = function (_rows) {\n        // hook for listening to data updates\n    };\n    ValueColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([ValueColumn.EVENT_DATA_LOADED]);\n    };\n    ValueColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    ValueColumn.prototype.getLabel = function (row) {\n        if (!this.isLoaded()) {\n            return '';\n        }\n        var v = this.getValue(row);\n        return v == null ? '' : String(v);\n    };\n    ValueColumn.prototype.getRaw = function (row) {\n        if (!this.isLoaded()) {\n            return null;\n        }\n        return this.accessor(row, this.desc);\n    };\n    ValueColumn.prototype.getValue = function (row) {\n        return this.getRaw(row);\n    };\n    ValueColumn.prototype.isLoaded = function () {\n        return this.loaded;\n    };\n    ValueColumn.prototype.setLoaded = function (loaded) {\n        if (this.loaded === loaded) {\n            return;\n        }\n        this.fire([\n            ValueColumn.EVENT_DATA_LOADED,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY,\n        ], this.loaded, (this.loaded = loaded));\n    };\n    ValueColumn.prototype.getRenderer = function () {\n        if (!this.isLoaded()) {\n            return ValueColumn.RENDERER_LOADING;\n        }\n        return _super.prototype.getRenderer.call(this);\n    };\n    /**\n     * patch the dump such that the loaded attribute is defined (for lazy loading columns)\n     * @param toDescRef\n     * @returns {any}\n     */\n    ValueColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.loaded = this.loaded;\n        if (!this.loaded && r.renderer === ValueColumn.RENDERER_LOADING) {\n            delete r.renderer;\n        }\n        return r;\n    };\n    ValueColumn.prototype.restore = function (dump, factory) {\n        if (dump.loaded !== undefined) {\n            this.loaded = dump.loaded;\n        }\n        _super.prototype.restore.call(this, dump, factory);\n    };\n    ValueColumn.EVENT_DATA_LOADED = 'dataLoaded';\n    ValueColumn.RENDERER_LOADING = 'loading';\n    return ValueColumn;\n}(Column));\nexport default ValueColumn;\n//# sourceMappingURL=ValueColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { suffix } from '../internal';\nimport Column from './Column';\nimport { Category, toolbar } from './annotations';\nimport { isNumberColumn } from './INumberColumn';\nimport ValueColumn from './ValueColumn';\n/**\n * implementation of a combine column, standard operations how to select\n */\nvar CompositeColumn = /** @class */ (function (_super) {\n    __extends(CompositeColumn, _super);\n    function CompositeColumn() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._children = [];\n        return _this;\n    }\n    CompositeColumn_1 = CompositeColumn;\n    CompositeColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([\n            CompositeColumn_1.EVENT_FILTER_CHANGED,\n            CompositeColumn_1.EVENT_ADD_COLUMN,\n            CompositeColumn_1.EVENT_MOVE_COLUMN,\n            CompositeColumn_1.EVENT_REMOVE_COLUMN,\n        ]);\n    };\n    CompositeColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    CompositeColumn.prototype.assignNewId = function (idGenerator) {\n        _super.prototype.assignNewId.call(this, idGenerator);\n        this._children.forEach(function (c) { return c.assignNewId(idGenerator); });\n    };\n    Object.defineProperty(CompositeColumn.prototype, \"children\", {\n        get: function () {\n            return this._children.slice();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CompositeColumn.prototype, \"length\", {\n        get: function () {\n            return this._children.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CompositeColumn.prototype.flatten = function (r, offset, levelsToGo, padding) {\n        if (levelsToGo === void 0) { levelsToGo = 0; }\n        if (padding === void 0) { padding = 0; }\n        var w = 0;\n        //no more levels or just this one\n        if (levelsToGo === 0 || levelsToGo <= Column.FLAT_ALL_COLUMNS) {\n            w = this.getWidth();\n            r.push({ col: this, offset: offset, width: w });\n            if (levelsToGo === 0) {\n                return w;\n            }\n        }\n        //push children\n        this._children.forEach(function (c) {\n            if (c.isVisible() && levelsToGo <= Column.FLAT_ALL_COLUMNS) {\n                c.flatten(r, offset, levelsToGo - 1, padding);\n            }\n        });\n        return w;\n    };\n    CompositeColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.children = this._children.map(function (d) { return d.dump(toDescRef); });\n        return r;\n    };\n    CompositeColumn.prototype.restore = function (dump, factory) {\n        var _this = this;\n        dump.children.forEach(function (child) {\n            var c = factory(child);\n            if (c) {\n                _this.push(c);\n            }\n        });\n        _super.prototype.restore.call(this, dump, factory);\n    };\n    /**\n     * inserts a column at a the given position\n     * @param col\n     * @param index\n     * @returns {any}\n     */\n    CompositeColumn.prototype.insert = function (col, index) {\n        if (!isNumberColumn(col) && this.canJustAddNumbers) {\n            //indicator it is a number type\n            return null;\n        }\n        this._children.splice(index, 0, col);\n        //listen and propagate events\n        return this.insertImpl(col, index);\n    };\n    CompositeColumn.prototype.move = function (col, index) {\n        if (col.parent !== this) {\n            //not moving\n            return null;\n        }\n        var old = this._children.indexOf(col);\n        if (index === old) {\n            // no move needed\n            return col;\n        }\n        //delete first\n        this._children.splice(old, 1);\n        // adapt target index based on previous index, i.e shift by one\n        this._children.splice(old < index ? index - 1 : index, 0, col);\n        //listen and propagate events\n        return this.moveImpl(col, index, old);\n    };\n    CompositeColumn.prototype.insertImpl = function (col, index) {\n        col.attach(this);\n        this.forward.apply(this, __spreadArray([col], suffix('.combine', Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY, CompositeColumn_1.EVENT_FILTER_CHANGED, Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_GROUP_RENDERER_TYPE_CHANGED), false));\n        this.fire([\n            CompositeColumn_1.EVENT_ADD_COLUMN,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY,\n        ], col, index);\n        return col;\n    };\n    CompositeColumn.prototype.moveImpl = function (col, index, oldIndex) {\n        this.fire([\n            CompositeColumn_1.EVENT_MOVE_COLUMN,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY,\n            Column.EVENT_RENDERER_TYPE_CHANGED,\n            Column.EVENT_GROUP_RENDERER_TYPE_CHANGED,\n        ], col, index, oldIndex);\n        return col;\n    };\n    CompositeColumn.prototype.push = function (col) {\n        return this.insert(col, this._children.length);\n    };\n    CompositeColumn.prototype.at = function (index) {\n        return this._children[index];\n    };\n    CompositeColumn.prototype.indexOf = function (col) {\n        return this._children.indexOf(col);\n    };\n    CompositeColumn.prototype.insertAfter = function (col, ref) {\n        var i = this.indexOf(ref);\n        if (i < 0) {\n            return null;\n        }\n        return this.insert(col, i + 1);\n    };\n    CompositeColumn.prototype.moveAfter = function (col, ref) {\n        var i = this.indexOf(ref);\n        if (i < 0) {\n            return null;\n        }\n        return this.move(col, i + 1);\n    };\n    CompositeColumn.prototype.insertBefore = function (col, ref) {\n        var i = this.indexOf(ref);\n        if (i < 0) {\n            return null;\n        }\n        return this.insert(col, i);\n    };\n    CompositeColumn.prototype.moveBefore = function (col, ref) {\n        var i = this.indexOf(ref);\n        if (i < 0) {\n            return null;\n        }\n        return this.move(col, i);\n    };\n    CompositeColumn.prototype.remove = function (col) {\n        var i = this._children.indexOf(col);\n        if (i < 0) {\n            return false;\n        }\n        this._children.splice(i, 1); //remove and deregister listeners\n        return this.removeImpl(col, i);\n    };\n    CompositeColumn.prototype.removeImpl = function (col, index) {\n        col.detach();\n        this.unforward.apply(this, __spreadArray([col], suffix('.combine', Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY, CompositeColumn_1.EVENT_FILTER_CHANGED), false));\n        this.fire([\n            CompositeColumn_1.EVENT_REMOVE_COLUMN,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY,\n        ], col, index);\n        return true;\n    };\n    CompositeColumn.prototype.isFiltered = function () {\n        return this._children.some(function (d) { return d.isFiltered(); });\n    };\n    CompositeColumn.prototype.clearFilter = function () {\n        return this._children.map(function (d) { return d.clearFilter(); }).some(function (d) { return d; });\n    };\n    CompositeColumn.prototype.filter = function (row) {\n        return this._children.every(function (d) { return d.filter(row); });\n    };\n    CompositeColumn.prototype.isLoaded = function () {\n        return this._children.every(function (c) {\n            return !(c instanceof ValueColumn || c instanceof CompositeColumn_1) ||\n                c.isLoaded();\n        });\n    };\n    Object.defineProperty(CompositeColumn.prototype, \"canJustAddNumbers\", {\n        get: function () {\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    var CompositeColumn_1;\n    CompositeColumn.EVENT_FILTER_CHANGED = 'filterChanged';\n    CompositeColumn.EVENT_ADD_COLUMN = 'addColumn';\n    CompositeColumn.EVENT_MOVE_COLUMN = 'moveColumn';\n    CompositeColumn.EVENT_REMOVE_COLUMN = 'removeColumn';\n    CompositeColumn = CompositeColumn_1 = __decorate([\n        toolbar('compositeContained', 'splitCombined'),\n        Category('composite')\n    ], CompositeColumn);\n    return CompositeColumn;\n}(Column));\nexport default CompositeColumn;\n//# sourceMappingURL=CompositeColumn.js.map","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","import colors from \"../colors.js\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\");\n","var _a;\n/**\n * a set that preserves the insertion order\n * @internal\n */\nvar OrderedSet = /** @class */ (function () {\n    function OrderedSet(values) {\n        if (values === void 0) { values = []; }\n        this[_a] = Symbol('OrderedSet');\n        this.set = new Set();\n        this.list = [];\n        this.addAll(Array.isArray(values) ? values : Array.from(values));\n    }\n    Object.defineProperty(OrderedSet.prototype, \"size\", {\n        get: function () {\n            return this.set.size;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    OrderedSet.prototype.clear = function () {\n        this.set.clear();\n        this.list.splice(0, this.list.length);\n    };\n    OrderedSet.prototype.addAll = function (values) {\n        var _this = this;\n        values.forEach(function (v) { return _this.add(v); });\n        return this;\n    };\n    OrderedSet.prototype.add = function (value) {\n        if (this.set.has(value)) {\n            return this;\n        }\n        this.set.add(value);\n        this.list.push(value);\n        return this;\n    };\n    OrderedSet.prototype.has = function (value) {\n        return this.set.has(value);\n    };\n    OrderedSet.prototype.delete = function (value) {\n        var r = this.set.delete(value);\n        if (!r) {\n            return false;\n        }\n        var index = this.list.indexOf(value);\n        console.assert(index >= 0);\n        this.list.splice(index, 1);\n        return true;\n    };\n    OrderedSet.prototype.deleteAll = function (values) {\n        var _this = this;\n        return values.reduce(function (acc, act) { return _this.delete(act) && acc; }, true);\n    };\n    OrderedSet.prototype.forEach = function (callbackfn, thisArg) {\n        this.list.forEach(function (v) {\n            callbackfn.call(this, v, v, this);\n        }, thisArg);\n    };\n    OrderedSet.prototype[(_a = Symbol.toStringTag, Symbol.iterator)] = function () {\n        return this.list[Symbol.iterator]();\n    };\n    return OrderedSet;\n}());\nexport default OrderedSet;\n//# sourceMappingURL=OrderedSet.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { schemeCategory10, schemeSet3 } from 'd3-scale-chromatic';\nimport { OrderedSet } from '../internal';\nimport { DEFAULT_COLOR } from './Column';\nimport { defaultGroup, ECompareValueType } from './interfaces';\n/** @internal */\nexport function integrateDefaults(desc, defaults) {\n    if (defaults === void 0) { defaults = {}; }\n    Object.keys(defaults).forEach(function (key) {\n        var typed = key;\n        if (typeof desc[typed] === 'undefined') {\n            desc[typed] = defaults[typed];\n        }\n    });\n    return desc;\n}\n/** @internal */\nexport function patternFunction(pattern) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    // eslint-disable-next-line no-new-func\n    return new (Function.bind.apply(Function, __spreadArray(__spreadArray([void 0, 'value'], args, false), [\"\\n  const escapedValue = encodeURIComponent(String(value));\\n  return `\".concat(pattern, \"`;\\n \")], false)))();\n}\n/** @internal */\nexport function joinGroups(groups) {\n    if (groups.length === 0) {\n        return __assign({}, defaultGroup); //copy\n    }\n    if (groups.length === 1 && !groups[0].parent) {\n        return __assign({}, groups[0]); //copy\n    }\n    // create a chain\n    var parents = [];\n    for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\n        var group = groups_1[_i];\n        var gparents = [];\n        var g = group;\n        while (g.parent) {\n            // add all parents of this groups\n            gparents.unshift(g.parent);\n            g = g.parent;\n        }\n        parents.push.apply(parents, gparents);\n        parents.push(Object.assign({ subGroups: [] }, group));\n    }\n    parents.slice(1).forEach(function (g, i) {\n        g.parent = parents[i];\n        g.name = \"\".concat(parents[i].name, \" \\u2229 \").concat(g.name);\n        g.color = g.color !== DEFAULT_COLOR ? g.color : g.parent.color;\n        parents[i].subGroups = [g];\n    });\n    return parents[parents.length - 1];\n}\nexport function duplicateGroup(group) {\n    var clone = Object.assign({}, group);\n    delete clone.order;\n    if (isGroupParent(clone)) {\n        clone.subGroups = [];\n    }\n    if (clone.parent) {\n        clone.parent = duplicateGroup(clone.parent);\n        clone.parent.subGroups.push(clone);\n    }\n    return clone;\n}\n/** @internal */\nexport function toGroupID(group) {\n    return group.name;\n}\n/** @internal */\nexport function isOrderedGroup(g) {\n    return g.order != null;\n}\n/** @internal */\nfunction isGroupParent(g) {\n    return g.subGroups != null;\n}\n/**\n * unify the parents of the given groups by reusing the same group parent if possible\n * @param groups\n */\nexport function unifyParents(groups) {\n    if (groups.length <= 1) {\n        return groups;\n    }\n    var toPath = function (group) {\n        var path = [group];\n        var p = group.parent;\n        while (p) {\n            path.unshift(p);\n            p = p.parent;\n        }\n        return path;\n    };\n    var paths = groups.map(toPath);\n    var isSame = function (a, b) {\n        return b.name === a.name && b.parent === a.parent && isGroupParent(b) && b.subGroups.length > 0;\n    };\n    var removeDuplicates = function (level, i) {\n        var _a;\n        var real = [];\n        while (level.length > 0) {\n            var node = level.shift();\n            if (!isGroupParent(node) || node.subGroups.length === 0) {\n                // cannot share leaves\n                real.push(node);\n                continue;\n            }\n            var root = __assign({}, node);\n            real.push(root);\n            // remove duplicates that directly follow\n            while (level.length > 0 && isSame(root, level[0])) {\n                (_a = root.subGroups).push.apply(_a, level.shift().subGroups);\n            }\n            for (var _i = 0, _b = root.subGroups; _i < _b.length; _i++) {\n                var child = _b[_i];\n                child.parent = root;\n            }\n            // cleanup children duplicates\n            root.subGroups = removeDuplicates(root.subGroups, i + 1);\n        }\n        return real;\n    };\n    removeDuplicates(paths.map(function (p) { return p[0]; }), 0);\n    return groups;\n}\n/** @internal */\nexport function groupRoots(groups) {\n    var roots = new OrderedSet();\n    for (var _i = 0, groups_2 = groups; _i < groups_2.length; _i++) {\n        var group = groups_2[_i];\n        var root = group;\n        while (root.parent) {\n            root = root.parent;\n        }\n        roots.add(root);\n    }\n    return Array.from(roots);\n}\n/**\n * Traverse the tree of given groups in depth first search (DFS)\n *\n * @param groups Groups to traverse\n * @param f Function to check each group. Traversing subgroups can be stopped when returning `false`.\n *\n * @internal\n */\nexport function traverseGroupsDFS(groups, f) {\n    var traverse = function (v) {\n        if (f(v) === false) {\n            return;\n        }\n        if (isGroupParent(v)) {\n            v.subGroups.forEach(traverse);\n        }\n    };\n    var roots = groupRoots(groups);\n    roots.forEach(traverse);\n}\n// based on https://github.com/d3/d3-scale-chromatic#d3-scale-chromatic\nvar colors = schemeCategory10.concat(schemeSet3);\n/** @internal */\nexport var MAX_COLORS = colors.length;\n/** @internal */\nexport function colorPool() {\n    var act = 0;\n    return function () { return colors[act++ % colors.length]; };\n}\n/**\n * @internal\n */\nexport function mapIndices(arr, callback) {\n    var r = [];\n    for (var i = 0; i < arr.length; ++i) {\n        r.push(callback(arr[i], i));\n    }\n    return r;\n}\n/**\n * @internal\n */\nexport function everyIndices(arr, callback) {\n    for (var i = 0; i < arr.length; ++i) {\n        if (!callback(arr[i], i)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * @internal\n */\nexport function filterIndices(arr, callback) {\n    var r = [];\n    for (var i = 0; i < arr.length; ++i) {\n        if (callback(arr[i], i)) {\n            r.push(arr[i]);\n        }\n    }\n    return r;\n}\n/**\n * @internal\n */\nexport function forEachIndices(arr, callback) {\n    for (var i = 0; i < arr.length; ++i) {\n        callback(arr[i], i);\n    }\n}\n/**\n * @internal\n */\nexport function chooseUIntByDataLength(dataLength) {\n    if (dataLength == null || (typeof dataLength !== 'number' && !Number.isNaN(dataLength))) {\n        return ECompareValueType.UINT32; // worst case\n    }\n    if (dataLength <= 255) {\n        return ECompareValueType.UINT8;\n    }\n    if (dataLength <= 65535) {\n        return ECompareValueType.UINT16;\n    }\n    return ECompareValueType.UINT32;\n}\nexport function getAllToolbarActions(col) {\n    var actions = new OrderedSet();\n    // walk up the prototype chain\n    var obj = col;\n    var toolbarIcon = Symbol.for('toolbarIcon');\n    do {\n        var m = Reflect.getOwnMetadata(toolbarIcon, obj.constructor);\n        if (m) {\n            for (var _i = 0, m_1 = m; _i < m_1.length; _i++) {\n                var mi = m_1[_i];\n                actions.add(mi);\n            }\n        }\n        obj = Object.getPrototypeOf(obj);\n    } while (obj);\n    return Array.from(actions);\n}\nexport function getAllToolbarDialogAddons(col, key) {\n    var actions = new OrderedSet();\n    // walk up the prototype chain\n    var obj = col;\n    var symbol = Symbol.for(\"toolbarDialogAddon\".concat(key));\n    do {\n        var m = Reflect.getOwnMetadata(symbol, obj.constructor);\n        if (m) {\n            for (var _i = 0, m_2 = m; _i < m_2.length; _i++) {\n                var mi = m_2[_i];\n                actions.add(mi);\n            }\n        }\n        obj = Object.getPrototypeOf(obj);\n    } while (obj);\n    return Array.from(actions);\n}\n//# sourceMappingURL=internal.js.map","var styles = new Map();\n// {\n//   const r = /^[$]([\\w]+): ([\\w #.()'\\/,-]+)( !default)?;/gmi;\n//   const s = String(vars);\n//   let m: RegExpMatchArray | null = r.exec(s);\n//   while (m != null) {\n//     styles.set(m[1], m[2]);\n//     m = r.exec(s);\n//   }\n// }\n/** @internal */\nexport default function getStyle(key, defaultValue) {\n    if (defaultValue === void 0) { defaultValue = ''; }\n    if (key[0] === '$') {\n        key = key.slice(1);\n    }\n    if (styles.has(key)) {\n        return styles.get(key);\n    }\n    return defaultValue;\n}\n/** @internal */\nexport var SELECTED_COLOR = getStyle('lu_selected_color', '#ffa500');\n/** @internal */\nexport var COLUMN_PADDING = Number.parseInt(getStyle('lu_engine_grip_gap', '5px'), 10);\n/** @internal */\nexport var FILTERED_OPACITY = Number.parseFloat(getStyle('lu_filtered_opacity', '0.2'));\n/** @internal */\nexport var DASH = {\n    width: Number.parseInt(getStyle('lu_missing_dash_width', '2px'), 10),\n    height: Number.parseInt(getStyle('lu_missing_dash_height', '10px'), 10),\n    color: getStyle('lu_missing_dash_color', '#dbdbdb'),\n};\n/** @internal */\nexport var UPSET = {\n    color: getStyle('lu_renderer_upset_color'),\n    inactive: Number.parseFloat(getStyle('lu_renderer_upset_inactive_opacity', '0.1')),\n};\n/** @internal */\nexport var DOT = {\n    color: getStyle('lu_renderer_dot_color', 'gray'),\n    size: Number.parseInt(getStyle('lu_renderer_dot_size', '5px'), 10),\n    opacity: Number.parseFloat(getStyle('lu_renderer_dot_opacity', '0.5')),\n    opacitySingle: Number.parseFloat(getStyle('lu_renderer_dot_opacity', '1')),\n};\n/** @internal */\nexport var TICK = {\n    color: getStyle('lu_renderer_tick_color', 'gray'),\n    size: Number.parseInt(getStyle('lu_renderer_tick_size', '3px'), 10),\n    opacity: Number.parseFloat(getStyle('lu_renderer_tick_opacity', '1')),\n};\n/** @internal */\nexport var BOX_PLOT = {\n    box: getStyle('lu_renderer_boxplot_box', '#e0e0e0'),\n    stroke: getStyle('lu_renderer_boxplot_stroke', 'black'),\n    sort: getStyle('lu_renderer_boxplot_sort_indicator', '#ffa500'),\n    outlier: getStyle('lu_renderer_boxplot_outlier', '#e0e0e0'),\n};\n/** @internal */\nexport var AGGREGATE = {\n    width: Number.parseInt(getStyle('lu_aggregate_square_bracket_width', '4px'), 10),\n    strokeWidth: Number.parseInt(getStyle('lu_aggregate_square_bracket_stroke_width', '2px'), 10),\n    color: getStyle('lu_aggregate_square_bracket_stroke_color', '#000'),\n    levelOffset: Number.parseInt(getStyle('lu_aggregate_level_offset', '2px'), 10),\n    levelWidth: Number.parseInt(getStyle('lu_aggregate_level_width', '22px'), 10),\n};\n/** @internal */\nexport var SLOPEGRAPH_WIDTH = Number.parseInt(getStyle('lu_slope_width', '200px'), 10);\n/** @internal */\nexport var CANVAS_HEIGHT = 4;\n/** @internal */\nexport var CSS_PREFIX = getStyle('lu_css_prefix', 'lu');\n/** @internal */\nexport var ENGINE_CSS_PREFIX = 'le';\n/** @internal */\nexport var RESIZE_SPACE = Number.parseInt(getStyle('lu_engine_resize_space', '50px'), 10);\n/** @internal */\nexport var RESIZE_ANIMATION_DURATION = Number.parseInt(getStyle('lu_engine_resize_animation_duration', '1000ms'), 10);\n/** @internal */\nexport var AGGREGATION_LEVEL_WIDTH = Number.parseInt(getStyle('lu_aggregate_level_width', '22px'), 10);\n/** @internal */\nexport function cssClass(suffix) {\n    return suffix ? \"\".concat(CSS_PREFIX, \"-\").concat(suffix) : CSS_PREFIX;\n}\n/** @internal */\nexport function engineCssClass(suffix) {\n    return suffix ? \"\".concat(ENGINE_CSS_PREFIX, \"-\").concat(suffix) : ENGINE_CSS_PREFIX;\n}\n/** @internal */\nexport function aria(text) {\n    return \"<span class=\\\"\".concat(cssClass('aria'), \"\\\" aria-hidden=\\\"true\\\">\").concat(text, \"</span>\");\n}\n//# sourceMappingURL=index.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Category, SupportType, toolbar } from './annotations';\nimport Column from './Column';\nimport { integrateDefaults } from './internal';\nimport { AGGREGATION_LEVEL_WIDTH } from '../styles';\nexport var EAggregationState;\n(function (EAggregationState) {\n    EAggregationState[\"COLLAPSE\"] = \"collapse\";\n    EAggregationState[\"EXPAND\"] = \"expand\";\n    EAggregationState[\"EXPAND_TOP_N\"] = \"expand_top\";\n})(EAggregationState || (EAggregationState = {}));\n/**\n * factory for creating a description creating a rank column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createAggregateDesc(label) {\n    if (label === void 0) { label = 'Aggregate Groups'; }\n    return { type: 'aggregate', label: label, fixed: true };\n}\n/**\n * a checkbox column for selections\n */\nvar AggregateGroupColumn = /** @class */ (function (_super) {\n    __extends(AggregateGroupColumn, _super);\n    function AggregateGroupColumn(id, desc) {\n        return _super.call(this, id, integrateDefaults(desc, {\n            width: AGGREGATION_LEVEL_WIDTH * 2,\n        })) || this;\n    }\n    AggregateGroupColumn_1 = AggregateGroupColumn;\n    Object.defineProperty(AggregateGroupColumn.prototype, \"frozen\", {\n        get: function () {\n            return this.desc.frozen !== false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    AggregateGroupColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([AggregateGroupColumn_1.EVENT_AGGREGATE]);\n    };\n    AggregateGroupColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    AggregateGroupColumn.prototype.isAggregated = function (group) {\n        var ranking = this.findMyRanker();\n        if (this.desc.isAggregated) {\n            return this.desc.isAggregated(ranking, group);\n        }\n        return false;\n    };\n    AggregateGroupColumn.prototype.setAggregated = function (group, value) {\n        var n = typeof value === 'boolean' ? (value ? EAggregationState.EXPAND : EAggregationState.COLLAPSE) : value;\n        var ranking = this.findMyRanker();\n        var current = this.desc.isAggregated &&\n            this.desc.isAggregated(ranking, group);\n        if (current === n) {\n            return true;\n        }\n        if (this.desc.setAggregated) {\n            this.desc.setAggregated(ranking, group, n);\n        }\n        this.fire(AggregateGroupColumn_1.EVENT_AGGREGATE, ranking, group, n !== EAggregationState.COLLAPSE, n);\n        return false;\n    };\n    var AggregateGroupColumn_1;\n    AggregateGroupColumn.EVENT_AGGREGATE = 'aggregate';\n    AggregateGroupColumn = AggregateGroupColumn_1 = __decorate([\n        toolbar('setShowTopN', 'rename'),\n        SupportType(),\n        Category('support')\n    ], AggregateGroupColumn);\n    return AggregateGroupColumn;\n}(Column));\nexport default AggregateGroupColumn;\n//# sourceMappingURL=AggregateGroupColumn.js.map","import { DEFAULT_COLOR } from './Column';\nexport var DEFAULT_CATEGORICAL_COLOR_FUNCTION = {\n    apply: function (v) { return (v ? v.color : DEFAULT_COLOR); },\n    toJSON: function () { return null; },\n    clone: function () { return DEFAULT_CATEGORICAL_COLOR_FUNCTION; },\n    eq: function (other) { return other === DEFAULT_CATEGORICAL_COLOR_FUNCTION; },\n};\nvar ReplacementColorMappingFunction = /** @class */ (function () {\n    function ReplacementColorMappingFunction(map) {\n        this.map = new Map(Array.from(map.entries()).map(function (_a) {\n            var k = _a[0], v = _a[1];\n            return [typeof k === 'string' ? k : k.name, v];\n        }));\n    }\n    ReplacementColorMappingFunction.prototype.apply = function (v) {\n        return this.map.has(v.name) ? this.map.get(v.name) : DEFAULT_CATEGORICAL_COLOR_FUNCTION.apply(v);\n    };\n    ReplacementColorMappingFunction.prototype.toJSON = function () {\n        var r = {};\n        this.map.forEach(function (v, k) { return (r[k] = v); });\n        return {\n            type: 'replace',\n            map: r,\n        };\n    };\n    ReplacementColorMappingFunction.prototype.clone = function () {\n        return new ReplacementColorMappingFunction(new Map(this.map.entries()));\n    };\n    ReplacementColorMappingFunction.prototype.eq = function (other) {\n        var _this = this;\n        if (!(other instanceof ReplacementColorMappingFunction)) {\n            return false;\n        }\n        if (other.map.size !== this.map.size) {\n            return false;\n        }\n        return Array.from(this.map.keys()).every(function (k) { return _this.map.get(k) === other.map.get(k); });\n    };\n    ReplacementColorMappingFunction.restore = function (dump, categories) {\n        if (dump.type === 'replace') {\n            // new dump format\n            dump = dump.map;\n        }\n        var lookup = new Map(categories.map(function (d) { return [d.name, d]; }));\n        var r = new Map();\n        for (var _i = 0, _a = Object.keys(dump); _i < _a.length; _i++) {\n            var key = _a[_i];\n            if (lookup.has(key)) {\n                r.set(lookup.get(key), dump[key]);\n            }\n        }\n        return new ReplacementColorMappingFunction(r);\n    };\n    return ReplacementColorMappingFunction;\n}());\nexport { ReplacementColorMappingFunction };\n/**\n * @internal\n */\nexport function restoreCategoricalColorMapping(dump, categories) {\n    if (!dump) {\n        return DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n    }\n    return ReplacementColorMappingFunction.restore(dump, categories);\n}\n//# sourceMappingURL=CategoricalColorMappingFunction.js.map","export function isMissingValue(v) {\n    if (v == null ||\n        v === undefined ||\n        v === '' ||\n        v === 'NA' ||\n        v === 'na' ||\n        v === 'Na' ||\n        v === 'nA' ||\n        v === 'NaN' ||\n        (typeof v === 'number' && Number.isNaN(v))) {\n        return true;\n    }\n    if (!Array.isArray(v)) {\n        return false;\n    }\n    for (var _i = 0, v_1 = v; _i < v_1.length; _i++) {\n        var vi = v_1[_i];\n        if (!isMissingValue(vi)) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function isUnknown(v) {\n    return v == null || v === undefined || Number.isNaN(v);\n}\nexport var FIRST_IS_NAN = -1;\nexport var FIRST_IS_MISSING = 1;\nexport var missingGroup = {\n    name: 'Missing values',\n    color: 'gray',\n};\n//# sourceMappingURL=missing.js.map","import { isSeqEmpty, empty } from '../internal';\nimport { colorPool } from './internal';\nimport { DEFAULT_COLOR } from './Column';\nimport { FIRST_IS_MISSING } from './missing';\n/** @internal */\nexport function toCategory(cat, value, nextColor) {\n    if (nextColor === void 0) { nextColor = function () { return DEFAULT_COLOR; }; }\n    if (typeof cat === 'string') {\n        //just the category value\n        return { name: cat, label: cat, color: nextColor(), value: value };\n    }\n    var name = cat.name == null ? String(cat.value) : cat.name;\n    return {\n        name: name,\n        label: cat.label || name,\n        color: cat.color || nextColor(),\n        value: cat.value != null ? cat.value : value,\n    };\n}\n/** @internal */\nexport function toCompareCategoryValue(v) {\n    if (v == null) {\n        return NaN;\n    }\n    return v.value;\n}\nfunction findMostFrequent(rows, valueCache) {\n    var hist = new Map();\n    if (valueCache) {\n        valueCache.forEach(function (cat) {\n            hist.set(cat, (hist.get(cat) || 0) + 1);\n        });\n    }\n    else {\n        rows.forEach(function (cat) {\n            hist.set(cat, (hist.get(cat) || 0) + 1);\n        });\n    }\n    if (hist.size === 0) {\n        return {\n            cat: null,\n            count: 0,\n        };\n    }\n    var topCat = null;\n    var topCount = 0;\n    hist.forEach(function (count, cat) {\n        if (count > topCount) {\n            topCat = cat;\n            topCount = count;\n        }\n    });\n    return {\n        cat: topCat,\n        count: topCount,\n    };\n}\n/** @internal */\nexport function toMostFrequentCategoricals(rows, col) {\n    if (isSeqEmpty(rows)) {\n        return empty(col.dataLength);\n    }\n    var maps = empty(col.dataLength).map(function () { return new Map(); });\n    rows.forEach(function (row) {\n        var vs = col.getCategories(row);\n        if (!vs) {\n            return;\n        }\n        for (var i = 0; i < maps.length; ++i) {\n            var hist = maps[i];\n            var cat = vs[i] || null;\n            hist.set(cat, (hist.get(cat) || 0) + 1);\n        }\n    });\n    return maps.map(function (hist) {\n        if (hist.size === 0) {\n            return null;\n        }\n        var topCat = null;\n        var topCount = 0;\n        hist.forEach(function (count, cat) {\n            if (count > topCount) {\n                topCat = cat;\n                topCount = count;\n            }\n        });\n        return topCat;\n    });\n}\n/** @internal */\nexport function toGroupCompareCategoryValue(rows, col, valueCache) {\n    if (isSeqEmpty(rows)) {\n        return [NaN, null];\n    }\n    var mostFrequent = findMostFrequent(rows.map(function (d) { return col.getCategory(d); }), valueCache);\n    if (mostFrequent.cat == null) {\n        return [NaN, null];\n    }\n    return [mostFrequent.cat.value, mostFrequent.cat.name.toLowerCase()];\n}\n/** @internal */\nexport function compareCategory(a, b) {\n    var aNull = a == null || Number.isNaN(a.value);\n    var bNull = b == null || Number.isNaN(b.value);\n    if (aNull || a == null) {\n        return bNull ? 0 : FIRST_IS_MISSING;\n    }\n    if (bNull || b == null) {\n        return -FIRST_IS_MISSING;\n    }\n    if (a.value === b.value) {\n        return a.label.toLowerCase().localeCompare(b.label.toLowerCase());\n    }\n    return a.value - b.value;\n}\nexport function toCategories(desc) {\n    if (!desc.categories) {\n        return [];\n    }\n    var nextColor = colorPool();\n    var l = desc.categories.length - 1;\n    var cats = desc.categories.map(function (cat, i) { return toCategory(cat, i / l, nextColor); });\n    return cats.sort(compareCategory);\n}\n/** @internal */\nfunction isEmptyFilter(f) {\n    return f == null || (!f.filterMissing && (f.filter == null || f.filter === ''));\n}\n/** @internal */\nexport function isEqualCategoricalFilter(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (a == null || b == null) {\n        return isEmptyFilter(a) === isEmptyFilter(b);\n    }\n    if (a.filterMissing !== b.filterMissing ||\n        typeof a.filter !== typeof b.filter ||\n        Array.isArray(a.filter) !== Array.isArray(b.filter)) {\n        return false;\n    }\n    if (Array.isArray(a.filter)) {\n        return arrayEquals(a.filter, b.filter);\n    }\n    return String(a.filter) === String(b.filter);\n}\n/** @internal */\nexport function isEqualSetCategoricalFilter(a, b) {\n    if (!isEqualCategoricalFilter(a, b)) {\n        return false;\n    }\n    var am = a && a.mode ? a.mode : 'every';\n    var bm = b && b.mode ? b.mode : 'every';\n    return am === bm;\n}\nfunction arrayEquals(a, b) {\n    var al = a != null ? a.length : 0;\n    var bl = b != null ? b.length : 0;\n    if (al !== bl) {\n        return false;\n    }\n    if (al === 0) {\n        return true;\n    }\n    return a.every(function (ai, i) { return ai === b[i]; });\n}\n/** @internal */\nexport function isCategoryIncluded(filter, category) {\n    if (filter == null) {\n        return true;\n    }\n    if (category == null || Number.isNaN(category.value)) {\n        return !filter.filterMissing;\n    }\n    var filterObj = filter.filter;\n    if (Array.isArray(filterObj)) {\n        //array mode\n        return filterObj.includes(category.name);\n    }\n    if (typeof filterObj === 'string' && filterObj.length > 0) {\n        //search mode\n        return category.name.toLowerCase().includes(filterObj.toLowerCase());\n    }\n    if (filterObj instanceof RegExp) {\n        //regex match mode\n        return filterObj.test(category.name);\n    }\n    return true;\n}\n//# sourceMappingURL=internalCategorical.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { Category, toolbar } from './annotations';\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION } from './CategoricalColorMappingFunction';\nimport Column, { DEFAULT_COLOR, } from './Column';\nimport { ECompareValueType } from './interfaces';\nimport { missingGroup } from './missing';\nimport ValueColumn from './ValueColumn';\nimport { toCategories, isCategoryIncluded, isEqualCategoricalFilter, toCompareCategoryValue, toGroupCompareCategoryValue, compareCategory, } from './internalCategorical';\n/**\n * column for categorical values\n */\nvar CategoricalColumn = /** @class */ (function (_super) {\n    __extends(CategoricalColumn, _super);\n    function CategoricalColumn(id, desc) {\n        var _this = _super.call(this, id, desc) || this;\n        _this.lookup = new Map();\n        /**\n         * set of categories to show\n         * @type {null}\n         * @private\n         */\n        _this.currentFilter = null;\n        _this.categories = toCategories(desc);\n        _this.categories.forEach(function (d) { return _this.lookup.set(d.name, d); });\n        _this.categoryOrder = desc.categoryOrder || 'given';\n        _this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n        return _this;\n    }\n    CategoricalColumn_1 = CategoricalColumn;\n    CategoricalColumn.prototype.onDataUpdate = function (rows) {\n        var _a;\n        var _this = this;\n        _super.prototype.onDataUpdate.call(this, rows);\n        if (Array.isArray(this.desc.categories) && this.categoryOrder === 'given') {\n            return;\n        }\n        // derive hist\n        var categories = new Map();\n        rows.forEach(function (row) {\n            var value = _super.prototype.getValue.call(_this, row);\n            if (!value) {\n                return;\n            }\n            var sValue = String(value);\n            var entry = categories.get(sValue);\n            if (!entry) {\n                categories.set(sValue, { name: sValue, count: 1 });\n            }\n            else {\n                entry.count++;\n            }\n        });\n        if (!Array.isArray(this.desc.categories)) {\n            // derive\n            var categoryNames = Array.from(categories.keys());\n            categoryNames.sort();\n            (_a = this.categories).splice.apply(_a, __spreadArray([0, this.categories.length], toCategories({ categories: categoryNames }), false));\n            this.categories.forEach(function (d) { return _this.lookup.set(d.name, d); });\n        }\n        this.sortCategories(categories);\n    };\n    CategoricalColumn.prototype.sortCategories = function (hist) {\n        var _a;\n        var _this = this;\n        var _b, _c;\n        // patch values of categories\n        for (var _i = 0, _d = this.categories; _i < _d.length; _i++) {\n            var cat = _d[_i];\n            cat.value = (_c = (_b = hist.get(cat.name)) === null || _b === void 0 ? void 0 : _b.count) !== null && _c !== void 0 ? _c : 0;\n        }\n        // sort\n        if (typeof this.categoryOrder === 'function') {\n            (_a = this.categories).splice.apply(_a, __spreadArray([0, this.categories.length], this.categoryOrder(this.categories), false));\n        }\n        else if (this.categoryOrder === 'large-to-small') {\n            // revert order of value\n            for (var _e = 0, _f = this.categories; _e < _f.length; _e++) {\n                var cat = _f[_e];\n                cat.value = -1 * cat.value;\n            }\n            this.categories.sort(compareCategory);\n        }\n        else if (this.categoryOrder === 'small-to-large') {\n            this.categories.sort(compareCategory);\n        }\n        // patch the ICategory.value to match the new order\n        this.categories.forEach(function (cat, i) {\n            cat.value = i / _this.categories.length;\n        });\n    };\n    CategoricalColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([CategoricalColumn_1.EVENT_FILTER_CHANGED, CategoricalColumn_1.EVENT_COLOR_MAPPING_CHANGED]);\n    };\n    CategoricalColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    CategoricalColumn.prototype.getValue = function (row) {\n        var v = this.getCategory(row);\n        return v ? v.name : null;\n    };\n    CategoricalColumn.prototype.getCategory = function (row) {\n        var v = _super.prototype.getValue.call(this, row);\n        if (!v) {\n            return null;\n        }\n        var vs = String(v);\n        return this.lookup.has(vs) ? this.lookup.get(vs) : null;\n    };\n    Object.defineProperty(CategoricalColumn.prototype, \"dataLength\", {\n        get: function () {\n            return this.categories.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoricalColumn.prototype, \"labels\", {\n        get: function () {\n            return this.categories.map(function (d) { return d.label; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CategoricalColumn.prototype.getLabel = function (row) {\n        var v = this.getCategory(row);\n        return v ? v.label : '';\n    };\n    CategoricalColumn.prototype.getCategories = function (row) {\n        var v = this.getCategory(row);\n        return [v];\n    };\n    CategoricalColumn.prototype.getValues = function (row) {\n        var v = this.getCategory(row);\n        return this.categories.map(function (d) { return d === v; });\n    };\n    CategoricalColumn.prototype.getLabels = function (row) {\n        return this.getValues(row).map(String);\n    };\n    CategoricalColumn.prototype.getMap = function (row) {\n        var cats = this.categories;\n        return this.getValues(row).map(function (value, i) { return ({ key: cats[i].label, value: value }); });\n    };\n    CategoricalColumn.prototype.getMapLabel = function (row) {\n        var cats = this.categories;\n        return this.getLabels(row).map(function (value, i) { return ({ key: cats[i].label, value: value }); });\n    };\n    CategoricalColumn.prototype.getSet = function (row) {\n        var cat = this.getCategory(row);\n        var r = new Set();\n        if (cat) {\n            r.add(cat);\n        }\n        return r;\n    };\n    CategoricalColumn.prototype.iterCategory = function (row) {\n        return [this.getCategory(row)];\n    };\n    CategoricalColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.filter = this.currentFilter;\n        r.colorMapping = this.colorMapping.toJSON();\n        return r;\n    };\n    CategoricalColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\n        if (typeof dump.filter === 'undefined') {\n            this.currentFilter = null;\n            return;\n        }\n        var bak = dump.filter;\n        if (typeof bak === 'string' || Array.isArray(bak)) {\n            this.currentFilter = { filter: bak, filterMissing: false };\n        }\n        else {\n            this.currentFilter = bak;\n        }\n    };\n    CategoricalColumn.prototype.getColor = function (row) {\n        var v = this.getCategory(row);\n        return v ? this.colorMapping.apply(v) : DEFAULT_COLOR;\n    };\n    CategoricalColumn.prototype.getColorMapping = function () {\n        return this.colorMapping.clone();\n    };\n    CategoricalColumn.prototype.setColorMapping = function (mapping) {\n        if (this.colorMapping.eq(mapping)) {\n            return;\n        }\n        this.fire([\n            CategoricalColumn_1.EVENT_COLOR_MAPPING_CHANGED,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY,\n        ], this.colorMapping.clone(), (this.colorMapping = mapping));\n    };\n    CategoricalColumn.prototype.isFiltered = function () {\n        return this.currentFilter != null;\n    };\n    CategoricalColumn.prototype.filter = function (row, valueCache) {\n        return isCategoryIncluded(this.currentFilter, valueCache !== undefined ? valueCache : this.getCategory(row));\n    };\n    CategoricalColumn.prototype.getFilter = function () {\n        return this.currentFilter == null ? null : Object.assign({}, this.currentFilter);\n    };\n    CategoricalColumn.prototype.setFilter = function (filter) {\n        if (isEqualCategoricalFilter(this.currentFilter, filter)) {\n            return;\n        }\n        this.fire([CategoricalColumn_1.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.currentFilter, (this.currentFilter = filter));\n    };\n    CategoricalColumn.prototype.clearFilter = function () {\n        var was = this.isFiltered();\n        this.setFilter(null);\n        return was;\n    };\n    CategoricalColumn.prototype.toCompareValue = function (row, valueCache) {\n        return toCompareCategoryValue(valueCache !== undefined ? valueCache : this.getCategory(row));\n    };\n    CategoricalColumn.prototype.toCompareValueType = function () {\n        return ECompareValueType.FLOAT_ASC;\n    };\n    CategoricalColumn.prototype.group = function (row, valueCache) {\n        var cat = valueCache !== undefined ? valueCache : this.getCategory(row);\n        if (!cat) {\n            return Object.assign({}, missingGroup);\n        }\n        return { name: cat.label, color: cat.color };\n    };\n    CategoricalColumn.prototype.toCompareGroupValue = function (rows, _group, valueCache) {\n        return toGroupCompareCategoryValue(rows, this, valueCache);\n    };\n    CategoricalColumn.prototype.toCompareGroupValueType = function () {\n        return [ECompareValueType.FLOAT, ECompareValueType.STRING];\n    };\n    CategoricalColumn.prototype.getGroupRenderer = function () {\n        var current = _super.prototype.getGroupRenderer.call(this);\n        if (current === this.desc.type && this.isGroupedBy() >= 0) {\n            // still the default and the stratification criteria\n            return 'catdistributionbar';\n        }\n        return current;\n    };\n    var CategoricalColumn_1;\n    CategoricalColumn.EVENT_FILTER_CHANGED = 'filterChanged';\n    CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED = 'colorMappingChanged';\n    CategoricalColumn = CategoricalColumn_1 = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'group', 'groupBy', 'sortGroupBy', 'filterCategorical', 'colorMappedCategorical'),\n        Category('categorical')\n    ], CategoricalColumn);\n    return CategoricalColumn;\n}(ValueColumn));\nexport default CategoricalColumn;\n//# sourceMappingURL=CategoricalColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Category, toolbar } from './annotations';\nimport CategoricalColumn from './CategoricalColumn';\nimport Column, { DEFAULT_COLOR, } from './Column';\nimport { ECompareValueType } from './interfaces';\nimport ValueColumn from './ValueColumn';\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION } from './CategoricalColorMappingFunction';\nimport { toCategories, isCategoryIncluded, isEqualSetCategoricalFilter } from './internalCategorical';\nimport { chooseUIntByDataLength, integrateDefaults } from './internal';\n/**\n * a string column with optional alignment\n */\nvar SetColumn = /** @class */ (function (_super) {\n    __extends(SetColumn, _super);\n    function SetColumn(id, desc) {\n        var _this = _super.call(this, id, integrateDefaults(desc, {\n            renderer: 'upset',\n            groupRenderer: 'upset',\n            summaryRenderer: 'categorical',\n        })) || this;\n        _this.lookup = new Map();\n        /**\n         * set of categories to show\n         * @type {null}\n         * @private\n         */\n        _this.currentFilter = null;\n        _this.separator = new RegExp(desc.separator || ';');\n        _this.categories = toCategories(desc);\n        _this.categories.forEach(function (d) { return _this.lookup.set(d.name, d); });\n        _this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n        return _this;\n    }\n    SetColumn_1 = SetColumn;\n    SetColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([SetColumn_1.EVENT_COLOR_MAPPING_CHANGED, SetColumn_1.EVENT_FILTER_CHANGED]);\n    };\n    SetColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    Object.defineProperty(SetColumn.prototype, \"labels\", {\n        get: function () {\n            return this.categories.map(function (d) { return d.label; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SetColumn.prototype, \"dataLength\", {\n        get: function () {\n            return this.categories.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SetColumn.prototype.getValue = function (row) {\n        var v = this.getSortedSet(row);\n        if (v.length === 0) {\n            return null;\n        }\n        return v.map(function (d) { return d.name; });\n    };\n    SetColumn.prototype.getLabel = function (row) {\n        return \"(\".concat(this.getSortedSet(row)\n            .map(function (d) { return d.label; })\n            .join(','), \")\");\n    };\n    SetColumn.prototype.normalize = function (v) {\n        if (typeof v === 'string') {\n            return v.split(this.separator).map(function (s) { return s.trim(); });\n        }\n        if (Array.isArray(v)) {\n            return v.map(function (v) { return String(v).trim(); });\n        }\n        if (v instanceof Set) {\n            return Array.from(v).map(String);\n        }\n        return [];\n    };\n    SetColumn.prototype.getSet = function (row) {\n        var _this = this;\n        var sv = this.normalize(_super.prototype.getValue.call(this, row));\n        var r = new Set();\n        sv.forEach(function (n) {\n            var cat = _this.lookup.get(n);\n            if (cat) {\n                r.add(cat);\n            }\n        });\n        return r;\n    };\n    SetColumn.prototype.getSortedSet = function (row) {\n        return Array.from(this.getSet(row)).sort(function (a, b) {\n            return a.value === b.value ? a.label.localeCompare(b.label) : a.value - b.value;\n        });\n    };\n    SetColumn.prototype.getCategories = function (row) {\n        return this.getSortedSet(row);\n    };\n    SetColumn.prototype.getColors = function (row) {\n        var _this = this;\n        return this.getSortedSet(row).map(function (d) { return _this.colorMapping.apply(d); });\n    };\n    SetColumn.prototype.getColorMapping = function () {\n        return this.colorMapping.clone();\n    };\n    SetColumn.prototype.setColorMapping = function (mapping) {\n        return CategoricalColumn.prototype.setColorMapping.call(this, mapping);\n    };\n    SetColumn.prototype.getValues = function (row) {\n        var s = this.getSet(row);\n        return this.categories.map(function (d) { return s.has(d); });\n    };\n    SetColumn.prototype.getLabels = function (row) {\n        return this.getValues(row).map(String);\n    };\n    SetColumn.prototype.getMap = function (row) {\n        return this.getSortedSet(row).map(function (d) { return ({ key: d.label, value: true }); });\n    };\n    SetColumn.prototype.getMapLabel = function (row) {\n        return this.getSortedSet(row).map(function (d) { return ({ key: d.label, value: 'true' }); });\n    };\n    SetColumn.prototype.iterCategory = function (row) {\n        var r = this.getSet(row);\n        if (r.size > 0) {\n            return Array.from(r);\n        }\n        return [null];\n    };\n    SetColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.filter = this.currentFilter;\n        r.colorMapping = this.colorMapping.toJSON();\n        return r;\n    };\n    SetColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\n        if (!('filter' in dump)) {\n            this.currentFilter = null;\n            return;\n        }\n        var bak = dump.filter;\n        if (typeof bak === 'string' || Array.isArray(bak)) {\n            this.currentFilter = { filter: bak, filterMissing: false, mode: 'some' };\n        }\n        else {\n            this.currentFilter = bak;\n        }\n    };\n    SetColumn.prototype.isFiltered = function () {\n        return this.currentFilter != null;\n    };\n    SetColumn.prototype.filter = function (row) {\n        var _this = this;\n        if (!this.currentFilter) {\n            return true;\n        }\n        var v = Array.from(this.getSet(row));\n        if (v.length === 0) {\n            return isCategoryIncluded(this.currentFilter, null);\n        }\n        if (this.currentFilter.mode === 'every') {\n            return v.every(function (s) { return isCategoryIncluded(_this.currentFilter, s); });\n        }\n        return v.some(function (s) { return isCategoryIncluded(_this.currentFilter, s); });\n    };\n    SetColumn.prototype.getFilter = function () {\n        return this.currentFilter == null ? null : Object.assign({}, this.currentFilter);\n    };\n    SetColumn.prototype.setFilter = function (filter) {\n        if (isEqualSetCategoricalFilter(this.currentFilter, filter)) {\n            return;\n        }\n        this.fire([CategoricalColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.currentFilter, (this.currentFilter = filter));\n    };\n    SetColumn.prototype.clearFilter = function () {\n        return CategoricalColumn.prototype.clearFilter.call(this);\n    };\n    SetColumn.prototype.toCompareValue = function (row) {\n        var v = this.getSet(row);\n        var vs = [v.size];\n        for (var _i = 0, _a = this.categories; _i < _a.length; _i++) {\n            var cat = _a[_i];\n            vs.push(v.has(cat) ? 1 : 0);\n        }\n        return vs;\n    };\n    SetColumn.prototype.toCompareValueType = function () {\n        return [chooseUIntByDataLength(this.categories.length)].concat(this.categories.map(function () { return ECompareValueType.BINARY; }));\n    };\n    SetColumn.prototype.group = function (row) {\n        var v = this.getSet(row);\n        var cardinality = v.size;\n        var categories = this.categories.filter(function (c) { return v.has(c); });\n        // by cardinality and then by intersection\n        var g = {\n            name: categories.length === 0 ? 'None' : categories.map(function (d) { return d.name; }).join(', '),\n            color: categories.length === 1 ? categories[0].color : DEFAULT_COLOR,\n        };\n        g.parent = {\n            name: \"#\".concat(cardinality),\n            color: DEFAULT_COLOR,\n            subGroups: [g],\n        };\n        return g;\n    };\n    var SetColumn_1;\n    SetColumn.EVENT_FILTER_CHANGED = CategoricalColumn.EVENT_FILTER_CHANGED;\n    SetColumn.EVENT_COLOR_MAPPING_CHANGED = CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED;\n    SetColumn = SetColumn_1 = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'filterCategorical', 'colorMappedCategorical', 'group', 'groupBy'),\n        Category('categorical')\n    ], SetColumn);\n    return SetColumn;\n}(ValueColumn));\nexport default SetColumn;\n//# sourceMappingURL=SetColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { equalArrays, fixCSS, suffix, joinIndexArrays, AEventDispatcher } from '../internal';\nimport { isSortingAscByDefault } from './annotations';\nimport Column from './Column';\nimport CompositeColumn from './CompositeColumn';\nimport { defaultGroup, } from './interfaces';\nimport { groupRoots, traverseGroupsDFS } from './internal';\nimport AggregateGroupColumn from './AggregateGroupColumn';\nimport SetColumn from './SetColumn';\nimport { AGGREGATION_LEVEL_WIDTH } from '../styles';\nexport var EDirtyReason;\n(function (EDirtyReason) {\n    EDirtyReason[\"UNKNOWN\"] = \"unknown\";\n    EDirtyReason[\"FILTER_CHANGED\"] = \"filter\";\n    EDirtyReason[\"SORT_CRITERIA_CHANGED\"] = \"sort_changed\";\n    EDirtyReason[\"SORT_CRITERIA_DIRTY\"] = \"sort_dirty\";\n    EDirtyReason[\"GROUP_CRITERIA_CHANGED\"] = \"group_changed\";\n    EDirtyReason[\"GROUP_CRITERIA_DIRTY\"] = \"group_dirty\";\n    EDirtyReason[\"GROUP_SORT_CRITERIA_CHANGED\"] = \"group_sort_changed\";\n    EDirtyReason[\"GROUP_SORT_CRITERIA_DIRTY\"] = \"group_sort_dirty\";\n})(EDirtyReason || (EDirtyReason = {}));\n/**\n * a ranking\n */\nvar Ranking = /** @class */ (function (_super) {\n    __extends(Ranking, _super);\n    function Ranking(id) {\n        var _this = _super.call(this) || this;\n        _this.id = id;\n        _this.sortCriteria = [];\n        _this.groupColumns = [];\n        _this.groupSortCriteria = [];\n        /**\n         * columns of this ranking\n         * @type {Array}\n         * @private\n         */\n        _this.columns = [];\n        _this.dirtyOrder = function (reason) {\n            _this.fire([Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], reason);\n        };\n        _this.dirtyOrderSortDirty = function () { return _this.dirtyOrder([EDirtyReason.SORT_CRITERIA_DIRTY]); };\n        _this.dirtyOrderGroupDirty = function () { return _this.dirtyOrder([EDirtyReason.GROUP_CRITERIA_DIRTY]); };\n        _this.dirtyOrderGroupSortDirty = function () { return _this.dirtyOrder([EDirtyReason.GROUP_SORT_CRITERIA_DIRTY]); };\n        _this.dirtyOrderFiltering = function () { return _this.dirtyOrder([EDirtyReason.FILTER_CHANGED]); };\n        /**\n         * the current ordering as an sorted array of indices\n         * @type {Array}\n         */\n        _this.groups = [Object.assign({ order: [] }, defaultGroup)];\n        _this.order = [];\n        _this.index2pos = [];\n        _this.id = fixCSS(id);\n        _this.label = \"Ranking \".concat(id.startsWith('rank') ? id.slice(4) : id);\n        return _this;\n    }\n    Ranking.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([\n            Ranking.EVENT_WIDTH_CHANGED,\n            Ranking.EVENT_FILTER_CHANGED,\n            Ranking.EVENT_LABEL_CHANGED,\n            Ranking.EVENT_GROUPS_CHANGED,\n            Ranking.EVENT_ADD_COLUMN,\n            Ranking.EVENT_REMOVE_COLUMN,\n            Ranking.EVENT_GROUP_CRITERIA_CHANGED,\n            Ranking.EVENT_MOVE_COLUMN,\n            Ranking.EVENT_DIRTY,\n            Ranking.EVENT_DIRTY_HEADER,\n            Ranking.EVENT_DIRTY_VALUES,\n            Ranking.EVENT_DIRTY_CACHES,\n            Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED,\n            Ranking.EVENT_COLUMN_VISIBILITY_CHANGED,\n            Ranking.EVENT_SORT_CRITERIA_CHANGED,\n            Ranking.EVENT_DIRTY_ORDER,\n            Ranking.EVENT_ORDER_CHANGED,\n        ]);\n    };\n    Ranking.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    Ranking.prototype.assignNewId = function (idGenerator) {\n        this.id = fixCSS(idGenerator());\n        this.columns.forEach(function (c) { return c.assignNewId(idGenerator); });\n    };\n    Ranking.prototype.getLabel = function () {\n        return this.label;\n    };\n    Ranking.prototype.setLabel = function (value) {\n        if (value === this.label) {\n            return;\n        }\n        this.fire(Ranking.EVENT_LABEL_CHANGED, this.label, (this.label = value));\n    };\n    Ranking.prototype.setGroups = function (groups, index2pos, dirtyReason) {\n        var old = this.order;\n        var oldGroups = this.groups;\n        this.groups = groups;\n        this.index2pos = index2pos;\n        this.order = joinIndexArrays(groups.map(function (d) { return d.order; }));\n        // replace with subarrays to save memory\n        if (groups.length > 1) {\n            this.unifyGroups(groups);\n        }\n        else if (groups.length === 1) {\n            // propagate to the top\n            var p = groups[0].parent;\n            while (p) {\n                p.order = this.order;\n                p = p.parent;\n            }\n        }\n        this.fire([Ranking.EVENT_ORDER_CHANGED, Ranking.EVENT_GROUPS_CHANGED, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], old, this.order, oldGroups, groups, dirtyReason);\n    };\n    Ranking.prototype.unifyGroups = function (groups) {\n        var offset = 0;\n        var order = this.order;\n        var offsets = new Map();\n        for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\n            var group = groups_1[_i];\n            var size = group.order.length;\n            group.order = order.subarray(offset, offset + size);\n            offsets.set(group, { offset: offset, size: size });\n            offset += size;\n        }\n        // propagate also to the top with views\n        var roots = groupRoots(groups);\n        var resolve = function (g) {\n            if (offsets.has(g)) {\n                // leaf\n                return offsets.get(g);\n            }\n            var subs = g.subGroups.map(function (gi) { return resolve(gi); });\n            var offset = subs.length > 0 ? subs[0].offset : 0;\n            var size = subs.reduce(function (a, b) { return a + b.size; }, 0);\n            var r = { offset: offset, size: size };\n            offsets.set(g, r);\n            g.order = order.subarray(offset, offset + size);\n            return r;\n        };\n        for (var _a = 0, roots_1 = roots; _a < roots_1.length; _a++) {\n            var root = roots_1[_a];\n            resolve(root);\n        }\n    };\n    Ranking.prototype.getRank = function (dataIndex) {\n        if (dataIndex < 0 || dataIndex > this.index2pos.length) {\n            return -1;\n        }\n        var v = this.index2pos[dataIndex];\n        return v != null && !Number.isNaN(v) && v > 0 ? v : -1;\n    };\n    Ranking.prototype.getOrder = function () {\n        return this.order;\n    };\n    Ranking.prototype.getOrderLength = function () {\n        return this.order.length;\n    };\n    Ranking.prototype.getGroups = function () {\n        return this.groups.slice();\n    };\n    /**\n     * Returns the flat group tree in depth first search (DFS).\n     */\n    Ranking.prototype.getFlatGroups = function () {\n        var r = [];\n        traverseGroupsDFS(this.groups, function (v) {\n            r.push(v);\n        });\n        return r;\n    };\n    Ranking.prototype.dump = function (toDescRef) {\n        var r = {};\n        r.columns = this.columns.map(function (d) { return d.dump(toDescRef); });\n        r.sortCriteria = this.sortCriteria.map(function (s) { return ({ asc: s.asc, sortBy: s.col.id }); });\n        r.groupSortCriteria = this.groupSortCriteria.map(function (s) { return ({ asc: s.asc, sortBy: s.col.id }); });\n        r.groupColumns = this.groupColumns.map(function (d) { return d.id; });\n        return r;\n    };\n    Ranking.prototype.restore = function (dump, factory) {\n        var _this = this;\n        this.clear();\n        (dump.columns || []).forEach(function (child) {\n            var c = factory(child);\n            if (c) {\n                _this.push(c);\n            }\n        });\n        // compatibility case\n        if (dump.sortColumn && dump.sortColumn.sortBy) {\n            var help = this.columns.find(function (d) { return d.id === dump.sortColumn.sortBy; });\n            if (help) {\n                this.sortBy(help, dump.sortColumn.asc);\n            }\n        }\n        if (dump.groupColumns) {\n            var groupColumns = dump.groupColumns\n                .map(function (id) { return _this.columns.find(function (d) { return d.id === id; }); })\n                .filter(function (d) { return d != null; });\n            this.setGroupCriteria(groupColumns);\n        }\n        var restoreSortCriteria = function (dumped) {\n            return dumped\n                .map(function (s) {\n                return {\n                    asc: s.asc,\n                    col: _this.columns.find(function (d) { return d.id === s.sortBy; }) || null,\n                };\n            })\n                .filter(function (s) { return s.col; });\n        };\n        if (dump.sortCriteria) {\n            this.setSortCriteria(restoreSortCriteria(dump.sortCriteria));\n        }\n        if (dump.groupSortCriteria) {\n            this.setGroupSortCriteria(restoreSortCriteria(dump.groupSortCriteria));\n        }\n    };\n    Ranking.prototype.flatten = function (r, offset, levelsToGo, padding) {\n        if (levelsToGo === void 0) { levelsToGo = 0; }\n        if (padding === void 0) { padding = 0; }\n        var acc = offset; // + this.getWidth() + padding;\n        if (levelsToGo > 0 || levelsToGo <= Column.FLAT_ALL_COLUMNS) {\n            this.columns.forEach(function (c) {\n                if (c.getVisible() && levelsToGo <= Column.FLAT_ALL_COLUMNS) {\n                    acc += c.flatten(r, acc, levelsToGo - 1, padding) + padding;\n                }\n            });\n        }\n        return acc - offset;\n    };\n    Ranking.prototype.getPrimarySortCriteria = function () {\n        if (this.sortCriteria.length === 0) {\n            return null;\n        }\n        return this.sortCriteria[0];\n    };\n    Ranking.prototype.getSortCriteria = function () {\n        return this.sortCriteria.map(function (d) { return Object.assign({}, d); });\n    };\n    Ranking.prototype.getGroupSortCriteria = function () {\n        return this.groupSortCriteria.map(function (d) { return Object.assign({}, d); });\n    };\n    Ranking.prototype.toggleSorting = function (col) {\n        return this.setSortCriteria(this.toggleSortingLogic(col, this.sortCriteria));\n    };\n    Ranking.prototype.toggleSortingLogic = function (col, sortCriteria) {\n        var newSort = sortCriteria.slice();\n        var current = newSort.findIndex(function (d) { return d.col === col; });\n        var defaultAsc = isSortingAscByDefault(col);\n        if (current < 0) {\n            newSort.splice(0, newSort.length, { col: col, asc: defaultAsc });\n        }\n        else if (newSort[current].asc === defaultAsc) {\n            // asc -> desc, or desc -> asc\n            newSort.splice(current, 1, { col: col, asc: !defaultAsc });\n        }\n        else {\n            // remove\n            newSort.splice(current, 1);\n        }\n        return newSort;\n    };\n    Ranking.prototype.toggleGrouping = function (col) {\n        var old = this.groupColumns.indexOf(col);\n        if (old >= 0) {\n            var newGroupings = this.groupColumns.slice();\n            newGroupings.splice(old, 1);\n            return this.setGroupCriteria(newGroupings);\n        }\n        return this.setGroupCriteria([col]);\n    };\n    Ranking.prototype.getGroupCriteria = function () {\n        return this.groupColumns.slice();\n    };\n    /**\n     * replaces, moves, or remove the given column in the sorting hierarchy\n     * @param col {Column}\n     * @param priority {number} when priority < 0 remove the column only else replace at the given priority\n     */\n    Ranking.prototype.sortBy = function (col, ascending, priority) {\n        if (ascending === void 0) { ascending = false; }\n        if (priority === void 0) { priority = 0; }\n        if (col.findMyRanker() !== this) {\n            return false; //not one of mine\n        }\n        return this.setSortCriteria(this.hierarchyLogic(this.sortCriteria, this.sortCriteria.findIndex(function (d) { return d.col === col; }), { col: col, asc: ascending }, priority));\n    };\n    /**\n     * replaces, moves, or remove the given column in the group sorting hierarchy\n     * @param col {Column}\n     * @param priority {number} when priority < 0 remove the column only else replace at the given priority\n     */\n    Ranking.prototype.groupSortBy = function (col, ascending, priority) {\n        if (ascending === void 0) { ascending = false; }\n        if (priority === void 0) { priority = 0; }\n        if (col.findMyRanker() !== this) {\n            return false; //not one of mine\n        }\n        return this.setGroupSortCriteria(this.hierarchyLogic(this.groupSortCriteria, this.groupSortCriteria.findIndex(function (d) { return d.col === col; }), { col: col, asc: ascending }, priority));\n    };\n    Ranking.prototype.hierarchyLogic = function (entries, index, entry, priority) {\n        entries = entries.slice();\n        if (index >= 0) {\n            // move at the other position\n            entries.splice(index, 1);\n            if (priority >= 0) {\n                entries.splice(Math.min(priority, entries.length), 0, entry);\n            }\n        }\n        else if (priority >= 0) {\n            entries[Math.min(priority, entries.length)] = entry;\n        }\n        return entries;\n    };\n    /**\n     * replaces, moves, or remove the given column in the grouping hierarchy\n     * @param col {Column}\n     * @param priority {number} when priority < 0 remove the column only else replace at the given priority\n     */\n    Ranking.prototype.groupBy = function (col, priority) {\n        if (priority === void 0) { priority = 0; }\n        if (col.findMyRanker() !== this) {\n            return false; //not one of mine\n        }\n        return this.setGroupCriteria(this.hierarchyLogic(this.groupColumns, this.groupColumns.indexOf(col), col, priority));\n    };\n    Ranking.prototype.setSortCriteria = function (value) {\n        var _a;\n        var _this = this;\n        var values = Array.isArray(value) ? value.slice() : [value];\n        var bak = this.sortCriteria.slice();\n        if (equalCriteria(values, bak)) {\n            return false;\n        }\n        // update listener\n        bak.forEach(function (d) {\n            d.col.on(Ranking.COLUMN_SORT_DIRTY, null);\n        });\n        values.forEach(function (d) {\n            d.col.on(Ranking.COLUMN_SORT_DIRTY, _this.dirtyOrderSortDirty);\n        });\n        (_a = this.sortCriteria).splice.apply(_a, __spreadArray([0, this.sortCriteria.length], values.slice(), false));\n        this.triggerResort(bak);\n        return true;\n    };\n    Ranking.prototype.setGroupCriteria = function (column) {\n        var _a;\n        var _this = this;\n        var cols = Array.isArray(column) ? column : [column];\n        if (equalArrays(this.groupColumns, cols)) {\n            return true; //same\n        }\n        this.groupColumns.forEach(function (groupColumn) {\n            groupColumn.on(Ranking.COLUMN_GROUP_DIRTY, null);\n        });\n        var bak = this.groupColumns.slice();\n        (_a = this.groupColumns).splice.apply(_a, __spreadArray([0, this.groupColumns.length], cols, false));\n        this.groupColumns.forEach(function (groupColumn) {\n            groupColumn.on(Ranking.COLUMN_GROUP_DIRTY, _this.dirtyOrderGroupDirty);\n        });\n        this.fire([\n            Ranking.EVENT_GROUP_CRITERIA_CHANGED,\n            Ranking.EVENT_DIRTY_ORDER,\n            Ranking.EVENT_DIRTY_HEADER,\n            Ranking.EVENT_DIRTY_VALUES,\n            Ranking.EVENT_DIRTY_CACHES,\n            Ranking.EVENT_DIRTY,\n        ], bak, this.getGroupCriteria());\n        this.autoAdaptAggregationColumn();\n        return true;\n    };\n    Ranking.prototype.autoAdaptAggregationColumn = function () {\n        // set column auto adds two levels\n        var length = this.groupColumns.reduce(function (acc, c) { return acc + (c instanceof SetColumn ? 2 : 1); }, 0);\n        var col = this.children.find(function (d) { return d instanceof AggregateGroupColumn; });\n        if (!col) {\n            return;\n        }\n        var targetWidth = length * AGGREGATION_LEVEL_WIDTH;\n        if (targetWidth > col.getWidth()) {\n            col.setWidth(targetWidth);\n        }\n    };\n    Ranking.prototype.toggleGroupSorting = function (col) {\n        return this.setGroupSortCriteria(this.toggleSortingLogic(col, this.groupSortCriteria));\n    };\n    Ranking.prototype.setGroupSortCriteria = function (value) {\n        var _a;\n        var _this = this;\n        var values = Array.isArray(value) ? value.slice() : [value];\n        var bak = this.groupSortCriteria.slice();\n        if (equalCriteria(values, bak)) {\n            return false;\n        }\n        bak.forEach(function (d) {\n            d.col.on(Ranking.COLUMN_GROUP_SORT_DIRTY, null);\n        });\n        values.forEach(function (d) {\n            d.col.on(Ranking.COLUMN_GROUP_SORT_DIRTY, _this.dirtyOrderGroupSortDirty);\n        });\n        (_a = this.groupSortCriteria).splice.apply(_a, __spreadArray([0, this.groupSortCriteria.length], values.slice(), false));\n        this.triggerGroupResort(bak);\n        return true;\n    };\n    Ranking.prototype.triggerGroupResort = function (bak) {\n        var sortCriterias = this.getGroupSortCriteria();\n        var bakMulti = Array.isArray(bak) ? bak : sortCriterias;\n        this.fire([\n            Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED,\n            Ranking.EVENT_DIRTY_ORDER,\n            Ranking.EVENT_DIRTY_HEADER,\n            Ranking.EVENT_DIRTY_VALUES,\n            Ranking.EVENT_DIRTY,\n        ], bakMulti, sortCriterias);\n    };\n    Ranking.prototype.triggerResort = function (bak) {\n        var sortCriterias = this.getSortCriteria();\n        var bakMulti = Array.isArray(bak) ? bak : sortCriterias;\n        this.fire([\n            Ranking.EVENT_SORT_CRITERIA_CHANGED,\n            Ranking.EVENT_DIRTY_ORDER,\n            Ranking.EVENT_DIRTY_HEADER,\n            Ranking.EVENT_DIRTY_VALUES,\n            Ranking.EVENT_DIRTY,\n        ], bakMulti, sortCriterias);\n    };\n    Object.defineProperty(Ranking.prototype, \"children\", {\n        get: function () {\n            return this.columns.slice();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Ranking.prototype, \"length\", {\n        get: function () {\n            return this.columns.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Ranking.prototype.insert = function (col, index) {\n        var _this = this;\n        if (index === void 0) { index = this.columns.length; }\n        this.columns.splice(index, 0, col);\n        col.attach(this);\n        this.forward.apply(this, __spreadArray([col], Ranking.FORWARD_COLUMN_EVENTS, false));\n        col.on(\"\".concat(Ranking.EVENT_FILTER_CHANGED, \".order\"), this.dirtyOrderFiltering);\n        col.on(\"\".concat(Column.EVENT_VISIBILITY_CHANGED, \".ranking\"), function (oldValue, newValue) {\n            return _this.fire([\n                Ranking.EVENT_COLUMN_VISIBILITY_CHANGED,\n                Ranking.EVENT_DIRTY_HEADER,\n                Ranking.EVENT_DIRTY_VALUES,\n                Ranking.EVENT_DIRTY,\n            ], col, oldValue, newValue);\n        });\n        this.fire([Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], col, index);\n        if (col.isFiltered()) {\n            this.dirtyOrderFiltering();\n        }\n        return col;\n    };\n    Ranking.prototype.move = function (col, index) {\n        if (index === void 0) { index = this.columns.length; }\n        if (col.parent !== this) {\n            // not a move operation!\n            console.error('invalid move operation: ', col);\n            return null;\n        }\n        var old = this.columns.indexOf(col);\n        if (index === old) {\n            // no move needed\n            return col;\n        }\n        //delete first\n        this.columns.splice(old, 1);\n        // adapt target index based on previous index, i.e shift by one\n        this.columns.splice(old < index ? index - 1 : index, 0, col);\n        this.fire([Ranking.EVENT_MOVE_COLUMN, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], col, index, old);\n        return col;\n    };\n    Ranking.prototype.moveAfter = function (col, reference) {\n        var i = this.columns.indexOf(reference);\n        if (i < 0) {\n            return null;\n        }\n        return this.move(col, i + 1);\n    };\n    Ranking.prototype.moveBefore = function (col, reference) {\n        var i = this.columns.indexOf(reference);\n        if (i < 0) {\n            return null;\n        }\n        return this.move(col, i);\n    };\n    Object.defineProperty(Ranking.prototype, \"fqpath\", {\n        get: function () {\n            return '';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Ranking.prototype.findByPath = function (fqpath) {\n        var p = this;\n        var indices = fqpath.split('@').map(Number).slice(1); //ignore the first entry = ranking\n        while (indices.length > 0) {\n            var i = indices.shift();\n            p = p.at(i);\n        }\n        return p;\n    };\n    Ranking.prototype.indexOf = function (col) {\n        return this.columns.indexOf(col);\n    };\n    Ranking.prototype.at = function (index) {\n        return this.columns[index];\n    };\n    Ranking.prototype.insertAfter = function (col, ref) {\n        var i = this.columns.indexOf(ref);\n        if (i < 0) {\n            return null;\n        }\n        return this.insert(col, i + 1);\n    };\n    Ranking.prototype.insertBefore = function (col, ref) {\n        var i = this.columns.indexOf(ref);\n        if (i < 0) {\n            return null;\n        }\n        return this.insert(col, i);\n    };\n    Ranking.prototype.push = function (col) {\n        return this.insert(col);\n    };\n    Ranking.prototype.remove = function (col) {\n        var i = this.columns.indexOf(col);\n        if (i < 0) {\n            return false;\n        }\n        this.unforward.apply(this, __spreadArray([col], Ranking.FORWARD_COLUMN_EVENTS, false));\n        var isSortCriteria = this.sortCriteria.findIndex(function (d) { return d.col === col; });\n        var sortCriteriaChanged = isSortCriteria >= 0;\n        if (sortCriteriaChanged) {\n            this.sortCriteria.splice(isSortCriteria, 1);\n        }\n        var isGroupSortCriteria = this.groupSortCriteria.findIndex(function (d) { return d.col === col; });\n        var groupSortCriteriaChanged = isGroupSortCriteria >= 0;\n        if (groupSortCriteriaChanged) {\n            this.groupSortCriteria.splice(isGroupSortCriteria, 1);\n        }\n        var newGrouping = null;\n        var isGroupColumn = this.groupColumns.indexOf(col);\n        if (isGroupColumn >= 0) {\n            // was my grouping criteria\n            newGrouping = this.groupColumns.slice();\n            newGrouping.splice(isGroupColumn, 1);\n        }\n        col.detach();\n        this.columns.splice(i, 1);\n        this.fire([Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], col, i);\n        if (newGrouping) {\n            this.setGroupCriteria(newGrouping);\n        }\n        else if (sortCriteriaChanged) {\n            this.triggerResort(null);\n        }\n        else if (groupSortCriteriaChanged) {\n            this.triggerGroupResort(null);\n        }\n        else if (col.isFiltered()) {\n            this.dirtyOrderFiltering();\n        }\n        return true;\n    };\n    Ranking.prototype.clear = function () {\n        var _this = this;\n        if (this.columns.length === 0) {\n            return;\n        }\n        this.sortCriteria.forEach(function (d) {\n            d.col.on(\"\".concat(Column.EVENT_DIRTY_CACHES, \".order\"), null);\n        });\n        this.sortCriteria.splice(0, this.sortCriteria.length);\n        this.groupSortCriteria.forEach(function (d) {\n            d.col.on(Ranking.COLUMN_GROUP_SORT_DIRTY, null);\n        });\n        this.groupSortCriteria.splice(0, this.groupSortCriteria.length);\n        this.groupColumns.forEach(function (d) {\n            d.on(Ranking.COLUMN_GROUP_DIRTY, null);\n        });\n        this.groupColumns.splice(0, this.groupColumns.length);\n        this.columns.forEach(function (col) {\n            _this.unforward.apply(_this, __spreadArray([col], Ranking.FORWARD_COLUMN_EVENTS, false));\n            col.detach();\n        });\n        var removed = this.columns.splice(0, this.columns.length);\n        this.fire([\n            Ranking.EVENT_REMOVE_COLUMN,\n            Ranking.EVENT_DIRTY_ORDER,\n            Ranking.EVENT_DIRTY_HEADER,\n            Ranking.EVENT_DIRTY_VALUES,\n            Ranking.EVENT_DIRTY,\n        ], removed);\n    };\n    Object.defineProperty(Ranking.prototype, \"flatColumns\", {\n        get: function () {\n            var r = [];\n            this.flatten(r, 0, Column.FLAT_ALL_COLUMNS);\n            return r.map(function (d) { return d.col; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Ranking.prototype.find = function (idOrFilter) {\n        var filter = typeof idOrFilter === 'string' ? function (col) { return col.id === idOrFilter; } : idOrFilter;\n        var r = this.flatColumns;\n        for (var _i = 0, r_1 = r; _i < r_1.length; _i++) {\n            var v = r_1[_i];\n            if (filter(v)) {\n                return v;\n            }\n        }\n        return null;\n    };\n    Ranking.prototype.isFiltered = function () {\n        return this.columns.some(function (d) { return d.isFiltered(); });\n    };\n    Ranking.prototype.filter = function (row) {\n        return this.columns.every(function (d) { return d.filter(row); });\n    };\n    Ranking.prototype.clearFilters = function () {\n        return this.columns.map(function (d) { return d.clearFilter(); }).some(function (d) { return d; });\n    };\n    Ranking.prototype.findMyRanker = function () {\n        return this;\n    };\n    Object.defineProperty(Ranking.prototype, \"fqid\", {\n        get: function () {\n            return this.id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * marks the header, values, or both as dirty such that the values are reevaluated\n     * @param type specify in more detail what is dirty, by default whole column\n     */\n    Ranking.prototype.markDirty = function (type) {\n        if (type === void 0) { type = 'all'; }\n        switch (type) {\n            case 'header':\n                return this.fire([Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY]);\n            case 'values':\n                return this.fire([Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY]);\n            default:\n                return this.fire([\n                    Column.EVENT_DIRTY_HEADER,\n                    Column.EVENT_DIRTY_VALUES,\n                    Column.EVENT_DIRTY_CACHES,\n                    Column.EVENT_DIRTY,\n                ]);\n        }\n    };\n    Ranking.EVENT_WIDTH_CHANGED = Column.EVENT_WIDTH_CHANGED;\n    Ranking.EVENT_FILTER_CHANGED = 'filterChanged';\n    Ranking.EVENT_LABEL_CHANGED = Column.EVENT_LABEL_CHANGED;\n    Ranking.EVENT_ADD_COLUMN = CompositeColumn.EVENT_ADD_COLUMN;\n    Ranking.EVENT_MOVE_COLUMN = CompositeColumn.EVENT_MOVE_COLUMN;\n    Ranking.EVENT_REMOVE_COLUMN = CompositeColumn.EVENT_REMOVE_COLUMN;\n    Ranking.EVENT_DIRTY = Column.EVENT_DIRTY;\n    Ranking.EVENT_DIRTY_HEADER = Column.EVENT_DIRTY_HEADER;\n    Ranking.EVENT_DIRTY_VALUES = Column.EVENT_DIRTY_VALUES;\n    Ranking.EVENT_DIRTY_CACHES = Column.EVENT_DIRTY_CACHES;\n    Ranking.EVENT_COLUMN_VISIBILITY_CHANGED = Column.EVENT_VISIBILITY_CHANGED;\n    Ranking.EVENT_SORT_CRITERIA_CHANGED = 'sortCriteriaChanged';\n    Ranking.EVENT_GROUP_CRITERIA_CHANGED = 'groupCriteriaChanged';\n    Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED = 'groupSortCriteriaChanged';\n    Ranking.EVENT_DIRTY_ORDER = 'dirtyOrder';\n    Ranking.EVENT_ORDER_CHANGED = 'orderChanged';\n    Ranking.EVENT_GROUPS_CHANGED = 'groupsChanged';\n    Ranking.FORWARD_COLUMN_EVENTS = suffix('.ranking', Column.EVENT_VISIBILITY_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY, Column.EVENT_VISIBILITY_CHANGED, Ranking.EVENT_FILTER_CHANGED);\n    Ranking.COLUMN_GROUP_SORT_DIRTY = suffix('.groupOrder', Column.EVENT_DIRTY_CACHES, 'sortMethodChanged');\n    Ranking.COLUMN_SORT_DIRTY = suffix('.order', Column.EVENT_DIRTY_CACHES);\n    Ranking.COLUMN_GROUP_DIRTY = suffix('.group', Column.EVENT_DIRTY_CACHES, 'groupingChanged');\n    return Ranking;\n}(AEventDispatcher));\nexport default Ranking;\nfunction equalCriteria(a, b) {\n    if (a.length !== b.length) {\n        return false;\n    }\n    return a.every(function (ai, i) {\n        var bi = b[i];\n        return ai.col === bi.col && ai.asc === bi.asc;\n    });\n}\n//# sourceMappingURL=Ranking.js.map","import get from 'lodash.get';\n/**\n * @internal\n */\nexport function isComplexAccessor(column) {\n    // something like a.b or a[4]\n    return typeof column === 'string' && (column.includes('.') || column.includes('['));\n}\n/**\n * @internal\n */\nexport function resolveValue(value, column) {\n    if (value != null && value.hasOwnProperty(column)) {\n        // well complex but a direct hit\n        return value[column];\n    }\n    return get(value, column);\n}\n/**\n * @internal\n */\nexport function rowComplexGetter(row, desc) {\n    return resolveValue(row.v, desc.column);\n}\n/**\n * simple row getter\n * @internal\n */\nexport function rowGetter(row, desc) {\n    return row.v[desc.column];\n}\n/**\n * @internal\n */\nexport function rowGuessGetter(row, desc) {\n    var column = desc.column;\n    if (isComplexAccessor(column)) {\n        return rowComplexGetter(row, desc);\n    }\n    return rowGetter(row, desc);\n}\n//# sourceMappingURL=accessor.js.map","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = function(date) {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","export const durationSecond = 1000;\nexport const durationMinute = durationSecond * 60;\nexport const durationHour = durationMinute * 60;\nexport const durationDay = durationHour * 24;\nexport const durationWeek = durationDay * 7;\nexport const durationMonth = durationDay * 30;\nexport const durationYear = durationDay * 365;\n","import interval from \"./interval.js\";\nimport {durationWeek} from \"./duration.js\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval.js\";\nimport {durationDay} from \"./duration.js\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nvar day = interval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval.js\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval.js\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import { Ranking, isNumberColumn, isSupportType, isMapAbleColumn, DEFAULT_COLOR, } from '../model';\nimport { colorPool, MAX_COLORS } from '../model/internal';\nimport { concat, equal, extent, range, resolveValue } from '../internal';\nimport { timeParse } from 'd3-time-format';\n/**\n * @internal\n */\nexport function cleanCategories(categories) {\n    // remove missing values\n    categories.delete(null);\n    categories.delete(undefined);\n    categories.delete('');\n    categories.delete('NA');\n    categories.delete('NaN');\n    categories.delete('na');\n    return Array.from(categories).map(String).sort();\n}\nfunction hasDifferentSizes(data) {\n    if (data.length === 0) {\n        return false;\n    }\n    var base = data[0].length;\n    return data.some(function (d) { return d != null && base !== (Array.isArray(d) ? d.length : -1); });\n}\nfunction isEmpty(v) {\n    return (v == null ||\n        (Array.isArray(v) && v.length === 0) ||\n        (v instanceof Set && v.size === 0) ||\n        (v instanceof Map && v.size === 0) ||\n        equal({}, v));\n}\nfunction deriveBaseType(value, all, column, options) {\n    if (value == null) {\n        console.warn('cannot derive from null value for column: ', column);\n        return null;\n    }\n    // primitive\n    if (typeof value === 'number') {\n        return {\n            type: 'number',\n            domain: extent(all()),\n        };\n    }\n    if (typeof value === 'boolean') {\n        return {\n            type: 'boolean',\n        };\n    }\n    if (value instanceof Date) {\n        return {\n            type: 'date',\n        };\n    }\n    var formats = Array.isArray(options.datePattern) ? options.datePattern : [options.datePattern];\n    for (var _i = 0, formats_1 = formats; _i < formats_1.length; _i++) {\n        var format = formats_1[_i];\n        var dateParse = timeParse(format);\n        if (dateParse(value) == null) {\n            continue;\n        }\n        return {\n            type: 'date',\n            dateParse: format,\n        };\n    }\n    var treatAsCategorical = typeof options.categoricalThreshold === 'function'\n        ? options.categoricalThreshold\n        : function (u, t) { return u < t * options.categoricalThreshold; };\n    if (typeof value === 'string') {\n        //maybe a categorical\n        var values = all();\n        var categories = new Set(values);\n        if (treatAsCategorical(categories.size, values.length)) {\n            return {\n                type: 'categorical',\n                categories: cleanCategories(categories),\n            };\n        }\n        return {\n            type: 'string',\n        };\n    }\n    if (typeof value === 'object' && value.alt != null && value.href != null) {\n        return {\n            type: 'link',\n        };\n    }\n    return null;\n}\nfunction deriveType(label, value, column, all, options) {\n    var base = {\n        type: 'string',\n        label: label,\n        column: column,\n    };\n    var primitive = deriveBaseType(value, all, column, options);\n    if (primitive != null) {\n        return Object.assign(base, primitive);\n    }\n    // set\n    if (value instanceof Set) {\n        var cats_1 = new Set();\n        for (var _i = 0, _a = all(); _i < _a.length; _i++) {\n            var value_1 = _a[_i];\n            if (!(value_1 instanceof Set)) {\n                continue;\n            }\n            value_1.forEach(function (vi) {\n                cats_1.add(String(vi));\n            });\n        }\n        return Object.assign(base, {\n            type: 'set',\n            categories: cleanCategories(cats_1),\n        });\n    }\n    // map\n    if (value instanceof Map) {\n        var first = Array.from(value.values()).find(function (d) { return !isEmpty(d); });\n        var mapAll = function () {\n            var r = [];\n            for (var _i = 0, _a = all(); _i < _a.length; _i++) {\n                var vi = _a[_i];\n                if (!(vi instanceof Map)) {\n                    continue;\n                }\n                vi.forEach(function (vii) {\n                    if (!isEmpty(vii)) {\n                        r.push(vii);\n                    }\n                });\n            }\n            return r;\n        };\n        var p = deriveBaseType(first, mapAll, column, options);\n        return Object.assign(base, p || {}, {\n            type: p ? \"\".concat(p.type, \"Map\") : 'stringMap',\n        });\n    }\n    // array\n    if (Array.isArray(value)) {\n        var values_1 = all();\n        var sameLength = !hasDifferentSizes(values_1);\n        if (sameLength) {\n            base.dataLength = value.length;\n        }\n        var first = value.find(function (v) { return !isEmpty(v); });\n        var p = deriveBaseType(first, function () { return concat(values_1).filter(function (d) { return !isEmpty(d); }); }, column, options);\n        if (p && p.type === 'categorical' && !sameLength) {\n            return Object.assign(base, p, {\n                type: 'set',\n            });\n        }\n        if (p || isEmpty(first)) {\n            return Object.assign(base, p || {}, {\n                type: p ? \"\".concat(p.type, \"s\") : 'strings',\n            });\n        }\n        if (typeof first === 'object' && first.key != null && first.value != null) {\n            // key,value pair map\n            var mapAll = function () {\n                var r = [];\n                for (var _i = 0, values_2 = values_1; _i < values_2.length; _i++) {\n                    var vi = values_2[_i];\n                    if (!Array.isArray(vi)) {\n                        continue;\n                    }\n                    for (var _a = 0, vi_1 = vi; _a < vi_1.length; _a++) {\n                        var vii = vi_1[_a];\n                        if (!isEmpty(vii)) {\n                            r.push(vii);\n                        }\n                    }\n                }\n                return r;\n            };\n            var p_1 = deriveBaseType(first.value, mapAll, column, options);\n            return Object.assign(base, p_1 || {}, {\n                type: p_1 ? \"\".concat(p_1.type, \"Map\") : 'stringMap',\n            });\n        }\n    }\n    // check boxplot\n    var bs = ['min', 'max', 'median', 'q1', 'q3'];\n    if (value !== null && typeof value === 'object' && bs.every(function (b) { return typeof value[b] === 'number'; })) {\n        //  boxplot\n        var vs = all();\n        return Object.assign(base, {\n            type: 'boxplot',\n            domain: [\n                vs.reduce(function (a, b) { return Math.min(a, b.min); }, Number.POSITIVE_INFINITY),\n                vs.reduce(function (a, b) { return Math.max(a, b.max); }, Number.NEGATIVE_INFINITY),\n            ],\n        });\n    }\n    if (value !== null && typeof value === 'object') {\n        // object map\n        var first = Object.keys(value)\n            .map(function (k) { return value[k]; })\n            .filter(function (d) { return !isEmpty(d); });\n        var mapAll = function () {\n            var r = [];\n            var _loop_1 = function (vi) {\n                if (vi == null) {\n                    return \"continue\";\n                }\n                Object.keys(vi).forEach(function (k) {\n                    var vii = vi[k];\n                    if (!isEmpty(vii)) {\n                        r.push(vii);\n                    }\n                });\n            };\n            for (var _i = 0, _a = all(); _i < _a.length; _i++) {\n                var vi = _a[_i];\n                _loop_1(vi);\n            }\n            return r;\n        };\n        var p = deriveBaseType(first, mapAll, column, options);\n        return Object.assign(base, p || {}, {\n            type: p ? \"\".concat(p.type, \"Map\") : 'stringMap',\n        });\n    }\n    console.log('cannot infer type of column:', column);\n    //unknown type\n    return base;\n}\nfunction selectColumns(existing, columns) {\n    var allNots = columns.every(function (d) { return d.startsWith('-'); });\n    if (!allNots) {\n        return columns;\n    }\n    // negate case, exclude columns that are given using -notation\n    var exclude = new Set(columns);\n    return existing.filter(function (d) { return !exclude.has(\"-\".concat(d)); });\n}\nfunction toLabel(key) {\n    if (typeof key === 'number') {\n        return \"Col \".concat(key + 1);\n    }\n    key = key.trim();\n    if (key.length === 0) {\n        return 'Unknown';\n    }\n    return key\n        .split(/[\\s]+/gm)\n        .map(function (k) { return (k.length === 0 ? k : \"\".concat(k[0].toUpperCase()).concat(k.slice(1))); })\n        .join(' ');\n}\nexport function deriveColumnDescriptions(data, options) {\n    if (options === void 0) { options = {}; }\n    var config = Object.assign({\n        categoricalThreshold: function (u, n) { return u <= MAX_COLORS && u < n * 0.7; },\n        columns: [],\n        datePattern: ['%x', '%Y-%m-%d', '%Y-%m-%dT%H:%M:%S.%LZ'],\n    }, options);\n    var r = [];\n    if (data.length === 0) {\n        // no data to derive something from\n        return r;\n    }\n    var first = data[0];\n    var columns = Array.isArray(first)\n        ? range(first.length)\n        : config.columns.length > 0\n            ? selectColumns(Object.keys(first), config.columns)\n            : Object.keys(first);\n    return columns.map(function (key) {\n        var v = resolveValue(first, key);\n        if (isEmpty(v)) {\n            // cannot derive something from null try other rows\n            var foundRow = data.find(function (row) { return !isEmpty(resolveValue(row, key)); });\n            v = foundRow ? foundRow[key] : null;\n        }\n        return deriveType(toLabel(key), v, key, function () { return data.map(function (d) { return resolveValue(d, key); }).filter(function (d) { return !isEmpty(d); }); }, config);\n    });\n}\n/**\n * assigns colors to columns if they are numbers and not yet defined\n * @param columns\n * @returns {IColumnDesc[]}\n */\nexport function deriveColors(columns) {\n    var colors = colorPool();\n    columns.forEach(function (col) {\n        if (isMapAbleColumn(col)) {\n            col.colorMapping = col.colorMapping || col.color || colors() || DEFAULT_COLOR;\n        }\n    });\n    return columns;\n}\nvar DEFAULT_EXPORT_OPTIONS = {\n    separator: '\\t',\n    newline: '\\n',\n    header: true,\n    quote: false,\n    quoteChar: '\"',\n    filter: function (c) { return !isSupportType(c); },\n    verboseColumnHeaders: false,\n};\nfunction createCSVExporter(columns, options) {\n    //optionally quote not numbers\n    var escape = new RegExp(\"[\".concat(options.quoteChar, \"]\"), 'g');\n    function quote(v, c) {\n        var l = String(v);\n        if ((options.quote || l.indexOf('\\n') >= 0) && (!c || !isNumberColumn(c))) {\n            return \"\".concat(options.quoteChar).concat(l.replace(escape, options.quoteChar + options.quoteChar)).concat(options.quoteChar);\n        }\n        return l;\n    }\n    function addHeader() {\n        return columns\n            .map(function (d) { return quote(\"\".concat(d.label).concat(options.verboseColumnHeaders && d.description ? \"\\n\".concat(d.description) : '')); })\n            .join(options.separator);\n    }\n    function addRow(row) {\n        return columns.map(function (c) { return quote(c.getExportValue(row, 'text'), c); }).join(options.separator);\n    }\n    return {\n        addHeader: addHeader,\n        addRow: addRow,\n    };\n}\n/**\n * utility to export a ranking to a table with the given separator\n * @param ranking\n * @param data\n * @param options\n * @returns {Promise<string>}\n */\nexport function exportRanking(ranking, data, options) {\n    if (options === void 0) { options = {}; }\n    var opts = Object.assign({}, DEFAULT_EXPORT_OPTIONS, options);\n    var columns = ranking.flatColumns.filter(function (c) { return opts.filter(c); });\n    var order = ranking.getOrder();\n    var exporter = createCSVExporter(columns, opts);\n    var r = [];\n    if (opts.header) {\n        r.push(exporter.addHeader());\n    }\n    data.forEach(function (row, i) {\n        r.push(exporter.addRow({ v: row, i: order[i] }));\n    });\n    return r.join(opts.newline);\n}\n/**\n * export table helper\n * @param columnsOrRanking\n * @param data\n * @param options\n * @returns {string}\n */\nexport function exportTable(columnsOrRanking, data, options) {\n    if (options === void 0) { options = {}; }\n    var opts = Object.assign({}, DEFAULT_EXPORT_OPTIONS, options);\n    var columns = columnsOrRanking instanceof Ranking ? columnsOrRanking.flatColumns.filter(function (c) { return opts.filter(c); }) : columnsOrRanking;\n    var exporter = createCSVExporter(columns, opts);\n    var r = [];\n    if (opts.header) {\n        r.push(exporter.addHeader());\n    }\n    data.forEach(function (row) {\n        r.push(exporter.addRow(row));\n    });\n    return r.join(opts.newline);\n}\n/** @internal */\nexport function map2Object(map) {\n    var r = {};\n    map.forEach(function (v, k) { return (r[k] = v); });\n    return r;\n}\n/** @internal */\nexport function object2Map(obj) {\n    var r = new Map();\n    for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\n        var k = _a[_i];\n        r.set(k, obj[k]);\n    }\n    return r;\n}\n/** @internal */\nexport function rangeSelection(provider, rankingId, dataIndex, relIndex, ctrlKey) {\n    var ranking = provider.getRankings().find(function (d) { return d.id === rankingId; });\n    if (!ranking) {\n        // no known reference\n        return false;\n    }\n    var selection = provider.getSelection();\n    if (selection.length === 0 || selection.includes(dataIndex)) {\n        return false; // no other or deselect\n    }\n    var order = ranking.getOrder();\n    var lookup = new Map(Array.from(order).map(function (d, i) { return [d, i]; }));\n    var distances = selection.map(function (d) {\n        var index = lookup.has(d) ? lookup.get(d) : Number.POSITIVE_INFINITY;\n        return { s: d, index: index, distance: Math.abs(relIndex - index) };\n    });\n    var nearest = distances.sort(function (a, b) { return a.distance - b.distance; })[0];\n    if (!isFinite(nearest.distance)) {\n        return false; // all outside\n    }\n    if (!ctrlKey) {\n        selection.splice(0, selection.length);\n        selection.push(nearest.s);\n    }\n    if (nearest.index < relIndex) {\n        for (var i = nearest.index + 1; i <= relIndex; ++i) {\n            selection.push(order[i]);\n        }\n    }\n    else {\n        for (var i = relIndex; i <= nearest.index; ++i) {\n            selection.push(order[i]);\n        }\n    }\n    provider.setSelection(selection);\n    return true;\n}\nexport function isPromiseLike(promiseLike) {\n    return promiseLike != null && typeof promiseLike.then === 'function';\n}\n//# sourceMappingURL=utils.js.map","/**\n * create a delayed call, can be called multiple times but only the last one at most delayed by timeToDelay will be executed\n * @param {(...args: any[]) => void} callback the callback to call\n * @param {number} timeToDelay delay the call in milliseconds\n * @param choose optional function to merge call context\n * @return {(...args: any[]) => any} a function that can be called with the same interface as the callback but delayed\n * @internal\n */\nexport default function debounce(callback, timeToDelay, choose) {\n    if (timeToDelay === void 0) { timeToDelay = 100; }\n    var tm = -1;\n    var ctx = null;\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (tm >= 0) {\n            clearTimeout(tm);\n            tm = -1;\n        }\n        var next = { self: this, args: args };\n        // compute current context\n        ctx = ctx && choose ? choose(ctx, next) : next;\n        tm = setTimeout(function () {\n            console.assert(ctx != null);\n            callback.apply(ctx.self, ctx.args);\n            ctx = null;\n        }, timeToDelay);\n    };\n}\n//# sourceMappingURL=debounce.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Category, SupportType } from './annotations';\nimport Column from './Column';\nimport { integrateDefaults } from './internal';\n/**\n * factory for creating a description creating a rank column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createRankDesc(label) {\n    if (label === void 0) { label = 'Rank'; }\n    return { type: 'rank', label: label };\n}\n/**\n * a rank column\n */\nvar RankColumn = /** @class */ (function (_super) {\n    __extends(RankColumn, _super);\n    function RankColumn(id, desc) {\n        return _super.call(this, id, integrateDefaults(desc, {\n            width: 50,\n        })) || this;\n    }\n    RankColumn.prototype.getLabel = function (row) {\n        return String(this.getValue(row));\n    };\n    RankColumn.prototype.getRaw = function (row) {\n        var ranking = this.findMyRanker();\n        if (!ranking) {\n            return -1;\n        }\n        return ranking.getRank(row.i);\n    };\n    RankColumn.prototype.getValue = function (row) {\n        var r = this.getRaw(row);\n        return r === -1 ? null : r;\n    };\n    Object.defineProperty(RankColumn.prototype, \"frozen\", {\n        get: function () {\n            return this.desc.frozen !== false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    RankColumn = __decorate([\n        SupportType(),\n        Category('support')\n    ], RankColumn);\n    return RankColumn;\n}(Column));\nexport default RankColumn;\n//# sourceMappingURL=RankColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Category, SupportType, toolbar } from './annotations';\nimport { ECompareValueType } from './interfaces';\nimport Column from './Column';\nimport ValueColumn from './ValueColumn';\nimport { integrateDefaults } from './internal';\n/**\n * factory for creating a description creating a rank column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createSelectionDesc(label) {\n    if (label === void 0) { label = 'Selections'; }\n    return { type: 'selection', label: label, fixed: true };\n}\n/**\n * a checkbox column for selections\n */\nvar SelectionColumn = /** @class */ (function (_super) {\n    __extends(SelectionColumn, _super);\n    function SelectionColumn(id, desc) {\n        var _this = _super.call(this, id, integrateDefaults(desc, {\n            width: 50,\n        })) || this;\n        _this.currentFilter = null;\n        return _this;\n    }\n    SelectionColumn_1 = SelectionColumn;\n    Object.defineProperty(SelectionColumn.prototype, \"frozen\", {\n        get: function () {\n            return this.desc.frozen !== false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SelectionColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([SelectionColumn_1.EVENT_SELECT, SelectionColumn_1.EVENT_FILTER_CHANGED]);\n    };\n    SelectionColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    SelectionColumn.prototype.setValue = function (row, value) {\n        var old = this.getValue(row);\n        if (old === value) {\n            return true;\n        }\n        return this.setImpl(row, value);\n    };\n    SelectionColumn.prototype.setValues = function (rows, value) {\n        if (rows.length === 0) {\n            return false;\n        }\n        if (this.desc.setterAll) {\n            this.desc.setterAll(rows, value);\n        }\n        this.fire(SelectionColumn_1.EVENT_SELECT, rows[0], value, rows);\n        return true;\n    };\n    SelectionColumn.prototype.setImpl = function (row, value) {\n        if (this.desc.setter) {\n            this.desc.setter(row.i, value);\n        }\n        this.fire(SelectionColumn_1.EVENT_SELECT, row.i, value);\n        return true;\n    };\n    SelectionColumn.prototype.toggleValue = function (row) {\n        var old = this.getValue(row);\n        this.setImpl(row, !old);\n        return !old;\n    };\n    SelectionColumn.prototype.toCompareValue = function (row) {\n        var v = this.getValue(row) === true;\n        return v ? 1 : 0;\n    };\n    SelectionColumn.prototype.toCompareValueType = function () {\n        return ECompareValueType.BINARY;\n    };\n    SelectionColumn.prototype.group = function (row) {\n        var isSelected = this.getValue(row);\n        return Object.assign({}, isSelected ? SelectionColumn_1.SELECTED_GROUP : SelectionColumn_1.NOT_SELECTED_GROUP);\n    };\n    SelectionColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.filter = this.currentFilter ? Array.from(this.currentFilter).sort(function (a, b) { return a - b; }) : null;\n        return r;\n    };\n    SelectionColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        if (dump.filter) {\n            var filter = dump.filter;\n            this.currentFilter = new Set(filter);\n        }\n        else {\n            this.currentFilter = null;\n        }\n    };\n    SelectionColumn.prototype.isFiltered = function () {\n        return this.currentFilter != null;\n    };\n    SelectionColumn.prototype.filter = function (row) {\n        if (!this.isFiltered()) {\n            return true;\n        }\n        var filter = this.currentFilter;\n        return filter.has(row.i);\n    };\n    SelectionColumn.prototype.getFilter = function () {\n        return this.currentFilter == null ? null : Array.from(this.currentFilter);\n    };\n    SelectionColumn.prototype.setFilter = function (filter) {\n        var newValue = filter ? new Set(filter) : null;\n        if (areSameSets(newValue, this.currentFilter)) {\n            return;\n        }\n        this.fire([SelectionColumn_1.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.currentFilter, (this.currentFilter = newValue));\n    };\n    SelectionColumn.prototype.clearFilter = function () {\n        var was = this.isFiltered();\n        this.setFilter(null);\n        return was;\n    };\n    var SelectionColumn_1;\n    SelectionColumn.EVENT_FILTER_CHANGED = 'filterChanged';\n    SelectionColumn.EVENT_SELECT = 'select';\n    SelectionColumn.SELECTED_GROUP = {\n        name: 'Selected',\n        color: 'orange',\n    };\n    SelectionColumn.NOT_SELECTED_GROUP = {\n        name: 'Unselected',\n        color: 'gray',\n    };\n    SelectionColumn = SelectionColumn_1 = __decorate([\n        SupportType(),\n        toolbar('sort', 'sortBy', 'group', 'groupBy', 'invertSelection', 'filterSelection'),\n        Category('support')\n    ], SelectionColumn);\n    return SelectionColumn;\n}(ValueColumn));\nexport default SelectionColumn;\nfunction areSameSets(a, b) {\n    var aL = a != null ? a.size : 0;\n    var bL = b != null ? b.size : 0;\n    if (aL !== bL) {\n        return false;\n    }\n    if (aL === 0 || bL === 0) {\n        return true;\n    }\n    return Array.from(a).every(function (d) { return b.has(d); });\n}\n//# sourceMappingURL=SelectionColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Category, SupportType } from './annotations';\nimport Column from './Column';\n/**\n * utility for creating an action description with optional label\n * @param label\n * @param actions\n * @param groupActions\n * @returns {{type: string, label: string}}\n */\nexport function createActionDesc(label, actions, groupActions) {\n    if (label === void 0) { label = 'actions'; }\n    if (actions === void 0) { actions = []; }\n    if (groupActions === void 0) { groupActions = []; }\n    return { type: 'actions', label: label, actions: actions, groupActions: groupActions, fixed: true };\n}\n/**\n * a default column with no values\n */\nvar ActionColumn = /** @class */ (function (_super) {\n    __extends(ActionColumn, _super);\n    function ActionColumn(id, desc) {\n        var _this = _super.call(this, id, desc) || this;\n        _this.actions = desc.actions || [];\n        _this.groupActions = desc.groupActions || [];\n        return _this;\n    }\n    ActionColumn.prototype.getLabel = function () {\n        return '';\n    };\n    ActionColumn.prototype.getValue = function () {\n        return '';\n    };\n    ActionColumn.prototype.compare = function () {\n        return 0; //can't compare\n    };\n    ActionColumn = __decorate([\n        SupportType(),\n        Category('support')\n    ], ActionColumn);\n    return ActionColumn;\n}(Column));\nexport default ActionColumn;\n//# sourceMappingURL=ActionColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Category, toolbar, dialogAddons } from './annotations';\nimport Column from './Column';\nimport { defaultGroup, ECompareValueType, othersGroup, } from './interfaces';\nimport { missingGroup, isMissingValue } from './missing';\nimport ValueColumn from './ValueColumn';\nimport { equal, isSeqEmpty } from '../internal';\nimport { integrateDefaults } from './internal';\nexport var EAlignment;\n(function (EAlignment) {\n    EAlignment[\"left\"] = \"left\";\n    EAlignment[\"center\"] = \"center\";\n    EAlignment[\"right\"] = \"right\";\n})(EAlignment || (EAlignment = {}));\nexport var EStringGroupCriteriaType;\n(function (EStringGroupCriteriaType) {\n    EStringGroupCriteriaType[\"value\"] = \"value\";\n    EStringGroupCriteriaType[\"startsWith\"] = \"startsWith\";\n    EStringGroupCriteriaType[\"regex\"] = \"regex\";\n})(EStringGroupCriteriaType || (EStringGroupCriteriaType = {}));\n/**\n * a string column with optional alignment\n */\nvar StringColumn = /** @class */ (function (_super) {\n    __extends(StringColumn, _super);\n    function StringColumn(id, desc) {\n        var _this = this;\n        var _a;\n        _this = _super.call(this, id, integrateDefaults(desc, {\n            width: 200,\n        })) || this;\n        _this.currentFilter = null;\n        _this.currentGroupCriteria = {\n            type: EStringGroupCriteriaType.startsWith,\n            values: [],\n        };\n        _this.alignment = (_a = desc.alignment) !== null && _a !== void 0 ? _a : EAlignment.left;\n        _this.escape = desc.escape !== false;\n        return _this;\n    }\n    StringColumn_1 = StringColumn;\n    StringColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([StringColumn_1.EVENT_GROUPING_CHANGED, StringColumn_1.EVENT_FILTER_CHANGED]);\n    };\n    StringColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    StringColumn.prototype.getValue = function (row) {\n        var v = _super.prototype.getValue.call(this, row);\n        return isMissingValue(v) ? null : String(v);\n    };\n    StringColumn.prototype.getLabel = function (row) {\n        return this.getValue(row) || '';\n    };\n    StringColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        if (this.currentFilter instanceof RegExp) {\n            r.filter = \"REGEX:\".concat(this.currentFilter.source);\n        }\n        else {\n            r.filter = this.currentFilter;\n        }\n        if (this.currentGroupCriteria) {\n            var _a = this.currentGroupCriteria, type_1 = _a.type, values = _a.values;\n            r.groupCriteria = {\n                type: type_1,\n                values: values.map(function (value) {\n                    return value instanceof RegExp && type_1 === EStringGroupCriteriaType.regex ? value.source : value;\n                }),\n            };\n        }\n        return r;\n    };\n    StringColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        if (dump.filter) {\n            var filter = dump.filter;\n            if (typeof filter === 'string') {\n                // compatibility case\n                if (filter.startsWith('REGEX:')) {\n                    this.currentFilter = {\n                        filter: new RegExp(filter.slice(6), 'm'),\n                        filterMissing: false,\n                    };\n                }\n                else if (filter === StringColumn_1.FILTER_MISSING) {\n                    this.currentFilter = {\n                        filter: null,\n                        filterMissing: true,\n                    };\n                }\n                else {\n                    this.currentFilter = {\n                        filter: filter,\n                        filterMissing: false,\n                    };\n                }\n            }\n            else {\n                this.currentFilter = {\n                    filter: filter.filter && filter.filter.startsWith('REGEX:')\n                        ? new RegExp(filter.slice(6), 'm')\n                        : filter.filter || '',\n                    filterMissing: filter.filterMissing === true,\n                };\n            }\n        }\n        else {\n            this.currentFilter = null;\n        }\n        // tslint:disable-next-line: early-exit\n        if (dump.groupCriteria) {\n            var _a = dump.groupCriteria, type_2 = _a.type, values = _a.values;\n            this.currentGroupCriteria = {\n                type: type_2,\n                values: values.map(function (value) {\n                    return type_2 === EStringGroupCriteriaType.regex ? new RegExp(value, 'm') : value;\n                }),\n            };\n        }\n    };\n    StringColumn.prototype.isFiltered = function () {\n        return this.currentFilter != null;\n    };\n    StringColumn.prototype.filter = function (row) {\n        if (!this.isFiltered()) {\n            return true;\n        }\n        var r = this.getLabel(row);\n        var filter = this.currentFilter;\n        var ff = filter.filter;\n        if (r == null || r.trim() === '') {\n            return !filter.filterMissing;\n        }\n        if (!ff) {\n            return true;\n        }\n        if (ff instanceof RegExp) {\n            return r !== '' && r.match(ff) != null; // You can not use RegExp.test(), because of https://stackoverflow.com/a/6891667\n        }\n        return r !== '' && r.toLowerCase().includes(ff.toLowerCase());\n    };\n    StringColumn.prototype.getFilter = function () {\n        return this.currentFilter;\n    };\n    StringColumn.prototype.setFilter = function (filter) {\n        if (filter === this.currentFilter) {\n            return;\n        }\n        var current = this.currentFilter || { filter: null, filterMissing: false };\n        var target = filter || { filter: null, filterMissing: false };\n        if (current.filterMissing === target.filterMissing &&\n            (current.filter === target.filter ||\n                (current.filter instanceof RegExp &&\n                    target.filter instanceof RegExp &&\n                    current.filter.source === target.filter.source))) {\n            return;\n        }\n        this.fire([StringColumn_1.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.currentFilter, (this.currentFilter = filter));\n    };\n    StringColumn.prototype.clearFilter = function () {\n        var was = this.isFiltered();\n        this.setFilter(null);\n        return was;\n    };\n    StringColumn.prototype.getGroupCriteria = function () {\n        return this.currentGroupCriteria;\n    };\n    StringColumn.prototype.setGroupCriteria = function (value) {\n        if (equal(this.currentGroupCriteria, value) || value == null) {\n            return;\n        }\n        var bak = this.getGroupCriteria();\n        this.currentGroupCriteria = value;\n        this.fire([StringColumn_1.EVENT_GROUPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, value);\n    };\n    StringColumn.prototype.group = function (row) {\n        if (this.getValue(row) == null) {\n            return Object.assign({}, missingGroup);\n        }\n        if (!this.currentGroupCriteria) {\n            return Object.assign({}, othersGroup);\n        }\n        var value = this.getLabel(row);\n        if (!value) {\n            return Object.assign({}, missingGroup);\n        }\n        var _a = this.currentGroupCriteria, type = _a.type, values = _a.values;\n        if (type === EStringGroupCriteriaType.value) {\n            return {\n                name: value,\n                color: defaultGroup.color,\n            };\n        }\n        if (type === EStringGroupCriteriaType.startsWith) {\n            for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n                var groupValue = values_1[_i];\n                if (typeof groupValue !== 'string' || !value.startsWith(groupValue)) {\n                    continue;\n                }\n                return {\n                    name: groupValue,\n                    color: defaultGroup.color,\n                };\n            }\n            return Object.assign({}, othersGroup);\n        }\n        for (var _b = 0, values_2 = values; _b < values_2.length; _b++) {\n            var groupValue = values_2[_b];\n            if (!(groupValue instanceof RegExp) || !groupValue.test(value)) {\n                continue;\n            }\n            return {\n                name: groupValue.source,\n                color: defaultGroup.color,\n            };\n        }\n        return Object.assign({}, othersGroup);\n    };\n    StringColumn.prototype.toCompareValue = function (row) {\n        var v = this.getValue(row);\n        return v === '' || v == null ? null : v.toLowerCase();\n    };\n    StringColumn.prototype.toCompareValueType = function () {\n        return ECompareValueType.STRING;\n    };\n    StringColumn.prototype.toCompareGroupValue = function (rows, _group, valueCache) {\n        var _this = this;\n        if (isSeqEmpty(rows)) {\n            return null;\n        }\n        // take the smallest one\n        if (valueCache) {\n            return valueCache.reduce(function (acc, v) { return (acc == null || v < acc ? v : acc); }, null);\n        }\n        return rows.reduce(function (acc, d) {\n            var v = _this.getValue(d);\n            return acc == null || (v != null && v < acc) ? v : acc;\n        }, null);\n    };\n    StringColumn.prototype.toCompareGroupValueType = function () {\n        return ECompareValueType.STRING;\n    };\n    var StringColumn_1;\n    StringColumn.EVENT_FILTER_CHANGED = 'filterChanged';\n    StringColumn.EVENT_GROUPING_CHANGED = 'groupingChanged';\n    //magic key for filtering missing ones\n    StringColumn.FILTER_MISSING = '__FILTER_MISSING';\n    StringColumn = StringColumn_1 = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'search', 'groupBy', 'sortGroupBy', 'filterString'),\n        dialogAddons('group', 'groupString'),\n        Category('string')\n    ], StringColumn);\n    return StringColumn;\n}(ValueColumn));\nexport default StringColumn;\n//# sourceMappingURL=StringColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport Column from './Column';\nimport StringColumn from './StringColumn';\n/**\n * a string column in which the values can be edited locally\n */\nvar AnnotateColumn = /** @class */ (function (_super) {\n    __extends(AnnotateColumn, _super);\n    function AnnotateColumn() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.annotations = new Map();\n        return _this;\n    }\n    AnnotateColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([AnnotateColumn.EVENT_VALUE_CHANGED]);\n    };\n    AnnotateColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    AnnotateColumn.prototype.getValue = function (row) {\n        if (this.annotations.has(row.i)) {\n            return this.annotations.get(row.i);\n        }\n        return _super.prototype.getValue.call(this, row);\n    };\n    AnnotateColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.annotations = {};\n        this.annotations.forEach(function (v, k) {\n            r.annotations[k] = v;\n        });\n        return r;\n    };\n    AnnotateColumn.prototype.restore = function (dump, factory) {\n        var _this = this;\n        _super.prototype.restore.call(this, dump, factory);\n        if (!dump.annotations) {\n            return;\n        }\n        Object.keys(dump.annotations).forEach(function (k) {\n            _this.annotations.set(Number(k), dump.annotations[k]);\n        });\n    };\n    AnnotateColumn.prototype.setValue = function (row, value) {\n        var old = this.getValue(row);\n        if (old === value) {\n            return true;\n        }\n        if (value === '' || value == null) {\n            this.annotations.delete(row.i);\n        }\n        else {\n            this.annotations.set(row.i, value);\n        }\n        this.fire([AnnotateColumn.EVENT_VALUE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], row.i, old, value);\n        return true;\n    };\n    AnnotateColumn.EVENT_VALUE_CHANGED = 'valueChanged';\n    return AnnotateColumn;\n}(StringColumn));\nexport default AnnotateColumn;\n//# sourceMappingURL=AnnotateColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Category, toolbar } from './annotations';\nimport CategoricalColumn from './CategoricalColumn';\nimport Column from './Column';\nimport ValueColumn from './ValueColumn';\nimport { ECompareValueType } from './interfaces';\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION } from './CategoricalColorMappingFunction';\nimport { integrateDefaults } from './internal';\nimport { missingGroup } from './missing';\nimport { isCategoryIncluded, isEqualCategoricalFilter } from './internalCategorical';\n/**\n * a string column with optional alignment\n */\nvar BooleanColumn = /** @class */ (function (_super) {\n    __extends(BooleanColumn, _super);\n    function BooleanColumn(id, desc) {\n        var _this = this;\n        var _a, _b;\n        _this = _super.call(this, id, integrateDefaults(desc, {\n            width: 30,\n            renderer: 'categorical',\n            groupRenderer: 'categorical',\n            summaryRenderer: 'categorical',\n        })) || this;\n        _this.currentFilter = null;\n        _this.categories = [\n            {\n                name: (_a = desc.trueMarker) !== null && _a !== void 0 ? _a : '',\n                color: BooleanColumn_1.GROUP_TRUE.color,\n                label: BooleanColumn_1.GROUP_TRUE.name,\n                value: 0,\n            },\n            {\n                name: (_b = desc.falseMarker) !== null && _b !== void 0 ? _b : '',\n                color: BooleanColumn_1.GROUP_FALSE.color,\n                label: BooleanColumn_1.GROUP_FALSE.name,\n                value: 1,\n            },\n        ];\n        _this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n        return _this;\n    }\n    BooleanColumn_1 = BooleanColumn;\n    BooleanColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([BooleanColumn_1.EVENT_COLOR_MAPPING_CHANGED, BooleanColumn_1.EVENT_FILTER_CHANGED]);\n    };\n    BooleanColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    Object.defineProperty(BooleanColumn.prototype, \"dataLength\", {\n        get: function () {\n            return this.categories.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BooleanColumn.prototype, \"labels\", {\n        get: function () {\n            return this.categories.map(function (d) { return d.label; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BooleanColumn.prototype.getValue = function (row) {\n        var v = _super.prototype.getValue.call(this, row);\n        if (typeof v === 'undefined' || v == null) {\n            return null;\n        }\n        return v === true || v === 'true' || v === 'yes' || v === 'x';\n    };\n    BooleanColumn.prototype.getCategoryOfBoolean = function (v) {\n        return v == null ? null : this.categories[v ? 0 : 1];\n    };\n    BooleanColumn.prototype.getCategory = function (row) {\n        var v = this.getValue(row);\n        return v == null ? null : this.categories[v ? 0 : 1];\n    };\n    BooleanColumn.prototype.getCategories = function (row) {\n        return [this.getCategory(row)];\n    };\n    BooleanColumn.prototype.iterCategory = function (row) {\n        return [this.getCategory(row)];\n    };\n    BooleanColumn.prototype.getColor = function (row) {\n        return CategoricalColumn.prototype.getColor.call(this, row);\n    };\n    BooleanColumn.prototype.getLabel = function (row) {\n        return CategoricalColumn.prototype.getLabel.call(this, row);\n    };\n    BooleanColumn.prototype.getLabels = function (row) {\n        return CategoricalColumn.prototype.getLabels.call(this, row);\n    };\n    BooleanColumn.prototype.getValues = function (row) {\n        return CategoricalColumn.prototype.getValues.call(this, row);\n    };\n    BooleanColumn.prototype.getMap = function (row) {\n        return CategoricalColumn.prototype.getMap.call(this, row);\n    };\n    BooleanColumn.prototype.getMapLabel = function (row) {\n        return CategoricalColumn.prototype.getMapLabel.call(this, row);\n    };\n    BooleanColumn.prototype.getSet = function (row) {\n        var v = this.getValue(row);\n        var r = new Set();\n        if (v != null) {\n            r.add(this.categories[v ? 0 : 1]);\n        }\n        return r;\n    };\n    BooleanColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.colorMapping = this.colorMapping.toJSON();\n        if (this.currentFilter != null) {\n            r.filter = this.currentFilter;\n        }\n        return r;\n    };\n    BooleanColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\n        if (typeof dump.filter === 'boolean') {\n            this.currentFilter = {\n                filter: [this.getCategoryOfBoolean(dump.filter).name],\n                filterMissing: false,\n            };\n        }\n        else if (typeof dump.filter !== 'undefined') {\n            this.currentFilter = dump.filter;\n        }\n    };\n    BooleanColumn.prototype.getColorMapping = function () {\n        return this.colorMapping.clone();\n    };\n    BooleanColumn.prototype.setColorMapping = function (mapping) {\n        if (this.colorMapping.eq(mapping)) {\n            return;\n        }\n        this.fire([\n            CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY,\n        ], this.colorMapping.clone(), (this.colorMapping = mapping));\n    };\n    BooleanColumn.prototype.isFiltered = function () {\n        return this.currentFilter != null;\n    };\n    BooleanColumn.prototype.filter = function (row) {\n        return isCategoryIncluded(this.currentFilter, this.getCategory(row));\n    };\n    BooleanColumn.prototype.getFilter = function () {\n        return this.currentFilter == null ? null : Object.assign({}, this.currentFilter);\n    };\n    BooleanColumn.prototype.setFilter = function (filter) {\n        var f = typeof filter === 'boolean'\n            ? { filter: [this.getCategoryOfBoolean(filter).name], filterMissing: false }\n            : filter;\n        if (isEqualCategoricalFilter(this.currentFilter, f)) {\n            return;\n        }\n        this.fire([BooleanColumn_1.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.currentFilter, (this.currentFilter = f));\n    };\n    BooleanColumn.prototype.clearFilter = function () {\n        var was = this.isFiltered();\n        this.setFilter(null);\n        return was;\n    };\n    BooleanColumn.prototype.toCompareValue = function (row) {\n        var v = this.getValue(row);\n        if (v == null) {\n            return NaN;\n        }\n        return v ? 1 : 0;\n    };\n    BooleanColumn.prototype.toCompareValueType = function () {\n        return ECompareValueType.BINARY;\n    };\n    BooleanColumn.prototype.group = function (row) {\n        var v = this.getValue(row);\n        if (v == null) {\n            return Object.assign({}, missingGroup);\n        }\n        return Object.assign({}, v ? BooleanColumn_1.GROUP_TRUE : BooleanColumn_1.GROUP_FALSE);\n    };\n    var BooleanColumn_1;\n    BooleanColumn.EVENT_FILTER_CHANGED = 'filterChanged';\n    BooleanColumn.EVENT_COLOR_MAPPING_CHANGED = 'colorMappingChanged';\n    BooleanColumn.GROUP_TRUE = { name: 'True', color: '#444444' };\n    BooleanColumn.GROUP_FALSE = { name: 'False', color: '#dddddd' };\n    BooleanColumn = BooleanColumn_1 = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'group', 'groupBy', 'filterCategorical', 'colorMappedCategorical'),\n        Category('categorical')\n    ], BooleanColumn);\n    return BooleanColumn;\n}(ValueColumn));\nexport default BooleanColumn;\n//# sourceMappingURL=BooleanColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Category } from './annotations';\nimport ValueColumn from './ValueColumn';\nimport { empty } from '../internal';\nvar ArrayColumn = /** @class */ (function (_super) {\n    __extends(ArrayColumn, _super);\n    function ArrayColumn(id, desc) {\n        var _this = _super.call(this, id, desc) || this;\n        _this._dataLength = desc.dataLength == null || Number.isNaN(desc.dataLength) ? null : desc.dataLength;\n        _this.originalLabels =\n            desc.labels || empty(_this._dataLength == null ? 0 : _this._dataLength).map(function (_d, i) { return \"Column \".concat(i); });\n        return _this;\n    }\n    Object.defineProperty(ArrayColumn.prototype, \"labels\", {\n        get: function () {\n            return this.originalLabels;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ArrayColumn.prototype, \"dataLength\", {\n        get: function () {\n            return this._dataLength;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ArrayColumn.prototype.getValue = function (row) {\n        var r = this.getValues(row);\n        return r.every(function (d) { return d === null; }) ? null : r;\n    };\n    ArrayColumn.prototype.getValues = function (row) {\n        var r = _super.prototype.getValue.call(this, row);\n        return r == null ? [] : r;\n    };\n    ArrayColumn.prototype.getLabels = function (row) {\n        return this.getValues(row).map(String);\n    };\n    ArrayColumn.prototype.getLabel = function (row) {\n        var v = this.getLabels(row);\n        if (v.length === 0) {\n            return '';\n        }\n        return v.toString();\n    };\n    ArrayColumn.prototype.getMap = function (row) {\n        var labels = this.labels;\n        return this.getValues(row).map(function (value, i) { return ({ key: labels[i], value: value }); });\n    };\n    ArrayColumn.prototype.getMapLabel = function (row) {\n        var labels = this.labels;\n        return this.getLabels(row).map(function (value, i) { return ({ key: labels[i], value: value }); });\n    };\n    ArrayColumn = __decorate([\n        Category('array')\n    ], ArrayColumn);\n    return ArrayColumn;\n}(ValueColumn));\nexport default ArrayColumn;\n//# sourceMappingURL=ArrayColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport ArrayColumn from './ArrayColumn';\nimport CategoricalColumn from './CategoricalColumn';\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION } from './CategoricalColorMappingFunction';\nimport { DEFAULT_COLOR, } from './Column';\nimport { chooseUIntByDataLength, integrateDefaults } from './internal';\nimport { toCategory } from './internalCategorical';\nimport { toolbar } from './annotations';\nvar BooleansColumn = /** @class */ (function (_super) {\n    __extends(BooleansColumn, _super);\n    function BooleansColumn(id, desc) {\n        var _this = _super.call(this, id, integrateDefaults(desc, {\n            renderer: 'upset',\n        })) || this;\n        _this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n        return _this;\n    }\n    BooleansColumn_1 = BooleansColumn;\n    Object.defineProperty(BooleansColumn.prototype, \"categories\", {\n        get: function () {\n            return this.labels.map(function (d, i) { return toCategory(d, i); });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BooleansColumn.prototype.getSet = function (row) {\n        var vs = this.getValues(row);\n        return new Set(this.categories.filter(function (_, i) { return vs[i]; }));\n    };\n    BooleansColumn.prototype.toCompareValue = function (row) {\n        var v = this.getValue(row);\n        if (v == null) {\n            return NaN;\n        }\n        return v.reduce(function (a, b) { return a + (b ? 1 : 0); }, 0);\n    };\n    BooleansColumn.prototype.toCompareValueType = function () {\n        return chooseUIntByDataLength(this.dataLength);\n    };\n    BooleansColumn.prototype.getCategories = function (row) {\n        var categories = this.categories;\n        return _super.prototype.getValues.call(this, row).map(function (v, i) {\n            return v ? categories[i] : null;\n        });\n    };\n    BooleansColumn.prototype.iterCategory = function (row) {\n        return this.getCategories(row);\n    };\n    BooleansColumn.prototype.getColors = function (row) {\n        var _this = this;\n        return this.getCategories(row).map(function (d) { return (d ? _this.colorMapping.apply(d) : DEFAULT_COLOR); });\n    };\n    BooleansColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([BooleansColumn_1.EVENT_COLOR_MAPPING_CHANGED]);\n    };\n    BooleansColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    BooleansColumn.prototype.getColorMapping = function () {\n        return this.colorMapping.clone();\n    };\n    BooleansColumn.prototype.setColorMapping = function (mapping) {\n        return CategoricalColumn.prototype.setColorMapping.call(this, mapping);\n    };\n    BooleansColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.colorMapping = this.colorMapping.toJSON();\n        return r;\n    };\n    BooleansColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\n    };\n    var BooleansColumn_1;\n    BooleansColumn.EVENT_COLOR_MAPPING_CHANGED = CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED;\n    BooleansColumn = BooleansColumn_1 = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy')\n    ], BooleansColumn);\n    return BooleansColumn;\n}(ArrayColumn));\nexport default BooleansColumn;\n//# sourceMappingURL=BooleansColumn.js.map","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","import {ticks} from \"d3-array\";\nimport {format} from \"d3-format\";\nimport nice from \"./nice.js\";\nimport {copy, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformLog(x) {\n  return Math.log(x);\n}\n\nfunction transformExp(x) {\n  return Math.exp(x);\n}\n\nfunction transformLogn(x) {\n  return -Math.log(-x);\n}\n\nfunction transformExpn(x) {\n  return -Math.exp(-x);\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10\n      : base === Math.E ? Math.exp\n      : function(x) { return Math.pow(base, x); };\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log\n      : base === 10 && Math.log10\n      || base === 2 && Math.log2\n      || (base = Math.log(base), function(x) { return Math.log(x) / base; });\n}\n\nfunction reflect(f) {\n  return function(x) {\n    return -f(-x);\n  };\n}\n\nexport function loggish(transform) {\n  var scale = transform(transformLog, transformExp),\n      domain = scale.domain,\n      base = 10,\n      logs,\n      pows;\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n    if (domain()[0] < 0) {\n      logs = reflect(logs), pows = reflect(pows);\n      transform(transformLogn, transformExpn);\n    } else {\n      transform(transformLog, transformExp);\n    }\n    return scale;\n  }\n\n  scale.base = function(_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = function(count) {\n    var d = domain(),\n        u = d[0],\n        v = d[d.length - 1],\n        r;\n\n    if (r = v < u) i = u, u = v, v = i;\n\n    var i = logs(u),\n        j = logs(v),\n        p,\n        k,\n        t,\n        n = count == null ? 10 : +count,\n        z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.floor(i), j = Math.ceil(j);\n      if (u > 0) for (; i <= j; ++i) {\n        for (k = 1, p = pows(i); k < base; ++k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i <= j; ++i) {\n        for (k = base - 1, p = pows(i); k >= 1; --k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n      if (z.length * 2 < n) z = ticks(u, v, n);\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\n    if (typeof specifier !== \"function\") specifier = format(specifier);\n    if (count === Infinity) return specifier;\n    if (count == null) count = 10;\n    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n    return function(d) {\n      var i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = function() {\n    return domain(nice(domain(), {\n      floor: function(x) { return pows(Math.floor(logs(x))); },\n      ceil: function(x) { return pows(Math.ceil(logs(x))); }\n    }));\n  };\n\n  return scale;\n}\n\nexport default function log() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, log()).base(scale.base());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","export default function nice(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {linearish} from \"./linear.js\";\nimport {copy, identity, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformPow(exponent) {\n  return function(x) {\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n  };\n}\n\nfunction transformSqrt(x) {\n  return x < 0 ? -Math.sqrt(-x) : Math.sqrt(x);\n}\n\nfunction transformSquare(x) {\n  return x < 0 ? -x * x : x * x;\n}\n\nexport function powish(transform) {\n  var scale = transform(identity, identity),\n      exponent = 1;\n\n  function rescale() {\n    return exponent === 1 ? transform(identity, identity)\n        : exponent === 0.5 ? transform(transformSqrt, transformSquare)\n        : transform(transformPow(exponent), transformPow(1 / exponent));\n  }\n\n  scale.exponent = function(_) {\n    return arguments.length ? (exponent = +_, rescale()) : exponent;\n  };\n\n  return linearish(scale);\n}\n\nexport default function pow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, pow()).exponent(scale.exponent());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n\nexport function sqrt() {\n  return pow.apply(null, arguments).exponent(0.5);\n}\n","import { scaleLinear, scaleLog, scalePow, scaleSqrt } from 'd3-scale';\nimport { similar } from '../internal';\nfunction toScale(type) {\n    if (type === void 0) { type = 'linear'; }\n    switch (type) {\n        case 'log':\n            return scaleLog().clamp(true);\n        case 'sqrt':\n            return scaleSqrt().clamp(true);\n        case 'pow1.1':\n            return scalePow().exponent(1.1).clamp(true);\n        case 'pow2':\n            return scalePow().exponent(2).clamp(true);\n        case 'pow3':\n            return scalePow().exponent(3).clamp(true);\n        default:\n            return scaleLinear().clamp(true);\n    }\n}\nfunction isSame(a, b) {\n    if (a.length !== b.length) {\n        return false;\n    }\n    return a.every(function (ai, i) { return similar(ai, b[i], 0.0001); });\n}\nfunction fixDomain(domain, type) {\n    if (type === 'log' && domain[0] === 0) {\n        domain[0] = 0.0000001; //0 is bad\n    }\n    // replace Null with NaN since D3 converts them to 0\n    if (domain[0] == null) {\n        domain[0] = Number.NaN;\n    }\n    if (domain[1] == null) {\n        domain[1] = Number.NaN;\n    }\n    return domain;\n}\n/**\n * a mapping function based on a d3 scale (linear, sqrt, log)\n */\nvar ScaleMappingFunction = /** @class */ (function () {\n    function ScaleMappingFunction(domain, type, range) {\n        if (domain === void 0) { domain = [0, 1]; }\n        if (type === void 0) { type = 'linear'; }\n        if (range === void 0) { range = [0, 1]; }\n        var _a;\n        if (!domain || Array.isArray(domain)) {\n            this.type = type;\n            this.s = toScale(type)\n                .domain(fixDomain((_a = domain) !== null && _a !== void 0 ? _a : [0, 1], this.type))\n                .range(range);\n        }\n        else {\n            var dump = domain;\n            this.type = dump.type;\n            this.s = toScale(dump.type).domain(fixDomain(dump.domain, dump.type)).range(dump.range);\n        }\n    }\n    Object.defineProperty(ScaleMappingFunction.prototype, \"domain\", {\n        get: function () {\n            return this.s.domain();\n        },\n        set: function (domain) {\n            this.s.domain(fixDomain(domain, this.type));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ScaleMappingFunction.prototype, \"range\", {\n        get: function () {\n            return this.s.range();\n        },\n        set: function (range) {\n            this.s.range(range);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ScaleMappingFunction.prototype.getRange = function (format) {\n        return [format(this.invert(0)), format(this.invert(1))];\n    };\n    ScaleMappingFunction.prototype.apply = function (v) {\n        return this.s(v);\n    };\n    ScaleMappingFunction.prototype.invert = function (r) {\n        return this.s.invert(r);\n    };\n    Object.defineProperty(ScaleMappingFunction.prototype, \"scaleType\", {\n        get: function () {\n            return this.type;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ScaleMappingFunction.prototype.toJSON = function () {\n        return {\n            type: this.type,\n            domain: this.domain,\n            range: this.range,\n        };\n    };\n    ScaleMappingFunction.prototype.eq = function (other) {\n        if (!(other instanceof ScaleMappingFunction)) {\n            return false;\n        }\n        var that = other;\n        return that.type === this.type && isSame(this.domain, that.domain) && isSame(this.range, that.range);\n    };\n    ScaleMappingFunction.prototype.clone = function () {\n        return new ScaleMappingFunction(this.domain, this.type, this.range);\n    };\n    return ScaleMappingFunction;\n}());\nexport { ScaleMappingFunction };\n/**\n * a mapping function based on a custom user function using 'value' as the current value\n */\nvar ScriptMappingFunction = /** @class */ (function () {\n    function ScriptMappingFunction(domain, code) {\n        if (domain === void 0) { domain = [0, 1]; }\n        if (code === void 0) { code = 'return this.linear(value,this.value_min,this.value_max);'; }\n        var _a;\n        if (!domain || Array.isArray(domain)) {\n            this.domain = (_a = domain) !== null && _a !== void 0 ? _a : [0, 1];\n        }\n        else {\n            var dump = domain;\n            this.domain = dump.domain;\n            code = dump.code;\n        }\n        this.code = typeof code === 'string' ? code : code.toString();\n        // eslint-disable-next-line no-new-func\n        this.f = typeof code === 'function' ? code : new Function('value', code);\n    }\n    ScriptMappingFunction.prototype.getRange = function () {\n        return ['?', '?'];\n    };\n    ScriptMappingFunction.prototype.apply = function (v) {\n        var min = this.domain[0], max = this.domain[this.domain.length - 1];\n        var r = this.f.call({\n            value_min: min,\n            value_max: max,\n            value_range: max - min,\n            value_domain: this.domain.slice(),\n            linear: function (v, mi, ma) { return (v - mi) / (ma - mi); },\n        }, v);\n        if (typeof r === 'number') {\n            return Math.max(Math.min(r, 1), 0);\n        }\n        return NaN;\n    };\n    ScriptMappingFunction.prototype.toJSON = function () {\n        return {\n            type: 'script',\n            code: this.code,\n            domain: this.domain,\n        };\n    };\n    ScriptMappingFunction.prototype.eq = function (other) {\n        if (!(other instanceof ScriptMappingFunction)) {\n            return false;\n        }\n        var that = other;\n        return that.code === this.code || that.f === this.f;\n    };\n    ScriptMappingFunction.prototype.clone = function () {\n        return new ScriptMappingFunction(this.domain, this.f);\n    };\n    return ScriptMappingFunction;\n}());\nexport { ScriptMappingFunction };\n/**\n * @internal\n */\nexport function createMappingFunction(types) {\n    return function (dump) {\n        if (typeof dump === 'function') {\n            return new ScriptMappingFunction([0, 1], dump);\n        }\n        if (!dump || !dump.type) {\n            return new ScaleMappingFunction();\n        }\n        var type = types[dump.type];\n        if (!type) {\n            console.warn('invalid mapping type dump', dump);\n            return new ScaleMappingFunction(dump.domain || [0, 1], 'linear', dump.range || [0, 1]);\n        }\n        return new type(dump);\n    };\n}\n/** @internal */\nexport function restoreMapping(desc, factory) {\n    if (desc.map) {\n        return factory.mappingFunction(desc.map);\n    }\n    return new ScaleMappingFunction(fixDomain(desc.domain || [0, 1], 'linear'), 'linear', desc.range || [0, 1]);\n}\nexport function mappingFunctions() {\n    return {\n        script: ScriptMappingFunction,\n        linear: ScaleMappingFunction,\n        log: ScaleMappingFunction,\n        'pow1.1': ScaleMappingFunction,\n        pow2: ScaleMappingFunction,\n        pow3: ScaleMappingFunction,\n    };\n}\n//# sourceMappingURL=MappingFunction.js.map","import { format } from 'd3-format';\nimport { similar, boxplotBuilder } from '../internal';\nimport { FIRST_IS_NAN } from './missing';\n/** @internal */\nexport var DEFAULT_FORMATTER = format('.3n');\n/** @internal */\nexport function compareBoxPlot(col, a, b) {\n    var aVal = col.getBoxPlotData(a);\n    var bVal = col.getBoxPlotData(b);\n    var method = col.getSortMethod();\n    if (aVal == null) {\n        return bVal == null ? 0 : FIRST_IS_NAN;\n    }\n    if (bVal == null) {\n        return FIRST_IS_NAN * -1;\n    }\n    return numberCompare(aVal[method], bVal[method]);\n}\nexport function toCompareBoxPlotValue(col, row) {\n    var v = col.getBoxPlotData(row);\n    var method = col.getSortMethod();\n    return v == null ? NaN : v[method];\n}\nexport function getBoxPlotNumber(col, row, mode) {\n    var data = mode === 'normalized' ? col.getBoxPlotData(row) : col.getRawBoxPlotData(row);\n    if (data == null) {\n        return NaN;\n    }\n    return data[col.getSortMethod()];\n}\n/**\n * save number comparison\n * @param a\n * @param b\n * @param aMissing\n * @param bMissing\n * @return {number}\n * @internal\n */\nexport function numberCompare(a, b, aMissing, bMissing) {\n    if (aMissing === void 0) { aMissing = false; }\n    if (bMissing === void 0) { bMissing = false; }\n    aMissing = aMissing || a == null || Number.isNaN(a);\n    bMissing = bMissing || b == null || Number.isNaN(b);\n    if (aMissing) {\n        //NaN are smaller\n        return bMissing ? 0 : FIRST_IS_NAN;\n    }\n    if (bMissing) {\n        return FIRST_IS_NAN * -1;\n    }\n    return a - b;\n}\n/** @internal */\nexport function noNumberFilter() {\n    return { min: Number.NEGATIVE_INFINITY, max: Number.POSITIVE_INFINITY, filterMissing: false };\n}\n/** @internal */\nexport function isEqualNumberFilter(a, b, delta) {\n    if (delta === void 0) { delta = 0.001; }\n    return similar(a.min, b.min, delta) && similar(a.max, b.max, delta) && a.filterMissing === b.filterMissing;\n}\n/** @internal */\nexport function isNumberIncluded(filter, value) {\n    if (!filter) {\n        return true;\n    }\n    if (Number.isNaN(value)) {\n        return !filter.filterMissing;\n    }\n    return !((isFinite(filter.min) && value < filter.min) || (isFinite(filter.max) && value > filter.max));\n}\n/** @internal */\nexport function isDummyNumberFilter(filter) {\n    return !filter.filterMissing && !isFinite(filter.min) && !isFinite(filter.max);\n}\n/** @internal */\nexport function restoreNumberFilter(v) {\n    return {\n        min: v.min != null && isFinite(v.min) ? v.min : Number.NEGATIVE_INFINITY,\n        max: v.max != null && isFinite(v.max) ? v.max : Number.POSITIVE_INFINITY,\n        filterMissing: v.filterMissing,\n    };\n}\n/** @internal */\nexport function medianIndex(rows, col) {\n    //return the median row\n    var data = rows.map(function (r, i) { return ({ r: r, i: i, v: col.getNumber(r) }); });\n    var sorted = Array.from(data.filter(function (r) { return !Number.isNaN(r.v); })).sort(function (a, b) { return numberCompare(a.v, b.v); });\n    var index = sorted[Math.floor(sorted.length / 2.0)];\n    if (index === undefined) {\n        return { index: 0, row: sorted[0].r }; //error case\n    }\n    return { index: index.i, row: index.r };\n}\n/** @internal */\nexport function toCompareGroupValue(rows, col, sortMethod, valueCache) {\n    var b = boxplotBuilder();\n    if (valueCache) {\n        b.pushAll(valueCache);\n    }\n    else {\n        b.pushAll(rows.map(function (d) { return col.getNumber(d); }));\n    }\n    var vs = b.build();\n    return vs[sortMethod];\n}\n//# sourceMappingURL=internalNumber.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { format } from 'd3-format';\nimport { equalArrays } from '../internal';\nimport { Category, dialogAddons, SortByDefault, toolbar } from './annotations';\nimport Column, { DEFAULT_COLOR, } from './Column';\nimport { ECompareValueType } from './interfaces';\nimport { EAdvancedSortMethod, } from './INumberColumn';\nimport { restoreMapping } from './MappingFunction';\nimport { isMissingValue, isUnknown, missingGroup } from './missing';\nimport ValueColumn from './ValueColumn';\nimport { noNumberFilter, isDummyNumberFilter, restoreNumberFilter, toCompareGroupValue, isEqualNumberFilter, isNumberIncluded, } from './internalNumber';\nimport { integrateDefaults } from './internal';\n/**\n * a number column mapped from an original input scale to an output range\n */\nvar NumberColumn = /** @class */ (function (_super) {\n    __extends(NumberColumn, _super);\n    function NumberColumn(id, desc, factory) {\n        var _this = _super.call(this, id, integrateDefaults(desc, {\n            groupRenderer: 'boxplot',\n            summaryRenderer: 'histogram',\n        })) || this;\n        /**\n         * currently active filter\n         * @private\n         */\n        _this.currentFilter = noNumberFilter();\n        /**\n         * The accuracy defines the deviation of values to the applied filter boundary.\n         * Use an accuracy closer to 0 for columns with smaller numbers (e.g., 1e-9).\n         * @private\n         */\n        _this.filterAccuracy = 0.001;\n        _this.numberFormat = format('.2f');\n        _this.currentGroupThresholds = [];\n        _this.groupSortMethod = EAdvancedSortMethod.median;\n        _this.mapping = restoreMapping(desc, factory);\n        _this.original = _this.mapping.clone();\n        _this.deriveMapping = _this.mapping.domain.map(function (d) { return d == null || Number.isNaN(d); });\n        _this.colorMapping = factory.colorMappingFunction(desc.colorMapping || desc.color);\n        if (desc.numberFormat) {\n            _this.numberFormat = format(desc.numberFormat);\n        }\n        if (desc.filterAccuracy) {\n            _this.filterAccuracy = desc.filterAccuracy;\n        }\n        return _this;\n    }\n    NumberColumn_1 = NumberColumn;\n    NumberColumn.prototype.getNumberFormat = function () {\n        return this.numberFormat;\n    };\n    NumberColumn.prototype.onDataUpdate = function (rows) {\n        var _this = this;\n        _super.prototype.onDataUpdate.call(this, rows);\n        if (!this.deriveMapping.some(Boolean)) {\n            return;\n        }\n        // hook for listening to data updates\n        var minMax = rows\n            .map(function (row) { return _this.getRawValue(row); })\n            .reduce(function (acc, v) {\n            if (v == null || Number.isNaN(v)) {\n                return acc;\n            }\n            if (v < acc.min) {\n                acc.min = v;\n            }\n            if (v > acc.max) {\n                acc.max = v;\n            }\n            return acc;\n        }, { min: Number.POSITIVE_INFINITY, max: Number.NEGATIVE_INFINITY });\n        var domain = this.mapping.domain.slice();\n        if (this.deriveMapping[0]) {\n            domain[0] = minMax.min;\n        }\n        if (this.deriveMapping[this.deriveMapping.length - 1]) {\n            domain[domain.length - 1] = minMax.max;\n        }\n        this.mapping.domain = domain;\n        this.original.domain = domain;\n    };\n    NumberColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.map = this.mapping.toJSON();\n        r.colorMapping = this.colorMapping.toJSON();\n        r.filter = isDummyNumberFilter(this.currentFilter) ? null : this.currentFilter;\n        r.groupSortMethod = this.groupSortMethod;\n        if (this.currentGroupThresholds) {\n            r.stratifyThresholds = this.currentGroupThresholds;\n        }\n        return r;\n    };\n    NumberColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        if (dump.map || dump.domain) {\n            this.mapping = restoreMapping(dump, factory);\n        }\n        if (dump.colorMapping) {\n            this.colorMapping = factory.colorMappingFunction(dump.colorMapping);\n        }\n        if (dump.groupSortMethod) {\n            this.groupSortMethod = dump.groupSortMethod;\n        }\n        if (dump.filter) {\n            this.currentFilter = restoreNumberFilter(dump.filter);\n        }\n        if (dump.stratifyThresholds) {\n            this.currentGroupThresholds = dump.stratifyThresholds;\n        }\n        if (dump.stratifyThreshholds) {\n            this.currentGroupThresholds = dump.stratifyThreshholds;\n        }\n    };\n    NumberColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([\n            NumberColumn_1.EVENT_MAPPING_CHANGED,\n            NumberColumn_1.EVENT_COLOR_MAPPING_CHANGED,\n            NumberColumn_1.EVENT_FILTER_CHANGED,\n            NumberColumn_1.EVENT_SORTMETHOD_CHANGED,\n            NumberColumn_1.EVENT_GROUPING_CHANGED,\n        ]);\n    };\n    NumberColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    NumberColumn.prototype.getLabel = function (row) {\n        if (this.desc.numberFormat) {\n            var raw = this.getRawValue(row);\n            //if a dedicated format and a number use the formatter in any case\n            if (Number.isNaN(raw)) {\n                return 'NaN';\n            }\n            if (!isFinite(raw)) {\n                return raw.toString();\n            }\n            return this.numberFormat(raw);\n        }\n        var v = _super.prototype.getValue.call(this, row);\n        //keep non number if it is not a number else convert using formatter\n        if (typeof v === 'number') {\n            return this.numberFormat(+v);\n        }\n        return String(v);\n    };\n    NumberColumn.prototype.getRange = function () {\n        return this.mapping.getRange(this.numberFormat);\n    };\n    NumberColumn.prototype.getRawValue = function (row) {\n        var v = _super.prototype.getValue.call(this, row);\n        if (isMissingValue(v)) {\n            return NaN;\n        }\n        return +v;\n    };\n    NumberColumn.prototype.getExportValue = function (row, format) {\n        return format === 'json' ? this.getRawValue(row) : _super.prototype.getExportValue.call(this, row, format);\n    };\n    NumberColumn.prototype.getValue = function (row) {\n        var v = this.getNumber(row);\n        if (Number.isNaN(v)) {\n            return null;\n        }\n        return v;\n    };\n    NumberColumn.prototype.getNumber = function (row) {\n        var v = this.getRawValue(row);\n        if (Number.isNaN(v)) {\n            return NaN;\n        }\n        return this.mapping.apply(v);\n    };\n    NumberColumn.prototype.iterNumber = function (row) {\n        return [this.getNumber(row)];\n    };\n    NumberColumn.prototype.iterRawNumber = function (row) {\n        return [this.getRawNumber(row)];\n    };\n    NumberColumn.prototype.getRawNumber = function (row) {\n        return this.getRawValue(row);\n    };\n    NumberColumn.prototype.toCompareValue = function (row, valueCache) {\n        return valueCache != null ? valueCache : this.getNumber(row);\n    };\n    NumberColumn.prototype.toCompareValueType = function () {\n        return ECompareValueType.FLOAT;\n    };\n    NumberColumn.prototype.toCompareGroupValue = function (rows, _group, valueCache) {\n        return toCompareGroupValue(rows, this, this.groupSortMethod, valueCache);\n    };\n    NumberColumn.prototype.toCompareGroupValueType = function () {\n        return ECompareValueType.FLOAT;\n    };\n    NumberColumn.prototype.getOriginalMapping = function () {\n        return this.original.clone();\n    };\n    NumberColumn.prototype.getMapping = function () {\n        return this.mapping.clone();\n    };\n    NumberColumn.prototype.setMapping = function (mapping) {\n        if (this.mapping.eq(mapping)) {\n            return;\n        }\n        this.deriveMapping = [];\n        this.fire([\n            NumberColumn_1.EVENT_MAPPING_CHANGED,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY,\n        ], this.mapping.clone(), (this.mapping = mapping));\n    };\n    NumberColumn.prototype.getColor = function (row) {\n        var v = this.getNumber(row);\n        if (Number.isNaN(v)) {\n            return DEFAULT_COLOR;\n        }\n        return this.colorMapping.apply(v);\n    };\n    NumberColumn.prototype.getColorMapping = function () {\n        return this.colorMapping.clone();\n    };\n    NumberColumn.prototype.setColorMapping = function (mapping) {\n        if (this.colorMapping.eq(mapping)) {\n            return;\n        }\n        this.fire([\n            NumberColumn_1.EVENT_COLOR_MAPPING_CHANGED,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY,\n        ], this.colorMapping.clone(), (this.colorMapping = mapping));\n    };\n    NumberColumn.prototype.isFiltered = function () {\n        return !isDummyNumberFilter(this.currentFilter);\n    };\n    NumberColumn.prototype.getFilter = function () {\n        return Object.assign({}, this.currentFilter);\n    };\n    NumberColumn.prototype.setFilter = function (value) {\n        value = value || { min: Number.NEGATIVE_INFINITY, max: Number.POSITIVE_INFINITY, filterMissing: false };\n        if (isEqualNumberFilter(value, this.currentFilter, this.filterAccuracy)) {\n            return;\n        }\n        var bak = this.getFilter();\n        this.currentFilter.min = isUnknown(value.min) ? Number.NEGATIVE_INFINITY : value.min;\n        this.currentFilter.max = isUnknown(value.max) ? Number.POSITIVE_INFINITY : value.max;\n        this.currentFilter.filterMissing = value.filterMissing;\n        this.fire([NumberColumn_1.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, this.getFilter());\n    };\n    /**\n     * filter the current row if any filter is set\n     * @param row\n     * @returns {boolean}\n     */\n    NumberColumn.prototype.filter = function (row) {\n        return isNumberIncluded(this.currentFilter, this.getRawNumber(row));\n    };\n    NumberColumn.prototype.clearFilter = function () {\n        var was = this.isFiltered();\n        this.setFilter(null);\n        return was;\n    };\n    NumberColumn.prototype.getGroupThresholds = function () {\n        return this.currentGroupThresholds.slice();\n    };\n    NumberColumn.prototype.setGroupThresholds = function (value) {\n        if (equalArrays(this.currentGroupThresholds, value)) {\n            return;\n        }\n        var bak = this.getGroupThresholds();\n        this.currentGroupThresholds = value.slice();\n        this.fire([NumberColumn_1.EVENT_GROUPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, value);\n    };\n    NumberColumn.prototype.group = function (row) {\n        var value = this.getRawNumber(row);\n        if (Number.isNaN(value)) {\n            return Object.assign({}, missingGroup);\n        }\n        var threshold = this.currentGroupThresholds;\n        if (threshold.length === 0) {\n            // default threshold\n            var d = this.mapping.domain;\n            threshold = [(d[1] - d[0]) / 2];\n        }\n        var thresholdIndex = threshold.findIndex(function (t) { return value <= t; });\n        // group by thresholds / bins\n        switch (thresholdIndex) {\n            case -1:\n                //bigger than the last threshold\n                return {\n                    name: \"\".concat(this.label, \" > \").concat(this.numberFormat(threshold[threshold.length - 1])),\n                    color: this.colorMapping.apply(1),\n                };\n            case 0:\n                //smallest\n                return {\n                    name: \"\".concat(this.label, \" <= \").concat(this.numberFormat(threshold[0])),\n                    color: this.colorMapping.apply(0),\n                };\n            default:\n                return {\n                    name: \"\".concat(this.numberFormat(threshold[thresholdIndex - 1]), \" <= \").concat(this.label, \" <= \").concat(this.numberFormat(threshold[thresholdIndex])),\n                    color: this.colorMapping.apply(this.mapping.apply((threshold[thresholdIndex - 1] + threshold[thresholdIndex]) / 2)),\n                };\n        }\n    };\n    NumberColumn.prototype.getSortMethod = function () {\n        return this.groupSortMethod;\n    };\n    NumberColumn.prototype.setSortMethod = function (sortMethod) {\n        if (this.groupSortMethod === sortMethod) {\n            return;\n        }\n        this.fire([NumberColumn_1.EVENT_SORTMETHOD_CHANGED], this.groupSortMethod, (this.groupSortMethod = sortMethod));\n        // sort by me if not already sorted by me\n        if (!this.isGroupSortedByMe().asc) {\n            this.toggleMyGroupSorting();\n        }\n    };\n    var NumberColumn_1;\n    NumberColumn.EVENT_MAPPING_CHANGED = 'mappingChanged';\n    NumberColumn.EVENT_COLOR_MAPPING_CHANGED = 'colorMappingChanged';\n    NumberColumn.EVENT_FILTER_CHANGED = 'filterChanged';\n    NumberColumn.EVENT_SORTMETHOD_CHANGED = 'sortMethodChanged';\n    NumberColumn.EVENT_GROUPING_CHANGED = 'groupingChanged';\n    NumberColumn = NumberColumn_1 = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'groupBy', 'sortGroupBy', 'filterNumber', 'colorMapped', 'editMapping'),\n        dialogAddons('sortGroup', 'sortNumber'),\n        dialogAddons('group', 'groupNumber'),\n        Category('number'),\n        SortByDefault('descending')\n    ], NumberColumn);\n    return NumberColumn;\n}(ValueColumn));\nexport default NumberColumn;\n//# sourceMappingURL=NumberColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { format } from 'd3-format';\nimport { Category, dialogAddons, SortByDefault, toolbar } from './annotations';\nimport Column from './Column';\nimport { ECompareValueType } from './interfaces';\nimport { ESortMethod, } from './INumberColumn';\nimport { restoreMapping } from './MappingFunction';\nimport NumberColumn from './NumberColumn';\nimport ValueColumn from './ValueColumn';\nimport { DEFAULT_FORMATTER, noNumberFilter, toCompareBoxPlotValue, getBoxPlotNumber, isDummyNumberFilter, restoreNumberFilter, } from './internalNumber';\nvar BoxPlotColumn = /** @class */ (function (_super) {\n    __extends(BoxPlotColumn, _super);\n    function BoxPlotColumn(id, desc, factory) {\n        var _this = _super.call(this, id, desc) || this;\n        _this.numberFormat = DEFAULT_FORMATTER;\n        /**\n         * currently active filter\n         * @type {{min: number, max: number}}\n         * @private\n         */\n        _this.currentFilter = noNumberFilter();\n        _this.mapping = restoreMapping(desc, factory);\n        _this.original = _this.mapping.clone();\n        _this.deriveMapping = _this.mapping.domain.map(function (d) { return d == null || Number.isNaN(d); });\n        _this.colorMapping = factory.colorMappingFunction(desc.colorMapping);\n        if (desc.numberFormat) {\n            _this.numberFormat = format(desc.numberFormat);\n        }\n        _this.sort = desc.sort || ESortMethod.min;\n        return _this;\n    }\n    BoxPlotColumn_1 = BoxPlotColumn;\n    BoxPlotColumn.prototype.onDataUpdate = function (rows) {\n        var _this = this;\n        _super.prototype.onDataUpdate.call(this, rows);\n        if (!this.deriveMapping.some(Boolean)) {\n            return;\n        }\n        // hook for listening to data updates\n        var minMax = rows\n            .map(function (row) { return _this.getRawValue(row); })\n            .reduce(function (acc, v) {\n            if (v == null) {\n                return acc;\n            }\n            if (v.min < acc.min) {\n                acc.min = v.min;\n            }\n            if (v.max > acc.max) {\n                acc.max = v.max;\n            }\n            return acc;\n        }, { min: Number.POSITIVE_INFINITY, max: Number.NEGATIVE_INFINITY });\n        var domain = this.mapping.domain.slice();\n        if (this.deriveMapping[0]) {\n            domain[0] = minMax.min;\n        }\n        if (this.deriveMapping[this.deriveMapping.length - 1]) {\n            domain[domain.length - 1] = minMax.max;\n        }\n        this.mapping.domain = domain;\n        this.original.domain = domain;\n    };\n    BoxPlotColumn.prototype.getNumberFormat = function () {\n        return this.numberFormat;\n    };\n    BoxPlotColumn.prototype.toCompareValue = function (row) {\n        return toCompareBoxPlotValue(this, row);\n    };\n    BoxPlotColumn.prototype.toCompareValueType = function () {\n        return ECompareValueType.FLOAT;\n    };\n    BoxPlotColumn.prototype.getBoxPlotData = function (row) {\n        return this.getValue(row);\n    };\n    BoxPlotColumn.prototype.getRange = function () {\n        return this.mapping.getRange(this.numberFormat);\n    };\n    BoxPlotColumn.prototype.getRawBoxPlotData = function (row) {\n        return this.getRawValue(row);\n    };\n    BoxPlotColumn.prototype.getRawValue = function (row) {\n        return _super.prototype.getValue.call(this, row);\n    };\n    BoxPlotColumn.prototype.getExportValue = function (row, format) {\n        return format === 'json' ? this.getRawValue(row) : _super.prototype.getExportValue.call(this, row, format);\n    };\n    BoxPlotColumn.prototype.getValue = function (row) {\n        var _this = this;\n        var v = this.getRawValue(row);\n        if (v == null) {\n            return null;\n        }\n        var r = {\n            min: this.mapping.apply(v.min),\n            max: this.mapping.apply(v.max),\n            median: this.mapping.apply(v.median),\n            q1: this.mapping.apply(v.q1),\n            q3: this.mapping.apply(v.q3),\n        };\n        if (v.outlier) {\n            Object.assign(r, {\n                outlier: v.outlier.map(function (d) { return _this.mapping.apply(d); }),\n            });\n        }\n        if (v.whiskerLow != null) {\n            Object.assign(r, {\n                whiskerLow: this.mapping.apply(v.whiskerLow),\n            });\n        }\n        if (v.whiskerHigh != null) {\n            Object.assign(r, {\n                whiskerHigh: this.mapping.apply(v.whiskerHigh),\n            });\n        }\n        return r;\n    };\n    BoxPlotColumn.prototype.getNumber = function (row) {\n        return getBoxPlotNumber(this, row, 'normalized');\n    };\n    BoxPlotColumn.prototype.getRawNumber = function (row) {\n        return getBoxPlotNumber(this, row, 'raw');\n    };\n    BoxPlotColumn.prototype.iterNumber = function (row) {\n        return [this.getNumber(row)];\n    };\n    BoxPlotColumn.prototype.iterRawNumber = function (row) {\n        return [this.getRawNumber(row)];\n    };\n    BoxPlotColumn.prototype.getLabel = function (row) {\n        var v = this.getRawValue(row);\n        if (v == null) {\n            return '';\n        }\n        var f = this.numberFormat;\n        return \"BoxPlot(min = \".concat(f(v.min), \", q1 = \").concat(f(v.q1), \", median = \").concat(f(v.median), \", q3 = \").concat(f(v.q3), \", max = \").concat(f(v.max), \")\");\n    };\n    BoxPlotColumn.prototype.getSortMethod = function () {\n        return this.sort;\n    };\n    BoxPlotColumn.prototype.setSortMethod = function (sort) {\n        if (this.sort === sort) {\n            return;\n        }\n        this.fire(BoxPlotColumn_1.EVENT_SORTMETHOD_CHANGED, this.sort, (this.sort = sort));\n        // sort by me if not already sorted by me\n        if (!this.isSortedByMe().asc) {\n            this.sortByMe();\n        }\n    };\n    BoxPlotColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.sortMethod = this.getSortMethod();\n        r.filter = !isDummyNumberFilter(this.currentFilter) ? this.currentFilter : null;\n        r.map = this.mapping.toJSON();\n        r.colorMapping = this.colorMapping.toJSON();\n        return r;\n    };\n    BoxPlotColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        if (dump.sortMethod) {\n            this.sort = dump.sortMethod;\n        }\n        if (dump.filter) {\n            this.currentFilter = restoreNumberFilter(dump.filter);\n        }\n        if (dump.map || dump.domain) {\n            this.mapping = restoreMapping(dump, factory);\n        }\n        if (dump.colorMapping) {\n            this.colorMapping = factory.colorMappingFunction(dump.colorMapping);\n        }\n    };\n    BoxPlotColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([\n            BoxPlotColumn_1.EVENT_SORTMETHOD_CHANGED,\n            BoxPlotColumn_1.EVENT_COLOR_MAPPING_CHANGED,\n            BoxPlotColumn_1.EVENT_MAPPING_CHANGED,\n            BoxPlotColumn_1.EVENT_FILTER_CHANGED,\n        ]);\n    };\n    BoxPlotColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    BoxPlotColumn.prototype.getOriginalMapping = function () {\n        return this.original.clone();\n    };\n    BoxPlotColumn.prototype.getMapping = function () {\n        return this.mapping.clone();\n    };\n    BoxPlotColumn.prototype.setMapping = function (mapping) {\n        if (this.mapping.eq(mapping)) {\n            return;\n        }\n        this.deriveMapping = [];\n        this.fire([\n            BoxPlotColumn_1.EVENT_MAPPING_CHANGED,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY,\n        ], this.mapping.clone(), (this.mapping = mapping));\n    };\n    BoxPlotColumn.prototype.getColor = function (row) {\n        return NumberColumn.prototype.getColor.call(this, row);\n    };\n    BoxPlotColumn.prototype.getColorMapping = function () {\n        return this.colorMapping.clone();\n    };\n    BoxPlotColumn.prototype.setColorMapping = function (mapping) {\n        if (this.colorMapping.eq(mapping)) {\n            return;\n        }\n        this.fire([\n            BoxPlotColumn_1.EVENT_COLOR_MAPPING_CHANGED,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY,\n        ], this.colorMapping.clone(), (this.colorMapping = mapping));\n    };\n    BoxPlotColumn.prototype.isFiltered = function () {\n        return NumberColumn.prototype.isFiltered.call(this);\n    };\n    BoxPlotColumn.prototype.getFilter = function () {\n        return NumberColumn.prototype.getFilter.call(this);\n    };\n    BoxPlotColumn.prototype.setFilter = function (value) {\n        NumberColumn.prototype.setFilter.call(this, value);\n    };\n    BoxPlotColumn.prototype.filter = function (row) {\n        return NumberColumn.prototype.filter.call(this, row);\n    };\n    BoxPlotColumn.prototype.clearFilter = function () {\n        return NumberColumn.prototype.clearFilter.call(this);\n    };\n    var BoxPlotColumn_1;\n    BoxPlotColumn.EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\n    BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\n    BoxPlotColumn.EVENT_SORTMETHOD_CHANGED = NumberColumn.EVENT_SORTMETHOD_CHANGED;\n    BoxPlotColumn.EVENT_FILTER_CHANGED = NumberColumn.EVENT_FILTER_CHANGED;\n    BoxPlotColumn = BoxPlotColumn_1 = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'filterNumber', 'colorMapped', 'editMapping'),\n        dialogAddons('sort', 'sortBoxPlot'),\n        Category('array'),\n        SortByDefault('descending')\n    ], BoxPlotColumn);\n    return BoxPlotColumn;\n}(ValueColumn));\nexport default BoxPlotColumn;\n//# sourceMappingURL=BoxPlotColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Category } from './annotations';\nimport ValueColumn from './ValueColumn';\nimport { integrateDefaults } from './internal';\nvar MapColumn = /** @class */ (function (_super) {\n    __extends(MapColumn, _super);\n    function MapColumn(id, desc) {\n        return _super.call(this, id, integrateDefaults(desc, {\n            width: 200,\n        })) || this;\n    }\n    MapColumn.prototype.getValue = function (row) {\n        var r = this.getMap(row);\n        return r.length === 0 ? null : r;\n    };\n    MapColumn.prototype.getLabels = function (row) {\n        var v = this.getMap(row);\n        return v.map(function (_a) {\n            var key = _a.key, value = _a.value;\n            return ({ key: key, value: String(value) });\n        });\n    };\n    MapColumn.prototype.getMap = function (row) {\n        return toKeyValue(_super.prototype.getValue.call(this, row));\n    };\n    MapColumn.prototype.getMapLabel = function (row) {\n        return this.getLabels(row);\n    };\n    MapColumn.prototype.getLabel = function (row) {\n        var v = this.getLabels(row);\n        return \"{\".concat(v.map(function (_a) {\n            var key = _a.key, value = _a.value;\n            return \"\".concat(key, \": \").concat(value);\n        }).join(', '), \"}\");\n    };\n    MapColumn = __decorate([\n        Category('map')\n    ], MapColumn);\n    return MapColumn;\n}(ValueColumn));\nexport default MapColumn;\nfunction byKey(a, b) {\n    if (a === b) {\n        return 0;\n    }\n    return a.key.localeCompare(b.key);\n}\nfunction toKeyValue(v) {\n    if (!v) {\n        return [];\n    }\n    if (v instanceof Map) {\n        return Array.from(v.entries())\n            .map(function (_a) {\n            var key = _a[0], value = _a[1];\n            return ({ key: key, value: value });\n        })\n            .sort(byKey);\n    }\n    if (Array.isArray(v)) {\n        return v; // keep original order\n    }\n    // object\n    return Object.keys(v)\n        .map(function (key) { return ({ key: key, value: v[key] }); })\n        .sort(byKey);\n}\n//# sourceMappingURL=MapColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport MapColumn from './MapColumn';\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION } from './CategoricalColorMappingFunction';\nimport CategoricalColumn from './CategoricalColumn';\nimport { DEFAULT_COLOR, } from './Column';\nimport { toolbar } from './annotations';\nimport { toCategories } from './internalCategorical';\nvar CategoricalMapColumn = /** @class */ (function (_super) {\n    __extends(CategoricalMapColumn, _super);\n    function CategoricalMapColumn(id, desc) {\n        var _this = _super.call(this, id, desc) || this;\n        _this.lookup = new Map();\n        _this.categories = toCategories(desc);\n        _this.categories.forEach(function (d) { return _this.lookup.set(d.name, d); });\n        _this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n        return _this;\n    }\n    CategoricalMapColumn_1 = CategoricalMapColumn;\n    CategoricalMapColumn.prototype.onDataUpdate = function (rows) {\n        var _a;\n        var _this = this;\n        _super.prototype.onDataUpdate.call(this, rows);\n        if (this.desc.categories) {\n            return;\n        }\n        // derive\n        var categories = new Set();\n        rows.forEach(function (row) {\n            var value = _super.prototype.getValue.call(_this, row);\n            if (!value || !Array.isArray(value) || value.length === 0) {\n                return;\n            }\n            for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n                var kv = value_1[_i];\n                if (!kv || !kv.value) {\n                    continue;\n                }\n                categories.add(String(kv.value));\n            }\n        });\n        (_a = this.categories).splice.apply(_a, __spreadArray([0, this.categories.length], toCategories({ categories: Array.from(categories) }), false));\n        this.categories.forEach(function (d) { return _this.lookup.set(d.name, d); });\n    };\n    CategoricalMapColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([CategoricalMapColumn_1.EVENT_COLOR_MAPPING_CHANGED]);\n    };\n    CategoricalMapColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    CategoricalMapColumn.prototype.parseValue = function (v) {\n        if (!v) {\n            return null;\n        }\n        var vs = String(v);\n        return this.lookup.has(vs) ? this.lookup.get(vs) : null;\n    };\n    CategoricalMapColumn.prototype.getCategoryMap = function (row) {\n        var _this = this;\n        return _super.prototype.getMap.call(this, row).map(function (_a) {\n            var key = _a.key, value = _a.value;\n            return ({\n                key: key,\n                value: _this.parseValue(value),\n            });\n        });\n    };\n    CategoricalMapColumn.prototype.getCategories = function (row) {\n        return this.getCategoryMap(row).map(function (d) { return d.value; });\n    };\n    CategoricalMapColumn.prototype.getColors = function (row) {\n        var _this = this;\n        return this.getCategoryMap(row).map(function (_a) {\n            var key = _a.key, value = _a.value;\n            return ({\n                key: key,\n                value: value ? _this.colorMapping.apply(value) : DEFAULT_COLOR,\n            });\n        });\n    };\n    CategoricalMapColumn.prototype.getValue = function (row) {\n        var r = this.getCategoryMap(row);\n        return r.length === 0\n            ? null\n            : r.map(function (_a) {\n                var key = _a.key, value = _a.value;\n                return ({\n                    key: key,\n                    value: value ? value.name : null,\n                });\n            });\n    };\n    CategoricalMapColumn.prototype.getLabels = function (row) {\n        return this.getCategoryMap(row).map(function (_a) {\n            var key = _a.key, value = _a.value;\n            return ({\n                key: key,\n                value: value ? value.label : '',\n            });\n        });\n    };\n    CategoricalMapColumn.prototype.getColorMapping = function () {\n        return this.colorMapping.clone();\n    };\n    CategoricalMapColumn.prototype.setColorMapping = function (mapping) {\n        return CategoricalColumn.prototype.setColorMapping.call(this, mapping);\n    };\n    CategoricalMapColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.colorMapping = this.colorMapping.toJSON();\n        return r;\n    };\n    CategoricalMapColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\n    };\n    CategoricalMapColumn.prototype.iterCategory = function (row) {\n        return this.getCategories(row);\n    };\n    var CategoricalMapColumn_1;\n    CategoricalMapColumn.EVENT_COLOR_MAPPING_CHANGED = CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED;\n    CategoricalMapColumn = CategoricalMapColumn_1 = __decorate([\n        toolbar('rename', 'colorMappedCategorical')\n    ], CategoricalMapColumn);\n    return CategoricalMapColumn;\n}(MapColumn));\nexport default CategoricalMapColumn;\n//# sourceMappingURL=CategoricalMapColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport ArrayColumn from './ArrayColumn';\nimport { toolbar } from './annotations';\nimport CategoricalColumn from './CategoricalColumn';\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION } from './CategoricalColorMappingFunction';\nimport { DEFAULT_COLOR, } from './Column';\nimport { toCategories } from './internalCategorical';\n/**\n * a string column with optional alignment\n */\nvar CategoricalsColumn = /** @class */ (function (_super) {\n    __extends(CategoricalsColumn, _super);\n    function CategoricalsColumn(id, desc) {\n        var _this = _super.call(this, id, desc) || this;\n        _this.lookup = new Map();\n        _this.categories = toCategories(desc);\n        _this.categories.forEach(function (d) { return _this.lookup.set(d.name, d); });\n        _this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n        return _this;\n    }\n    CategoricalsColumn_1 = CategoricalsColumn;\n    CategoricalsColumn.prototype.onDataUpdate = function (rows) {\n        var _a;\n        var _this = this;\n        _super.prototype.onDataUpdate.call(this, rows);\n        if (this.desc.categories) {\n            return;\n        }\n        // derive\n        var categories = new Set();\n        rows.forEach(function (row) {\n            var value = _super.prototype.getValue.call(_this, row);\n            if (!value || !Array.isArray(value) || value.length === 0) {\n                return;\n            }\n            for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n                var kv = value_1[_i];\n                if (!kv) {\n                    continue;\n                }\n                categories.add(String(kv));\n            }\n        });\n        (_a = this.categories).splice.apply(_a, __spreadArray([0, this.categories.length], toCategories({ categories: Array.from(categories) }), false));\n        this.categories.forEach(function (d) { return _this.lookup.set(d.name, d); });\n    };\n    CategoricalsColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([CategoricalsColumn_1.EVENT_COLOR_MAPPING_CHANGED]);\n    };\n    CategoricalsColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    CategoricalsColumn.prototype.getCategories = function (row) {\n        var _this = this;\n        return _super.prototype.getValues.call(this, row).map(function (v) {\n            if (!v) {\n                return null;\n            }\n            var vs = String(v);\n            return _this.lookup.has(vs) ? _this.lookup.get(vs) : null;\n        });\n    };\n    CategoricalsColumn.prototype.getColors = function (row) {\n        var _this = this;\n        return this.getCategories(row).map(function (d) { return (d ? _this.colorMapping.apply(d) : DEFAULT_COLOR); });\n    };\n    CategoricalsColumn.prototype.iterCategory = function (row) {\n        return this.getCategories(row);\n    };\n    CategoricalsColumn.prototype.getValues = function (row) {\n        return this.getCategories(row).map(function (v) { return (v ? v.name : null); });\n    };\n    CategoricalsColumn.prototype.getLabels = function (row) {\n        return this.getCategories(row).map(function (v) { return (v ? v.label : ''); });\n    };\n    CategoricalsColumn.prototype.getColorMapping = function () {\n        return this.colorMapping.clone();\n    };\n    CategoricalsColumn.prototype.setColorMapping = function (mapping) {\n        return CategoricalColumn.prototype.setColorMapping.call(this, mapping);\n    };\n    CategoricalsColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.colorMapping = this.colorMapping.toJSON();\n        return r;\n    };\n    CategoricalsColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\n    };\n    var CategoricalsColumn_1;\n    CategoricalsColumn.EVENT_COLOR_MAPPING_CHANGED = CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED;\n    CategoricalsColumn = CategoricalsColumn_1 = __decorate([\n        toolbar('rename', 'colorMappedCategorical')\n    ], CategoricalsColumn);\n    return CategoricalsColumn;\n}(ArrayColumn));\nexport default CategoricalsColumn;\n//# sourceMappingURL=CategoricalsColumn.js.map","import interval from \"./interval.js\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nvar hour = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nvar minute = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nvar second = interval(function(date) {\n  date.setTime(date - date.getMilliseconds());\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import { timeDay, timeHour, timeMinute, timeMonth, timeSecond, timeWeek } from 'd3-time';\nimport { timeFormat } from 'd3-time-format';\nimport { equal, isSeqEmpty } from '../internal';\nimport { isNumberIncluded } from './internalNumber';\n/** @internal */\nexport { isDummyNumberFilter as isDummyDateFilter, isEqualNumberFilter as isEqualDateFilter, noNumberFilter as noDateFilter, restoreNumberFilter as restoreDateFilter, } from './internalNumber';\n/** @internal */\nexport function isDateIncluded(filter, value) {\n    if (!filter) {\n        return true;\n    }\n    if (value == null || !(value instanceof Date)) {\n        return !filter.filterMissing;\n    }\n    return isNumberIncluded(filter, value.getTime());\n}\n/**\n * shifts the given date such that it is on 23:59:59, or 00:00:00\n * @internal\n */\nexport function shiftFilterDateDay(date, type) {\n    var d = new Date(date);\n    if (type === 'max') {\n        d.setHours(23);\n        d.setMinutes(59);\n        d.setSeconds(59);\n        d.setMilliseconds(999);\n    }\n    else {\n        d.setHours(0);\n        d.setMinutes(0);\n        d.setSeconds(0);\n        d.setMilliseconds(0);\n    }\n    return d.getTime();\n}\n/**\n * @internal\n */\nexport function defaultDateGrouper() {\n    return { granularity: 'month', circular: false };\n}\n/**\n * @internal\n */\nexport function isDefaultDateGrouper(grouper) {\n    return equal(defaultDateGrouper(), grouper);\n}\n/**\n * convert the given date to the desired grouper\n * @internal\n */\nexport function toDateGroup(grouper, value) {\n    switch (grouper.granularity) {\n        case 'century':\n            var centuryP = Math.floor(value.getFullYear() / 100);\n            if (grouper.circular) {\n                var century = centuryP % 10;\n                return {\n                    value: century,\n                    name: \"*\".concat(century, \"00\"),\n                };\n            }\n            return {\n                value: centuryP,\n                name: \"\".concat(centuryP, \"00\"),\n            };\n        case 'decade':\n            var decadeP = Math.floor(value.getFullYear() / 10);\n            if (grouper.circular) {\n                var decade = decadeP % 10;\n                return {\n                    value: decade,\n                    name: \"**\".concat(decade, \"0\"),\n                };\n            }\n            return {\n                value: decadeP,\n                name: \"\".concat(decadeP, \"0\"),\n            };\n        case 'year':\n            if (grouper.circular) {\n                var year = value.getFullYear() % 10;\n                return {\n                    value: year,\n                    name: \"***\".concat(year),\n                };\n            }\n            return {\n                value: value.getFullYear(),\n                name: String(value.getFullYear()),\n            };\n        case 'month':\n            if (grouper.circular) {\n                return {\n                    value: value.getMonth(),\n                    name: timeFormat('%B')(value),\n                };\n            }\n            return {\n                value: timeMonth(value).getTime(),\n                name: timeFormat('%B %Y')(value),\n            };\n        case 'week':\n            if (grouper.circular) {\n                return {\n                    value: value.getMonth(),\n                    name: timeFormat('%W')(value),\n                };\n            }\n            return {\n                value: timeWeek(value).getTime(),\n                name: timeFormat('%W %Y')(value),\n            };\n        case 'day_of_week':\n            if (grouper.circular) {\n                return {\n                    value: value.getDay(),\n                    name: timeFormat('%A')(value),\n                };\n            }\n            return {\n                value: timeDay(value).getTime(),\n                name: timeFormat('%x')(value),\n            };\n        case 'day_of_month':\n            if (grouper.circular) {\n                return {\n                    value: value.getDate(),\n                    name: timeFormat('%d')(value),\n                };\n            }\n            return {\n                value: timeDay(value).getTime(),\n                name: timeFormat('%x')(value),\n            };\n        case 'day_of_year':\n            if (grouper.circular) {\n                // %j = day of year\n                var v = timeFormat('%j')(value);\n                return {\n                    value: Number.parseInt(v, 10),\n                    name: v,\n                };\n            }\n            return {\n                value: timeDay(value).getTime(),\n                name: timeFormat('%x')(value),\n            };\n        case 'hour':\n            if (grouper.circular) {\n                return {\n                    value: value.getHours(),\n                    name: timeFormat('%A')(value),\n                };\n            }\n            return {\n                value: timeHour(value).getTime(),\n                name: timeFormat('%x')(value),\n            };\n        case 'minute':\n            if (grouper.circular) {\n                return {\n                    value: value.getMinutes(),\n                    name: timeFormat('%A')(value),\n                };\n            }\n            return {\n                value: timeMinute(value).getTime(),\n                name: timeFormat('%x')(value),\n            };\n        case 'second':\n            if (grouper.circular) {\n                return {\n                    value: value.getSeconds(),\n                    name: timeFormat('%A')(value),\n                };\n            }\n            return {\n                value: timeSecond(value).getTime(),\n                name: timeFormat('%x')(value),\n            };\n    }\n}\n/**\n * @internal\n */\nexport function chooseAggregatedDate(rows, grouper, col, valueCache) {\n    var vs = (valueCache ? valueCache : rows.map(function (d) { return col.getDate(d); })).filter(function (d) { return d instanceof Date; });\n    if (isSeqEmpty(vs)) {\n        return { value: null, name: '' };\n    }\n    var median = trueMedian(vs.map(function (d) { return d.getTime(); }));\n    if (!grouper) {\n        return { value: median, name: new Date(median).toString() };\n    }\n    return toDateGroup(grouper, new Date(median));\n}\nfunction trueMedian(dates) {\n    // to avoid interpolating between the centers do it manually\n    var s = Float64Array.from(dates);\n    if (s.length === 1) {\n        return s[0];\n    }\n    s.sort();\n    return s[Math.floor(s.length / 2)];\n}\n//# sourceMappingURL=internalDate.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { timeFormat, timeParse } from 'd3-time-format';\nimport { equal } from '../internal';\nimport { Category, dialogAddons, toolbar } from './annotations';\nimport Column, { DEFAULT_COLOR, } from './Column';\nimport { defaultGroup, ECompareValueType } from './interfaces';\nimport { isMissingValue, isUnknown, missingGroup } from './missing';\nimport ValueColumn from './ValueColumn';\nimport { noDateFilter, defaultDateGrouper, isDummyDateFilter, isDefaultDateGrouper, restoreDateFilter, isEqualDateFilter, isDateIncluded, toDateGroup, chooseAggregatedDate, } from './internalDate';\nimport { integrateDefaults } from './internal';\nvar DateColumn = /** @class */ (function (_super) {\n    __extends(DateColumn, _super);\n    function DateColumn(id, desc) {\n        var _this = _super.call(this, id, integrateDefaults(desc, {\n            groupRenderer: 'datehistogram',\n            summaryRenderer: 'datehistogram',\n        })) || this;\n        /**\n         * currently active filter\n         * @type {{min: number, max: number}}\n         * @private\n         */\n        _this.currentFilter = noDateFilter();\n        _this.currentGrouper = defaultDateGrouper();\n        var f = timeFormat(desc.dateFormat || DateColumn_1.DEFAULT_DATE_FORMAT);\n        _this.format = function (v) { return (v instanceof Date ? f(v) : ''); };\n        _this.parse = desc.dateParse\n            ? timeParse(desc.dateParse)\n            : timeParse(desc.dateFormat || DateColumn_1.DEFAULT_DATE_FORMAT);\n        return _this;\n    }\n    DateColumn_1 = DateColumn;\n    DateColumn.prototype.getFormatter = function () {\n        return this.format;\n    };\n    DateColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.filter = isDummyDateFilter(this.currentFilter) ? null : this.currentFilter;\n        if (this.currentGrouper && !isDefaultDateGrouper(this.currentGrouper)) {\n            r.grouper = this.currentGrouper;\n        }\n        return r;\n    };\n    DateColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        if (dump.filter) {\n            this.currentFilter = restoreDateFilter(dump.filter);\n        }\n        if (dump.grouper) {\n            this.currentGrouper = dump.grouper;\n        }\n    };\n    DateColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([DateColumn_1.EVENT_FILTER_CHANGED, DateColumn_1.EVENT_GROUPING_CHANGED]);\n    };\n    DateColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    DateColumn.prototype.getValue = function (row) {\n        return this.getDate(row);\n    };\n    DateColumn.prototype.getDate = function (row) {\n        var v = _super.prototype.getValue.call(this, row);\n        if (isMissingValue(v)) {\n            return null;\n        }\n        if (v instanceof Date) {\n            return v;\n        }\n        return this.parse(String(v));\n    };\n    DateColumn.prototype.iterDate = function (row) {\n        return [this.getDate(row)];\n    };\n    DateColumn.prototype.getLabel = function (row) {\n        var v = this.getValue(row);\n        return this.format(v);\n    };\n    DateColumn.prototype.isFiltered = function () {\n        return !isDummyDateFilter(this.currentFilter);\n    };\n    DateColumn.prototype.clearFilter = function () {\n        var was = this.isFiltered();\n        this.setFilter(null);\n        return was;\n    };\n    DateColumn.prototype.getFilter = function () {\n        return Object.assign({}, this.currentFilter);\n    };\n    DateColumn.prototype.setFilter = function (value) {\n        value = value || { min: Number.NEGATIVE_INFINITY, max: Number.POSITIVE_INFINITY, filterMissing: false };\n        if (isEqualDateFilter(value, this.currentFilter)) {\n            return;\n        }\n        var bak = this.getFilter();\n        this.currentFilter.min = isUnknown(value.min) ? Number.NEGATIVE_INFINITY : value.min;\n        this.currentFilter.max = isUnknown(value.max) ? Number.POSITIVE_INFINITY : value.max;\n        this.currentFilter.filterMissing = value.filterMissing;\n        this.fire([DateColumn_1.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, this.getFilter());\n    };\n    /**\n     * filter the current row if any filter is set\n     * @param row\n     * @returns {boolean}\n     */\n    DateColumn.prototype.filter = function (row, valueCache) {\n        return isDateIncluded(this.currentFilter, valueCache !== undefined ? valueCache : this.getDate(row));\n    };\n    DateColumn.prototype.toCompareValue = function (row, valueCache) {\n        var v = valueCache !== undefined ? valueCache : this.getValue(row);\n        if (!(v instanceof Date)) {\n            return NaN;\n        }\n        return v.getTime();\n    };\n    DateColumn.prototype.toCompareValueType = function () {\n        return ECompareValueType.DOUBLE_ASC;\n    };\n    DateColumn.prototype.getDateGrouper = function () {\n        return Object.assign({}, this.currentGrouper);\n    };\n    DateColumn.prototype.setDateGrouper = function (value) {\n        if (equal(this.currentGrouper, value)) {\n            return;\n        }\n        var bak = this.getDateGrouper();\n        this.currentGrouper = Object.assign({}, value);\n        this.fire([DateColumn_1.EVENT_GROUPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, value);\n    };\n    DateColumn.prototype.group = function (row, valueCache) {\n        var v = valueCache !== undefined ? valueCache : this.getDate(row);\n        if (!v || !(v instanceof Date)) {\n            return Object.assign({}, missingGroup);\n        }\n        if (!this.currentGrouper) {\n            return Object.assign({}, defaultGroup);\n        }\n        var g = toDateGroup(this.currentGrouper, v);\n        return {\n            name: g.name,\n            color: DEFAULT_COLOR,\n        };\n    };\n    DateColumn.prototype.toCompareGroupValue = function (rows, _group, valueCache) {\n        var v = chooseAggregatedDate(rows, this.currentGrouper, this, valueCache).value;\n        return v == null ? NaN : v;\n    };\n    DateColumn.prototype.toCompareGroupValueType = function () {\n        return ECompareValueType.DOUBLE_ASC;\n    };\n    var DateColumn_1;\n    DateColumn.EVENT_FILTER_CHANGED = 'filterChanged';\n    DateColumn.EVENT_GROUPING_CHANGED = 'groupingChanged';\n    DateColumn.DEFAULT_DATE_FORMAT = '%x';\n    DateColumn = DateColumn_1 = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'groupBy', 'sortGroupBy', 'filterDate'),\n        dialogAddons('group', 'groupDate'),\n        Category('date')\n    ], DateColumn);\n    return DateColumn;\n}(ValueColumn));\nexport default DateColumn;\n//# sourceMappingURL=DateColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { timeFormat, timeParse } from 'd3-time-format';\nimport { median, min, max } from '../internal';\nimport { dialogAddons, toolbar } from './annotations';\nimport ArrayColumn from './ArrayColumn';\nimport { ECompareValueType } from './interfaces';\nimport { isMissingValue } from './missing';\nimport DateColumn from './DateColumn';\nimport { noDateFilter, isDummyDateFilter, restoreDateFilter } from './internalDate';\nimport { chooseUIntByDataLength, integrateDefaults } from './internal';\nexport var EDateSort;\n(function (EDateSort) {\n    EDateSort[\"min\"] = \"min\";\n    EDateSort[\"max\"] = \"max\";\n    EDateSort[\"median\"] = \"median\";\n})(EDateSort || (EDateSort = {}));\nvar DatesColumn = /** @class */ (function (_super) {\n    __extends(DatesColumn, _super);\n    function DatesColumn(id, desc) {\n        var _this = _super.call(this, id, integrateDefaults(desc, {\n            renderer: 'datehistogram',\n            groupRenderer: 'datehistogram',\n            summaryRenderer: 'datehistogram',\n        })) || this;\n        _this.currentFilter = noDateFilter();\n        var f = timeFormat(desc.dateFormat || DateColumn.DEFAULT_DATE_FORMAT);\n        _this.format = function (v) { return (v instanceof Date ? f(v) : ''); };\n        _this.parse = desc.dateParse\n            ? timeParse(desc.dateParse)\n            : timeParse(desc.dateFormat || DateColumn.DEFAULT_DATE_FORMAT);\n        _this.sort = desc.sort || EDateSort.median;\n        return _this;\n    }\n    DatesColumn_1 = DatesColumn;\n    DatesColumn.prototype.getFormatter = function () {\n        return this.format;\n    };\n    DatesColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([DatesColumn_1.EVENT_SORTMETHOD_CHANGED, DatesColumn_1.EVENT_FILTER_CHANGED]);\n    };\n    DatesColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    DatesColumn.prototype.getValue = function (row) {\n        var r = this.getDates(row);\n        return r.every(function (d) { return d == null; }) ? null : r;\n    };\n    DatesColumn.prototype.getLabels = function (row) {\n        var _this = this;\n        return this.getDates(row).map(function (v) { return (v instanceof Date ? _this.format(v) : ''); });\n    };\n    DatesColumn.prototype.getDates = function (row) {\n        var _this = this;\n        return _super.prototype.getValues.call(this, row).map(function (v) {\n            if (isMissingValue(v)) {\n                return null;\n            }\n            if (v instanceof Date) {\n                return v;\n            }\n            return _this.parse(String(v));\n        });\n    };\n    DatesColumn.prototype.getDate = function (row) {\n        var av = this.getDates(row).filter(Boolean);\n        if (av.length === 0) {\n            return null;\n        }\n        return new Date(compute(av, this.sort));\n    };\n    DatesColumn.prototype.iterDate = function (row) {\n        return this.getDates(row);\n    };\n    DatesColumn.prototype.getSortMethod = function () {\n        return this.sort;\n    };\n    DatesColumn.prototype.setSortMethod = function (sort) {\n        if (this.sort === sort) {\n            return;\n        }\n        this.fire([DatesColumn_1.EVENT_SORTMETHOD_CHANGED], this.sort, (this.sort = sort));\n        // sort by me if not already sorted by me\n        if (!this.isSortedByMe().asc) {\n            this.sortByMe();\n        }\n    };\n    DatesColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.sortMethod = this.getSortMethod();\n        r.filter = !isDummyDateFilter(this.currentFilter) ? this.currentFilter : null;\n        return r;\n    };\n    DatesColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        if (dump.sortMethod) {\n            this.sort = dump.sortMethod;\n        }\n        if (dump.filter) {\n            this.currentFilter = restoreDateFilter(dump.filter);\n        }\n    };\n    DatesColumn.prototype.toCompareValue = function (row) {\n        var vs = this.getDates(row).filter(Boolean);\n        if (!vs) {\n            return [0, 0];\n        }\n        return [vs.length, compute(vs, this.sort)];\n    };\n    DatesColumn.prototype.toCompareValueType = function () {\n        return [chooseUIntByDataLength(this.dataLength), ECompareValueType.DOUBLE_ASC];\n    };\n    DatesColumn.prototype.isFiltered = function () {\n        return DateColumn.prototype.isFiltered.call(this);\n    };\n    DatesColumn.prototype.getFilter = function () {\n        return DateColumn.prototype.getFilter.call(this);\n    };\n    DatesColumn.prototype.setFilter = function (value) {\n        DateColumn.prototype.setFilter.call(this, value);\n    };\n    DatesColumn.prototype.filter = function (row) {\n        return DateColumn.prototype.filter.call(this, row);\n    };\n    DatesColumn.prototype.clearFilter = function () {\n        return DateColumn.prototype.clearFilter.call(this);\n    };\n    var DatesColumn_1;\n    DatesColumn.EVENT_SORTMETHOD_CHANGED = 'sortMethodChanged';\n    DatesColumn.EVENT_FILTER_CHANGED = DateColumn.EVENT_FILTER_CHANGED;\n    DatesColumn = DatesColumn_1 = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'filterDate'),\n        dialogAddons('sort', 'sortDates')\n    ], DatesColumn);\n    return DatesColumn;\n}(ArrayColumn));\nexport default DatesColumn;\nfunction compute(arr, sort) {\n    switch (sort) {\n        case EDateSort.min:\n            return min(arr, function (d) { return d.getTime(); });\n        case EDateSort.max:\n            return max(arr, function (d) { return d.getTime(); });\n        case EDateSort.median:\n            return median(arr, function (d) { return d.getTime(); });\n    }\n}\n//# sourceMappingURL=DatesColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { timeFormat, timeParse } from 'd3-time-format';\nimport MapColumn from './MapColumn';\nimport { isMissingValue } from './missing';\nimport DatesColumn, { EDateSort } from './DatesColumn';\nimport DateColumn from './DateColumn';\nimport { dialogAddons, toolbar } from './annotations';\nimport { noDateFilter, isDummyDateFilter, restoreDateFilter } from './internalDate';\nimport { integrateDefaults } from './internal';\nvar DatesMapColumn = /** @class */ (function (_super) {\n    __extends(DatesMapColumn, _super);\n    function DatesMapColumn(id, desc) {\n        var _this = _super.call(this, id, integrateDefaults(desc, {\n            renderer: 'default',\n        })) || this;\n        _this.currentFilter = noDateFilter();\n        var f = timeFormat(desc.dateFormat || DateColumn.DEFAULT_DATE_FORMAT);\n        _this.format = function (v) { return (v instanceof Date ? f(v) : ''); };\n        _this.parse = desc.dateParse\n            ? timeParse(desc.dateParse)\n            : timeParse(desc.dateFormat || DateColumn.DEFAULT_DATE_FORMAT);\n        _this.sort = desc.sort || EDateSort.median;\n        return _this;\n    }\n    DatesMapColumn_1 = DatesMapColumn;\n    DatesMapColumn.prototype.getFormatter = function () {\n        return this.format;\n    };\n    DatesMapColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([DatesMapColumn_1.EVENT_SORTMETHOD_CHANGED, DatesMapColumn_1.EVENT_FILTER_CHANGED]);\n    };\n    DatesMapColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    DatesMapColumn.prototype.parseValue = function (v) {\n        if (isMissingValue(v)) {\n            return null;\n        }\n        if (v instanceof Date) {\n            return v;\n        }\n        return this.parse(String(v));\n    };\n    DatesMapColumn.prototype.getDateMap = function (row) {\n        var _this = this;\n        return _super.prototype.getMap.call(this, row).map(function (_a) {\n            var key = _a.key, value = _a.value;\n            return ({\n                key: key,\n                value: _this.parseValue(value),\n            });\n        });\n    };\n    DatesMapColumn.prototype.iterDate = function (row) {\n        return this.getDates(row);\n    };\n    DatesMapColumn.prototype.getValue = function (row) {\n        var r = this.getDateMap(row);\n        return r.every(function (d) { return d == null; }) ? null : r;\n    };\n    DatesMapColumn.prototype.getLabels = function (row) {\n        var _this = this;\n        return this.getDateMap(row).map(function (_a) {\n            var key = _a.key, value = _a.value;\n            return ({\n                key: key,\n                value: value instanceof Date ? _this.format(value) : '',\n            });\n        });\n    };\n    DatesMapColumn.prototype.getDates = function (row) {\n        return this.getDateMap(row).map(function (v) { return v.value; });\n    };\n    DatesMapColumn.prototype.getDate = function (row) {\n        return DatesColumn.prototype.getDate.call(this, row);\n    };\n    DatesMapColumn.prototype.getSortMethod = function () {\n        return this.sort;\n    };\n    DatesMapColumn.prototype.setSortMethod = function (sort) {\n        return DatesColumn.prototype.setSortMethod.call(this, sort);\n    };\n    DatesMapColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.sortMethod = this.getSortMethod();\n        r.filter = !isDummyDateFilter(this.currentFilter) ? this.currentFilter : null;\n        return r;\n    };\n    DatesMapColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        if (dump.sortMethod) {\n            this.sort = dump.sortMethod;\n        }\n        if (dump.filter) {\n            this.currentFilter = restoreDateFilter(dump.filter);\n        }\n    };\n    DatesMapColumn.prototype.isFiltered = function () {\n        return DateColumn.prototype.isFiltered.call(this);\n    };\n    DatesMapColumn.prototype.getFilter = function () {\n        return DateColumn.prototype.getFilter.call(this);\n    };\n    DatesMapColumn.prototype.setFilter = function (value) {\n        DateColumn.prototype.setFilter.call(this, value);\n    };\n    DatesMapColumn.prototype.filter = function (row) {\n        return DateColumn.prototype.filter.call(this, row);\n    };\n    DatesMapColumn.prototype.clearFilter = function () {\n        return DateColumn.prototype.clearFilter.call(this);\n    };\n    var DatesMapColumn_1;\n    DatesMapColumn.EVENT_SORTMETHOD_CHANGED = DatesColumn.EVENT_SORTMETHOD_CHANGED;\n    DatesMapColumn.EVENT_FILTER_CHANGED = DateColumn.EVENT_FILTER_CHANGED;\n    DatesMapColumn = DatesMapColumn_1 = __decorate([\n        toolbar('rename', 'filterDate'),\n        dialogAddons('sort', 'sortDates')\n    ], DatesMapColumn);\n    return DatesMapColumn;\n}(MapColumn));\nexport default DatesMapColumn;\n//# sourceMappingURL=DatesMapColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Category, SupportType, toolbar, dialogAddons } from './annotations';\nimport Column from './Column';\nimport { ECompareValueType } from './interfaces';\nimport { missingGroup } from './missing';\nexport function createGroupDesc(label) {\n    if (label === void 0) { label = 'Group Name'; }\n    return { type: 'group', label: label };\n}\nexport var EGroupSortMethod;\n(function (EGroupSortMethod) {\n    EGroupSortMethod[\"name\"] = \"name\";\n    EGroupSortMethod[\"count\"] = \"count\";\n})(EGroupSortMethod || (EGroupSortMethod = {}));\nvar GroupColumn = /** @class */ (function (_super) {\n    __extends(GroupColumn, _super);\n    function GroupColumn() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.groupSortMethod = EGroupSortMethod.name;\n        return _this;\n    }\n    GroupColumn_1 = GroupColumn;\n    Object.defineProperty(GroupColumn.prototype, \"frozen\", {\n        get: function () {\n            return this.desc.frozen !== false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    GroupColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([GroupColumn_1.EVENT_SORTMETHOD_CHANGED]);\n    };\n    GroupColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    GroupColumn.prototype.getLabel = function () {\n        return '';\n    };\n    GroupColumn.prototype.getValue = function () {\n        return '';\n    };\n    GroupColumn.prototype.getSortMethod = function () {\n        return this.groupSortMethod;\n    };\n    GroupColumn.prototype.setSortMethod = function (sortMethod) {\n        if (this.groupSortMethod === sortMethod) {\n            return;\n        }\n        this.fire(GroupColumn_1.EVENT_SORTMETHOD_CHANGED, this.groupSortMethod, (this.groupSortMethod = sortMethod));\n        // sort by me if not already sorted by me\n        if (!this.isGroupSortedByMe().asc) {\n            this.toggleMyGroupSorting();\n        }\n    };\n    GroupColumn.prototype.toCompareGroupValue = function (rows, group) {\n        if (this.groupSortMethod === 'count') {\n            return rows.length;\n        }\n        return group.name === missingGroup.name ? null : group.name.toLowerCase();\n    };\n    GroupColumn.prototype.toCompareGroupValueType = function () {\n        return this.groupSortMethod === 'count' ? ECompareValueType.COUNT : ECompareValueType.STRING;\n    };\n    var GroupColumn_1;\n    GroupColumn.EVENT_SORTMETHOD_CHANGED = 'sortMethodChanged';\n    GroupColumn = GroupColumn_1 = __decorate([\n        SupportType(),\n        toolbar('rename', 'sortGroupBy'),\n        dialogAddons('sortGroup', 'sortGroups'),\n        Category('support')\n    ], GroupColumn);\n    return GroupColumn;\n}(Column));\nexport default GroupColumn;\n//# sourceMappingURL=GroupColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Category, toolbar } from './annotations';\nimport CategoricalColumn from './CategoricalColumn';\nimport Column, { DEFAULT_COLOR, } from './Column';\nimport { colorPool, integrateDefaults } from './internal';\nimport { missingGroup } from './missing';\nimport ValueColumn from './ValueColumn';\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION } from './CategoricalColorMappingFunction';\n/**\n * column for hierarchical categorical values\n */\nvar HierarchyColumn = /** @class */ (function (_super) {\n    __extends(HierarchyColumn, _super);\n    function HierarchyColumn(id, desc) {\n        var _this = _super.call(this, id, integrateDefaults(desc, {\n            renderer: 'categorical',\n        })) || this;\n        _this.currentMaxDepth = Number.POSITIVE_INFINITY;\n        _this.currentLeaves = [];\n        _this.currentLeavesNameCache = new Map();\n        _this.currentLeavesPathCache = new Map();\n        _this.hierarchySeparator = desc.hierarchySeparator || '.';\n        _this.hierarchy = _this.initHierarchy(desc.hierarchy);\n        _this.currentNode = _this.hierarchy;\n        _this.currentLeaves = computeLeaves(_this.currentNode, _this.currentMaxDepth);\n        _this.updateCaches();\n        _this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n        return _this;\n    }\n    HierarchyColumn_1 = HierarchyColumn;\n    HierarchyColumn.prototype.initHierarchy = function (root) {\n        var colors = colorPool();\n        var s = this.hierarchySeparator;\n        var add = function (prefix, node) {\n            var name = node.name == null ? String(node.value) : node.name;\n            var children = (node.children || []).map(function (child) {\n                if (typeof child === 'string') {\n                    var path_1 = prefix + child;\n                    return {\n                        path: path_1,\n                        name: child,\n                        label: path_1,\n                        color: colors(),\n                        value: 0,\n                        children: [],\n                    };\n                }\n                var r = add(\"\".concat(prefix).concat(name).concat(s), child);\n                if (!r.color) {\n                    //hack to inject the next color\n                    r.color = colors();\n                }\n                return r;\n            });\n            var path = prefix + name;\n            var label = node.label ? node.label : path;\n            return { path: path, name: name, children: children, label: label, color: node.color, value: 0 };\n        };\n        return add('', root);\n    };\n    Object.defineProperty(HierarchyColumn.prototype, \"categories\", {\n        get: function () {\n            return this.currentLeaves;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    HierarchyColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([HierarchyColumn_1.EVENT_COLOR_MAPPING_CHANGED, HierarchyColumn_1.EVENT_CUTOFF_CHANGED]);\n    };\n    HierarchyColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    HierarchyColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.colorMapping = this.colorMapping.toJSON();\n        if (isFinite(this.currentMaxDepth)) {\n            r.maxDepth = this.currentMaxDepth;\n        }\n        if (this.currentNode !== this.hierarchy) {\n            r.cutOffNode = this.currentNode.path;\n        }\n        return r;\n    };\n    HierarchyColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\n        if (typeof dump.maxDepth !== 'undefined') {\n            this.currentMaxDepth = dump.maxDepth;\n        }\n        if (typeof dump.cutOffNode !== 'undefined') {\n            var path = dump.cutOffNode.split(this.hierarchySeparator);\n            var node = this.hierarchy;\n            var findName = function (act) {\n                return function (d) { return d.name === act; };\n            };\n            var act = path.shift();\n            while (act && node) {\n                if (node.name !== act) {\n                    node = null;\n                    break;\n                }\n                var next = path.shift();\n                if (!next) {\n                    break;\n                }\n                act = next;\n                node = node.children.find(findName(act)) || null;\n            }\n            this.currentNode = node || this.hierarchy;\n        }\n        if (typeof dump.maxDepth !== 'undefined' || typeof dump.cutOffNode !== 'undefined') {\n            this.currentLeaves = computeLeaves(this.currentNode, this.currentMaxDepth);\n            this.updateCaches();\n        }\n    };\n    HierarchyColumn.prototype.getColorMapping = function () {\n        return this.colorMapping.clone();\n    };\n    HierarchyColumn.prototype.setColorMapping = function (mapping) {\n        if (this.colorMapping.eq(mapping)) {\n            return;\n        }\n        this.fire([\n            CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY,\n        ], this.colorMapping.clone(), (this.colorMapping = mapping));\n    };\n    HierarchyColumn.prototype.getCutOff = function () {\n        return {\n            node: this.currentNode,\n            maxDepth: this.currentMaxDepth,\n        };\n    };\n    HierarchyColumn.prototype.setCutOff = function (value) {\n        var maxDepth = value.maxDepth == null ? Number.POSITIVE_INFINITY : value.maxDepth;\n        if (this.currentNode === value.node && this.currentMaxDepth === maxDepth) {\n            return;\n        }\n        var bak = this.getCutOff();\n        this.currentNode = value.node;\n        this.currentMaxDepth = maxDepth;\n        this.currentLeaves = computeLeaves(value.node, maxDepth);\n        this.updateCaches();\n        this.fire([HierarchyColumn_1.EVENT_CUTOFF_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, this.getCutOff());\n    };\n    HierarchyColumn.prototype.getCategory = function (row) {\n        var _this = this;\n        var v = _super.prototype.getValue.call(this, row);\n        if (v == null || v === '') {\n            return null;\n        }\n        v = v.trim();\n        if (this.currentLeavesNameCache.has(v)) {\n            return this.currentLeavesNameCache.get(v);\n        }\n        if (this.currentLeavesPathCache.has(v)) {\n            return this.currentLeavesPathCache.get(v);\n        }\n        return (this.currentLeaves.find(function (n) {\n            //direct hit or is a child of it\n            return n.path === v || n.name === v || v.startsWith(n.path + _this.hierarchySeparator);\n        }) || null);\n    };\n    Object.defineProperty(HierarchyColumn.prototype, \"dataLength\", {\n        get: function () {\n            return this.currentLeaves.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HierarchyColumn.prototype, \"labels\", {\n        get: function () {\n            return this.currentLeaves.map(function (d) { return d.label; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    HierarchyColumn.prototype.getValue = function (row) {\n        var v = this.getCategory(row);\n        return v ? v.name : null;\n    };\n    HierarchyColumn.prototype.getCategories = function (row) {\n        return [this.getCategory(row)];\n    };\n    HierarchyColumn.prototype.iterCategory = function (row) {\n        return [this.getCategory(row)];\n    };\n    HierarchyColumn.prototype.getLabel = function (row) {\n        return CategoricalColumn.prototype.getLabel.call(this, row);\n    };\n    HierarchyColumn.prototype.getColor = function (row) {\n        return CategoricalColumn.prototype.getColor.call(this, row);\n    };\n    HierarchyColumn.prototype.getLabels = function (row) {\n        return CategoricalColumn.prototype.getLabels.call(this, row);\n    };\n    HierarchyColumn.prototype.getValues = function (row) {\n        return CategoricalColumn.prototype.getValues.call(this, row);\n    };\n    HierarchyColumn.prototype.getMap = function (row) {\n        return CategoricalColumn.prototype.getMap.call(this, row);\n    };\n    HierarchyColumn.prototype.getMapLabel = function (row) {\n        return CategoricalColumn.prototype.getMapLabel.call(this, row);\n    };\n    HierarchyColumn.prototype.getSet = function (row) {\n        return CategoricalColumn.prototype.getSet.call(this, row);\n    };\n    HierarchyColumn.prototype.toCompareValue = function (row) {\n        return CategoricalColumn.prototype.toCompareValue.call(this, row);\n    };\n    HierarchyColumn.prototype.toCompareValueType = function () {\n        return CategoricalColumn.prototype.toCompareValueType.call(this);\n    };\n    HierarchyColumn.prototype.group = function (row) {\n        var base = this.getCategory(row);\n        if (!base) {\n            return Object.assign({}, missingGroup);\n        }\n        return { name: base.label, color: base.color };\n    };\n    HierarchyColumn.prototype.updateCaches = function () {\n        var _this = this;\n        this.currentLeavesPathCache.clear();\n        this.currentLeavesNameCache.clear();\n        this.currentLeaves.forEach(function (n) {\n            _this.currentLeavesPathCache.set(n.path, n);\n            _this.currentLeavesNameCache.set(n.name, n);\n        });\n    };\n    var HierarchyColumn_1;\n    HierarchyColumn.EVENT_CUTOFF_CHANGED = 'cutOffChanged';\n    HierarchyColumn.EVENT_COLOR_MAPPING_CHANGED = 'colorMappingChanged';\n    HierarchyColumn = HierarchyColumn_1 = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'cutoff', 'group', 'groupBy', 'colorMappedCategorical'),\n        Category('categorical')\n    ], HierarchyColumn);\n    return HierarchyColumn;\n}(ValueColumn));\nexport default HierarchyColumn;\nfunction computeLeaves(node, maxDepth) {\n    if (maxDepth === void 0) { maxDepth = Number.POSITIVE_INFINITY; }\n    var leaves = [];\n    //depth first\n    var visit = function (node, depth) {\n        //hit or end\n        if (depth >= maxDepth || node.children.length === 0) {\n            leaves.push(node);\n        }\n        else {\n            // go down\n            node.children.forEach(function (c) { return visit(c, depth + 1); });\n        }\n    };\n    visit(node, 0);\n    return leaves;\n}\nexport function resolveInnerNodes(node) {\n    //breath first\n    var queue = [node];\n    var index = 0;\n    while (index < queue.length) {\n        var next = queue[index++];\n        for (var _i = 0, _a = next.children; _i < _a.length; _i++) {\n            var n = _a[_i];\n            queue.push(n);\n        }\n    }\n    return queue;\n}\nexport function isHierarchical(categories) {\n    if (categories.length === 0 || typeof categories[0] === 'string') {\n        return false;\n    }\n    // check if any has a given parent name\n    return categories.some(function (c) { return c.parent != null; });\n}\nexport function deriveHierarchy(categories) {\n    var lookup = new Map();\n    categories.forEach(function (c) {\n        var p = c.parent || '';\n        // set and fill up proxy\n        var item = Object.assign({\n            children: [],\n            label: c.name,\n            name: c.name,\n            color: DEFAULT_COLOR,\n            value: 0,\n        }, lookup.get(c.name) || {}, c);\n        lookup.set(c.name, item);\n        if (!lookup.has(p)) {\n            // create proxy\n            lookup.set(p, { name: p, children: [], label: p, value: 0, color: DEFAULT_COLOR });\n        }\n        lookup.get(p).children.push(item);\n    });\n    var root = lookup.get('');\n    console.assert(root !== undefined, 'hierarchy with no root');\n    if (root.children.length === 1) {\n        return root.children[0];\n    }\n    return root;\n}\n//# sourceMappingURL=HierarchyColumn.js.map","import {interpolateRgbBasis} from \"d3-interpolate\";\n\nexport default scheme => interpolateRgbBasis(scheme[scheme.length - 1]);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(colors);\n\nexport default ramp(scheme);\n","export const radians = Math.PI / 180;\nexport const degrees = 180 / Math.PI;\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * degrees - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * radians,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar c = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c.h = 360 * t - 100;\n  c.s = 1.5 - 1.5 * ts;\n  c.l = 0.8 - 0.9 * ts;\n  return c + \"\";\n}\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import colors from \"../colors.js\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"d8b365f5f5f55ab4ac\",\n  \"a6611adfc27d80cdc1018571\",\n  \"a6611adfc27df5f5f580cdc1018571\",\n  \"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\n  \"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\n  \"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\n  \"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\n  \"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\n  \"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"af8dc3f7f7f77fbf7b\",\n  \"7b3294c2a5cfa6dba0008837\",\n  \"7b3294c2a5cff7f7f7a6dba0008837\",\n  \"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\n  \"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\n  \"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\n  \"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\n  \"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\n  \"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e9a3c9f7f7f7a1d76a\",\n  \"d01c8bf1b6dab8e1864dac26\",\n  \"d01c8bf1b6daf7f7f7b8e1864dac26\",\n  \"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\n  \"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\n  \"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\n  \"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\n  \"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\n  \"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"998ec3f7f7f7f1a340\",\n  \"5e3c99b2abd2fdb863e66101\",\n  \"5e3c99b2abd2f7f7f7fdb863e66101\",\n  \"542788998ec3d8daebfee0b6f1a340b35806\",\n  \"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\n  \"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\n  \"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\n  \"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\n  \"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62f7f7f767a9cf\",\n  \"ca0020f4a58292c5de0571b0\",\n  \"ca0020f4a582f7f7f792c5de0571b0\",\n  \"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\n  \"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\n  \"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\n  \"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\n  \"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\n  \"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62ffffff999999\",\n  \"ca0020f4a582bababa404040\",\n  \"ca0020f4a582ffffffbababa404040\",\n  \"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\n  \"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\n  \"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\n  \"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\n  \"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\n  \"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91bfdb\",\n  \"d7191cfdae61abd9e92c7bb6\",\n  \"d7191cfdae61ffffbfabd9e92c7bb6\",\n  \"d73027fc8d59fee090e0f3f891bfdb4575b4\",\n  \"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\n  \"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\n  \"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\n  \"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\n  \"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91cf60\",\n  \"d7191cfdae61a6d96a1a9641\",\n  \"d7191cfdae61ffffbfa6d96a1a9641\",\n  \"d73027fc8d59fee08bd9ef8b91cf601a9850\",\n  \"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\n  \"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\n  \"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\n  \"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\n  \"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf99d594\",\n  \"d7191cfdae61abdda42b83ba\",\n  \"d7191cfdae61ffffbfabdda42b83ba\",\n  \"d53e4ffc8d59fee08be6f59899d5943288bd\",\n  \"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\n  \"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\n  \"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\n  \"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\n  \"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\"\n).map(colors);\n\nexport default ramp(scheme);\n","import { interpolateBlues, interpolateGreens, interpolateGreys, interpolateOranges, interpolatePurples, interpolateReds, interpolateCool, interpolateCubehelixDefault, interpolateWarm, interpolatePlasma, interpolateMagma, interpolateViridis, interpolateInferno, interpolateYlOrRd, interpolateYlOrBr, interpolateBuGn, interpolateBuPu, interpolateGnBu, interpolateOrRd, interpolatePuBuGn, interpolatePuBu, interpolatePuRd, interpolateRdPu, interpolateYlGnBu, interpolateYlGn, interpolateRainbow, interpolateBrBG, interpolatePRGn, interpolatePiYG, interpolatePuOr, interpolateRdBu, interpolateRdGy, interpolateRdYlBu, interpolateRdYlGn, interpolateSpectral, } from 'd3-scale-chromatic';\nimport { equal } from '../internal';\nimport { scaleLinear } from 'd3-scale';\nimport { DEFAULT_COLOR } from './Column';\nvar SequentialColorFunction = /** @class */ (function () {\n    function SequentialColorFunction(name) {\n        this.name = name;\n        this.apply = SequentialColorFunction.FUNCTIONS[name] || interpolateBlues;\n    }\n    SequentialColorFunction.prototype.toJSON = function () {\n        return this.name;\n    };\n    SequentialColorFunction.prototype.clone = function () {\n        return this; // no clone needed since not parameterized\n    };\n    SequentialColorFunction.prototype.eq = function (other) {\n        return other instanceof SequentialColorFunction && other.name === this.name;\n    };\n    SequentialColorFunction.FUNCTIONS = {\n        interpolateBlues: interpolateBlues,\n        interpolateGreens: interpolateGreens,\n        interpolateGreys: interpolateGreys,\n        interpolateOranges: interpolateOranges,\n        interpolatePurples: interpolatePurples,\n        interpolateReds: interpolateReds,\n        interpolateCool: interpolateCool,\n        interpolateCubehelixDefault: interpolateCubehelixDefault,\n        interpolateWarm: interpolateWarm,\n        interpolatePlasma: interpolatePlasma,\n        interpolateMagma: interpolateMagma,\n        interpolateViridis: interpolateViridis,\n        interpolateInferno: interpolateInferno,\n        interpolateYlOrRd: interpolateYlOrRd,\n        interpolateYlOrBr: interpolateYlOrBr,\n        interpolateBuGn: interpolateBuGn,\n        interpolateBuPu: interpolateBuPu,\n        interpolateGnBu: interpolateGnBu,\n        interpolateOrRd: interpolateOrRd,\n        interpolatePuBuGn: interpolatePuBuGn,\n        interpolatePuBu: interpolatePuBu,\n        interpolatePuRd: interpolatePuRd,\n        interpolateRdPu: interpolateRdPu,\n        interpolateYlGnBu: interpolateYlGnBu,\n        interpolateYlGn: interpolateYlGn,\n        interpolateRainbow: interpolateRainbow,\n    };\n    return SequentialColorFunction;\n}());\nexport { SequentialColorFunction };\nvar DivergentColorFunction = /** @class */ (function () {\n    function DivergentColorFunction(name) {\n        this.name = name;\n        this.apply = DivergentColorFunction.FUNCTIONS[name] || interpolateBlues;\n    }\n    DivergentColorFunction.prototype.toJSON = function () {\n        return this.name;\n    };\n    DivergentColorFunction.prototype.clone = function () {\n        return this; // no clone needed since not parameterized\n    };\n    DivergentColorFunction.prototype.eq = function (other) {\n        return other instanceof DivergentColorFunction && other.name === this.name;\n    };\n    DivergentColorFunction.FUNCTIONS = {\n        interpolateBrBG: interpolateBrBG,\n        interpolatePRGn: interpolatePRGn,\n        interpolatePiYG: interpolatePiYG,\n        interpolatePuOr: interpolatePuOr,\n        interpolateRdBu: interpolateRdBu,\n        interpolateRdGy: interpolateRdGy,\n        interpolateRdYlBu: interpolateRdYlBu,\n        interpolateRdYlGn: interpolateRdYlGn,\n        interpolateSpectral: interpolateSpectral,\n    };\n    return DivergentColorFunction;\n}());\nexport { DivergentColorFunction };\nvar UnknownColorFunction = /** @class */ (function () {\n    function UnknownColorFunction(apply) {\n        this.apply = apply;\n    }\n    UnknownColorFunction.prototype.toJSON = function () {\n        return this.apply.toString();\n    };\n    UnknownColorFunction.prototype.clone = function () {\n        return this; // no clone needed since not parameterized\n    };\n    UnknownColorFunction.prototype.eq = function (other) {\n        return other instanceof UnknownColorFunction && other.apply === this.apply;\n    };\n    return UnknownColorFunction;\n}());\nexport { UnknownColorFunction };\nvar SolidColorFunction = /** @class */ (function () {\n    function SolidColorFunction(color) {\n        this.color = color;\n    }\n    SolidColorFunction.prototype.apply = function () {\n        return this.color;\n    };\n    SolidColorFunction.prototype.toJSON = function () {\n        return this.color;\n    };\n    SolidColorFunction.prototype.clone = function () {\n        return this; // no clone needed since not parameterized\n    };\n    SolidColorFunction.prototype.eq = function (other) {\n        return other instanceof SolidColorFunction && other.color === this.color;\n    };\n    return SolidColorFunction;\n}());\nexport { SolidColorFunction };\nvar QuantizedColorFunction = /** @class */ (function () {\n    function QuantizedColorFunction(base, steps) {\n        if (typeof base.apply === 'function') {\n            this.base = base;\n            this.steps = steps == null ? 5 : steps;\n        }\n        else {\n            var dump = base;\n            this.base = steps.colorMappingFunction(dump.base);\n            this.steps = dump.steps;\n        }\n    }\n    QuantizedColorFunction.prototype.apply = function (v) {\n        return this.base.apply(quantize(v, this.steps));\n    };\n    QuantizedColorFunction.prototype.toJSON = function () {\n        return {\n            type: 'quantized',\n            base: this.base.toJSON(),\n            steps: this.steps,\n        };\n    };\n    QuantizedColorFunction.prototype.clone = function () {\n        return new QuantizedColorFunction(this.base.clone(), this.steps);\n    };\n    QuantizedColorFunction.prototype.eq = function (other) {\n        return other instanceof QuantizedColorFunction && other.base.eq(this.base) && other.steps === this.steps;\n    };\n    return QuantizedColorFunction;\n}());\nexport { QuantizedColorFunction };\nvar CustomColorMappingFunction = /** @class */ (function () {\n    function CustomColorMappingFunction(entries) {\n        this.scale = scaleLinear();\n        this.entries = Array.isArray(entries) ? entries : entries.entries;\n        this.scale\n            .domain(this.entries.map(function (d) { return d.value; }))\n            .range(this.entries.map(function (d) { return d.color; }))\n            .clamp(true);\n    }\n    CustomColorMappingFunction.prototype.apply = function (v) {\n        return this.scale(v);\n    };\n    CustomColorMappingFunction.prototype.toJSON = function () {\n        return {\n            type: 'custom',\n            entries: this.entries,\n        };\n    };\n    CustomColorMappingFunction.prototype.clone = function () {\n        return new CustomColorMappingFunction(this.entries.slice());\n    };\n    CustomColorMappingFunction.prototype.eq = function (other) {\n        return other instanceof CustomColorMappingFunction && equal(this.entries, other.entries);\n    };\n    return CustomColorMappingFunction;\n}());\nexport { CustomColorMappingFunction };\n/**\n * @internal\n */\nexport function quantize(v, steps) {\n    var perStep = 1 / steps;\n    if (v <= perStep) {\n        return 0;\n    }\n    if (v >= 1 - perStep) {\n        return 1;\n    }\n    for (var acc = 0; acc < 1; acc += perStep) {\n        if (v < acc) {\n            return acc - perStep / 2; // center\n        }\n    }\n    return v;\n}\nexport function colorMappingFunctions() {\n    var _a;\n    var types = (_a = {},\n        _a[DEFAULT_COLOR] = SolidColorFunction,\n        _a.quantized = QuantizedColorFunction,\n        _a.custom = CustomColorMappingFunction,\n        _a);\n    for (var _i = 0, _b = Object.keys(SequentialColorFunction.FUNCTIONS); _i < _b.length; _i++) {\n        var key = _b[_i];\n        types[key] = SequentialColorFunction;\n    }\n    for (var _c = 0, _d = Object.keys(DivergentColorFunction.FUNCTIONS); _c < _d.length; _c++) {\n        var key = _d[_c];\n        types[key] = DivergentColorFunction;\n    }\n    return types;\n}\nexport var DEFAULT_COLOR_FUNCTION = new SolidColorFunction(DEFAULT_COLOR);\n/**\n * @internal\n */\nexport function createColorMappingFunction(types, factory) {\n    return function (dump) {\n        if (!dump) {\n            return DEFAULT_COLOR_FUNCTION;\n        }\n        if (typeof dump === 'function') {\n            return new UnknownColorFunction(dump);\n        }\n        var typeName = typeof dump === 'string' ? dump : dump.type;\n        var type = types[typeName];\n        if (type) {\n            return new type(dump, factory);\n        }\n        if (Array.isArray(dump)) {\n            return new CustomColorMappingFunction(dump);\n        }\n        return new SolidColorFunction(dump.toString());\n    };\n}\n//# sourceMappingURL=ColorMappingFunction.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { suffix } from '../internal';\nimport { toolbar, SortByDefault } from './annotations';\nimport { DEFAULT_COLOR, } from './Column';\nimport CompositeColumn from './CompositeColumn';\nimport { isNumberColumn, isMapAbleColumn, } from './INumberColumn';\nimport NumberColumn from './NumberColumn';\nimport { DEFAULT_FORMATTER, noNumberFilter } from './internalNumber';\nimport { ScaleMappingFunction } from './MappingFunction';\nimport { DEFAULT_COLOR_FUNCTION } from './ColorMappingFunction';\nimport { integrateDefaults } from './internal';\n/**\n *  factory for creating a description creating a max column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createImpositionDesc(label) {\n    if (label === void 0) { label = 'Imposition'; }\n    return { type: 'imposition', label: label };\n}\n/**\n * implementation of a combine column, standard operations how to select\n */\nvar ImpositionCompositeColumn = /** @class */ (function (_super) {\n    __extends(ImpositionCompositeColumn, _super);\n    function ImpositionCompositeColumn(id, desc) {\n        return _super.call(this, id, integrateDefaults(desc, {\n            renderer: 'number',\n            groupRenderer: 'boxplot',\n            summaryRenderer: 'histogram',\n        })) || this;\n    }\n    ImpositionCompositeColumn_1 = ImpositionCompositeColumn;\n    Object.defineProperty(ImpositionCompositeColumn.prototype, \"label\", {\n        get: function () {\n            var l = _super.prototype.getMetaData.call(this).label;\n            var c = this._children;\n            if (l !== 'Imposition' || c.length === 0) {\n                return l;\n            }\n            if (c.length === 1) {\n                return c[0].label;\n            }\n            var w = this.wrapper;\n            var rest = this.rest;\n            return \"\".concat(w ? w.label : '?', \" (\").concat(rest.map(function (c) { return c.label; }).join(', '), \")\");\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ImpositionCompositeColumn.prototype, \"wrapper\", {\n        get: function () {\n            var _a;\n            return (_a = this._children.find(isNumberColumn)) !== null && _a !== void 0 ? _a : null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ImpositionCompositeColumn.prototype, \"rest\", {\n        get: function () {\n            var w = this.wrapper;\n            return this._children.filter(function (d) { return d !== w; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ImpositionCompositeColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([ImpositionCompositeColumn_1.EVENT_MAPPING_CHANGED, ImpositionCompositeColumn_1.EVENT_COLOR_MAPPING_CHANGED]);\n    };\n    ImpositionCompositeColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    ImpositionCompositeColumn.prototype.getLabel = function (row) {\n        var c = this._children;\n        if (c.length === 0) {\n            return '';\n        }\n        if (c.length === 1) {\n            return c[0].getLabel(row);\n        }\n        var w = this.wrapper;\n        var rest = this.rest;\n        return \"\".concat(w ? w.getLabel(row) : '?', \" (\").concat(rest.map(function (c) { return \"\".concat(c.label, \" = \").concat(c.getLabel(row)); }).join(', '), \")\");\n    };\n    ImpositionCompositeColumn.prototype.getColor = function (row) {\n        var c = this._children;\n        switch (c.length) {\n            case 0:\n                return DEFAULT_COLOR;\n            case 1:\n                return c[0].getColor(row);\n            default:\n                return this.rest[0].getColor(row);\n        }\n    };\n    ImpositionCompositeColumn.prototype.getNumberFormat = function () {\n        var w = this.wrapper;\n        return w ? w.getNumberFormat() : DEFAULT_FORMATTER;\n    };\n    ImpositionCompositeColumn.prototype.getValue = function (row) {\n        var w = this.wrapper;\n        return w ? w.getValue(row) : NaN;\n    };\n    ImpositionCompositeColumn.prototype.getNumber = function (row) {\n        var w = this.wrapper;\n        return w ? w.getNumber(row) : NaN;\n    };\n    ImpositionCompositeColumn.prototype.getRawNumber = function (row) {\n        var w = this.wrapper;\n        return w ? w.getRawNumber(row) : NaN;\n    };\n    ImpositionCompositeColumn.prototype.iterNumber = function (row) {\n        return [this.getNumber(row)];\n    };\n    ImpositionCompositeColumn.prototype.iterRawNumber = function (row) {\n        return [this.getRawNumber(row)];\n    };\n    ImpositionCompositeColumn.prototype.getExportValue = function (row, format) {\n        if (format === 'json') {\n            var value = this.getRawNumber(row);\n            if (Number.isNaN(value)) {\n                return null;\n            }\n            return {\n                label: this.getLabel(row),\n                color: this.getColor(row),\n                value: value,\n            };\n        }\n        return _super.prototype.getExportValue.call(this, row, format);\n    };\n    ImpositionCompositeColumn.prototype.getMapping = function () {\n        var w = this.wrapper;\n        return w && isMapAbleColumn(w) ? w.getMapping() : new ScaleMappingFunction();\n    };\n    ImpositionCompositeColumn.prototype.getOriginalMapping = function () {\n        var w = this.wrapper;\n        return w && isMapAbleColumn(w) ? w.getOriginalMapping() : new ScaleMappingFunction();\n    };\n    ImpositionCompositeColumn.prototype.setMapping = function (mapping) {\n        var w = this.wrapper;\n        return w && isMapAbleColumn(w) ? w.setMapping(mapping) : undefined;\n    };\n    ImpositionCompositeColumn.prototype.getColorMapping = function () {\n        var w = this.wrapper;\n        return w && isMapAbleColumn(w) ? w.getColorMapping() : DEFAULT_COLOR_FUNCTION;\n    };\n    ImpositionCompositeColumn.prototype.setColorMapping = function (mapping) {\n        var w = this.wrapper;\n        return w && isMapAbleColumn(w) ? w.setColorMapping(mapping) : undefined;\n    };\n    ImpositionCompositeColumn.prototype.getFilter = function () {\n        var w = this.wrapper;\n        return w && isMapAbleColumn(w) ? w.getFilter() : noNumberFilter();\n    };\n    ImpositionCompositeColumn.prototype.setFilter = function (value) {\n        var w = this.wrapper;\n        return w && isMapAbleColumn(w) ? w.setFilter(value) : undefined;\n    };\n    ImpositionCompositeColumn.prototype.getRange = function () {\n        var w = this.wrapper;\n        return w && isMapAbleColumn(w) ? w.getRange() : ['0', '1'];\n    };\n    ImpositionCompositeColumn.prototype.toCompareValue = function (row) {\n        return NumberColumn.prototype.toCompareValue.call(this, row);\n    };\n    ImpositionCompositeColumn.prototype.toCompareValueType = function () {\n        return NumberColumn.prototype.toCompareValueType.call(this);\n    };\n    ImpositionCompositeColumn.prototype.toCompareGroupValue = function (rows, group) {\n        return NumberColumn.prototype.toCompareGroupValue.call(this, rows, group);\n    };\n    ImpositionCompositeColumn.prototype.toCompareGroupValueType = function () {\n        return NumberColumn.prototype.toCompareGroupValueType.call(this);\n    };\n    ImpositionCompositeColumn.prototype.insert = function (col, index) {\n        if (this._children.length === 1 && !this.wrapper && !isNumberColumn(col)) {\n            // at least one has to be a number column\n            return null;\n        }\n        if (this._children.length >= 2) {\n            // limit to two\n            return null;\n        }\n        return _super.prototype.insert.call(this, col, index);\n    };\n    ImpositionCompositeColumn.prototype.insertImpl = function (col, index) {\n        if (isNumberColumn(col)) {\n            this.forward.apply(this, __spreadArray([col], suffix('.impose', NumberColumn.EVENT_MAPPING_CHANGED), false));\n        }\n        if (isMapAbleColumn(col)) {\n            this.forward.apply(this, __spreadArray([col], suffix('.impose', NumberColumn.EVENT_COLOR_MAPPING_CHANGED), false));\n        }\n        return _super.prototype.insertImpl.call(this, col, index);\n    };\n    ImpositionCompositeColumn.prototype.removeImpl = function (child, index) {\n        if (isNumberColumn(child)) {\n            this.unforward.apply(this, __spreadArray([child], suffix('.impose', NumberColumn.EVENT_MAPPING_CHANGED), false));\n        }\n        if (isMapAbleColumn(child)) {\n            this.unforward.apply(this, __spreadArray([child], suffix('.impose', NumberColumn.EVENT_COLOR_MAPPING_CHANGED), false));\n        }\n        return _super.prototype.removeImpl.call(this, child, index);\n    };\n    var ImpositionCompositeColumn_1;\n    ImpositionCompositeColumn.EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\n    ImpositionCompositeColumn.EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\n    ImpositionCompositeColumn = ImpositionCompositeColumn_1 = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'filterNumber', 'colorMapped', 'editMapping'),\n        SortByDefault('descending')\n    ], ImpositionCompositeColumn);\n    return ImpositionCompositeColumn;\n}(CompositeColumn));\nexport default ImpositionCompositeColumn;\n//# sourceMappingURL=ImpositionCompositeColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { format } from 'd3-format';\nimport { boxplotBuilder } from '../internal';\nimport { dialogAddons, SortByDefault, toolbar } from './annotations';\nimport ArrayColumn from './ArrayColumn';\nimport Column from './Column';\nimport { ECompareValueType } from './interfaces';\nimport { DEFAULT_FORMATTER, getBoxPlotNumber, isDummyNumberFilter, noNumberFilter, restoreNumberFilter, toCompareBoxPlotValue, } from './internalNumber';\nimport { EAdvancedSortMethod, } from './INumberColumn';\nimport { restoreMapping } from './MappingFunction';\nimport { isMissingValue } from './missing';\nimport NumberColumn from './NumberColumn';\nimport { integrateDefaults } from './internal';\nvar NumbersColumn = /** @class */ (function (_super) {\n    __extends(NumbersColumn, _super);\n    function NumbersColumn(id, desc, factory) {\n        var _this = _super.call(this, id, integrateDefaults(desc, Object.assign({\n            renderer: 'heatmap',\n            groupRenderer: 'heatmap',\n            summaryRenderer: 'histogram',\n        }, desc.dataLength != null && !Number.isNaN(desc.dataLength)\n            ? {\n                // better initialize the default with based on the data length\n                width: Math.min(Math.max(100, desc.dataLength * 10), 500),\n            }\n            : {}))) || this;\n        _this.numberFormat = DEFAULT_FORMATTER;\n        /**\n         * currently active filter\n         * @type {{min: number, max: number}}\n         * @private\n         */\n        _this.currentFilter = noNumberFilter();\n        _this.mapping = restoreMapping(desc, factory);\n        _this.original = _this.mapping.clone();\n        _this.deriveMapping = _this.mapping.domain.map(function (d) { return d == null || Number.isNaN(d); });\n        _this.colorMapping = factory.colorMappingFunction(desc.colorMapping || desc.color);\n        if (desc.numberFormat) {\n            _this.numberFormat = format(desc.numberFormat);\n        }\n        _this.sort = desc.sort || EAdvancedSortMethod.median;\n        return _this;\n    }\n    NumbersColumn_1 = NumbersColumn;\n    NumbersColumn.prototype.onDataUpdate = function (rows) {\n        var _this = this;\n        _super.prototype.onDataUpdate.call(this, rows);\n        if (!this.deriveMapping.some(Boolean)) {\n            return;\n        }\n        // hook for listening to data updates\n        var minMax = rows\n            .map(function (row) { return _this.getRawValue(row); })\n            .reduce(function (acc, v) {\n            if (v == null || !Array.isArray(v)) {\n                return acc;\n            }\n            for (var _i = 0, v_1 = v; _i < v_1.length; _i++) {\n                var vi = v_1[_i];\n                if (vi == null || Number.isNaN(vi)) {\n                    continue;\n                }\n                if (vi < acc.min) {\n                    acc.min = vi;\n                }\n                if (vi > acc.max) {\n                    acc.max = vi;\n                }\n            }\n            return acc;\n        }, { min: Number.POSITIVE_INFINITY, max: Number.NEGATIVE_INFINITY });\n        var domain = this.mapping.domain.slice();\n        if (this.deriveMapping[0]) {\n            domain[0] = minMax.min;\n        }\n        if (this.deriveMapping[this.deriveMapping.length - 1]) {\n            domain[domain.length - 1] = minMax.max;\n        }\n        this.mapping.domain = domain;\n        this.original.domain = domain;\n    };\n    NumbersColumn.prototype.getNumberFormat = function () {\n        return this.numberFormat;\n    };\n    NumbersColumn.prototype.toCompareValue = function (row) {\n        return toCompareBoxPlotValue(this, row);\n    };\n    NumbersColumn.prototype.toCompareValueType = function () {\n        return ECompareValueType.FLOAT;\n    };\n    NumbersColumn.prototype.getRawNumbers = function (row) {\n        return this.getRawValue(row);\n    };\n    NumbersColumn.prototype.getBoxPlotData = function (row) {\n        var data = this.getRawValue(row);\n        if (data == null) {\n            return null;\n        }\n        var b = boxplotBuilder();\n        for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n            var d = data_1[_i];\n            b.push(isMissingValue(d) ? NaN : this.mapping.apply(d));\n        }\n        return b.build();\n    };\n    NumbersColumn.prototype.getRange = function () {\n        return this.mapping.getRange(this.numberFormat);\n    };\n    NumbersColumn.prototype.getRawBoxPlotData = function (row) {\n        var data = this.getRawValue(row);\n        if (data == null) {\n            return null;\n        }\n        var b = boxplotBuilder();\n        for (var _i = 0, data_2 = data; _i < data_2.length; _i++) {\n            var d = data_2[_i];\n            b.push(isMissingValue(d) ? NaN : d);\n        }\n        return b.build();\n    };\n    NumbersColumn.prototype.getNumbers = function (row) {\n        return this.getValues(row);\n    };\n    NumbersColumn.prototype.getNumber = function (row) {\n        return getBoxPlotNumber(this, row, 'normalized');\n    };\n    NumbersColumn.prototype.getRawNumber = function (row) {\n        return getBoxPlotNumber(this, row, 'raw');\n    };\n    NumbersColumn.prototype.getValue = function (row) {\n        var v = this.getValues(row);\n        return v.every(Number.isNaN) ? null : v;\n    };\n    NumbersColumn.prototype.getValues = function (row) {\n        var _this = this;\n        return this.getRawValue(row).map(function (d) { return (Number.isNaN(d) ? NaN : _this.mapping.apply(d)); });\n    };\n    NumbersColumn.prototype.iterNumber = function (row) {\n        var v = this.getNumbers(row);\n        if (v.every(Number.isNaN)) {\n            // missing row\n            return [NaN];\n        }\n        return v;\n    };\n    NumbersColumn.prototype.iterRawNumber = function (row) {\n        var v = this.getRawNumbers(row);\n        if (v.every(Number.isNaN)) {\n            // missing row\n            return [NaN];\n        }\n        return v;\n    };\n    NumbersColumn.prototype.getRawValue = function (row) {\n        var r = _super.prototype.getRaw.call(this, row);\n        return r == null ? [] : r.map(function (d) { return (isMissingValue(d) ? NaN : +d); });\n    };\n    NumbersColumn.prototype.getExportValue = function (row, format) {\n        return format === 'json' ? this.getRawValue(row) : _super.prototype.getExportValue.call(this, row, format);\n    };\n    NumbersColumn.prototype.getLabels = function (row) {\n        return this.getRawValue(row).map(this.numberFormat);\n    };\n    NumbersColumn.prototype.getSortMethod = function () {\n        return this.sort;\n    };\n    NumbersColumn.prototype.setSortMethod = function (sort) {\n        if (this.sort === sort) {\n            return;\n        }\n        this.fire([\n            NumbersColumn_1.EVENT_SORTMETHOD_CHANGED,\n            NumberColumn.EVENT_DIRTY_HEADER,\n            NumberColumn.EVENT_DIRTY_VALUES,\n            NumbersColumn_1.EVENT_DIRTY_CACHES,\n            NumberColumn.EVENT_DIRTY,\n        ], this.sort, (this.sort = sort));\n        // sort by me if not already sorted by me\n        if (!this.isSortedByMe().asc) {\n            this.sortByMe();\n        }\n    };\n    NumbersColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.sortMethod = this.getSortMethod();\n        r.filter = !isDummyNumberFilter(this.currentFilter) ? this.currentFilter : null;\n        r.map = this.mapping.toJSON();\n        r.colorMapping = this.colorMapping.toJSON();\n        return r;\n    };\n    NumbersColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        if (dump.sortMethod) {\n            this.sort = dump.sortMethod;\n        }\n        if (dump.filter) {\n            this.currentFilter = restoreNumberFilter(dump.filter);\n        }\n        if (dump.map || dump.domain) {\n            this.mapping = restoreMapping(dump, factory);\n        }\n        if (dump.colorMapping) {\n            this.colorMapping = factory.colorMappingFunction(dump.colorMapping);\n        }\n    };\n    NumbersColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([\n            NumbersColumn_1.EVENT_COLOR_MAPPING_CHANGED,\n            NumbersColumn_1.EVENT_MAPPING_CHANGED,\n            NumbersColumn_1.EVENT_SORTMETHOD_CHANGED,\n            NumbersColumn_1.EVENT_FILTER_CHANGED,\n        ]);\n    };\n    NumbersColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    NumbersColumn.prototype.getOriginalMapping = function () {\n        return this.original.clone();\n    };\n    NumbersColumn.prototype.getMapping = function () {\n        return this.mapping.clone();\n    };\n    NumbersColumn.prototype.setMapping = function (mapping) {\n        if (this.mapping.eq(mapping)) {\n            return;\n        }\n        this.deriveMapping = [];\n        this.fire([\n            NumbersColumn_1.EVENT_MAPPING_CHANGED,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY,\n        ], this.mapping.clone(), (this.mapping = mapping));\n    };\n    NumbersColumn.prototype.getColor = function (row) {\n        return NumberColumn.prototype.getColor.call(this, row);\n    };\n    NumbersColumn.prototype.getColorMapping = function () {\n        return this.colorMapping.clone();\n    };\n    NumbersColumn.prototype.setColorMapping = function (mapping) {\n        if (this.colorMapping.eq(mapping)) {\n            return;\n        }\n        this.fire([\n            NumbersColumn_1.EVENT_COLOR_MAPPING_CHANGED,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY,\n        ], this.colorMapping.clone(), (this.colorMapping = mapping));\n    };\n    NumbersColumn.prototype.isFiltered = function () {\n        return NumberColumn.prototype.isFiltered.call(this);\n    };\n    NumbersColumn.prototype.getFilter = function () {\n        return NumberColumn.prototype.getFilter.call(this);\n    };\n    NumbersColumn.prototype.setFilter = function (value) {\n        NumberColumn.prototype.setFilter.call(this, value);\n    };\n    NumbersColumn.prototype.filter = function (row) {\n        return NumberColumn.prototype.filter.call(this, row);\n    };\n    NumbersColumn.prototype.clearFilter = function () {\n        return NumberColumn.prototype.clearFilter.call(this);\n    };\n    var NumbersColumn_1;\n    NumbersColumn.EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\n    NumbersColumn.EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\n    NumbersColumn.EVENT_SORTMETHOD_CHANGED = NumberColumn.EVENT_SORTMETHOD_CHANGED;\n    NumbersColumn.EVENT_FILTER_CHANGED = NumberColumn.EVENT_FILTER_CHANGED;\n    NumbersColumn.CENTER = 0;\n    NumbersColumn = NumbersColumn_1 = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'filterNumber', 'colorMapped', 'editMapping'),\n        dialogAddons('sort', 'sortNumbers'),\n        SortByDefault('descending')\n    ], NumbersColumn);\n    return NumbersColumn;\n}(ArrayColumn));\nexport default NumbersColumn;\n//# sourceMappingURL=NumbersColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { suffix } from '../internal';\nimport { toolbar, SortByDefault, dialogAddons } from './annotations';\nimport BoxPlotColumn from './BoxPlotColumn';\nimport { DEFAULT_COLOR, } from './Column';\nimport CompositeColumn from './CompositeColumn';\nimport { ESortMethod, isBoxPlotColumn, isMapAbleColumn, } from './INumberColumn';\nimport { ScaleMappingFunction } from './MappingFunction';\nimport NumbersColumn from './NumbersColumn';\nimport { DEFAULT_COLOR_FUNCTION } from './ColorMappingFunction';\nimport { DEFAULT_FORMATTER, noNumberFilter } from './internalNumber';\nimport { integrateDefaults } from './internal';\n/**\n *  factory for creating a description creating a max column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createImpositionBoxPlotDesc(label) {\n    if (label === void 0) { label = 'Imposition'; }\n    return { type: 'impositions', label: label };\n}\n/**\n * implementation of a combine column, standard operations how to select\n */\nvar ImpositionBoxPlotColumn = /** @class */ (function (_super) {\n    __extends(ImpositionBoxPlotColumn, _super);\n    function ImpositionBoxPlotColumn(id, desc) {\n        return _super.call(this, id, integrateDefaults(desc, {\n            renderer: 'boxplot',\n            groupRenderer: 'boxplot',\n            summaryRenderer: 'boxplot',\n        })) || this;\n    }\n    ImpositionBoxPlotColumn_1 = ImpositionBoxPlotColumn;\n    Object.defineProperty(ImpositionBoxPlotColumn.prototype, \"label\", {\n        get: function () {\n            var l = _super.prototype.getMetaData.call(this).label;\n            var c = this._children;\n            if (l !== 'Imposition' || c.length === 0) {\n                return l;\n            }\n            if (c.length === 1) {\n                return c[0].label;\n            }\n            var w = this.wrapper;\n            var rest = this.rest;\n            return \"\".concat(w ? w.label : '?', \" (\").concat(rest.map(function (c) { return c.label; }).join(', '), \")\");\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ImpositionBoxPlotColumn.prototype, \"wrapper\", {\n        get: function () {\n            var _a;\n            return (_a = this._children.find(isBoxPlotColumn)) !== null && _a !== void 0 ? _a : null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ImpositionBoxPlotColumn.prototype, \"rest\", {\n        get: function () {\n            var w = this.wrapper;\n            return this._children.filter(function (d) { return d !== w; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ImpositionBoxPlotColumn.prototype.getLabel = function (row) {\n        var c = this._children;\n        if (c.length === 0) {\n            return '';\n        }\n        if (c.length === 1) {\n            return c[0].getLabel(row);\n        }\n        var w = this.wrapper;\n        var rest = this.rest;\n        return \"\".concat(w ? w.getLabel(row) : '?', \" (\").concat(rest.map(function (c) { return \"\".concat(c.label, \" = \").concat(c.getLabel(row)); }), \")\");\n    };\n    ImpositionBoxPlotColumn.prototype.getColor = function (row) {\n        var c = this._children;\n        switch (c.length) {\n            case 0:\n                return DEFAULT_COLOR;\n            case 1:\n                return c[0].getColor(row);\n            default:\n                return this.rest[0].getColor(row);\n        }\n    };\n    ImpositionBoxPlotColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([ImpositionBoxPlotColumn_1.EVENT_MAPPING_CHANGED, ImpositionBoxPlotColumn_1.EVENT_COLOR_MAPPING_CHANGED]);\n    };\n    ImpositionBoxPlotColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    ImpositionBoxPlotColumn.prototype.getNumberFormat = function () {\n        var w = this.wrapper;\n        return w ? w.getNumberFormat() : DEFAULT_FORMATTER;\n    };\n    ImpositionBoxPlotColumn.prototype.getValue = function (row) {\n        var w = this.wrapper;\n        return w ? w.getValue(row) : null;\n    };\n    ImpositionBoxPlotColumn.prototype.getNumber = function (row) {\n        var w = this.wrapper;\n        return w ? w.getNumber(row) : NaN;\n    };\n    ImpositionBoxPlotColumn.prototype.getRawNumber = function (row) {\n        var w = this.wrapper;\n        return w ? w.getRawNumber(row) : NaN;\n    };\n    ImpositionBoxPlotColumn.prototype.iterNumber = function (row) {\n        return [this.getNumber(row)];\n    };\n    ImpositionBoxPlotColumn.prototype.iterRawNumber = function (row) {\n        return [this.getRawNumber(row)];\n    };\n    ImpositionBoxPlotColumn.prototype.getExportValue = function (row, format) {\n        if (format === 'json') {\n            var value = this.getRawNumber(row);\n            if (Number.isNaN(value)) {\n                return null;\n            }\n            return {\n                label: this.getLabel(row),\n                color: this.getColor(row),\n                value: value,\n            };\n        }\n        return _super.prototype.getExportValue.call(this, row, format);\n    };\n    ImpositionBoxPlotColumn.prototype.getBoxPlotData = function (row) {\n        var w = this.wrapper;\n        return w ? w.getBoxPlotData(row) : null;\n    };\n    ImpositionBoxPlotColumn.prototype.getRawBoxPlotData = function (row) {\n        var w = this.wrapper;\n        return w ? w.getRawBoxPlotData(row) : null;\n    };\n    ImpositionBoxPlotColumn.prototype.getMapping = function () {\n        var w = this.wrapper;\n        return w ? w.getMapping() : new ScaleMappingFunction();\n    };\n    ImpositionBoxPlotColumn.prototype.getOriginalMapping = function () {\n        var w = this.wrapper;\n        return w ? w.getOriginalMapping() : new ScaleMappingFunction();\n    };\n    ImpositionBoxPlotColumn.prototype.getSortMethod = function () {\n        var w = this.wrapper;\n        return w ? w.getSortMethod() : ESortMethod.min;\n    };\n    ImpositionBoxPlotColumn.prototype.setSortMethod = function (value) {\n        var w = this.wrapper;\n        return w ? w.setSortMethod(value) : undefined;\n    };\n    ImpositionBoxPlotColumn.prototype.setMapping = function (mapping) {\n        var w = this.wrapper;\n        return w ? w.setMapping(mapping) : undefined;\n    };\n    ImpositionBoxPlotColumn.prototype.getColorMapping = function () {\n        var w = this.wrapper;\n        return w ? w.getColorMapping() : DEFAULT_COLOR_FUNCTION;\n    };\n    ImpositionBoxPlotColumn.prototype.setColorMapping = function (mapping) {\n        var w = this.wrapper;\n        return w ? w.setColorMapping(mapping) : undefined;\n    };\n    ImpositionBoxPlotColumn.prototype.getFilter = function () {\n        var w = this.wrapper;\n        return w ? w.getFilter() : noNumberFilter();\n    };\n    ImpositionBoxPlotColumn.prototype.setFilter = function (value) {\n        var w = this.wrapper;\n        return w ? w.setFilter(value) : undefined;\n    };\n    ImpositionBoxPlotColumn.prototype.getRange = function () {\n        var w = this.wrapper;\n        return w ? w.getRange() : ['0', '1'];\n    };\n    ImpositionBoxPlotColumn.prototype.toCompareValue = function (row) {\n        return BoxPlotColumn.prototype.toCompareValue.call(this, row);\n    };\n    ImpositionBoxPlotColumn.prototype.toCompareValueType = function () {\n        return BoxPlotColumn.prototype.toCompareValueType.call(this);\n    };\n    ImpositionBoxPlotColumn.prototype.group = function (row) {\n        return BoxPlotColumn.prototype.group.call(this, row);\n    };\n    ImpositionBoxPlotColumn.prototype.toCompareGroupValue = function (rows, group) {\n        return BoxPlotColumn.prototype.toCompareGroupValue.call(this, rows, group);\n    };\n    ImpositionBoxPlotColumn.prototype.toCompareGroupValueType = function () {\n        return BoxPlotColumn.prototype.toCompareGroupValueType.call(this);\n    };\n    ImpositionBoxPlotColumn.prototype.insert = function (col, index) {\n        if (this._children.length === 1 && !this.wrapper && !isBoxPlotColumn(col)) {\n            // at least one has to be a number column\n            return null;\n        }\n        if (this._children.length >= 2) {\n            // limit to two\n            return null;\n        }\n        return _super.prototype.insert.call(this, col, index);\n    };\n    ImpositionBoxPlotColumn.prototype.insertImpl = function (col, index) {\n        if (isBoxPlotColumn(col)) {\n            this.forward.apply(this, __spreadArray([col], suffix('.impose', BoxPlotColumn.EVENT_MAPPING_CHANGED, BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED), false));\n        }\n        else if (isMapAbleColumn(col)) {\n            this.forward.apply(this, __spreadArray([col], suffix('.impose', BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED), false));\n        }\n        return _super.prototype.insertImpl.call(this, col, index);\n    };\n    ImpositionBoxPlotColumn.prototype.removeImpl = function (child, index) {\n        if (isBoxPlotColumn(child)) {\n            this.unforward.apply(this, __spreadArray([child], suffix('.impose', BoxPlotColumn.EVENT_MAPPING_CHANGED, BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED), false));\n        }\n        else if (isMapAbleColumn(child)) {\n            this.unforward.apply(this, __spreadArray([child], suffix('.impose', BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED), false));\n        }\n        return _super.prototype.removeImpl.call(this, child, index);\n    };\n    var ImpositionBoxPlotColumn_1;\n    ImpositionBoxPlotColumn.EVENT_MAPPING_CHANGED = NumbersColumn.EVENT_MAPPING_CHANGED;\n    ImpositionBoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED = NumbersColumn.EVENT_COLOR_MAPPING_CHANGED;\n    ImpositionBoxPlotColumn = ImpositionBoxPlotColumn_1 = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'filterNumber', 'colorMapped', 'editMapping'),\n        dialogAddons('sort', 'sortBoxPlot'),\n        SortByDefault('descending')\n    ], ImpositionBoxPlotColumn);\n    return ImpositionBoxPlotColumn;\n}(CompositeColumn));\nexport default ImpositionBoxPlotColumn;\n//# sourceMappingURL=ImpositionBoxPlotColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { suffix } from '../internal';\nimport { toolbar, dialogAddons, SortByDefault } from './annotations';\nimport { DEFAULT_COLOR, } from './Column';\nimport CompositeColumn from './CompositeColumn';\nimport { EAdvancedSortMethod, isNumbersColumn, isMapAbleColumn, } from './INumberColumn';\nimport { ScaleMappingFunction } from './MappingFunction';\nimport NumbersColumn from './NumbersColumn';\nimport { DEFAULT_COLOR_FUNCTION } from './ColorMappingFunction';\nimport { DEFAULT_FORMATTER, noNumberFilter } from './internalNumber';\nimport { integrateDefaults } from './internal';\n/**\n *  factory for creating a description creating a max column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createImpositionsDesc(label) {\n    if (label === void 0) { label = 'Imposition'; }\n    return { type: 'impositions', label: label };\n}\n/**\n * implementation of a combine column, standard operations how to select\n */\nvar ImpositionCompositesColumn = /** @class */ (function (_super) {\n    __extends(ImpositionCompositesColumn, _super);\n    function ImpositionCompositesColumn(id, desc) {\n        return _super.call(this, id, integrateDefaults(desc, {\n            renderer: 'numbers',\n            groupRenderer: 'numbers',\n            summaryRenderer: 'histogram',\n        })) || this;\n    }\n    ImpositionCompositesColumn_1 = ImpositionCompositesColumn;\n    Object.defineProperty(ImpositionCompositesColumn.prototype, \"label\", {\n        get: function () {\n            var l = _super.prototype.getMetaData.call(this).label;\n            var c = this._children;\n            if (l !== 'Imposition' || c.length === 0) {\n                return l;\n            }\n            if (c.length === 1) {\n                return c[0].label;\n            }\n            var w = this.wrapper;\n            var rest = this.rest;\n            return \"\".concat(w ? w.label : '?', \" (\").concat(rest.map(function (c) { return c.label; }).join(', '), \")\");\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ImpositionCompositesColumn.prototype, \"wrapper\", {\n        get: function () {\n            return this._children.find(isNumbersColumn) || null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ImpositionCompositesColumn.prototype, \"rest\", {\n        get: function () {\n            var w = this.wrapper;\n            return this._children.filter(function (d) { return d !== w; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ImpositionCompositesColumn.prototype.getLabel = function (row) {\n        var c = this._children;\n        if (c.length === 0) {\n            return '';\n        }\n        if (c.length === 1) {\n            return c[0].getLabel(row);\n        }\n        var w = this.wrapper;\n        var rest = this.rest;\n        return \"\".concat(w ? w.getLabel(row) : '?', \" (\").concat(rest.map(function (c) { return \"\".concat(c.label, \" = \").concat(c.getLabel(row)); }), \")\");\n    };\n    ImpositionCompositesColumn.prototype.getColor = function (row) {\n        var c = this._children;\n        switch (c.length) {\n            case 0:\n                return DEFAULT_COLOR;\n            case 1:\n                return c[0].getColor(row);\n            default:\n                return this.rest[0].getColor(row);\n        }\n    };\n    ImpositionCompositesColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([\n            ImpositionCompositesColumn_1.EVENT_MAPPING_CHANGED,\n            ImpositionCompositesColumn_1.EVENT_COLOR_MAPPING_CHANGED,\n        ]);\n    };\n    ImpositionCompositesColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    Object.defineProperty(ImpositionCompositesColumn.prototype, \"labels\", {\n        get: function () {\n            var w = this.wrapper;\n            return w ? w.labels : [];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ImpositionCompositesColumn.prototype, \"dataLength\", {\n        get: function () {\n            var w = this.wrapper;\n            return w ? w.dataLength : null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ImpositionCompositesColumn.prototype.getNumberFormat = function () {\n        var w = this.wrapper;\n        return w ? w.getNumberFormat() : DEFAULT_FORMATTER;\n    };\n    ImpositionCompositesColumn.prototype.getValue = function (row) {\n        var w = this.wrapper;\n        return w ? w.getValue(row) : [];\n    };\n    ImpositionCompositesColumn.prototype.getNumber = function (row) {\n        var w = this.wrapper;\n        return w ? w.getNumber(row) : NaN;\n    };\n    ImpositionCompositesColumn.prototype.getRawNumber = function (row) {\n        var w = this.wrapper;\n        return w ? w.getRawNumber(row) : NaN;\n    };\n    ImpositionCompositesColumn.prototype.getExportValue = function (row, format) {\n        if (format === 'json') {\n            var value = this.getRawNumber(row);\n            if (Number.isNaN(value)) {\n                return null;\n            }\n            return {\n                label: this.getLabels(row),\n                color: this.getColor(row),\n            };\n        }\n        return _super.prototype.getExportValue.call(this, row, format);\n    };\n    ImpositionCompositesColumn.prototype.getNumbers = function (row) {\n        var w = this.wrapper;\n        return w ? w.getNumbers(row) : [];\n    };\n    ImpositionCompositesColumn.prototype.getRawNumbers = function (row) {\n        var w = this.wrapper;\n        return w ? w.getRawNumbers(row) : [];\n    };\n    ImpositionCompositesColumn.prototype.iterNumber = function (row) {\n        return this.getNumbers(row);\n    };\n    ImpositionCompositesColumn.prototype.iterRawNumber = function (row) {\n        return this.getRawNumbers(row);\n    };\n    ImpositionCompositesColumn.prototype.getBoxPlotData = function (row) {\n        var w = this.wrapper;\n        return w ? w.getBoxPlotData(row) : null;\n    };\n    ImpositionCompositesColumn.prototype.getRawBoxPlotData = function (row) {\n        var w = this.wrapper;\n        return w ? w.getRawBoxPlotData(row) : null;\n    };\n    ImpositionCompositesColumn.prototype.getMapping = function () {\n        var w = this.wrapper;\n        return w ? w.getMapping() : new ScaleMappingFunction();\n    };\n    ImpositionCompositesColumn.prototype.getOriginalMapping = function () {\n        var w = this.wrapper;\n        return w ? w.getOriginalMapping() : new ScaleMappingFunction();\n    };\n    ImpositionCompositesColumn.prototype.getSortMethod = function () {\n        var w = this.wrapper;\n        return w ? w.getSortMethod() : EAdvancedSortMethod.min;\n    };\n    ImpositionCompositesColumn.prototype.setSortMethod = function (value) {\n        var w = this.wrapper;\n        return w ? w.setSortMethod(value) : undefined;\n    };\n    ImpositionCompositesColumn.prototype.setMapping = function (mapping) {\n        var w = this.wrapper;\n        return w ? w.setMapping(mapping) : undefined;\n    };\n    ImpositionCompositesColumn.prototype.getColorMapping = function () {\n        var w = this.wrapper;\n        return w ? w.getColorMapping() : DEFAULT_COLOR_FUNCTION;\n    };\n    ImpositionCompositesColumn.prototype.setColorMapping = function (mapping) {\n        var w = this.wrapper;\n        return w ? w.setColorMapping(mapping) : undefined;\n    };\n    ImpositionCompositesColumn.prototype.getFilter = function () {\n        var w = this.wrapper;\n        return w ? w.getFilter() : noNumberFilter();\n    };\n    ImpositionCompositesColumn.prototype.setFilter = function (value) {\n        var w = this.wrapper;\n        return w ? w.setFilter(value) : undefined;\n    };\n    ImpositionCompositesColumn.prototype.getRange = function () {\n        var w = this.wrapper;\n        return w ? w.getRange() : ['0', '1'];\n    };\n    ImpositionCompositesColumn.prototype.getMap = function (row) {\n        var w = this.wrapper;\n        return w ? w.getMap(row) : [];\n    };\n    ImpositionCompositesColumn.prototype.getMapLabel = function (row) {\n        var w = this.wrapper;\n        return w ? w.getMapLabel(row) : [];\n    };\n    ImpositionCompositesColumn.prototype.getLabels = function (row) {\n        var w = this.wrapper;\n        return w ? w.getLabels(row) : [];\n    };\n    ImpositionCompositesColumn.prototype.getValues = function (row) {\n        var w = this.wrapper;\n        return w ? w.getValues(row) : [];\n    };\n    ImpositionCompositesColumn.prototype.toCompareValue = function (row) {\n        return NumbersColumn.prototype.toCompareValue.call(this, row);\n    };\n    ImpositionCompositesColumn.prototype.toCompareValueType = function () {\n        return NumbersColumn.prototype.toCompareValueType.call(this);\n    };\n    ImpositionCompositesColumn.prototype.toCompareGroupValue = function (rows, group) {\n        return NumbersColumn.prototype.toCompareGroupValue.call(this, rows, group);\n    };\n    ImpositionCompositesColumn.prototype.toCompareGroupValueType = function () {\n        return NumbersColumn.prototype.toCompareGroupValueType.call(this);\n    };\n    ImpositionCompositesColumn.prototype.insert = function (col, index) {\n        if (this._children.length === 1 && !this.wrapper && !isNumbersColumn(col)) {\n            // at least one has to be a number column\n            return null;\n        }\n        if (this._children.length >= 2) {\n            // limit to two\n            return null;\n        }\n        return _super.prototype.insert.call(this, col, index);\n    };\n    ImpositionCompositesColumn.prototype.insertImpl = function (col, index) {\n        if (isNumbersColumn(col)) {\n            this.forward.apply(this, __spreadArray([col], suffix('.impose', NumbersColumn.EVENT_MAPPING_CHANGED), false));\n        }\n        if (isMapAbleColumn(col)) {\n            this.forward.apply(this, __spreadArray([col], suffix('.impose', NumbersColumn.EVENT_COLOR_MAPPING_CHANGED), false));\n        }\n        return _super.prototype.insertImpl.call(this, col, index);\n    };\n    ImpositionCompositesColumn.prototype.removeImpl = function (child, index) {\n        if (isNumbersColumn(child)) {\n            this.unforward.apply(this, __spreadArray([child], suffix('.impose', NumbersColumn.EVENT_MAPPING_CHANGED), false));\n        }\n        if (isMapAbleColumn(child)) {\n            this.unforward.apply(this, __spreadArray([child], suffix('.impose', NumbersColumn.EVENT_COLOR_MAPPING_CHANGED), false));\n        }\n        return _super.prototype.removeImpl.call(this, child, index);\n    };\n    var ImpositionCompositesColumn_1;\n    ImpositionCompositesColumn.EVENT_MAPPING_CHANGED = NumbersColumn.EVENT_MAPPING_CHANGED;\n    ImpositionCompositesColumn.EVENT_COLOR_MAPPING_CHANGED = NumbersColumn.EVENT_COLOR_MAPPING_CHANGED;\n    ImpositionCompositesColumn = ImpositionCompositesColumn_1 = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'filterNumber', 'colorMapped', 'editMapping'),\n        dialogAddons('sort', 'sortNumbers'),\n        SortByDefault('descending')\n    ], ImpositionCompositesColumn);\n    return ImpositionCompositesColumn;\n}(CompositeColumn));\nexport default ImpositionCompositesColumn;\n//# sourceMappingURL=ImpositionCompositesColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { format } from 'd3-format';\nimport CompositeColumn from './CompositeColumn';\nimport { isMissingValue } from './missing';\nimport NumberColumn from './NumberColumn';\nimport { SortByDefault, toolbar } from './annotations';\n/**\n * implementation of a combine column, standard operations how to select\n */\nvar CompositeNumberColumn = /** @class */ (function (_super) {\n    __extends(CompositeNumberColumn, _super);\n    function CompositeNumberColumn(id, desc) {\n        var _this = _super.call(this, id, desc) || this;\n        _this.numberFormat = format('.3n');\n        if (desc.numberFormat) {\n            _this.numberFormat = format(desc.numberFormat);\n        }\n        return _this;\n    }\n    CompositeNumberColumn.prototype.getNumberFormat = function () {\n        return this.numberFormat;\n    };\n    CompositeNumberColumn.prototype.getLabel = function (row) {\n        if (!this.isLoaded()) {\n            return '';\n        }\n        var v = this.getValue(row);\n        //keep non number if it is not a number else convert using formatter\n        return String(typeof v === 'number' && !Number.isNaN(v) && isFinite(v) ? this.numberFormat(v) : v);\n    };\n    CompositeNumberColumn.prototype.getValue = function (row) {\n        if (!this.isLoaded()) {\n            return null;\n        }\n        //weighted sum\n        var v = this.compute(row);\n        if (isMissingValue(v)) {\n            return null;\n        }\n        return v;\n    };\n    CompositeNumberColumn.prototype.compute = function (_row) {\n        return NaN;\n    };\n    CompositeNumberColumn.prototype.getNumber = function (row) {\n        var r = this.getValue(row);\n        return r == null ? NaN : r;\n    };\n    CompositeNumberColumn.prototype.getRawNumber = function (row) {\n        return this.getNumber(row);\n    };\n    CompositeNumberColumn.prototype.iterNumber = function (row) {\n        return [this.getNumber(row)];\n    };\n    CompositeNumberColumn.prototype.iterRawNumber = function (row) {\n        return [this.getRawNumber(row)];\n    };\n    CompositeNumberColumn.prototype.getExportValue = function (row, format) {\n        if (format === 'json') {\n            return {\n                value: this.getRawNumber(row),\n                children: this.children.map(function (d) { return d.getExportValue(row, format); }),\n            };\n        }\n        return _super.prototype.getExportValue.call(this, row, format);\n    };\n    CompositeNumberColumn.prototype.toCompareValue = function (row) {\n        return NumberColumn.prototype.toCompareValue.call(this, row);\n    };\n    CompositeNumberColumn.prototype.toCompareValueType = function () {\n        return NumberColumn.prototype.toCompareValueType.call(this);\n    };\n    CompositeNumberColumn.prototype.toCompareGroupValue = function (rows, group) {\n        return NumberColumn.prototype.toCompareGroupValue.call(this, rows, group);\n    };\n    CompositeNumberColumn.prototype.toCompareGroupValueType = function () {\n        return NumberColumn.prototype.toCompareGroupValueType.call(this);\n    };\n    CompositeNumberColumn.prototype.getRenderer = function () {\n        return NumberColumn.prototype.getRenderer.call(this);\n    };\n    CompositeNumberColumn = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'group', 'groupBy'),\n        SortByDefault('descending')\n    ], CompositeNumberColumn);\n    return CompositeNumberColumn;\n}(CompositeColumn));\nexport default CompositeNumberColumn;\n//# sourceMappingURL=CompositeNumberColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { median, quantile } from '../internal';\nimport { toolbar } from './annotations';\nimport Column, { DEFAULT_COLOR, } from './Column';\nimport CompositeNumberColumn from './CompositeNumberColumn';\nimport { EAdvancedSortMethod } from './INumberColumn';\nimport { integrateDefaults } from './internal';\n/**\n *  factory for creating a description creating a max column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createReduceDesc(label) {\n    if (label === void 0) { label = 'Reduce'; }\n    return { type: 'reduce', label: label };\n}\n/**\n * combines multiple columns by using the maximal value\n */\nvar ReduceColumn = /** @class */ (function (_super) {\n    __extends(ReduceColumn, _super);\n    function ReduceColumn(id, desc) {\n        var _this = _super.call(this, id, integrateDefaults(desc, {\n            renderer: 'interleaving',\n            groupRenderer: 'interleaving',\n            summaryRenderer: 'interleaving',\n        })) || this;\n        _this.reduce = desc.reduce || EAdvancedSortMethod.max;\n        return _this;\n    }\n    ReduceColumn_1 = ReduceColumn;\n    Object.defineProperty(ReduceColumn.prototype, \"label\", {\n        get: function () {\n            var l = _super.prototype.getMetaData.call(this).label;\n            if (l !== 'Reduce') {\n                return l;\n            }\n            return \"\".concat(this.reduce[0].toUpperCase()).concat(this.reduce.slice(1), \"(\").concat(this.children.map(function (d) { return d.label; }).join(', '), \")\");\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ReduceColumn.prototype.getColor = function (row) {\n        //compute the index of the maximal one\n        var c = this._children;\n        if (c.length === 0 ||\n            this.reduce === EAdvancedSortMethod.q1 ||\n            this.reduce === EAdvancedSortMethod.q3 ||\n            this.reduce === EAdvancedSortMethod.mean) {\n            return DEFAULT_COLOR;\n        }\n        var v = this.compute(row);\n        var selected = c.find(function (c) { return c.getValue(row) === v; });\n        return selected ? selected.getColor(row) : DEFAULT_COLOR;\n    };\n    ReduceColumn.prototype.compute = function (row) {\n        var vs = this._children.map(function (d) { return d.getValue(row); }).filter(function (d) { return !Number.isNaN(d); });\n        if (vs.length === 0) {\n            return NaN;\n        }\n        switch (this.reduce) {\n            case EAdvancedSortMethod.mean:\n                return vs.reduce(function (a, b) { return a + b; }, 0) / vs.length;\n            case EAdvancedSortMethod.max:\n                return vs.reduce(function (a, b) { return Math.max(a, b); }, Number.NEGATIVE_INFINITY);\n            case EAdvancedSortMethod.min:\n                return vs.reduce(function (a, b) { return Math.min(a, b); }, Number.POSITIVE_INFINITY);\n            case EAdvancedSortMethod.median:\n                return median(vs);\n            case EAdvancedSortMethod.q1:\n                return quantile(vs.sort(function (a, b) { return a - b; }), 0.25);\n            case EAdvancedSortMethod.q3:\n                return quantile(vs.sort(function (a, b) { return a - b; }), 0.75);\n        }\n    };\n    ReduceColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([ReduceColumn_1.EVENT_REDUCE_CHANGED]);\n    };\n    ReduceColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    ReduceColumn.prototype.getReduce = function () {\n        return this.reduce;\n    };\n    ReduceColumn.prototype.setReduce = function (reduce) {\n        if (this.reduce === reduce) {\n            return;\n        }\n        this.fire([ReduceColumn_1.EVENT_REDUCE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.reduce, (this.reduce = reduce));\n    };\n    ReduceColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.reduce = this.reduce;\n        return r;\n    };\n    ReduceColumn.prototype.restore = function (dump, factory) {\n        this.reduce = dump.reduce || this.reduce;\n        _super.prototype.restore.call(this, dump, factory);\n    };\n    Object.defineProperty(ReduceColumn.prototype, \"canJustAddNumbers\", {\n        get: function () {\n            return true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ReduceColumn.prototype.getExportValue = function (row, format) {\n        if (format === 'json') {\n            return {\n                value: this.getRawNumber(row),\n                children: this.children.map(function (d) { return d.getExportValue(row, format); }),\n            };\n        }\n        return _super.prototype.getExportValue.call(this, row, format);\n    };\n    var ReduceColumn_1;\n    ReduceColumn.EVENT_REDUCE_CHANGED = 'reduceChanged';\n    ReduceColumn = ReduceColumn_1 = __decorate([\n        toolbar('reduce')\n    ], ReduceColumn);\n    return ReduceColumn;\n}(CompositeNumberColumn));\nexport default ReduceColumn;\n//# sourceMappingURL=ReduceColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { round, similar } from '../internal';\nimport { toolbar } from './annotations';\nimport Column from './Column';\nimport CompositeNumberColumn from './CompositeNumberColumn';\nimport { integrateDefaults } from './internal';\n/**\n * factory for creating a description creating a stacked column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createStackDesc(label, showNestedSummaries) {\n    if (label === void 0) { label = 'Weighted Sum'; }\n    if (showNestedSummaries === void 0) { showNestedSummaries = true; }\n    return { type: 'stack', label: label, showNestedSummaries: showNestedSummaries };\n}\n/**\n * implementation of the stacked column\n */\nvar StackColumn = /** @class */ (function (_super) {\n    __extends(StackColumn, _super);\n    function StackColumn(id, desc) {\n        var _this = _super.call(this, id, integrateDefaults(desc, {\n            renderer: 'stack',\n            groupRenderer: 'stack',\n            summaryRenderer: 'stack',\n        })) || this;\n        /**\n         * whether this stack column is collapsed i.e. just looks like an ordinary number column\n         * @type {boolean}\n         * @private\n         */\n        _this.collapsed = false;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var that = _this;\n        _this.adaptChange = function (oldValue, newValue) {\n            that.adaptWidthChange(this.source, oldValue, newValue);\n        };\n        return _this;\n    }\n    StackColumn_1 = StackColumn;\n    Object.defineProperty(StackColumn.prototype, \"label\", {\n        get: function () {\n            var l = _super.prototype.getMetaData.call(this).label;\n            var c = this._children;\n            if (l !== 'Weighted Sum' || c.length === 0) {\n                return l;\n            }\n            var weights = this.getWeights();\n            return c.map(function (c, i) { return \"\".concat(c.label, \" (\").concat(round(100 * weights[i], 1), \"%)\"); }).join(' + ');\n        },\n        enumerable: false,\n        configurable: true\n    });\n    StackColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([\n            StackColumn_1.EVENT_COLLAPSE_CHANGED,\n            StackColumn_1.EVENT_WEIGHTS_CHANGED,\n            StackColumn_1.EVENT_MULTI_LEVEL_CHANGED,\n        ]);\n    };\n    StackColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    StackColumn.prototype.setCollapsed = function (value) {\n        if (this.collapsed === value) {\n            return;\n        }\n        this.fire([StackColumn_1.EVENT_COLLAPSE_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.collapsed, (this.collapsed = value));\n    };\n    StackColumn.prototype.getCollapsed = function () {\n        return this.collapsed;\n    };\n    StackColumn.prototype.isShowNestedSummaries = function () {\n        return this.desc.showNestedSummaries !== false;\n    };\n    Object.defineProperty(StackColumn.prototype, \"canJustAddNumbers\", {\n        get: function () {\n            return true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    StackColumn.prototype.flatten = function (r, offset, levelsToGo, padding) {\n        if (levelsToGo === void 0) { levelsToGo = 0; }\n        if (padding === void 0) { padding = 0; }\n        var self = null;\n        var children = levelsToGo <= Column.FLAT_ALL_COLUMNS ? this._children : this._children.filter(function (c) { return c.isVisible(); });\n        //no more levels or just this one\n        if (levelsToGo === 0 || levelsToGo <= Column.FLAT_ALL_COLUMNS) {\n            var w = this.getWidth();\n            if (!this.collapsed) {\n                w += (children.length - 1) * padding;\n            }\n            r.push((self = { col: this, offset: offset, width: w }));\n            if (levelsToGo === 0) {\n                return w;\n            }\n        }\n        //push children\n        var acc = offset;\n        children.forEach(function (c) {\n            acc += c.flatten(r, acc, levelsToGo - 1, padding) + padding;\n        });\n        if (self) {\n            //nesting my even increase my width\n            self.width = acc - offset - padding;\n        }\n        return acc - offset - padding;\n    };\n    StackColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.collapsed = this.collapsed;\n        return r;\n    };\n    StackColumn.prototype.restore = function (dump, factory) {\n        this.collapsed = dump.collapsed === true;\n        _super.prototype.restore.call(this, dump, factory);\n    };\n    /**\n     * inserts a column at a the given position\n     */\n    StackColumn.prototype.insert = function (col, index, weight) {\n        if (weight === void 0) { weight = NaN; }\n        if (!Number.isNaN(weight)) {\n            col.setWidth((weight / (1 - weight)) * this.getWidth());\n        }\n        col.on(\"\".concat(Column.EVENT_WIDTH_CHANGED, \".stack\"), this.adaptChange);\n        //increase my width\n        _super.prototype.setWidth.call(this, this.length === 0 ? col.getWidth() : this.getWidth() + col.getWidth());\n        return _super.prototype.insert.call(this, col, index);\n    };\n    StackColumn.prototype.push = function (col, weight) {\n        if (weight === void 0) { weight = NaN; }\n        return this.insert(col, this.length, weight);\n    };\n    StackColumn.prototype.insertAfter = function (col, ref, weight) {\n        if (weight === void 0) { weight = NaN; }\n        var i = this.indexOf(ref);\n        if (i < 0) {\n            return null;\n        }\n        return this.insert(col, i + 1, weight);\n    };\n    /**\n     * adapts weights according to an own width change\n     * @param col\n     * @param oldValue\n     * @param newValue\n     */\n    StackColumn.prototype.adaptWidthChange = function (col, oldValue, newValue) {\n        if (similar(oldValue, newValue, 0.5)) {\n            return;\n        }\n        var bak = this.getWeights();\n        var full = this.getWidth(), change = (newValue - oldValue) / full;\n        var oldWeight = oldValue / full;\n        var factor = (1 - oldWeight - change) / (1 - oldWeight);\n        var widths = this._children.map(function (c) {\n            if (c === col) {\n                //c.weight += change;\n                return newValue;\n            }\n            var guess = c.getWidth() * factor;\n            var w = Number.isNaN(guess) || guess < 1 ? 0 : guess;\n            c.setWidthImpl(w);\n            return w;\n        });\n        //adapt width if needed\n        _super.prototype.setWidth.call(this, widths.reduce(function (a, b) { return a + b; }, 0));\n        this.fire([\n            StackColumn_1.EVENT_WEIGHTS_CHANGED,\n            StackColumn_1.EVENT_MULTI_LEVEL_CHANGED,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY,\n        ], bak, this.getWeights());\n    };\n    StackColumn.prototype.getWeights = function () {\n        var w = this.getWidth();\n        return this._children.map(function (d) { return d.getWidth() / w; });\n    };\n    StackColumn.prototype.setWeights = function (weights) {\n        var bak = this.getWeights();\n        var delta = weights.length - this.length;\n        var s;\n        if (delta < 0) {\n            s = weights.reduce(function (p, a) { return p + a; }, 0);\n            if (s <= 1) {\n                for (var i = 0; i < -delta; ++i) {\n                    weights.push((1 - s) * (1 / -delta));\n                }\n            }\n            else if (s <= 100) {\n                for (var i = 0; i < -delta; ++i) {\n                    weights.push((100 - s) * (1 / -delta));\n                }\n            }\n        }\n        weights = weights.slice(0, this.length);\n        s = weights.reduce(function (p, a) { return p + a; }, 0) / this.getWidth();\n        weights = weights.map(function (d) { return d / s; });\n        this._children.forEach(function (c, i) {\n            c.setWidthImpl(weights[i]);\n        });\n        this.fire([\n            StackColumn_1.EVENT_WEIGHTS_CHANGED,\n            StackColumn_1.EVENT_MULTI_LEVEL_CHANGED,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY,\n        ], bak, weights);\n    };\n    StackColumn.prototype.removeImpl = function (child, index) {\n        child.on(\"\".concat(Column.EVENT_WIDTH_CHANGED, \".stack\"), null);\n        _super.prototype.setWidth.call(this, this.length === 0 ? 100 : this.getWidth() - child.getWidth());\n        return _super.prototype.removeImpl.call(this, child, index);\n    };\n    StackColumn.prototype.setWidth = function (value) {\n        var factor = value / this.getWidth();\n        this._children.forEach(function (child) {\n            //disable since we change it\n            child.setWidthImpl(child.getWidth() * factor);\n        });\n        _super.prototype.setWidth.call(this, value);\n    };\n    StackColumn.prototype.compute = function (row) {\n        var w = this.getWidth();\n        // missing value for the stack column if at least one child value is missing\n        if (this._children.some(function (d) { return d.getValue(row) === null; })) {\n            return null;\n        }\n        return this._children.reduce(function (acc, d) { return acc + d.getValue(row) * (d.getWidth() / w); }, 0);\n    };\n    StackColumn.prototype.getRenderer = function () {\n        if (this.getCollapsed() && this.isLoaded()) {\n            return StackColumn_1.COLLAPSED_RENDERER;\n        }\n        return _super.prototype.getRenderer.call(this);\n    };\n    StackColumn.prototype.getExportValue = function (row, format) {\n        if (format === 'json') {\n            return {\n                value: this.getRawNumber(row),\n                children: this.children.map(function (d) { return d.getExportValue(row, format); }),\n            };\n        }\n        return _super.prototype.getExportValue.call(this, row, format);\n    };\n    var StackColumn_1;\n    StackColumn.EVENT_COLLAPSE_CHANGED = 'collapseChanged';\n    StackColumn.EVENT_WEIGHTS_CHANGED = 'weightsChanged';\n    StackColumn.EVENT_MULTI_LEVEL_CHANGED = 'nestedChildRatio';\n    StackColumn.COLLAPSED_RENDERER = 'number';\n    StackColumn = StackColumn_1 = __decorate([\n        toolbar('editWeights', 'compress', 'expand')\n    ], StackColumn);\n    return StackColumn;\n}(CompositeNumberColumn));\nexport default StackColumn;\n//# sourceMappingURL=StackColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { similar } from '../internal';\nimport { toolbar } from './annotations';\nimport Column from './Column';\nimport CompositeColumn from './CompositeColumn';\nimport { integrateDefaults } from './internal';\nimport StackColumn from './StackColumn';\nvar MultiLevelCompositeColumn = /** @class */ (function (_super) {\n    __extends(MultiLevelCompositeColumn, _super);\n    function MultiLevelCompositeColumn(id, desc) {\n        var _this = _super.call(this, id, integrateDefaults(desc, {\n            summaryRenderer: 'nested',\n        })) || this;\n        /**\n         * whether this stack column is collapsed i.e. just looks like an ordinary number column\n         * @type {boolean}\n         * @private\n         */\n        _this.collapsed = false;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var that = _this;\n        _this.adaptChange = function (old, newValue) {\n            that.adaptWidthChange(old, newValue);\n        };\n        return _this;\n    }\n    MultiLevelCompositeColumn_1 = MultiLevelCompositeColumn;\n    MultiLevelCompositeColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([MultiLevelCompositeColumn_1.EVENT_COLLAPSE_CHANGED, MultiLevelCompositeColumn_1.EVENT_MULTI_LEVEL_CHANGED]);\n    };\n    MultiLevelCompositeColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    MultiLevelCompositeColumn.prototype.setCollapsed = function (value) {\n        if (this.collapsed === value) {\n            return;\n        }\n        this.fire([StackColumn.EVENT_COLLAPSE_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.collapsed, (this.collapsed = value));\n    };\n    MultiLevelCompositeColumn.prototype.getCollapsed = function () {\n        return this.collapsed;\n    };\n    MultiLevelCompositeColumn.prototype.isShowNestedSummaries = function () {\n        return this.desc.showNestedSummaries !== false;\n    };\n    MultiLevelCompositeColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.collapsed = this.collapsed;\n        return r;\n    };\n    MultiLevelCompositeColumn.prototype.restore = function (dump, factory) {\n        this.collapsed = dump.collapsed === true;\n        _super.prototype.restore.call(this, dump, factory);\n    };\n    MultiLevelCompositeColumn.prototype.flatten = function (r, offset, levelsToGo, padding) {\n        if (levelsToGo === void 0) { levelsToGo = 0; }\n        if (padding === void 0) { padding = 0; }\n        return StackColumn.prototype.flatten.call(this, r, offset, levelsToGo, padding);\n    };\n    /**\n     * inserts a column at a the given position\n     * @param col\n     * @param index\n     */\n    MultiLevelCompositeColumn.prototype.insert = function (col, index) {\n        col.on(\"\".concat(Column.EVENT_WIDTH_CHANGED, \".stack\"), this.adaptChange);\n        //increase my width\n        _super.prototype.setWidth.call(this, this.length === 0 ? col.getWidth() : this.getWidth() + col.getWidth());\n        return _super.prototype.insert.call(this, col, index);\n    };\n    /**\n     * adapts weights according to an own width change\n     * @param oldValue\n     * @param newValue\n     */\n    MultiLevelCompositeColumn.prototype.adaptWidthChange = function (oldValue, newValue) {\n        if (similar(oldValue, newValue, 0.5)) {\n            return;\n        }\n        var act = this.getWidth();\n        var next = act + (newValue - oldValue);\n        this.fire([MultiLevelCompositeColumn_1.EVENT_MULTI_LEVEL_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], act, next);\n        _super.prototype.setWidth.call(this, next);\n    };\n    MultiLevelCompositeColumn.prototype.removeImpl = function (child, index) {\n        child.on(\"\".concat(Column.EVENT_WIDTH_CHANGED, \".stack\"), null);\n        _super.prototype.setWidth.call(this, this.length === 0 ? 100 : this.getWidth() - child.getWidth());\n        return _super.prototype.removeImpl.call(this, child, index);\n    };\n    MultiLevelCompositeColumn.prototype.setWidth = function (value) {\n        var act = this.getWidth();\n        var factor = value / act;\n        this._children.forEach(function (child) {\n            //disable since we change it\n            child.setWidthImpl(child.getWidth() * factor);\n        });\n        if (!similar(act, value, 0.5)) {\n            this.fire([MultiLevelCompositeColumn_1.EVENT_MULTI_LEVEL_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], act, value);\n        }\n        _super.prototype.setWidth.call(this, value);\n    };\n    MultiLevelCompositeColumn.prototype.getRenderer = function () {\n        if (this.getCollapsed()) {\n            return MultiLevelCompositeColumn_1.COLLAPSED_RENDERER;\n        }\n        return _super.prototype.getRenderer.call(this);\n    };\n    MultiLevelCompositeColumn.prototype.getExportValue = function (row, format) {\n        if (format === 'json') {\n            return {\n                children: this.children.map(function (d) { return d.getExportValue(row, format); }),\n            };\n        }\n        return _super.prototype.getExportValue.call(this, row, format);\n    };\n    var MultiLevelCompositeColumn_1;\n    MultiLevelCompositeColumn.EVENT_COLLAPSE_CHANGED = StackColumn.EVENT_COLLAPSE_CHANGED;\n    MultiLevelCompositeColumn.EVENT_MULTI_LEVEL_CHANGED = StackColumn.EVENT_MULTI_LEVEL_CHANGED;\n    MultiLevelCompositeColumn.COLLAPSED_RENDERER = 'default';\n    MultiLevelCompositeColumn = MultiLevelCompositeColumn_1 = __decorate([\n        toolbar('compress', 'expand')\n    ], MultiLevelCompositeColumn);\n    return MultiLevelCompositeColumn;\n}(CompositeColumn));\nexport default MultiLevelCompositeColumn;\n//# sourceMappingURL=MultiLevelCompositeColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport MultiLevelCompositeColumn from './MultiLevelCompositeColumn';\nimport { concat } from '../internal';\nimport { toolbar } from './annotations';\n/**\n * factory for creating a description creating a mean column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createNestedDesc(label, showNestedSummaries) {\n    if (label === void 0) { label = 'Nested'; }\n    if (showNestedSummaries === void 0) { showNestedSummaries = true; }\n    return { type: 'nested', label: label, showNestedSummaries: showNestedSummaries };\n}\n/**\n * a nested column is a composite column where the sorting order is determined by the nested ordering of the children\n * i.e., sort by the first child if equal sort by the second child,...\n */\nvar NestedColumn = /** @class */ (function (_super) {\n    __extends(NestedColumn, _super);\n    function NestedColumn() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NestedColumn.prototype.toCompareValue = function (row) {\n        return concat(this.children.map(function (d) { return d.toCompareValue(row); }));\n    };\n    NestedColumn.prototype.toCompareValueType = function () {\n        return concat(this.children.map(function (d) { return d.toCompareValueType(); }));\n    };\n    NestedColumn.prototype.getLabel = function (row) {\n        return this.children.map(function (d) { return d.getLabel(row); }).join(';');\n    };\n    NestedColumn.prototype.getValue = function (row) {\n        return this.children.map(function (d) { return d.getValue(row); }).join(';');\n    };\n    NestedColumn = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy')\n    ], NestedColumn);\n    return NestedColumn;\n}(MultiLevelCompositeColumn));\nexport default NestedColumn;\n//# sourceMappingURL=NestedColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { toolbar, SortByDefault, dialogAddons } from './annotations';\nimport Column from './Column';\nimport { ECompareValueType } from './interfaces';\nimport { EAdvancedSortMethod, } from './INumberColumn';\nimport MapColumn from './MapColumn';\nimport { restoreMapping } from './MappingFunction';\nimport { isMissingValue } from './missing';\nimport NumberColumn from './NumberColumn';\nimport { boxplotBuilder } from '../internal';\nimport { format } from 'd3-format';\nimport { DEFAULT_FORMATTER, noNumberFilter, toCompareBoxPlotValue, getBoxPlotNumber, isDummyNumberFilter, restoreNumberFilter, } from './internalNumber';\nimport { integrateDefaults } from './internal';\nvar NumberMapColumn = /** @class */ (function (_super) {\n    __extends(NumberMapColumn, _super);\n    function NumberMapColumn(id, desc, factory) {\n        var _this = _super.call(this, id, integrateDefaults(desc, {\n            renderer: 'mapbars',\n        })) || this;\n        _this.numberFormat = DEFAULT_FORMATTER;\n        /**\n         * currently active filter\n         * @type {{min: number, max: number}}\n         * @private\n         */\n        _this.currentFilter = noNumberFilter();\n        _this.mapping = restoreMapping(desc, factory);\n        _this.original = _this.mapping.clone();\n        _this.colorMapping = factory.colorMappingFunction(desc.colorMapping || desc.color);\n        _this.sort = desc.sort || EAdvancedSortMethod.median;\n        if (desc.numberFormat) {\n            _this.numberFormat = format(desc.numberFormat);\n        }\n        return _this;\n    }\n    NumberMapColumn_1 = NumberMapColumn;\n    NumberMapColumn.prototype.getNumberFormat = function () {\n        return this.numberFormat;\n    };\n    NumberMapColumn.prototype.toCompareValue = function (row) {\n        return toCompareBoxPlotValue(this, row);\n    };\n    NumberMapColumn.prototype.toCompareValueType = function () {\n        return ECompareValueType.FLOAT;\n    };\n    NumberMapColumn.prototype.getBoxPlotData = function (row) {\n        var data = this.getRawValue(row);\n        if (data == null) {\n            return null;\n        }\n        var b = boxplotBuilder();\n        for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n            var d = data_1[_i];\n            b.push(isMissingValue(d.value) ? NaN : this.mapping.apply(d.value));\n        }\n        return b.build();\n    };\n    NumberMapColumn.prototype.getRange = function () {\n        return this.mapping.getRange(this.numberFormat);\n    };\n    NumberMapColumn.prototype.getRawBoxPlotData = function (row) {\n        var data = this.getRawValue(row);\n        if (data == null) {\n            return null;\n        }\n        var b = boxplotBuilder();\n        for (var _i = 0, data_2 = data; _i < data_2.length; _i++) {\n            var d = data_2[_i];\n            b.push(isMissingValue(d.value) ? NaN : d.value);\n        }\n        return b.build();\n    };\n    NumberMapColumn.prototype.getNumber = function (row) {\n        return getBoxPlotNumber(this, row, 'normalized');\n    };\n    NumberMapColumn.prototype.getRawNumber = function (row) {\n        return getBoxPlotNumber(this, row, 'raw');\n    };\n    NumberMapColumn.prototype.iterNumber = function (row) {\n        var r = this.getValue(row);\n        return r ? r.map(function (d) { return d.value; }) : [NaN];\n    };\n    NumberMapColumn.prototype.iterRawNumber = function (row) {\n        var r = this.getRawValue(row);\n        return r ? r.map(function (d) { return d.value; }) : [NaN];\n    };\n    NumberMapColumn.prototype.getValue = function (row) {\n        var _this = this;\n        var values = this.getRawValue(row);\n        return values.length === 0\n            ? null\n            : values.map(function (_a) {\n                var key = _a.key, value = _a.value;\n                return ({ key: key, value: isMissingValue(value) ? NaN : _this.mapping.apply(value) });\n            });\n    };\n    NumberMapColumn.prototype.getRawValue = function (row) {\n        var r = _super.prototype.getValue.call(this, row);\n        return r == null ? [] : r;\n    };\n    NumberMapColumn.prototype.getExportValue = function (row, format) {\n        return format === 'json' ? this.getRawValue(row) : _super.prototype.getExportValue.call(this, row, format);\n    };\n    NumberMapColumn.prototype.getLabels = function (row) {\n        var _this = this;\n        var v = this.getRawValue(row);\n        return v.map(function (_a) {\n            var key = _a.key, value = _a.value;\n            return ({ key: key, value: _this.numberFormat(value) });\n        });\n    };\n    NumberMapColumn.prototype.getSortMethod = function () {\n        return this.sort;\n    };\n    NumberMapColumn.prototype.setSortMethod = function (sort) {\n        if (this.sort === sort) {\n            return;\n        }\n        this.fire([NumberMapColumn_1.EVENT_SORTMETHOD_CHANGED], this.sort, (this.sort = sort));\n        // sort by me if not already sorted by me\n        if (!this.isSortedByMe().asc) {\n            this.sortByMe();\n        }\n    };\n    NumberMapColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.sortMethod = this.getSortMethod();\n        r.filter = !isDummyNumberFilter(this.currentFilter) ? this.currentFilter : null;\n        r.map = this.mapping.toJSON();\n        r.colorMapping = this.colorMapping.toJSON();\n        return r;\n    };\n    NumberMapColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        if (dump.sortMethod) {\n            this.sort = dump.sortMethod;\n        }\n        if (dump.filter) {\n            this.currentFilter = restoreNumberFilter(dump.filter);\n        }\n        if (dump.map || dump.domain) {\n            this.mapping = restoreMapping(dump, factory);\n        }\n        if (dump.colorMapping) {\n            this.colorMapping = factory.colorMappingFunction(dump.colorMapping);\n        }\n    };\n    NumberMapColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([\n            NumberMapColumn_1.EVENT_COLOR_MAPPING_CHANGED,\n            NumberMapColumn_1.EVENT_MAPPING_CHANGED,\n            NumberMapColumn_1.EVENT_SORTMETHOD_CHANGED,\n            NumberMapColumn_1.EVENT_FILTER_CHANGED,\n        ]);\n    };\n    NumberMapColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    NumberMapColumn.prototype.getOriginalMapping = function () {\n        return this.original.clone();\n    };\n    NumberMapColumn.prototype.getMapping = function () {\n        return this.mapping.clone();\n    };\n    NumberMapColumn.prototype.setMapping = function (mapping) {\n        if (this.mapping.eq(mapping)) {\n            return;\n        }\n        this.fire([NumberMapColumn_1.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.mapping.clone(), (this.mapping = mapping));\n    };\n    NumberMapColumn.prototype.getColor = function (row) {\n        return NumberColumn.prototype.getColor.call(this, row);\n    };\n    NumberMapColumn.prototype.getColorMapping = function () {\n        return this.colorMapping.clone();\n    };\n    NumberMapColumn.prototype.setColorMapping = function (mapping) {\n        if (this.colorMapping.eq(mapping)) {\n            return;\n        }\n        this.fire([NumberMapColumn_1.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.colorMapping.clone(), (this.colorMapping = mapping));\n    };\n    NumberMapColumn.prototype.isFiltered = function () {\n        return NumberColumn.prototype.isFiltered.call(this);\n    };\n    NumberMapColumn.prototype.getFilter = function () {\n        return NumberColumn.prototype.getFilter.call(this);\n    };\n    NumberMapColumn.prototype.setFilter = function (value) {\n        NumberColumn.prototype.setFilter.call(this, value);\n    };\n    NumberMapColumn.prototype.filter = function (row) {\n        return NumberColumn.prototype.filter.call(this, row);\n    };\n    NumberMapColumn.prototype.clearFilter = function () {\n        return NumberColumn.prototype.clearFilter.call(this);\n    };\n    var NumberMapColumn_1;\n    NumberMapColumn.EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\n    NumberMapColumn.EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\n    NumberMapColumn.EVENT_SORTMETHOD_CHANGED = NumberColumn.EVENT_SORTMETHOD_CHANGED;\n    NumberMapColumn.EVENT_FILTER_CHANGED = NumberColumn.EVENT_FILTER_CHANGED;\n    NumberMapColumn = NumberMapColumn_1 = __decorate([\n        toolbar('rename', 'filterNumber', 'colorMapped', 'editMapping'),\n        dialogAddons('sort', 'sortNumbers'),\n        SortByDefault('descending')\n    ], NumberMapColumn);\n    return NumberMapColumn;\n}(MapColumn));\nexport default NumberMapColumn;\n//# sourceMappingURL=NumberMapColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { equalArrays, extent } from '../internal';\nimport { Category, toolbar } from './annotations';\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION } from './CategoricalColorMappingFunction';\nimport CategoricalColumn from './CategoricalColumn';\nimport Column from './Column';\nimport NumberColumn from './NumberColumn';\nimport ValueColumn from './ValueColumn';\nimport { toCategories } from './internalCategorical';\nimport { DEFAULT_FORMATTER } from './internalNumber';\nimport { integrateDefaults } from './internal';\n/**\n * similar to a categorical column but the categories are mapped to numbers\n */\nvar OrdinalColumn = /** @class */ (function (_super) {\n    __extends(OrdinalColumn, _super);\n    function OrdinalColumn(id, desc) {\n        var _this = _super.call(this, id, integrateDefaults(desc, {\n            renderer: 'number',\n            groupRenderer: 'boxplot',\n        })) || this;\n        _this.lookup = new Map();\n        _this.currentFilter = null;\n        _this.categories = toCategories(desc);\n        _this.categories.forEach(function (d) { return _this.lookup.set(d.name, d); });\n        _this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\n        return _this;\n    }\n    OrdinalColumn_1 = OrdinalColumn;\n    OrdinalColumn.prototype.onDataUpdate = function (rows) {\n        var _a;\n        var _this = this;\n        _super.prototype.onDataUpdate.call(this, rows);\n        if (this.desc.categories) {\n            return;\n        }\n        // derive\n        var categories = new Set();\n        rows.forEach(function (row) {\n            var value = _super.prototype.getValue.call(_this, row);\n            if (!value) {\n                return;\n            }\n            categories.add(String(value));\n        });\n        (_a = this.categories).splice.apply(_a, __spreadArray([0, this.categories.length], toCategories({ categories: Array.from(categories) }), false));\n        this.categories.forEach(function (d) { return _this.lookup.set(d.name, d); });\n    };\n    OrdinalColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([\n            OrdinalColumn_1.EVENT_COLOR_MAPPING_CHANGED,\n            OrdinalColumn_1.EVENT_MAPPING_CHANGED,\n            OrdinalColumn_1.EVENT_FILTER_CHANGED,\n        ]);\n    };\n    OrdinalColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    OrdinalColumn.prototype.getNumberFormat = function () {\n        return DEFAULT_FORMATTER;\n    };\n    Object.defineProperty(OrdinalColumn.prototype, \"dataLength\", {\n        get: function () {\n            return this.categories.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(OrdinalColumn.prototype, \"labels\", {\n        get: function () {\n            return this.categories.map(function (d) { return d.label; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    OrdinalColumn.prototype.getValue = function (row) {\n        var v = this.getNumber(row);\n        return Number.isNaN(v) ? null : v;\n    };\n    OrdinalColumn.prototype.getCategory = function (row) {\n        var v = _super.prototype.getValue.call(this, row);\n        if (!v) {\n            return null;\n        }\n        var vs = String(v);\n        return this.lookup.has(vs) ? this.lookup.get(vs) : null;\n    };\n    OrdinalColumn.prototype.getCategories = function (row) {\n        return [this.getCategory(row)];\n    };\n    OrdinalColumn.prototype.iterCategory = function (row) {\n        return [this.getCategory(row)];\n    };\n    OrdinalColumn.prototype.iterNumber = function (row) {\n        return [this.getNumber(row)];\n    };\n    OrdinalColumn.prototype.iterRawNumber = function (row) {\n        return [this.getRawNumber(row)];\n    };\n    OrdinalColumn.prototype.getColor = function (row) {\n        return CategoricalColumn.prototype.getColor.call(this, row);\n    };\n    OrdinalColumn.prototype.getLabel = function (row) {\n        return CategoricalColumn.prototype.getLabel.call(this, row);\n    };\n    OrdinalColumn.prototype.getLabels = function (row) {\n        return CategoricalColumn.prototype.getLabels.call(this, row);\n    };\n    OrdinalColumn.prototype.getValues = function (row) {\n        return CategoricalColumn.prototype.getValues.call(this, row);\n    };\n    OrdinalColumn.prototype.getMap = function (row) {\n        return CategoricalColumn.prototype.getMap.call(this, row);\n    };\n    OrdinalColumn.prototype.getMapLabel = function (row) {\n        return CategoricalColumn.prototype.getMapLabel.call(this, row);\n    };\n    OrdinalColumn.prototype.getSet = function (row) {\n        return CategoricalColumn.prototype.getSet.call(this, row);\n    };\n    OrdinalColumn.prototype.getNumber = function (row) {\n        var v = this.getCategory(row);\n        return v ? v.value : NaN;\n    };\n    OrdinalColumn.prototype.getRawNumber = function (row) {\n        return this.getNumber(row);\n    };\n    OrdinalColumn.prototype.getExportValue = function (row, format) {\n        if (format === 'json') {\n            var value = this.getNumber(row);\n            if (Number.isNaN(value)) {\n                return null;\n            }\n            return {\n                name: this.getLabel(row),\n                value: value,\n            };\n        }\n        return _super.prototype.getExportValue.call(this, row, format);\n    };\n    OrdinalColumn.prototype.dump = function (toDescRef) {\n        var r = CategoricalColumn.prototype.dump.call(this, toDescRef);\n        r.mapping = this.getMapping();\n        return r;\n    };\n    OrdinalColumn.prototype.restore = function (dump, factory) {\n        CategoricalColumn.prototype.restore.call(this, dump, factory);\n        if (dump.mapping) {\n            this.setMapping(dump.mapping);\n        }\n    };\n    OrdinalColumn.prototype.getMapping = function () {\n        return this.categories.map(function (d) { return d.value; });\n    };\n    OrdinalColumn.prototype.setMapping = function (mapping) {\n        var r = extent(mapping);\n        mapping = mapping.map(function (d) { return (d - r[0]) / (r[1] - r[0]); });\n        var bak = this.getMapping();\n        if (equalArrays(bak, mapping)) {\n            return;\n        }\n        this.categories.forEach(function (d, i) { return (d.value = mapping[i] || 0); });\n        this.fire([\n            OrdinalColumn_1.EVENT_MAPPING_CHANGED,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY,\n        ], bak, this.getMapping());\n    };\n    OrdinalColumn.prototype.getColorMapping = function () {\n        return this.colorMapping.clone();\n    };\n    OrdinalColumn.prototype.setColorMapping = function (mapping) {\n        return CategoricalColumn.prototype.setColorMapping.call(this, mapping);\n    };\n    OrdinalColumn.prototype.isFiltered = function () {\n        return this.currentFilter != null;\n    };\n    OrdinalColumn.prototype.filter = function (row) {\n        return CategoricalColumn.prototype.filter.call(this, row);\n    };\n    OrdinalColumn.prototype.group = function (row) {\n        return CategoricalColumn.prototype.group.call(this, row);\n    };\n    OrdinalColumn.prototype.getFilter = function () {\n        return this.currentFilter;\n    };\n    OrdinalColumn.prototype.setFilter = function (filter) {\n        return CategoricalColumn.prototype.setFilter.call(this, filter);\n    };\n    OrdinalColumn.prototype.clearFilter = function () {\n        return CategoricalColumn.prototype.clearFilter.call(this);\n    };\n    OrdinalColumn.prototype.toCompareValue = function (row) {\n        return CategoricalColumn.prototype.toCompareValue.call(this, row);\n    };\n    OrdinalColumn.prototype.toCompareValueType = function () {\n        return CategoricalColumn.prototype.toCompareValueType.call(this);\n    };\n    OrdinalColumn.prototype.getRenderer = function () {\n        return NumberColumn.prototype.getRenderer.call(this);\n    };\n    var OrdinalColumn_1;\n    OrdinalColumn.EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\n    OrdinalColumn.EVENT_FILTER_CHANGED = CategoricalColumn.EVENT_FILTER_CHANGED;\n    OrdinalColumn.EVENT_COLOR_MAPPING_CHANGED = CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED;\n    OrdinalColumn = OrdinalColumn_1 = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'group', 'filterOrdinal', 'colorMappedCategorical'),\n        Category('categorical')\n    ], OrdinalColumn);\n    return OrdinalColumn;\n}(ValueColumn));\nexport default OrdinalColumn;\n//# sourceMappingURL=OrdinalColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport NumberColumn from './NumberColumn';\nimport { SortByDefault, toolbar } from './annotations';\nimport Column from './Column';\nimport CompositeNumberColumn from './CompositeNumberColumn';\nimport { isDummyNumberFilter, noNumberFilter, restoreNumberFilter } from './internalNumber';\nimport { isNumberColumn, } from './INumberColumn';\nimport { restoreMapping } from './MappingFunction';\nimport { integrateDefaults } from './internal';\nvar DEFAULT_SCRIPT = \"let s = 0;\\ncol.forEach((c) => s += c.v);\\nreturn s / col.length\";\n/**\n * factory for creating a description creating a mean column\n * @param label\n * @returns {{type: string, label: string}}\n */\nexport function createScriptDesc(label) {\n    if (label === void 0) { label = 'script'; }\n    return { type: 'script', label: label, script: DEFAULT_SCRIPT };\n}\nfunction wrapWithContext(code) {\n    var clean = code.trim();\n    if (!clean.includes('return')) {\n        clean = \"return (\".concat(clean, \");\");\n    }\n    return \"\\n  const max = function(arr) { return Math.max.apply(Math, arr); };\\n  const min = function(arr) { return Math.min.apply(Math, arr); };\\n  const extent = function(arr) { return [min(arr), max(arr)]; };\\n  const clamp = function(v, minValue, maxValue) { return v < minValue ? minValue : (v > maxValue ? maxValue : v); };\\n  const normalize = function(v, minMax, max) {\\n    if (Array.isArray(minMax)) {\\n      minMax = minMax[0];\\n      max = minMax[1];\\n    }\\n    return (v - minMax) / (max - minMax);\\n  };\\n  const denormalize = function(v, minMax, max) {\\n    if (Array.isArray(minMax)) {\\n      minMax = minMax[0];\\n      max = minMax[1];\\n    }\\n    return v * (max - minMax) + minMax;\\n  };\\n  const linear = function(v, source, target) {\\n    target = target || [0, 1];\\n    return denormalize(normalize(v, source), target);\\n  };\\n  const v = (function custom() {\\n    \".concat(clean, \"\\n  })();\\n\\n  return typeof v === 'number' ? v : NaN\");\n}\n/**\n * wrapper class for simpler column accessing\n */\nvar ColumnWrapper = /** @class */ (function () {\n    function ColumnWrapper(c, v, raw) {\n        this.c = c;\n        this.v = v;\n        this.raw = raw;\n    }\n    Object.defineProperty(ColumnWrapper.prototype, \"type\", {\n        get: function () {\n            return this.c.desc.type;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ColumnWrapper.prototype, \"name\", {\n        get: function () {\n            return this.c.getMetaData().label;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ColumnWrapper.prototype, \"id\", {\n        get: function () {\n            return this.c.id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return ColumnWrapper;\n}());\nvar LazyColumnWrapper = /** @class */ (function () {\n    function LazyColumnWrapper(c, row) {\n        this.c = c;\n        this.row = row;\n    }\n    Object.defineProperty(LazyColumnWrapper.prototype, \"type\", {\n        get: function () {\n            return this.c.desc.type;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LazyColumnWrapper.prototype, \"name\", {\n        get: function () {\n            return this.c.getMetaData().label;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LazyColumnWrapper.prototype, \"id\", {\n        get: function () {\n            return this.c.id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LazyColumnWrapper.prototype, \"v\", {\n        get: function () {\n            return this.c.getValue(this.row);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LazyColumnWrapper.prototype, \"raw\", {\n        get: function () {\n            return isNumberColumn(this.c) ? this.c.getRawNumber(this.row) : null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return LazyColumnWrapper;\n}());\n/**\n * helper context for accessing columns within a scripted columns\n */\nvar ColumnContext = /** @class */ (function () {\n    function ColumnContext(children, allFactory) {\n        var _this = this;\n        this.children = children;\n        this.allFactory = allFactory;\n        this.lookup = new Map();\n        this._all = null;\n        children.forEach(function (c) {\n            _this.lookup.set(\"ID@\".concat(c.id), c);\n            _this.lookup.set(\"ID@\".concat(c.id.toLowerCase()), c);\n            _this.lookup.set(\"NAME@\".concat(c.name), c);\n            _this.lookup.set(\"NAME@\".concat(c.name.toLowerCase()), c);\n        });\n    }\n    /**\n     * get a column by name\n     * @param {string} name\n     * @return {IColumnWrapper}\n     */\n    ColumnContext.prototype.byName = function (name) {\n        return this.lookup.get(\"NAME@\".concat(name));\n    };\n    /**\n     * get a column by id\n     * @param {string} id\n     * @return {IColumnWrapper}\n     */\n    ColumnContext.prototype.byID = function (id) {\n        return this.lookup.get(\"ID@\".concat(id));\n    };\n    /**\n     * get a column by index\n     * @param {number} index\n     * @return {IColumnWrapper}\n     */\n    ColumnContext.prototype.byIndex = function (index) {\n        return this.children[index];\n    };\n    ColumnContext.prototype.forEach = function (callback) {\n        return this.children.forEach(callback);\n    };\n    Object.defineProperty(ColumnContext.prototype, \"length\", {\n        /**\n         * number of columns\n         * @return {number}\n         */\n        get: function () {\n            return this.children.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ColumnContext.prototype, \"all\", {\n        /**\n         * get the all context, i.e one with all columns of this ranking\n         * @return {ColumnContext}\n         */\n        get: function () {\n            if (this._all == null) {\n                this._all = this.allFactory ? this.allFactory() : null;\n            }\n            return this._all;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return ColumnContext;\n}());\n/**\n * column combiner which uses a custom JavaScript function to combined the values\n * The script itself can be any valid JavaScript code. It will be embedded in a function.\n * Therefore the last statement has to return a value.\n *\n * In case of a single line statement the code piece statement <code>return</code> will be automatically prefixed.\n *\n * The function signature is: <br><code>(row: any, index: number, children: Column[], values: any[], raws: (number|null)[]) => number</code>\n *  <dl>\n *    <dt>param: <code>row</code></dt>\n *    <dd>the row in the dataset to compute the value for</dd>\n *    <dt>param: <code>index</code></dt>\n *    <dd>the index of the row</dd>\n *    <dt>param: <code>children</code></dt>\n *    <dd>the list of LineUp columns that are part of this ScriptColumn</dd>\n *    <dt>param: <code>values</code></dt>\n *    <dd>the computed value of each column (see <code>children</code>) for the current row</dd>\n *    <dt>param: <code>raws</code></dt>\n *    <dd>similar to <code>values</code>. Numeric columns return by default the normalized value, this array gives access to the original \"raw\" values before mapping is applied</dd>\n *    <dt>returns:</dt>\n *    <dd>the computed number <strong>in the range [0, 1] or NaN</strong></dd>\n *  </dl>\n *\n * In addition to the standard JavaScript functions and objects (Math, ...) a couple of utility functions are available: </p>\n * <dl>\n *    <dt><code>max(arr: number[]) => number</code></dt>\n *    <dd>computes the maximum of the given array of numbers</dd>\n *    <dt><code>min(arr: number[]) => number</code></dt>\n *    <dd>computes the minimum of the given array of numbers</dd>\n *    <dt><code>extent(arr: number[]) => [number, number]</code></dt>\n *    <dd>computes both minimum and maximum and returning an array with the first element the minimum and the second the maximum</dd>\n *    <dt><code>clamp(v: number, min: number, max: number) => number</code></dt>\n *    <dd>ensures that the given value is within the given min/max value</dd>\n *    <dt><code>normalize(v: number, min: number, max: number) => number</code></dt>\n *    <dd>normalizes the given value <code>(v - min) / (max - min)</code></dd>\n *    <dt><code>denormalize(v: number, min: number, max: number) => number</code></dt>\n *    <dd>inverts a normalized value <code>v * (max - min) + min</code></dd>\n *    <dt><code>linear(v: number, input: [number, number], output: [number, number]) => number</code></dt>\n *    <dd>performs a linear mapping from input domain to output domain both given as an array of [min, max] values. <code>denormalize(normalize(v, input[0], input[1]), output[0], output[1])</code></dd>\n *  </dl>\n */\nvar ScriptColumn = /** @class */ (function (_super) {\n    __extends(ScriptColumn, _super);\n    function ScriptColumn(id, desc, factory) {\n        var _this = _super.call(this, id, integrateDefaults(desc, {\n            renderer: 'number',\n            groupRenderer: 'boxplot',\n            summaryRenderer: 'histogram',\n        })) || this;\n        _this.script = ScriptColumn_1.DEFAULT_SCRIPT;\n        _this.f = null;\n        /**\n         * currently active filter\n         * @type {{min: number, max: number}}\n         * @private\n         */\n        _this.currentFilter = noNumberFilter();\n        _this.script = desc.script || _this.script;\n        _this.mapping = restoreMapping(desc, factory);\n        _this.original = _this.mapping.clone();\n        _this.colorMapping = factory.colorMappingFunction(desc.colorMapping || desc.color);\n        return _this;\n    }\n    ScriptColumn_1 = ScriptColumn;\n    ScriptColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([\n            ScriptColumn_1.EVENT_SCRIPT_CHANGED,\n            ScriptColumn_1.EVENT_COLOR_MAPPING_CHANGED,\n            ScriptColumn_1.EVENT_MAPPING_CHANGED,\n        ]);\n    };\n    ScriptColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    ScriptColumn.prototype.setScript = function (script) {\n        if (this.script === script) {\n            return;\n        }\n        this.f = null;\n        this.fire([ScriptColumn_1.EVENT_SCRIPT_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.script, (this.script = script));\n    };\n    ScriptColumn.prototype.getScript = function () {\n        return this.script;\n    };\n    ScriptColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        r.script = this.script;\n        r.filter = !isDummyNumberFilter(this.currentFilter) ? this.currentFilter : null;\n        r.map = this.mapping.toJSON();\n        r.colorMapping = this.colorMapping.toJSON();\n        return r;\n    };\n    ScriptColumn.prototype.restore = function (dump, factory) {\n        _super.prototype.restore.call(this, dump, factory);\n        this.script = dump.script || this.script;\n        if (dump.filter) {\n            this.currentFilter = restoreNumberFilter(dump.filter);\n        }\n        if (dump.map || dump.domain) {\n            this.mapping = restoreMapping(dump.map, factory);\n        }\n        if (dump.colorMapping) {\n            this.colorMapping = factory.colorMappingFunction(dump.colorMapping);\n        }\n    };\n    ScriptColumn.prototype.compute = function (row) {\n        var _this = this;\n        if (this.f == null) {\n            // eslint-disable-next-line no-new-func\n            this.f = new Function('children', 'values', 'raws', 'col', 'row', 'index', wrapWithContext(this.script));\n        }\n        var children = this._children;\n        var values = this._children.map(function (d) { return d.getValue(row); });\n        var raws = this._children.map(function (d) { return (isNumberColumn(d) ? d.getRawNumber(row) : null); });\n        var col = new ColumnContext(children.map(function (c, i) { return new ColumnWrapper(c, values[i], raws[i]); }), function () {\n            var cols = _this.findMyRanker().flatColumns; // all except myself\n            return new ColumnContext(cols.map(function (c) { return new LazyColumnWrapper(c, row); }));\n        });\n        return this.f.call(this, children, values, raws, col, row.v, row.i);\n    };\n    ScriptColumn.prototype.getExportValue = function (row, format) {\n        if (format === 'json') {\n            return {\n                value: this.getRawNumber(row),\n                children: this.children.map(function (d) { return d.getExportValue(row, format); }),\n            };\n        }\n        return _super.prototype.getExportValue.call(this, row, format);\n    };\n    ScriptColumn.prototype.getRange = function () {\n        return this.mapping.getRange(this.getNumberFormat());\n    };\n    ScriptColumn.prototype.getOriginalMapping = function () {\n        return this.original.clone();\n    };\n    ScriptColumn.prototype.getMapping = function () {\n        return this.mapping.clone();\n    };\n    ScriptColumn.prototype.setMapping = function (mapping) {\n        if (this.mapping.eq(mapping)) {\n            return;\n        }\n        this.fire([\n            ScriptColumn_1.EVENT_MAPPING_CHANGED,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY,\n        ], this.mapping.clone(), (this.mapping = mapping));\n    };\n    ScriptColumn.prototype.getColor = function (row) {\n        return NumberColumn.prototype.getColor.call(this, row);\n    };\n    ScriptColumn.prototype.getColorMapping = function () {\n        return this.colorMapping.clone();\n    };\n    ScriptColumn.prototype.setColorMapping = function (mapping) {\n        if (this.colorMapping.eq(mapping)) {\n            return;\n        }\n        this.fire([\n            ScriptColumn_1.EVENT_COLOR_MAPPING_CHANGED,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY,\n        ], this.colorMapping.clone(), (this.colorMapping = mapping));\n    };\n    ScriptColumn.prototype.isFiltered = function () {\n        return NumberColumn.prototype.isFiltered.call(this);\n    };\n    ScriptColumn.prototype.getFilter = function () {\n        return NumberColumn.prototype.getFilter.call(this);\n    };\n    ScriptColumn.prototype.setFilter = function (value) {\n        NumberColumn.prototype.setFilter.call(this, value);\n    };\n    ScriptColumn.prototype.filter = function (row) {\n        return NumberColumn.prototype.filter.call(this, row);\n    };\n    ScriptColumn.prototype.clearFilter = function () {\n        return NumberColumn.prototype.clearFilter.call(this);\n    };\n    var ScriptColumn_1;\n    ScriptColumn.EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\n    ScriptColumn.EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\n    ScriptColumn.EVENT_SCRIPT_CHANGED = 'scriptChanged';\n    ScriptColumn.DEFAULT_SCRIPT = DEFAULT_SCRIPT;\n    ScriptColumn = ScriptColumn_1 = __decorate([\n        toolbar('script', 'filterNumber', 'colorMapped', 'editMapping'),\n        SortByDefault('descending')\n    ], ScriptColumn);\n    return ScriptColumn;\n}(CompositeNumberColumn));\nexport default ScriptColumn;\n//# sourceMappingURL=ScriptColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { toolbar } from './annotations';\nimport MapColumn from './MapColumn';\nimport { EAlignment } from './StringColumn';\nimport { isMissingValue } from './missing';\nimport { integrateDefaults } from './internal';\n/**\n * a string column with optional alignment\n */\nvar StringMapColumn = /** @class */ (function (_super) {\n    __extends(StringMapColumn, _super);\n    function StringMapColumn(id, desc) {\n        var _this = this;\n        var _a;\n        _this = _super.call(this, id, integrateDefaults(desc, {\n            width: 200,\n            renderer: 'map',\n        })) || this;\n        _this.alignment = (_a = desc.alignment) !== null && _a !== void 0 ? _a : EAlignment.left;\n        _this.escape = desc.escape !== false;\n        return _this;\n    }\n    StringMapColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    StringMapColumn.prototype.getValue = function (row) {\n        var r = this.getMapValue(row);\n        return r.every(function (d) { return d.value === ''; }) ? null : r;\n    };\n    StringMapColumn.prototype.getMapValue = function (row) {\n        return _super.prototype.getMap.call(this, row).map(function (_a) {\n            var key = _a.key, value = _a.value;\n            return ({\n                key: key,\n                value: isMissingValue(value) ? '' : String(value),\n            });\n        });\n    };\n    StringMapColumn = __decorate([\n        toolbar('rename', 'search')\n    ], StringMapColumn);\n    return StringMapColumn;\n}(MapColumn));\nexport default StringMapColumn;\n//# sourceMappingURL=StringMapColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { toolbar } from './annotations';\nimport ArrayColumn from './ArrayColumn';\nimport { EAlignment } from './StringColumn';\nimport { isMissingValue } from './missing';\nimport { integrateDefaults } from './internal';\n/**\n * a string column with optional alignment\n */\nvar StringsColumn = /** @class */ (function (_super) {\n    __extends(StringsColumn, _super);\n    function StringsColumn(id, desc) {\n        var _this = this;\n        var _a;\n        _this = _super.call(this, id, integrateDefaults(desc, {\n            width: 200,\n        })) || this;\n        _this.alignment = (_a = desc.alignment) !== null && _a !== void 0 ? _a : EAlignment.left;\n        _this.escape = desc.escape !== false;\n        return _this;\n    }\n    StringsColumn.prototype.getValues = function (row) {\n        return _super.prototype.getValues.call(this, row).map(function (v) {\n            return isMissingValue(v) ? '' : String(v);\n        });\n    };\n    StringsColumn = __decorate([\n        toolbar('rename', 'search')\n    ], StringsColumn);\n    return StringsColumn;\n}(ArrayColumn));\nexport default StringsColumn;\n//# sourceMappingURL=StringsColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Category, toolbar, dialogAddons } from './annotations';\nimport Column from './Column';\nimport { patternFunction, integrateDefaults } from './internal';\nimport ValueColumn from './ValueColumn';\nimport { EAlignment, EStringGroupCriteriaType } from './StringColumn';\nimport StringColumn from './StringColumn';\n/**\n * a string column with optional alignment\n */\nvar LinkColumn = /** @class */ (function (_super) {\n    __extends(LinkColumn, _super);\n    function LinkColumn(id, desc) {\n        var _this = this;\n        var _a;\n        _this = _super.call(this, id, integrateDefaults(desc, Object.assign({\n            width: 200,\n        }, desc.pattern\n            ? {\n                renderer: 'link',\n                groupRenderer: 'link',\n            }\n            : {}))) || this;\n        _this.patternFunction = null;\n        _this.currentFilter = null;\n        _this.currentGroupCriteria = {\n            type: EStringGroupCriteriaType.startsWith,\n            values: [],\n        };\n        _this.alignment = (_a = desc.alignment) !== null && _a !== void 0 ? _a : EAlignment.left;\n        _this.escape = desc.escape !== false;\n        _this.pattern = desc.pattern || '';\n        _this.patternTemplates = desc.patternTemplates || [];\n        return _this;\n    }\n    LinkColumn_1 = LinkColumn;\n    LinkColumn.prototype.setPattern = function (pattern) {\n        if (pattern === this.pattern) {\n            return;\n        }\n        this.patternFunction = null; // reset cache\n        this.fire([\n            LinkColumn_1.EVENT_PATTERN_CHANGED,\n            Column.EVENT_DIRTY_HEADER,\n            Column.EVENT_DIRTY_VALUES,\n            Column.EVENT_DIRTY_CACHES,\n            Column.EVENT_DIRTY,\n        ], this.pattern, (this.pattern = pattern));\n    };\n    LinkColumn.prototype.getPattern = function () {\n        return this.pattern;\n    };\n    LinkColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([LinkColumn_1.EVENT_PATTERN_CHANGED, LinkColumn_1.EVENT_GROUPING_CHANGED, LinkColumn_1.EVENT_FILTER_CHANGED]);\n    };\n    LinkColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    LinkColumn.prototype.getValue = function (row) {\n        var l = this.getLink(row);\n        return l == null ? null : l.href;\n    };\n    LinkColumn.prototype.getLink = function (row) {\n        var v = _super.prototype.getValue.call(this, row);\n        return this.transformValue(v, row);\n    };\n    LinkColumn.prototype.transformValue = function (v, row) {\n        if (v == null || v === '') {\n            return null;\n        }\n        if (typeof v === 'string') {\n            if (!this.pattern) {\n                return {\n                    alt: v,\n                    href: v,\n                };\n            }\n            if (!this.patternFunction) {\n                this.patternFunction = patternFunction(this.pattern, 'item');\n            }\n            return {\n                alt: v,\n                href: this.patternFunction.call(this, v, row.v),\n            };\n        }\n        return v;\n    };\n    LinkColumn.prototype.getLabel = function (row) {\n        var l = this.getLink(row);\n        return l == null ? '' : l.alt;\n    };\n    LinkColumn.prototype.dump = function (toDescRef) {\n        var r = StringColumn.prototype.dump.call(this, toDescRef);\n        if (this.pattern !== this.desc.pattern) {\n            r.pattern = this.pattern;\n        }\n        return r;\n    };\n    LinkColumn.prototype.restore = function (dump, factory) {\n        StringColumn.prototype.restore.call(this, dump, factory);\n        if (dump.pattern) {\n            this.pattern = dump.pattern;\n        }\n    };\n    LinkColumn.prototype.isFiltered = function () {\n        return this.currentFilter != null;\n    };\n    LinkColumn.prototype.filter = function (row) {\n        return StringColumn.prototype.filter.call(this, row);\n    };\n    LinkColumn.prototype.getFilter = function () {\n        return this.currentFilter;\n    };\n    LinkColumn.prototype.setFilter = function (filter) {\n        return StringColumn.prototype.setFilter.call(this, filter);\n    };\n    LinkColumn.prototype.clearFilter = function () {\n        return StringColumn.prototype.clearFilter.call(this);\n    };\n    LinkColumn.prototype.getGroupCriteria = function () {\n        return this.currentGroupCriteria;\n    };\n    LinkColumn.prototype.setGroupCriteria = function (value) {\n        return StringColumn.prototype.setGroupCriteria.call(this, value);\n    };\n    LinkColumn.prototype.toCompareValue = function (a) {\n        return StringColumn.prototype.toCompareValue.call(this, a);\n    };\n    LinkColumn.prototype.toCompareValueType = function () {\n        return StringColumn.prototype.toCompareValueType.call(this);\n    };\n    LinkColumn.prototype.toCompareGroupValue = function (rows, group) {\n        return StringColumn.prototype.toCompareGroupValue.call(this, rows, group);\n    };\n    LinkColumn.prototype.toCompareGroupValueType = function () {\n        return StringColumn.prototype.toCompareGroupValueType.call(this);\n    };\n    LinkColumn.prototype.group = function (row) {\n        return StringColumn.prototype.group.call(this, row);\n    };\n    var LinkColumn_1;\n    LinkColumn.EVENT_FILTER_CHANGED = StringColumn.EVENT_FILTER_CHANGED;\n    LinkColumn.EVENT_GROUPING_CHANGED = StringColumn.EVENT_GROUPING_CHANGED;\n    LinkColumn.EVENT_PATTERN_CHANGED = 'patternChanged';\n    LinkColumn = LinkColumn_1 = __decorate([\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'search', 'groupBy', 'filterString', 'editPattern'),\n        dialogAddons('group', 'groupString'),\n        Category('string')\n    ], LinkColumn);\n    return LinkColumn;\n}(ValueColumn));\nexport default LinkColumn;\n//# sourceMappingURL=LinkColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { toolbar } from './annotations';\nimport { patternFunction, integrateDefaults } from './internal';\nimport MapColumn from './MapColumn';\nimport LinkColumn from './LinkColumn';\nimport { EAlignment } from './StringColumn';\n/**\n * a string column with optional alignment\n */\nvar LinkMapColumn = /** @class */ (function (_super) {\n    __extends(LinkMapColumn, _super);\n    function LinkMapColumn(id, desc) {\n        var _this = this;\n        var _a, _b, _c;\n        _this = _super.call(this, id, integrateDefaults(desc, {\n            width: 200,\n            renderer: 'map',\n        })) || this;\n        _this.patternFunction = null;\n        _this.alignment = (_a = desc.alignment) !== null && _a !== void 0 ? _a : EAlignment.left;\n        _this.escape = desc.escape !== false;\n        _this.pattern = (_b = desc.pattern) !== null && _b !== void 0 ? _b : '';\n        _this.patternTemplates = (_c = desc.patternTemplates) !== null && _c !== void 0 ? _c : [];\n        return _this;\n    }\n    LinkMapColumn.prototype.setPattern = function (pattern) {\n        LinkColumn.prototype.setPattern.call(this, pattern);\n    };\n    LinkMapColumn.prototype.getPattern = function () {\n        return this.pattern;\n    };\n    LinkMapColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([LinkColumn.EVENT_PATTERN_CHANGED]);\n    };\n    LinkMapColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    LinkMapColumn.prototype.getValue = function (row) {\n        var r = this.getLinkMap(row);\n        return r.every(function (d) { return d.value == null; })\n            ? null\n            : r.map(function (_a) {\n                var key = _a.key, value = _a.value;\n                return ({\n                    key: key,\n                    value: value ? value.href : '',\n                });\n            });\n    };\n    LinkMapColumn.prototype.getLabels = function (row) {\n        return this.getLinkMap(row).map(function (_a) {\n            var key = _a.key, value = _a.value;\n            return ({\n                key: key,\n                value: value ? value.alt : '',\n            });\n        });\n    };\n    LinkMapColumn.prototype.getLinkMap = function (row) {\n        var _this = this;\n        return _super.prototype.getMap.call(this, row).map(function (_a) {\n            var key = _a.key, value = _a.value;\n            return ({\n                key: key,\n                value: _this.transformValue(value, row, key),\n            });\n        });\n    };\n    LinkMapColumn.prototype.transformValue = function (v, row, key) {\n        if (v == null || v === '') {\n            return null;\n        }\n        if (typeof v === 'string') {\n            if (!this.pattern) {\n                return {\n                    alt: v,\n                    href: v,\n                };\n            }\n            if (!this.patternFunction) {\n                this.patternFunction = patternFunction(this.pattern, 'item', 'key');\n            }\n            return {\n                alt: v,\n                href: this.patternFunction.call(this, v, row.v, key),\n            };\n        }\n        return v;\n    };\n    LinkMapColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        if (this.pattern !== this.desc.pattern) {\n            r.pattern = this.pattern;\n        }\n        return r;\n    };\n    LinkMapColumn.prototype.restore = function (dump, factory) {\n        if (dump.pattern) {\n            this.pattern = dump.pattern;\n        }\n        _super.prototype.restore.call(this, dump, factory);\n    };\n    LinkMapColumn.EVENT_PATTERN_CHANGED = LinkColumn.EVENT_PATTERN_CHANGED;\n    LinkMapColumn = __decorate([\n        toolbar('rename', 'search', 'editPattern')\n    ], LinkMapColumn);\n    return LinkMapColumn;\n}(MapColumn));\nexport default LinkMapColumn;\n//# sourceMappingURL=LinkMapColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { toolbar } from './annotations';\nimport ArrayColumn from './ArrayColumn';\nimport { patternFunction, integrateDefaults } from './internal';\nimport { EAlignment } from './StringColumn';\nimport LinkColumn from './LinkColumn';\nvar LinksColumn = /** @class */ (function (_super) {\n    __extends(LinksColumn, _super);\n    function LinksColumn(id, desc) {\n        var _this = this;\n        var _a, _b, _c;\n        _this = _super.call(this, id, integrateDefaults(desc, {\n            width: 200,\n        })) || this;\n        _this.patternFunction = null;\n        _this.alignment = (_a = desc.alignment) !== null && _a !== void 0 ? _a : EAlignment.left;\n        _this.escape = desc.escape !== false;\n        _this.pattern = (_b = desc.pattern) !== null && _b !== void 0 ? _b : '';\n        _this.patternTemplates = (_c = desc.patternTemplates) !== null && _c !== void 0 ? _c : [];\n        return _this;\n    }\n    LinksColumn_1 = LinksColumn;\n    LinksColumn.prototype.setPattern = function (pattern) {\n        return LinkColumn.prototype.setPattern.call(this, pattern);\n    };\n    LinksColumn.prototype.getPattern = function () {\n        return this.pattern;\n    };\n    LinksColumn.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([LinksColumn_1.EVENT_PATTERN_CHANGED]);\n    };\n    LinksColumn.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    LinksColumn.prototype.getValues = function (row) {\n        return this.getLinks(row).map(function (d) { return (d ? d.href : ''); });\n    };\n    LinksColumn.prototype.getLabels = function (row) {\n        return this.getLinks(row).map(function (d) { return (d ? d.alt : ''); });\n    };\n    LinksColumn.prototype.transformValue = function (v, row, i) {\n        if (v == null || v === '') {\n            return null;\n        }\n        if (typeof v === 'string') {\n            if (!this.pattern) {\n                return {\n                    alt: v,\n                    href: v,\n                };\n            }\n            if (!this.patternFunction) {\n                this.patternFunction = patternFunction(this.pattern, 'item', 'index');\n            }\n            return {\n                alt: v,\n                href: this.patternFunction.call(this, v, row.v, i),\n            };\n        }\n        return v;\n    };\n    LinksColumn.prototype.getLinks = function (row) {\n        var _this = this;\n        return _super.prototype.getValues.call(this, row).map(function (v, i) {\n            return _this.transformValue(v, row, i);\n        });\n    };\n    LinksColumn.prototype.dump = function (toDescRef) {\n        var r = _super.prototype.dump.call(this, toDescRef);\n        if (this.pattern !== this.desc.pattern) {\n            r.pattern = this.pattern;\n        }\n        return r;\n    };\n    LinksColumn.prototype.restore = function (dump, factory) {\n        if (dump.pattern) {\n            this.pattern = dump.pattern;\n        }\n        _super.prototype.restore.call(this, dump, factory);\n    };\n    var LinksColumn_1;\n    LinksColumn.EVENT_PATTERN_CHANGED = LinkColumn.EVENT_PATTERN_CHANGED;\n    LinksColumn = LinksColumn_1 = __decorate([\n        toolbar('rename', 'search', 'editPattern')\n    ], LinksColumn);\n    return LinksColumn;\n}(ArrayColumn));\nexport default LinksColumn;\n//# sourceMappingURL=LinksColumn.js.map","import { isGroup, EAggregationState } from '../model';\nexport function isAlwaysShowingGroupStrategy(strategy) {\n    return strategy === 'group+item' || strategy === 'group+item+top' || strategy === 'group+top+item';\n}\nexport function hasTopNStrategy(strategy) {\n    return strategy === 'group+item+top' || strategy === 'group+top+item';\n}\nexport function convertAggregationState(state, topN) {\n    if (typeof state === 'boolean') {\n        return state ? 0 : -1;\n    }\n    if (state === EAggregationState.COLLAPSE) {\n        return 0;\n    }\n    if (state === EAggregationState.EXPAND) {\n        return -1;\n    }\n    if (state === EAggregationState.EXPAND_TOP_N) {\n        return topN;\n    }\n    return state;\n}\nexport function toItemMeta(relativeIndex, group, topN) {\n    if (relativeIndex === 0) {\n        return group.order.length === 1 ? 'first last' : 'first';\n    }\n    if (relativeIndex === group.order.length - 1 || (topN > 0 && relativeIndex === topN - 1)) {\n        return 'last';\n    }\n    return null;\n}\nexport function groupParents(group, meta) {\n    var parents = [{ group: group, meta: meta }];\n    var prev = group;\n    var prevMeta = meta;\n    var parent = group.parent;\n    while (parent) {\n        if (parent.subGroups.length === 1 && prevMeta === 'first last') {\n            meta = 'first last';\n        }\n        else if (parent.subGroups[0] === prev && (prevMeta === 'first last' || prevMeta === 'first')) {\n            meta = 'first';\n        }\n        else if (parent.subGroups[parent.subGroups.length - 1] === prev &&\n            (prevMeta === 'last' || prevMeta === 'first last')) {\n            meta = 'last';\n        }\n        else {\n            meta = null;\n        }\n        parents.unshift({ group: parent, meta: meta });\n        prev = parent;\n        prevMeta = meta;\n        parent = parent.parent;\n    }\n    return parents;\n}\n/**\n * number of group levels this items ends\n */\nexport function groupEndLevel(item, topNGetter) {\n    var group = isGroup(item) ? item : item.group;\n    var last = isGroup(item) ? 'first last' : toItemMeta(item.relativeIndex, item.group, topNGetter(group));\n    if (last !== 'last' && last !== 'first last') {\n        return 0;\n    }\n    var prev = group;\n    var parent = group.parent;\n    var i = 1;\n    while (parent) {\n        if (!(parent.subGroups.length === 1 || parent.subGroups[parent.subGroups.length - 1] === prev)) {\n            // not last of group - end\n            return i;\n        }\n        ++i;\n        prev = parent;\n        parent = parent.parent;\n    }\n    return i;\n}\nexport function isSummaryGroup(group, strategy, topNGetter) {\n    var topN = topNGetter(group);\n    return isAlwaysShowingGroupStrategy(strategy) && topN !== 0;\n}\nexport function toRowMeta(item, strategy, topNGetter) {\n    if (isGroup(item)) {\n        if (isSummaryGroup(item, strategy, topNGetter)) {\n            return 'first';\n        }\n        var level_1 = groupEndLevel(item, topNGetter);\n        if (level_1 === 0) {\n            return 'first';\n        }\n        return \"first last\".concat(level_1 === 1 ? '' : level_1 - 1);\n    }\n    var last = toItemMeta(item.relativeIndex, item.group, topNGetter(item.group));\n    if (last == null) {\n        return null;\n    }\n    var level = groupEndLevel(item, topNGetter);\n    if (level === 0) {\n        return null;\n    }\n    return \"last\".concat(level === 1 ? '' : level - 1);\n}\n//# sourceMappingURL=internal.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { AEventDispatcher, debounce, OrderedSet, suffix, } from '../internal';\nimport { Column, Ranking, AggregateGroupColumn, createAggregateDesc, isSupportType, EDirtyReason, RankColumn, createRankDesc, createSelectionDesc, EAggregationState, } from '../model';\nimport { models } from '../model/models';\nimport { forEachIndices, everyIndices, toGroupID, unifyParents } from '../model/internal';\nimport { SCHEMA_REF } from './interfaces';\nimport { exportRanking, map2Object, object2Map, exportTable, isPromiseLike } from './utils';\nimport { restoreCategoricalColorMapping } from '../model/CategoricalColorMappingFunction';\nimport { createColorMappingFunction, colorMappingFunctions } from '../model/ColorMappingFunction';\nimport { createMappingFunction, mappingFunctions } from '../model/MappingFunction';\nimport { convertAggregationState } from './internal';\nfunction toDirtyReason(ctx) {\n    var primary = ctx.primaryType;\n    switch (primary || '') {\n        case Ranking.EVENT_DIRTY_ORDER:\n            return ctx.args[0] || [EDirtyReason.UNKNOWN];\n        case Ranking.EVENT_SORT_CRITERIA_CHANGED:\n            return [EDirtyReason.SORT_CRITERIA_CHANGED];\n        case Ranking.EVENT_GROUP_CRITERIA_CHANGED:\n            return [EDirtyReason.GROUP_CRITERIA_CHANGED];\n        case Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED:\n            return [EDirtyReason.GROUP_SORT_CRITERIA_CHANGED];\n        default:\n            return [EDirtyReason.UNKNOWN];\n    }\n}\nfunction mergeDirtyOrderContext(current, next) {\n    var currentReason = toDirtyReason(current.self);\n    var nextReason = toDirtyReason(next.self);\n    var combined = new Set(currentReason);\n    for (var _i = 0, nextReason_1 = nextReason; _i < nextReason_1.length; _i++) {\n        var r = nextReason_1[_i];\n        combined.add(r);\n    }\n    var args = [Array.from(combined)];\n    return {\n        self: {\n            primaryType: Ranking.EVENT_DIRTY_ORDER,\n            args: args,\n        },\n        args: args,\n    };\n}\n/**\n * a basic data provider holding the data and rankings\n */\nvar ADataProvider = /** @class */ (function (_super) {\n    __extends(ADataProvider, _super);\n    function ADataProvider(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        /**\n         * all rankings\n         * @type {Array}\n         * @private\n         */\n        _this.rankings = [];\n        /**\n         * the current selected indices\n         * @type {OrderedSet}\n         */\n        _this.selection = new OrderedSet();\n        //Map<ranking.id@group.name, -1=expand,0=collapse,N=topN>\n        _this.aggregations = new Map(); // not part of = show all\n        _this.uid = 0;\n        _this.options = {\n            columnTypes: {},\n            colorMappingFunctionTypes: {},\n            mappingFunctionTypes: {},\n            singleSelection: false,\n            showTopN: 10,\n            aggregationStrategy: 'item',\n            propagateAggregationState: true,\n        };\n        Object.assign(_this.options, options);\n        _this.columnTypes = Object.assign(models(), _this.options.columnTypes);\n        _this.colorMappingFunctionTypes = Object.assign(colorMappingFunctions(), _this.options.colorMappingFunctionTypes);\n        _this.mappingFunctionTypes = Object.assign(mappingFunctions(), _this.options.mappingFunctionTypes);\n        _this.showTopN = _this.options.showTopN;\n        _this.typeFactory = _this.createTypeFactory();\n        return _this;\n    }\n    ADataProvider.prototype.createTypeFactory = function () {\n        var _this = this;\n        var factory = (function (d) {\n            var desc = _this.fromDescRef(d.desc);\n            if (!desc || !desc.type) {\n                console.warn('cannot restore column dump', d);\n                return new Column(d.id || '', d.desc || {});\n            }\n            _this.fixDesc(desc);\n            var type = _this.columnTypes[desc.type];\n            if (type == null) {\n                console.warn('invalid column type in column dump using column', d);\n                return new Column(d.id || '', desc);\n            }\n            var c = _this.instantiateColumn(type, '', desc, _this.typeFactory);\n            c.restore(d, factory);\n            return _this.patchColumn(c);\n        });\n        factory.colorMappingFunction = createColorMappingFunction(this.colorMappingFunctionTypes, factory);\n        factory.mappingFunction = createMappingFunction(this.mappingFunctionTypes);\n        factory.categoricalColorMappingFunction = restoreCategoricalColorMapping;\n        return factory;\n    };\n    ADataProvider.prototype.getTypeFactory = function () {\n        return this.typeFactory;\n    };\n    /**\n     * events:\n     *  * column changes: addColumn, removeColumn\n     *  * ranking changes: addRanking, removeRanking\n     *  * dirty: dirty, dirtyHeder, dirtyValues\n     *  * selectionChanged\n     * @returns {string[]}\n     */\n    ADataProvider.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([\n            ADataProvider.EVENT_DATA_CHANGED,\n            ADataProvider.EVENT_BUSY,\n            ADataProvider.EVENT_SHOWTOPN_CHANGED,\n            ADataProvider.EVENT_ADD_COLUMN,\n            ADataProvider.EVENT_REMOVE_COLUMN,\n            ADataProvider.EVENT_MOVE_COLUMN,\n            ADataProvider.EVENT_ADD_RANKING,\n            ADataProvider.EVENT_REMOVE_RANKING,\n            ADataProvider.EVENT_DIRTY,\n            ADataProvider.EVENT_DIRTY_HEADER,\n            ADataProvider.EVENT_DIRTY_VALUES,\n            ADataProvider.EVENT_DIRTY_CACHES,\n            ADataProvider.EVENT_ORDER_CHANGED,\n            ADataProvider.EVENT_SELECTION_CHANGED,\n            ADataProvider.EVENT_ADD_DESC,\n            ADataProvider.EVENT_CLEAR_DESC,\n            ADataProvider.EVENT_JUMP_TO_NEAREST,\n            ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED,\n        ]);\n    };\n    ADataProvider.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    /**\n     * adds a new ranking\n     * @param existing an optional existing ranking to clone\n     * @return the new ranking\n     */\n    ADataProvider.prototype.pushRanking = function (existing) {\n        var r = this.cloneRanking(existing);\n        this.insertRanking(r);\n        return r;\n    };\n    ADataProvider.prototype.fireBusy = function (busy) {\n        this.fire(ADataProvider.EVENT_BUSY, busy);\n    };\n    ADataProvider.prototype.takeSnapshot = function (col) {\n        var _this = this;\n        this.fireBusy(true);\n        var r = this.cloneRanking();\n        var ranking = col.findMyRanker();\n        // by convention copy all support types and the first string column\n        var hasString = col.desc.type === 'string';\n        var hasColumn = false;\n        var toClone = !ranking\n            ? [col]\n            : ranking.children.filter(function (c) {\n                if (c === col) {\n                    hasColumn = true;\n                    return true;\n                }\n                if (!hasString && c.desc.type === 'string') {\n                    hasString = true;\n                    return true;\n                }\n                return isSupportType(c);\n            });\n        if (!hasColumn) {\n            // maybe a nested one thus not in the top level\n            toClone.push(col);\n        }\n        toClone.forEach(function (c) {\n            var clone = _this.clone(c);\n            r.push(clone);\n            if (c === col) {\n                clone.sortByMe();\n            }\n        });\n        this.insertRanking(r);\n        this.fireBusy(false);\n        return r;\n    };\n    ADataProvider.prototype.insertRanking = function (r, index) {\n        if (index === void 0) { index = this.rankings.length; }\n        this.rankings.splice(index, 0, r);\n        this.forward.apply(this, __spreadArray([r], ADataProvider.FORWARD_RANKING_EVENTS, false));\n        //delayed reordering per ranking\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var that = this;\n        r.on(\"\".concat(Ranking.EVENT_DIRTY_ORDER, \".provider\"), debounce(function () {\n            that.triggerReorder(r, toDirtyReason(this));\n        }, 100, mergeDirtyOrderContext));\n        this.fire([\n            ADataProvider.EVENT_ADD_RANKING,\n            ADataProvider.EVENT_DIRTY_HEADER,\n            ADataProvider.EVENT_DIRTY_VALUES,\n            ADataProvider.EVENT_DIRTY,\n        ], r, index);\n        this.triggerReorder(r);\n    };\n    ADataProvider.prototype.triggerReorder = function (ranking, dirtyReason) {\n        var _this = this;\n        this.fireBusy(true);\n        var reason = dirtyReason || [EDirtyReason.UNKNOWN];\n        Promise.resolve(this.sort(ranking, reason)).then(function (_a) {\n            var groups = _a.groups, index2pos = _a.index2pos;\n            if (ranking.getGroupSortCriteria().length === 0) {\n                groups = unifyParents(groups);\n            }\n            _this.initAggregateState(ranking, groups);\n            ranking.setGroups(groups, index2pos, reason);\n            _this.fireBusy(false);\n        });\n    };\n    /**\n     * removes a ranking from this data provider\n     * @param ranking\n     * @returns {boolean}\n     */\n    ADataProvider.prototype.removeRanking = function (ranking) {\n        var i = this.rankings.indexOf(ranking);\n        if (i < 0) {\n            return false;\n        }\n        this.unforward.apply(this, __spreadArray([ranking], ADataProvider.FORWARD_RANKING_EVENTS, false));\n        this.rankings.splice(i, 1);\n        ranking.on(\"\".concat(Ranking.EVENT_DIRTY_ORDER, \".provider\"), null);\n        this.cleanUpRanking(ranking);\n        this.fire([\n            ADataProvider.EVENT_REMOVE_RANKING,\n            ADataProvider.EVENT_DIRTY_HEADER,\n            ADataProvider.EVENT_DIRTY_VALUES,\n            ADataProvider.EVENT_DIRTY,\n        ], ranking, i);\n        return true;\n    };\n    /**\n     * removes all rankings\n     */\n    ADataProvider.prototype.clearRankings = function () {\n        var _this = this;\n        this.rankings.forEach(function (ranking) {\n            _this.unforward.apply(_this, __spreadArray([ranking], ADataProvider.FORWARD_RANKING_EVENTS, false));\n            ranking.on(\"\".concat(Ranking.EVENT_DIRTY_ORDER, \".provider\"), null);\n            _this.cleanUpRanking(ranking);\n        });\n        // clear\n        this.rankings.splice(0, this.rankings.length);\n        this.fire([\n            ADataProvider.EVENT_REMOVE_RANKING,\n            ADataProvider.EVENT_DIRTY_HEADER,\n            ADataProvider.EVENT_DIRTY_VALUES,\n            ADataProvider.EVENT_DIRTY,\n        ], null, -1);\n    };\n    ADataProvider.prototype.clearFilters = function () {\n        this.rankings.forEach(function (ranking) { return ranking.clearFilters(); });\n    };\n    /**\n     * returns a list of all current rankings\n     * @returns {Ranking[]}\n     */\n    ADataProvider.prototype.getRankings = function () {\n        return this.rankings.slice();\n    };\n    /**\n     * returns the last ranking for quicker access\n     * @returns {Ranking}\n     */\n    ADataProvider.prototype.getFirstRanking = function () {\n        return this.rankings[0] || null;\n    };\n    /**\n     * returns the last ranking for quicker access\n     * @returns {Ranking}\n     */\n    ADataProvider.prototype.getLastRanking = function () {\n        return this.rankings[this.rankings.length - 1];\n    };\n    ADataProvider.prototype.ensureOneRanking = function () {\n        if (this.rankings.length === 0) {\n            var r = this.pushRanking();\n            this.push(r, createRankDesc());\n        }\n    };\n    ADataProvider.prototype.destroy = function () {\n        // dummy\n    };\n    /**\n     * hook method for cleaning up a ranking\n     * @param _ranking\n     */\n    ADataProvider.prototype.cleanUpRanking = function (_ranking) {\n        // dummy\n    };\n    /**\n     * adds a column to a ranking described by its column description\n     * @param ranking the ranking to add the column to\n     * @param desc the description of the column\n     * @return {Column} the newly created column or null\n     */\n    ADataProvider.prototype.push = function (ranking, desc) {\n        var r = this.create(desc);\n        if (r) {\n            ranking.push(r);\n            return r;\n        }\n        return null;\n    };\n    /**\n     * adds a column to a ranking described by its column description\n     * @param ranking the ranking to add the column to\n     * @param index the position to insert the column\n     * @param desc the description of the column\n     * @return {Column} the newly created column or null\n     */\n    ADataProvider.prototype.insert = function (ranking, index, desc) {\n        var r = this.create(desc);\n        if (r) {\n            ranking.insert(r, index);\n            return r;\n        }\n        return null;\n    };\n    /**\n     * creates a new unique id for a column\n     * @returns {string}\n     */\n    ADataProvider.prototype.nextId = function () {\n        return \"col\".concat(this.uid++);\n    };\n    ADataProvider.prototype.fixDesc = function (desc) {\n        var _this = this;\n        //hacks for provider dependent descriptors\n        if (desc.type === 'selection') {\n            desc.accessor = function (row) { return _this.isSelected(row.i); };\n            desc.setter = function (index, value) {\n                return value ? _this.select(index) : _this.deselect(index);\n            };\n            desc.setterAll = function (indices, value) {\n                return value ? _this.selectAll(indices) : _this.deselectAll(indices);\n            };\n        }\n        else if (desc.type === 'aggregate') {\n            desc.isAggregated = function (ranking, group) {\n                return _this.getAggregationState(ranking, group);\n            };\n            desc.setAggregated = function (ranking, group, value) {\n                return _this.setAggregationState(ranking, group, value);\n            };\n        }\n        return desc;\n    };\n    ADataProvider.prototype.cleanDesc = function (desc) {\n        //hacks for provider dependent descriptors\n        if (desc.type === 'selection') {\n            delete desc.accessor;\n            delete desc.setter;\n            delete desc.setterAll;\n        }\n        else if (desc.type === 'aggregate') {\n            delete desc.isAggregated;\n            delete desc.setAggregated;\n        }\n        return desc;\n    };\n    /**\n     * creates an internal column model out of the given column description\n     * @param desc\n     * @returns {Column} the new column or null if it can't be created\n     */\n    ADataProvider.prototype.create = function (desc) {\n        this.fixDesc(desc);\n        //find by type and instantiate\n        var type = this.columnTypes[desc.type];\n        if (type) {\n            return this.patchColumn(this.instantiateColumn(type, this.nextId(), desc, this.typeFactory));\n        }\n        return null;\n    };\n    ADataProvider.prototype.patchColumn = function (column) {\n        // hook for adapting columns\n        return column;\n    };\n    ADataProvider.prototype.instantiateColumn = function (type, id, desc, typeFactory) {\n        return new type(id, desc, typeFactory);\n    };\n    /**\n     * clones a column by dumping and restoring\n     * @param col\n     * @returns {Column}\n     */\n    ADataProvider.prototype.clone = function (col) {\n        var dump = this.dumpColumn(col);\n        return this.restoreColumn(dump);\n    };\n    /**\n     * restores a column from a dump\n     * @param dump\n     * @returns {Column}\n     */\n    ADataProvider.prototype.restoreColumn = function (dump) {\n        var c = this.typeFactory(dump);\n        c.assignNewId(this.nextId.bind(this));\n        return c;\n    };\n    /**\n     * finds a column in all rankings returning the first match\n     * @param idOrFilter by id or by a filter function\n     * @returns {Column}\n     */\n    ADataProvider.prototype.find = function (idOrFilter) {\n        //convert to function\n        var filter = typeof idOrFilter === 'string' ? function (col) { return col.id === idOrFilter; } : idOrFilter;\n        for (var _i = 0, _a = this.rankings; _i < _a.length; _i++) {\n            var ranking = _a[_i];\n            var r = ranking.find(filter);\n            if (r) {\n                return r;\n            }\n        }\n        return null;\n    };\n    /**\n     * dumps this whole provider including selection and the rankings\n     * @returns {{uid: number, selection: number[], rankings: *[]}}\n     */\n    ADataProvider.prototype.dump = function () {\n        var _this = this;\n        return {\n            $schema: SCHEMA_REF,\n            uid: this.uid,\n            selection: this.getSelection(),\n            aggregations: map2Object(this.aggregations),\n            rankings: this.rankings.map(function (r) { return r.dump(_this.toDescRef.bind(_this)); }),\n            showTopN: this.showTopN,\n        };\n    };\n    /**\n     * dumps a specific column\n     */\n    ADataProvider.prototype.dumpColumn = function (col) {\n        return col.dump(this.toDescRef.bind(this));\n    };\n    /**\n     * for better dumping describe reference, by default just return the description\n     */\n    ADataProvider.prototype.toDescRef = function (desc) {\n        return desc;\n    };\n    /**\n     * inverse operation of toDescRef\n     */\n    ADataProvider.prototype.fromDescRef = function (descRef) {\n        return descRef;\n    };\n    ADataProvider.prototype.restoreRanking = function (dump) {\n        var ranking = this.cloneRanking();\n        ranking.restore(dump, this.typeFactory);\n        var idGenerator = this.nextId.bind(this);\n        ranking.children.forEach(function (c) { return c.assignNewId(idGenerator); });\n        return ranking;\n    };\n    ADataProvider.prototype.restore = function (dump) {\n        var _this = this;\n        //clean old\n        this.clearRankings();\n        //restore selection\n        this.uid = dump.uid || 0;\n        if (dump.selection) {\n            dump.selection.forEach(function (s) { return _this.selection.add(s); });\n        }\n        if (dump.showTopN != null) {\n            this.showTopN = dump.showTopN;\n        }\n        if (dump.aggregations) {\n            this.aggregations.clear();\n            if (Array.isArray(dump.aggregations)) {\n                dump.aggregations.forEach(function (a) { return _this.aggregations.set(a, 0); });\n            }\n            else {\n                object2Map(dump.aggregations).forEach(function (v, k) { return _this.aggregations.set(k, v); });\n            }\n        }\n        //restore rankings\n        if (dump.rankings) {\n            dump.rankings.forEach(function (r) {\n                var ranking = _this.cloneRanking();\n                ranking.restore(r, _this.typeFactory);\n                //if no rank column add one\n                if (!ranking.children.some(function (d) { return d instanceof RankColumn; })) {\n                    ranking.insert(_this.create(createRankDesc()), 0);\n                }\n                _this.insertRanking(ranking);\n            });\n        }\n        //assign new ids\n        var idGenerator = this.nextId.bind(this);\n        this.rankings.forEach(function (r) {\n            r.children.forEach(function (c) { return c.assignNewId(idGenerator); });\n        });\n    };\n    /**\n     * generates a default ranking by using all column descriptions ones\n     */\n    ADataProvider.prototype.deriveDefault = function (addSupportType) {\n        var _this = this;\n        if (addSupportType === void 0) { addSupportType = true; }\n        var r = this.pushRanking();\n        if (addSupportType) {\n            r.push(this.create(createAggregateDesc()));\n            r.push(this.create(createRankDesc()));\n            if (this.options.singleSelection !== true) {\n                r.push(this.create(createSelectionDesc()));\n            }\n        }\n        this.getColumns().forEach(function (col) {\n            var c = _this.create(col);\n            if (!c || isSupportType(c)) {\n                return;\n            }\n            r.push(c);\n        });\n        return r;\n    };\n    ADataProvider.prototype.isAggregated = function (ranking, group) {\n        return this.getTopNAggregated(ranking, group) >= 0;\n    };\n    ADataProvider.prototype.getAggregationState = function (ranking, group) {\n        var n = this.getTopNAggregated(ranking, group);\n        return n < 0 ? EAggregationState.EXPAND : n === 0 ? EAggregationState.COLLAPSE : EAggregationState.EXPAND_TOP_N;\n    };\n    ADataProvider.prototype.setAggregated = function (ranking, group, value) {\n        return this.setAggregationState(ranking, group, value ? EAggregationState.COLLAPSE : EAggregationState.EXPAND);\n    };\n    ADataProvider.prototype.setAggregationState = function (ranking, group, value) {\n        this.setTopNAggregated(ranking, group, value === EAggregationState.COLLAPSE ? 0 : value === EAggregationState.EXPAND_TOP_N ? this.showTopN : -1);\n    };\n    ADataProvider.prototype.getTopNAggregated = function (ranking, group) {\n        var g = group;\n        while (g) {\n            var key = \"\".concat(ranking.id, \"@\").concat(toGroupID(g));\n            if (this.aggregations.has(key)) {\n                // propagate to leaf\n                var v = this.aggregations.get(key);\n                if (this.options.propagateAggregationState && group !== g) {\n                    this.aggregations.set(\"\".concat(ranking.id, \"@\").concat(toGroupID(group)), v);\n                }\n                return v;\n            }\n            g = g.parent;\n        }\n        return -1;\n    };\n    ADataProvider.prototype.unaggregateParents = function (ranking, group) {\n        var g = group.parent;\n        var changed = false;\n        while (g) {\n            changed = this.aggregations.delete(\"\".concat(ranking.id, \"@\").concat(toGroupID(g))) || changed;\n            g = g.parent;\n        }\n        return changed;\n    };\n    ADataProvider.prototype.getAggregationStrategy = function () {\n        return this.options.aggregationStrategy;\n    };\n    ADataProvider.prototype.initAggregateState = function (ranking, groups) {\n        var initial = -1;\n        switch (this.getAggregationStrategy()) {\n            case 'group':\n                initial = 0;\n                break;\n            case 'item':\n            case 'group+item':\n            case 'group+item+top':\n                initial = -1;\n                break;\n            case 'group+top+item':\n                initial = this.showTopN;\n                break;\n        }\n        for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\n            var group = groups_1[_i];\n            var key = \"\".concat(ranking.id, \"@\").concat(toGroupID(group));\n            if (!this.aggregations.has(key) && initial >= 0) {\n                this.aggregations.set(key, initial);\n            }\n        }\n    };\n    ADataProvider.prototype.setTopNAggregated = function (ranking, group, value) {\n        var groups = Array.isArray(group) ? group : [group];\n        var changed = [];\n        var previous = [];\n        var changedParents = false;\n        for (var i = 0; i < groups.length; i++) {\n            var group_1 = groups[i];\n            var target = typeof value === 'number' ? value : value[i];\n            changedParents = this.unaggregateParents(ranking, group_1) || changedParents;\n            var current = this.getTopNAggregated(ranking, group_1);\n            if (current === target) {\n                continue;\n            }\n            changed.push(group_1);\n            previous.push(current);\n            var key = \"\".concat(ranking.id, \"@\").concat(toGroupID(group_1));\n            if (target >= 0) {\n                this.aggregations.set(key, target);\n            }\n            else {\n                this.aggregations.delete(key);\n            }\n        }\n        if (!changedParents && changed.length === 0) {\n            // no change\n            return;\n        }\n        if (!Array.isArray(group)) {\n            // single change\n            this.fire([ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], ranking, group, previous.length === 0 ? value : previous[0], value);\n        }\n        else {\n            this.fire([ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], ranking, group, previous, value);\n        }\n    };\n    ADataProvider.prototype.aggregateAllOf = function (ranking, aggregateAll, groups) {\n        if (groups === void 0) { groups = ranking.getGroups(); }\n        var value = convertAggregationState(aggregateAll, this.showTopN);\n        this.setTopNAggregated(ranking, groups, value);\n    };\n    ADataProvider.prototype.getShowTopN = function () {\n        return this.showTopN;\n    };\n    ADataProvider.prototype.setShowTopN = function (value) {\n        if (this.showTopN === value) {\n            return;\n        }\n        // update entries\n        for (var _i = 0, _a = Array.from(this.aggregations.entries()); _i < _a.length; _i++) {\n            var _b = _a[_i], k = _b[0], v = _b[1];\n            if (v === this.showTopN) {\n                this.aggregations.set(k, value);\n            }\n        }\n        this.fire([ADataProvider.EVENT_SHOWTOPN_CHANGED, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], this.showTopN, (this.showTopN = value));\n    };\n    /**\n     * is the given row selected\n     * @param index\n     * @return {boolean}\n     */\n    ADataProvider.prototype.isSelected = function (index) {\n        return this.selection.has(index);\n    };\n    /**\n     * also select the given row\n     * @param index\n     */\n    ADataProvider.prototype.select = function (index) {\n        if (this.selection.has(index)) {\n            return; //no change\n        }\n        if (this.options.singleSelection === true && this.selection.size > 0) {\n            this.selection.clear();\n        }\n        this.selection.add(index);\n        this.fire(ADataProvider.EVENT_SELECTION_CHANGED, this.getSelection());\n    };\n    ADataProvider.prototype.jumpToNearest = function (indices) {\n        if (indices.length === 0) {\n            return;\n        }\n        this.fire(ADataProvider.EVENT_JUMP_TO_NEAREST, indices);\n    };\n    /**\n     * also select all the given rows\n     * @param indices\n     */\n    ADataProvider.prototype.selectAll = function (indices) {\n        var _this = this;\n        if (everyIndices(indices, function (i) { return _this.selection.has(i); })) {\n            return; //no change\n        }\n        if (this.options.singleSelection === true) {\n            this.selection.clear();\n            if (indices.length > 0) {\n                this.selection.add(indices[0]);\n            }\n        }\n        else {\n            forEachIndices(indices, function (index) {\n                _this.selection.add(index);\n            });\n        }\n        this.fire(ADataProvider.EVENT_SELECTION_CHANGED, this.getSelection());\n    };\n    ADataProvider.prototype.selectAllOf = function (ranking) {\n        this.setSelection(Array.from(ranking.getOrder()));\n    };\n    /**\n     * set the selection to the given rows\n     * @param indices\n     */\n    ADataProvider.prototype.setSelection = function (indices) {\n        var _this = this;\n        if (indices.length === 0) {\n            return this.clearSelection();\n        }\n        if (this.selection.size === indices.length && indices.every(function (i) { return _this.selection.has(i); })) {\n            return; //no change\n        }\n        this.selection.clear();\n        this.selectAll(indices);\n    };\n    /**\n     * toggles the selection of the given data index\n     * @param index\n     * @param additional just this element or all\n     * @returns {boolean} whether the index is currently selected\n     */\n    ADataProvider.prototype.toggleSelection = function (index, additional) {\n        if (additional === void 0) { additional = false; }\n        if (this.isSelected(index)) {\n            if (additional) {\n                this.deselect(index);\n            }\n            else {\n                this.clearSelection();\n            }\n            return false;\n        }\n        if (additional) {\n            this.select(index);\n        }\n        else {\n            this.setSelection([index]);\n        }\n        return true;\n    };\n    /**\n     * deselect the given row\n     * @param index\n     */\n    ADataProvider.prototype.deselect = function (index) {\n        if (!this.selection.has(index)) {\n            return; //no change\n        }\n        this.selection.delete(index);\n        this.fire(ADataProvider.EVENT_SELECTION_CHANGED, this.getSelection());\n    };\n    /**\n     * also select all the given rows\n     * @param indices\n     */\n    ADataProvider.prototype.deselectAll = function (indices) {\n        var _this = this;\n        if (everyIndices(indices, function (i) { return !_this.selection.has(i); })) {\n            return; //no change\n        }\n        forEachIndices(indices, function (index) {\n            _this.selection.delete(index);\n        });\n        this.fire(ADataProvider.EVENT_SELECTION_CHANGED, this.getSelection());\n    };\n    /**\n     * returns a promise containing the selected rows\n     * @return {Promise<any[]>}\n     */\n    ADataProvider.prototype.selectedRows = function () {\n        if (this.selection.size === 0) {\n            return [];\n        }\n        return this.view(this.getSelection());\n    };\n    /**\n     * returns the currently selected indices\n     * @returns {Array}\n     */\n    ADataProvider.prototype.getSelection = function () {\n        return Array.from(this.selection);\n    };\n    /**\n     * clears the selection\n     */\n    ADataProvider.prototype.clearSelection = function () {\n        if (this.selection.size === 0) {\n            return; //no change\n        }\n        this.selection.clear();\n        this.fire(ADataProvider.EVENT_SELECTION_CHANGED, [], false);\n    };\n    /**\n     * utility to export a ranking to a table with the given separator\n     * @param ranking\n     * @param options\n     * @returns {Promise<string>}\n     */\n    ADataProvider.prototype.exportTable = function (ranking, options) {\n        if (options === void 0) { options = {}; }\n        var data = this.view(ranking.getOrder());\n        if (isPromiseLike(data)) {\n            return data.then(function (dataImpl) { return exportRanking(ranking, dataImpl, options); });\n        }\n        return exportRanking(ranking, data, options);\n    };\n    /**\n     * utility to export the selection within the given ranking to a table with the given separator\n     * @param ranking\n     * @param options\n     * @returns {Promise<string>}\n     */\n    ADataProvider.prototype.exportSelection = function (options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        var selection = this.getSelection();\n        var ranking = options.ranking || this.getFirstRanking();\n        if (!ranking) {\n            return '';\n        }\n        var rows = selection.map(function (s) { return _this.getRow(s); });\n        if (rows.some(function (row) { return isPromiseLike(row); })) {\n            return Promise.all(rows).then(function (data) {\n                return exportTable(ranking, data, options);\n            });\n        }\n        return exportTable(ranking, rows, options);\n    };\n    ADataProvider.EVENT_SELECTION_CHANGED = 'selectionChanged';\n    ADataProvider.EVENT_DATA_CHANGED = 'dataChanged';\n    ADataProvider.EVENT_ADD_COLUMN = Ranking.EVENT_ADD_COLUMN;\n    ADataProvider.EVENT_MOVE_COLUMN = Ranking.EVENT_MOVE_COLUMN;\n    ADataProvider.EVENT_REMOVE_COLUMN = Ranking.EVENT_REMOVE_COLUMN;\n    ADataProvider.EVENT_ADD_RANKING = 'addRanking';\n    ADataProvider.EVENT_REMOVE_RANKING = 'removeRanking';\n    ADataProvider.EVENT_DIRTY = Ranking.EVENT_DIRTY;\n    ADataProvider.EVENT_DIRTY_HEADER = Ranking.EVENT_DIRTY_HEADER;\n    ADataProvider.EVENT_DIRTY_VALUES = Ranking.EVENT_DIRTY_VALUES;\n    ADataProvider.EVENT_DIRTY_CACHES = Ranking.EVENT_DIRTY_CACHES;\n    ADataProvider.EVENT_ORDER_CHANGED = Ranking.EVENT_ORDER_CHANGED;\n    ADataProvider.EVENT_SHOWTOPN_CHANGED = 'showTopNChanged';\n    ADataProvider.EVENT_ADD_DESC = 'addDesc';\n    ADataProvider.EVENT_CLEAR_DESC = 'clearDesc';\n    ADataProvider.EVENT_REMOVE_DESC = 'removeDesc';\n    ADataProvider.EVENT_JUMP_TO_NEAREST = 'jumpToNearest';\n    ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED = AggregateGroupColumn.EVENT_AGGREGATE;\n    ADataProvider.EVENT_BUSY = 'busy';\n    ADataProvider.FORWARD_RANKING_EVENTS = suffix('.provider', Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_DIRTY, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_MOVE_COLUMN, Ranking.EVENT_ORDER_CHANGED, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY_CACHES);\n    return ADataProvider;\n}(AEventDispatcher));\nexport default ADataProvider;\n//# sourceMappingURL=ADataProvider.js.map","import { ActionColumn, AggregateGroupColumn, AnnotateColumn, BooleanColumn, BooleansColumn, BoxPlotColumn, CategoricalColumn, CategoricalMapColumn, CategoricalsColumn, DateColumn, DatesColumn, DatesMapColumn, GroupColumn, HierarchyColumn, ImpositionBoxPlotColumn, ImpositionCompositeColumn, ImpositionCompositesColumn, LinkColumn, LinkMapColumn, LinksColumn, NestedColumn, NumberColumn, NumberMapColumn, NumbersColumn, OrdinalColumn, RankColumn, ReduceColumn, ScriptColumn, SelectionColumn, SetColumn, StackColumn, StringColumn, StringMapColumn, StringsColumn, } from './';\n/**\n * a map of all known column types\n */\nexport function models() {\n    return {\n        actions: ActionColumn,\n        aggregate: AggregateGroupColumn,\n        annotate: AnnotateColumn,\n        boolean: BooleanColumn,\n        booleans: BooleansColumn,\n        boxplot: BoxPlotColumn,\n        categorical: CategoricalColumn,\n        categoricalMap: CategoricalMapColumn,\n        categoricals: CategoricalsColumn,\n        date: DateColumn,\n        dateMap: DatesMapColumn,\n        dates: DatesColumn,\n        group: GroupColumn,\n        hierarchy: HierarchyColumn,\n        imposition: ImpositionCompositeColumn,\n        impositionBoxPlot: ImpositionBoxPlotColumn,\n        impositions: ImpositionCompositesColumn,\n        reduce: ReduceColumn,\n        nested: NestedColumn,\n        number: NumberColumn,\n        numbers: NumbersColumn,\n        numberMap: NumberMapColumn,\n        ordinal: OrdinalColumn,\n        rank: RankColumn,\n        script: ScriptColumn,\n        selection: SelectionColumn,\n        set: SetColumn,\n        stack: StackColumn,\n        string: StringColumn,\n        stringMap: StringMapColumn,\n        strings: StringsColumn,\n        link: LinkColumn,\n        linkMap: LinkMapColumn,\n        links: LinksColumn,\n    };\n}\n//# sourceMappingURL=models.js.map","export { ABORTED } from 'lineupengine';\nexport var SCHEMA_REF = \"https://lineup.js.org/develop/schema.4.0.0.json\";\n//# sourceMappingURL=interfaces.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Ranking } from '../model';\nimport ADataProvider from './ADataProvider';\nimport { isComplexAccessor, rowGetter, rowComplexGetter, rowGuessGetter } from '../internal';\nfunction injectAccessor(d) {\n    d.accessor = d.accessor || (d.column ? (isComplexAccessor(d.column) ? rowComplexGetter : rowGetter) : rowGuessGetter);\n    d.label = d.label || d.column;\n    return d;\n}\n/**\n * common base implementation of a DataProvider with a fixed list of column descriptions\n */\nvar ACommonDataProvider = /** @class */ (function (_super) {\n    __extends(ACommonDataProvider, _super);\n    function ACommonDataProvider(columns, options) {\n        if (columns === void 0) { columns = []; }\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, options) || this;\n        _this.columns = columns;\n        _this.rankingIndex = 0;\n        //generate the accessor\n        columns.forEach(injectAccessor);\n        return _this;\n    }\n    ACommonDataProvider.prototype.cloneRanking = function (existing) {\n        var _this = this;\n        var id = this.nextRankingId();\n        var clone = new Ranking(id);\n        if (existing) {\n            //copy the ranking of the other one\n            //TODO better cloning\n            existing.children.forEach(function (child) {\n                _this.push(clone, child.desc);\n            });\n        }\n        return clone;\n    };\n    /**\n     * adds another column description to this data provider\n     * @param column\n     */\n    ACommonDataProvider.prototype.pushDesc = function (column) {\n        injectAccessor(column);\n        this.columns.push(column);\n        this.fire(ADataProvider.EVENT_ADD_DESC, column);\n    };\n    ACommonDataProvider.prototype.clearColumns = function () {\n        this.clearRankings();\n        this.columns.splice(0, this.columns.length);\n        this.fire(ADataProvider.EVENT_CLEAR_DESC);\n    };\n    /**\n     * Remove the given column description from the data provider.\n     * Column descriptions that are in use (i.e., has column instances in a ranking) cannot be removed by default.\n     * Skip the check by setting the `ignoreBeingUsed` parameter to `true`.\n     *\n     * @param column Column description\n     * @param ignoreBeingUsed Flag whether to ignore the usage of the column descriptions in rankings\n     */\n    ACommonDataProvider.prototype.removeDesc = function (column, ignoreBeingUsed) {\n        if (ignoreBeingUsed === void 0) { ignoreBeingUsed = false; }\n        var i = this.columns.indexOf(column);\n        if (i < 0) {\n            return false;\n        }\n        var isUsed = ignoreBeingUsed\n            ? false\n            : this.getRankings().some(function (d) { return d.flatColumns.some(function (c) { return c.desc === column; }); });\n        if (isUsed) {\n            return false;\n        }\n        this.columns.splice(i, 1);\n        this.fire(ADataProvider.EVENT_REMOVE_DESC, column);\n        return true;\n    };\n    ACommonDataProvider.prototype.getColumns = function () {\n        return this.columns.slice();\n    };\n    ACommonDataProvider.prototype.findDesc = function (ref) {\n        return this.columns.filter(function (c) { return c.column === ref; })[0];\n    };\n    /**\n     * identify by the tuple type@columnname\n     * @param desc\n     * @returns {string}\n     */\n    ACommonDataProvider.prototype.toDescRef = function (desc) {\n        return typeof desc.column !== 'undefined' ? \"\".concat(desc.type, \"@\").concat(desc.column) : this.cleanDesc(Object.assign({}, desc));\n    };\n    ACommonDataProvider.prototype.fromDescRef = function (descRef) {\n        if (typeof descRef === 'string') {\n            return this.columns.find(function (d) { return \"\".concat(d.type, \"@\").concat(d.column) === descRef || d.type === descRef; });\n        }\n        var existing = this.columns.find(function (d) { return descRef.column === d.column && descRef.label === d.label && descRef.type === d.type; });\n        if (existing) {\n            return existing;\n        }\n        return descRef;\n    };\n    ACommonDataProvider.prototype.restore = function (dump) {\n        _super.prototype.restore.call(this, dump);\n        this.rankingIndex = 1 + Math.max.apply(Math, this.getRankings().map(function (r) { return +r.id.substring(4); }));\n    };\n    ACommonDataProvider.prototype.nextRankingId = function () {\n        return \"rank\".concat(this.rankingIndex++);\n    };\n    return ACommonDataProvider;\n}(ADataProvider));\nexport default ACommonDataProvider;\n//# sourceMappingURL=ACommonDataProvider.js.map","import { createIndexArray } from '../internal';\nimport { FIRST_IS_MISSING, FIRST_IS_NAN, ECompareValueType, } from '../model';\nvar missingUInt8 = FIRST_IS_MISSING > 0 ? 255 : 0;\nvar missingBinary = missingUInt8;\nvar missingUInt16 = FIRST_IS_MISSING > 0 ? 65535 : 0; // max or 0\nvar missingUInt32 = FIRST_IS_MISSING > 0 ? 4294967295 : 0; // max or 0\nvar missingInt8 = FIRST_IS_MISSING > 0 ? 127 : -128; // max or min\nvar missingInt16 = FIRST_IS_MISSING > 0 ? 32767 : -32768; // max or min\nvar missingInt32 = FIRST_IS_MISSING > 0 ? 2147483647 : -2147483648; // max or min\nvar missingFloat = FIRST_IS_NAN > 0 ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\nvar missingFloatAsc = FIRST_IS_MISSING > 0 ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\nvar missingString = FIRST_IS_MISSING > 0 ? '\\uffff' : '\\u0000'; // first or last character\nfunction chooseMissingByLength(length) {\n    if (length <= 255) {\n        return missingBinary;\n    }\n    if (length <= 65535) {\n        return missingUInt16;\n    }\n    return missingUInt32;\n}\nfunction toCompareLookUp(rawLength, type) {\n    switch (type) {\n        case ECompareValueType.COUNT:\n            return createIndexArray(rawLength + 1);\n        case ECompareValueType.BINARY:\n        case ECompareValueType.UINT8:\n            return new Uint8Array(rawLength);\n        case ECompareValueType.UINT16:\n            return new Uint16Array(rawLength);\n        case ECompareValueType.UINT32:\n            return new Uint32Array(rawLength);\n        case ECompareValueType.INT8:\n            return new Int8Array(rawLength);\n        case ECompareValueType.INT16:\n            return new Int16Array(rawLength);\n        case ECompareValueType.INT32:\n            return new Int32Array(rawLength);\n        case ECompareValueType.STRING:\n            return [];\n        case ECompareValueType.FLOAT_ASC:\n        case ECompareValueType.FLOAT:\n            return new Float64Array(rawLength);\n        case ECompareValueType.DOUBLE_ASC:\n        case ECompareValueType.DOUBLE:\n            return new Float64Array(rawLength);\n    }\n}\nfunction createSetter(type, lookup, missingCount) {\n    switch (type) {\n        case ECompareValueType.BINARY: // just 0 or 1 -> convert to 0=Number.NEGATIVE_INFINITY 1 2 255=Number.POSITIVE_INFINITY\n            return function (index, v) { return (lookup[index] = v == null || Number.isNaN(v) ? missingBinary : v + 1); };\n        case ECompareValueType.COUNT: // uint32\n            return function (index, v) { return (lookup[index] = v == null || Number.isNaN(v) ? missingCount : v + 1); };\n        case ECompareValueType.UINT8: // shift by one to have 0 for -Inf\n            return function (index, v) { return (lookup[index] = v == null || Number.isNaN(v) ? missingInt8 : v + 1); };\n        case ECompareValueType.UINT16: // shift by one to have 0 for -Inf\n            return function (index, v) { return (lookup[index] = v == null || Number.isNaN(v) ? missingInt16 : v + 1); };\n        case ECompareValueType.UINT32: // shift by one to have 0 for -Inf\n            return function (index, v) { return (lookup[index] = v == null || Number.isNaN(v) ? missingInt32 : v + 1); };\n        case ECompareValueType.INT8:\n            return function (index, v) { return (lookup[index] = v == null || Number.isNaN(v) ? missingInt8 : v); };\n        case ECompareValueType.INT16:\n            return function (index, v) { return (lookup[index] = v == null || Number.isNaN(v) ? missingInt16 : v); };\n        case ECompareValueType.INT32:\n            return function (index, v) { return (lookup[index] = v == null || Number.isNaN(v) ? missingInt32 : v); };\n        case ECompareValueType.STRING:\n            return function (index, v) { return (lookup[index] = v == null || v === '' ? missingString : v); };\n        case ECompareValueType.FLOAT:\n        case ECompareValueType.DOUBLE:\n            return function (index, v) { return (lookup[index] = v == null || Number.isNaN(v) ? missingFloat : v); };\n        case ECompareValueType.FLOAT_ASC:\n        case ECompareValueType.DOUBLE_ASC:\n            return function (index, v) { return (lookup[index] = v == null || Number.isNaN(v) ? missingFloatAsc : v); };\n    }\n}\nvar CompareLookup = /** @class */ (function () {\n    function CompareLookup(rawLength, isSorting, ranking, valueCaches) {\n        this.criteria = [];\n        this.data = [];\n        var missingCount = chooseMissingByLength(rawLength + 1); // + 1 for the value shift to have 0 as start\n        for (var _i = 0, _a = isSorting ? ranking.getSortCriteria() : ranking.getGroupSortCriteria(); _i < _a.length; _i++) {\n            var c = _a[_i];\n            var v = isSorting ? c.col.toCompareValueType() : c.col.toCompareGroupValueType();\n            var valueCache = valueCaches ? valueCaches(c.col) : undefined;\n            this.criteria.push({ col: c.col, valueCache: valueCache });\n            if (!Array.isArray(v)) {\n                var lookup = toCompareLookUp(rawLength, v);\n                this.data.push({ asc: c.asc, v: v, lookup: lookup, setter: createSetter(v, lookup, missingCount) });\n                continue;\n            }\n            for (var _b = 0, v_1 = v; _b < v_1.length; _b++) {\n                var vi = v_1[_b];\n                var lookup = toCompareLookUp(rawLength, vi);\n                this.data.push({ asc: c.asc, v: vi, lookup: lookup, setter: createSetter(vi, lookup, missingCount) });\n            }\n        }\n        if (isSorting) {\n            return;\n        }\n        {\n            var v = ECompareValueType.STRING;\n            var lookup = toCompareLookUp(rawLength, v);\n            this.data.push({ asc: true, v: v, lookup: lookup, setter: createSetter(v, lookup, missingCount) });\n        }\n    }\n    Object.defineProperty(CompareLookup.prototype, \"sortOrders\", {\n        get: function () {\n            return this.data.map(function (d) { return ({ asc: d.asc, lookup: d.lookup }); });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CompareLookup.prototype, \"transferAbles\", {\n        get: function () {\n            // so a typed array\n            return this.data\n                .map(function (d) { return d.lookup; })\n                .filter(function (d) { return !Array.isArray(d); })\n                .map(function (d) { return d.buffer; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CompareLookup.prototype.push = function (row) {\n        var i = 0;\n        for (var _i = 0, _a = this.criteria; _i < _a.length; _i++) {\n            var c = _a[_i];\n            var r = c.col.toCompareValue(row, c.valueCache ? c.valueCache(row.i) : undefined);\n            if (!Array.isArray(r)) {\n                this.data[i++].setter(row.i, r);\n                continue;\n            }\n            for (var _b = 0, r_1 = r; _b < r_1.length; _b++) {\n                var ri = r_1[_b];\n                this.data[i++].setter(row.i, ri);\n            }\n        }\n    };\n    CompareLookup.prototype.pushValues = function (dataIndex, vs) {\n        for (var i = 0; i < vs.length; ++i) {\n            this.data[i].setter(dataIndex, vs[i]);\n        }\n    };\n    CompareLookup.prototype.free = function () {\n        // free up to save memory\n        this.data.splice(0, this.data.length);\n    };\n    return CompareLookup;\n}());\nexport { CompareLookup };\n//# sourceMappingURL=sort.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexport function isPromiseLike(p) {\n    return p != null && typeof p.then === 'function';\n}\n/**\n * the symbol returned when the promise was aborted\n */\nexport var ABORTED = Symbol('aborted');\nfunction thenFactory(loader, isAborted, abort) {\n    function then(onfulfilled, _onrejected) {\n        var fullfiller = loader.then(function (loaded) {\n            var loadedOrAborted = isAborted() ? ABORTED : loaded;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var res = onfulfilled ? onfulfilled(loadedOrAborted) : loadedOrAborted;\n            if (isPromiseLike(res)) {\n                return res.then(function (r) {\n                    return isAborted() ? ABORTED : r;\n                });\n            }\n            return isAborted() ? ABORTED : res;\n        });\n        return {\n            then: thenFactory(fullfiller, isAborted, abort),\n            abort: abort,\n            isAborted: isAborted,\n        };\n    }\n    return then;\n}\n/**\n * abort able Promise wrapper, returns a promise which can be aborted, and trying to avoid executing therefore the wrapped promise\n * @param {Promise<T>} loader\n * @returns {any}\n */\nexport default function abortAble(loader) {\n    var aborted = null;\n    var isAborted = function () { return aborted === null; };\n    var aborter = new Promise(function (resolve) {\n        aborted = resolve;\n    });\n    var abort = function () {\n        if (aborted == null) {\n            return;\n        }\n        aborted(ABORTED);\n        aborted = null;\n    };\n    var race = Promise.race([aborter, loader]);\n    return {\n        then: thenFactory(race, isAborted, abort),\n        abort: abort,\n        isAborted: isAborted,\n    };\n}\nexport function abortAbleFetch(input, init) {\n    var controller = new AbortController();\n    var race = new Promise(function (resolve, reject) {\n        var r = fetch(input, __assign({ signal: controller.signal }, (init || {})));\n        r.then(resolve);\n        r.catch(function (error) {\n            if (error instanceof DOMException) {\n                resolve(ABORTED);\n            }\n            else {\n                reject(error);\n            }\n        });\n    });\n    var abort = controller.abort.bind(controller);\n    var isAborted = function () { return controller.signal.aborted; };\n    return {\n        then: thenFactory(race, isAborted, abort),\n        abort: abort,\n        isAborted: isAborted,\n    };\n}\n/**\n * similar to Promise.all but for abortAble\n */\nexport function abortAbleAll(values) {\n    var loader = Promise.all(values);\n    var aborted = null;\n    var isAborted = function () { return aborted === null; };\n    var aborter = new Promise(function (resolve) {\n        aborted = resolve;\n    });\n    var abort = function () {\n        if (aborted == null) {\n            return;\n        }\n        aborted(ABORTED);\n        for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n            var v = values_1[_i];\n            if (isAbortAble(v)) {\n                v.abort();\n            }\n        }\n        aborted = null;\n    };\n    var race = Promise.race([aborter, loader]);\n    return {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        then: thenFactory(race, isAborted, abort),\n        abort: abort,\n        isAborted: isAborted,\n    };\n}\n/**\n * checked whether the given argument is an abortable Promise\n * @param {IAbortAblePromise<any> | any} candidate\n * @returns {boolean}\n */\nexport function isAbortAble(candidate) {\n    return (candidate != null &&\n        candidate &&\n        typeof candidate.then === 'function' &&\n        typeof candidate.abort === 'function');\n}\nexport function isAsyncUpdate(update) {\n    return update !== undefined && update !== null && update && isAbortAble(update.ready);\n}\n/**\n * similar to Promise.resolve\n */\nexport function abortAbleResolveNow(value) {\n    function then(onfulfilled, _onrejected) {\n        var res = onfulfilled ? onfulfilled(value) : value;\n        if (isAbortAble(res)) {\n            return res;\n        }\n        if (isPromiseLike(res)) {\n            return abortAble(res);\n        }\n        return {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            then: abortAbleResolveNow(res),\n            abort: function () { return undefined; },\n            isAborted: function () { return false; },\n        };\n    }\n    return {\n        then: then,\n        abort: function () { return undefined; },\n        isAborted: function () { return false; },\n    };\n}\n//# sourceMappingURL=abortAble.js.map","import { ABORTED } from 'lineupengine';\nexport { ABORTED } from 'lineupengine';\n/**\n * iterator result for another round\n * @internal\n */\nexport var ANOTHER_ROUND = {\n    value: null,\n    done: false,\n};\n/**\n * iterator for just one entry\n * @internal\n */\nexport function oneShotIterator(calc) {\n    return {\n        next: function () { return ({ done: true, value: calc() }); },\n    };\n}\nfunction thenFactory(wrappee, abort, isAborted) {\n    function then(onfulfilled, onrejected) {\n        var r = wrappee.then(onfulfilled, onrejected);\n        return {\n            then: thenFactory(r, abort, isAborted),\n            abort: abort,\n            isAborted: isAborted,\n        };\n    }\n    return then;\n}\n/**\n * task scheduler for running tasks in idle callbacks\n * @internal\n */\nvar TaskScheduler = /** @class */ (function () {\n    function TaskScheduler() {\n        var _this = this;\n        this.tasks = [];\n        // idle callback id\n        this.taskId = -1;\n        this.runTasks = function (deadline) {\n            var _loop_1 = function () {\n                var task = _this.tasks.shift();\n                var r = task.it.next();\n                // call next till done or ran out of time\n                while (!r.done && (deadline.didTimeout || deadline.timeRemaining() > 0)) {\n                    r = task.it.next();\n                }\n                if (r.done) {\n                    // resolve async\n                    requestAnimationFrame(function () { return task.resolve(r.value); });\n                }\n                else {\n                    // reschedule again\n                    _this.tasks.unshift(task);\n                }\n            };\n            // while more tasks and not timed out\n            while (_this.tasks.length > 0 && (deadline.didTimeout || deadline.timeRemaining() > 0)) {\n                _loop_1();\n            }\n            _this.taskId = -1;\n            _this.reSchedule();\n        };\n    }\n    TaskScheduler.prototype.reSchedule = function () {\n        if (this.tasks.length === 0 || this.taskId > -1) {\n            return;\n        }\n        // eslint-disable-next-line no-restricted-globals\n        var ww = self;\n        if (ww.requestIdleCallback) {\n            this.taskId = ww.requestIdleCallback(this.runTasks);\n        }\n        else {\n            this.taskId = setTimeout(this.runTasks, 1);\n        }\n    };\n    /**\n     * pushes a task with multi hops using an iterator\n     * @param id task id\n     * @param it iterator to execute\n     */\n    TaskScheduler.prototype.pushMulti = function (id, it, abortAble) {\n        var _this = this;\n        if (abortAble === void 0) { abortAble = true; }\n        // abort task with the same id\n        var abort = function () {\n            var index = _this.tasks.findIndex(function (d) { return d.id === id; });\n            if (index < 0) {\n                return; // too late or none\n            }\n            var task = _this.tasks[index];\n            _this.tasks.splice(index, 1);\n            task.isAborted = true;\n            task.resolve(ABORTED);\n        };\n        {\n            // abort existing\n            var index = this.tasks.findIndex(function (d) { return d.id === id; });\n            if (index >= 0) {\n                var task_1 = this.tasks[index];\n                task_1.abort();\n            }\n        }\n        var resolve;\n        var p = new Promise(function (r) {\n            // called during constructor\n            resolve = r;\n        });\n        var task = {\n            id: id,\n            it: it,\n            result: p,\n            abort: abort,\n            isAborted: false,\n            resolve: resolve,\n        };\n        var isAborted = function () { return task.isAborted; };\n        this.tasks.push(task);\n        this.reSchedule();\n        var abortOrDummy = abortAble ? abort : function () { return undefined; };\n        var isAbortedOrDummy = abortAble ? isAborted : function () { return false; };\n        return {\n            then: thenFactory(p, abortOrDummy, isAbortedOrDummy),\n            abort: abortOrDummy,\n            isAborted: isAbortedOrDummy,\n        };\n    };\n    /**\n     * pushes a simple task\n     * @param id task id\n     * @param calc task function\n     */\n    TaskScheduler.prototype.push = function (id, calc) {\n        return this.pushMulti(id, oneShotIterator(calc));\n    };\n    /**\n     * abort a task with the given id\n     * @param id task id\n     */\n    TaskScheduler.prototype.abort = function (id) {\n        var index = this.tasks.findIndex(function (d) { return d.id === id; });\n        if (index < 0) {\n            return false; // too late or none\n        }\n        var task = this.tasks[index];\n        task.abort();\n        return true;\n    };\n    TaskScheduler.prototype.abortAll = function (filter) {\n        var abort = this.tasks.filter(filter);\n        if (abort.length === 0) {\n            return;\n        }\n        this.tasks = this.tasks.filter(function (d) { return !filter(d); });\n        for (var _i = 0, abort_1 = abort; _i < abort_1.length; _i++) {\n            var task = abort_1[_i];\n            task.resolve(ABORTED);\n            task.abort();\n        }\n    };\n    TaskScheduler.prototype.clear = function () {\n        if (this.taskId === -1) {\n            return;\n        }\n        // eslint-disable-next-line no-restricted-globals\n        var ww = self;\n        if (ww.requestIdleCallback) {\n            ww.clearIdleCallback(this.taskId);\n        }\n        else {\n            clearTimeout(this.taskId);\n        }\n        this.taskId = -1;\n        this.tasks.splice(0, this.tasks.length).forEach(function (d) {\n            d.resolve(ABORTED);\n            d.abort();\n        });\n    };\n    return TaskScheduler;\n}());\nexport default TaskScheduler;\n//# sourceMappingURL=scheduler.js.map","import { abortAbleAll } from 'lineupengine';\nimport { ANOTHER_ROUND } from '../internal/scheduler';\nimport { lazySeq, boxplotBuilder, categoricalStatsBuilder, categoricalValueCacheBuilder, dateStatsBuilder, dateValueCacheBuilder, numberStatsBuilder, dateValueCache2Value, categoricalValueCache2Value, joinIndexArrays, stringStatsBuilder, } from '../internal';\nimport { CategoricalColumn, DateColumn, ImpositionCompositeColumn, NumberColumn, OrdinalColumn, isMapAbleColumn, } from '../model';\n/**\n * a render task that is already resolved\n */\nvar TaskNow = /** @class */ (function () {\n    function TaskNow(v) {\n        this.v = v;\n    }\n    TaskNow.prototype.then = function (onfullfilled) {\n        return onfullfilled(this.v);\n    };\n    return TaskNow;\n}());\nexport { TaskNow };\n/**\n * factory function for\n */\nexport function taskNow(v) {\n    return new TaskNow(v);\n}\n/**\n * a render task based on an abortable promise\n */\nvar TaskLater = /** @class */ (function () {\n    function TaskLater(v) {\n        this.v = v;\n    }\n    TaskLater.prototype.then = function (onfullfilled) {\n        return this.v.then(onfullfilled);\n    };\n    return TaskLater;\n}());\nexport { TaskLater };\nexport function taskLater(v) {\n    return new TaskLater(v);\n}\n/**\n * similar to Promise.all\n */\nexport function tasksAll(tasks) {\n    if (tasks.every(function (t) { return t instanceof TaskNow; })) {\n        return taskNow(tasks.map(function (d) { return d.v; }));\n    }\n    return taskLater(abortAbleAll(tasks.map(function (d) { return d.v; })));\n}\nvar MultiIndices = /** @class */ (function () {\n    function MultiIndices(indices, maxDataIndex) {\n        this.indices = indices;\n        this.maxDataIndex = maxDataIndex;\n        this._joined = null;\n    }\n    Object.defineProperty(MultiIndices.prototype, \"joined\", {\n        get: function () {\n            if (this.indices.length === 1) {\n                return this.indices[0];\n            }\n            if (this.indices.length === 0) {\n                return new Uint8Array(0);\n            }\n            if (this._joined) {\n                return this._joined;\n            }\n            return (this._joined = joinIndexArrays(this.indices, this.maxDataIndex));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return MultiIndices;\n}());\nexport { MultiIndices };\n/**\n * number of data points to build per iteration / chunk\n */\nvar CHUNK_SIZE = 100;\nvar ARenderTasks = /** @class */ (function () {\n    function ARenderTasks(options) {\n        if (options === void 0) { options = {}; }\n        var _this = this;\n        this.valueCacheData = new Map();\n        this.byIndex = function (i) { return _this.data[i]; };\n        this.data = [];\n        this.options = Object.assign({\n            stringTopNCount: 10,\n        }, options);\n    }\n    ARenderTasks.prototype.byOrder = function (indices) {\n        return lazySeq(indices).map(this.byIndex);\n    };\n    ARenderTasks.prototype.byOrderAcc = function (indices, acc) {\n        var _this = this;\n        return lazySeq(indices).map(function (i) { return acc(_this.data[i]); });\n    };\n    /**\n     * builder factory to create an iterator that can be used to schedule\n     * @param builder the builder to use\n     * @param order the order to iterate over\n     * @param acc the accessor to get the value out of the data\n     * @param build optional build mapper\n     */\n    ARenderTasks.prototype.builder = function (builder, order, acc, build) {\n        var _this = this;\n        var i = 0;\n        // no indices given over the whole data\n        var nextData = function (currentChunkSize) {\n            if (currentChunkSize === void 0) { currentChunkSize = CHUNK_SIZE; }\n            var chunkCounter = currentChunkSize;\n            var data = _this.data;\n            for (; i < data.length && chunkCounter > 0; ++i, --chunkCounter) {\n                builder.push(acc(i));\n            }\n            if (i < data.length) {\n                // need another round\n                return ANOTHER_ROUND;\n            }\n            // done\n            return {\n                done: true,\n                value: build ? build(builder.build()) : builder.build(),\n            };\n        };\n        var o = 0;\n        var orders = order instanceof MultiIndices ? order.indices : [order];\n        var nextOrder = function (currentChunkSize) {\n            if (currentChunkSize === void 0) { currentChunkSize = CHUNK_SIZE; }\n            var chunkCounter = currentChunkSize;\n            while (o < orders.length) {\n                var actOrder = orders[o];\n                for (; i < actOrder.length && chunkCounter > 0; ++i, --chunkCounter) {\n                    builder.push(acc(actOrder[i]));\n                }\n                if (i < actOrder.length) {\n                    // need another round\n                    return ANOTHER_ROUND;\n                }\n                // done with this order\n                o++;\n                i = 0;\n            }\n            return {\n                done: true,\n                value: build ? build(builder.build()) : builder.build(),\n            };\n        };\n        return { next: order == null ? nextData : nextOrder };\n    };\n    ARenderTasks.prototype.builderForEach = function (builder, order, acc, build) {\n        return this.builder({\n            push: builder.pushAll,\n            build: builder.build,\n        }, order, acc, build);\n    };\n    ARenderTasks.prototype.boxplotBuilder = function (order, col, raw, build) {\n        var b = boxplotBuilder();\n        return this.numberStatsBuilder(b, order, col, raw, build);\n    };\n    ARenderTasks.prototype.resolveDomain = function (col, raw) {\n        var domain = raw && isMapAbleColumn(col) ? col.getMapping().domain : [0, 1];\n        return [domain[0], domain[domain.length - 1]];\n    };\n    ARenderTasks.prototype.statsBuilder = function (order, col, numberOfBins, raw, build) {\n        var b = numberStatsBuilder(this.resolveDomain(col, raw !== null && raw !== void 0 ? raw : false), numberOfBins);\n        return this.numberStatsBuilder(b, order, col, raw, build);\n    };\n    ARenderTasks.prototype.numberStatsBuilder = function (b, order, col, raw, build) {\n        var _this = this;\n        if (col instanceof NumberColumn || col instanceof OrdinalColumn || col instanceof ImpositionCompositeColumn) {\n            var key_1 = raw ? \"\".concat(col.id, \":r\") : col.id;\n            var dacc = raw\n                ? function (i) { return col.getRawNumber(_this.data[i]); }\n                : function (i) { return col.getNumber(_this.data[i]); };\n            if (order == null && !this.valueCacheData.has(key_1)) {\n                // build and valueCache\n                var vs_1 = new Float64Array(this.data.length);\n                var i_1 = 0;\n                return this.builder({\n                    push: function (v) {\n                        b.push(v);\n                        vs_1[i_1++] = v;\n                    },\n                    build: function () {\n                        _this.setValueCacheData(key_1, vs_1);\n                        return b.build();\n                    },\n                }, null, dacc, build);\n            }\n            var cache_1 = this.valueCacheData.get(key_1);\n            var acc_1 = cache_1 ? function (i) { return cache_1[i]; } : dacc;\n            return this.builder(b, order, acc_1, build);\n        }\n        var acc = raw\n            ? function (i) { return col.iterRawNumber(_this.data[i]); }\n            : function (i) { return col.iterNumber(_this.data[i]); };\n        return this.builderForEach(b, order, acc, build);\n    };\n    ARenderTasks.prototype.dateStatsBuilder = function (order, col, template, build) {\n        var _this = this;\n        var b = dateStatsBuilder(template);\n        if (col instanceof DateColumn) {\n            if (order == null) {\n                // build and valueCache\n                var vs_2 = dateValueCacheBuilder(this.data.length);\n                return this.builder({\n                    push: function (v) {\n                        b.push(v);\n                        vs_2.push(v);\n                    },\n                    build: function () {\n                        _this.setValueCacheData(col.id, vs_2.cache);\n                        return b.build();\n                    },\n                }, null, function (i) { return col.getDate(_this.data[i]); }, build);\n            }\n            var cache_2 = this.valueCacheData.get(col.id);\n            var acc = cache_2\n                ? function (i) { return dateValueCache2Value(cache_2[i]); }\n                : function (i) { return col.getDate(_this.data[i]); };\n            return this.builder(b, order, acc, build);\n        }\n        return this.builderForEach(b, order, function (i) { return col.iterDate(_this.data[i]); }, build);\n    };\n    ARenderTasks.prototype.categoricalStatsBuilder = function (order, col, build) {\n        var _this = this;\n        var b = categoricalStatsBuilder(col.categories);\n        if (col instanceof CategoricalColumn || col instanceof OrdinalColumn) {\n            if (order == null) {\n                // build and valueCache\n                var vs_3 = categoricalValueCacheBuilder(this.data.length, col.categories);\n                return this.builder({\n                    push: function (v) {\n                        b.push(v);\n                        vs_3.push(v);\n                    },\n                    build: function () {\n                        _this.setValueCacheData(col.id, vs_3.cache);\n                        return b.build();\n                    },\n                }, null, function (i) { return col.getCategory(_this.data[i]); }, build);\n            }\n            var cache_3 = this.valueCacheData.get(col.id);\n            var acc = cache_3\n                ? function (i) { return categoricalValueCache2Value(cache_3[i], col.categories); }\n                : function (i) { return col.getCategory(_this.data[i]); };\n            return this.builder(b, order, acc, build);\n        }\n        return this.builderForEach(b, order, function (i) { return col.iterCategory(_this.data[i]); }, build);\n    };\n    ARenderTasks.prototype.stringStatsBuilder = function (order, col, topN, build) {\n        var _this = this;\n        var b = stringStatsBuilder(topN !== null && topN !== void 0 ? topN : this.options.stringTopNCount);\n        if (order == null) {\n            // build and valueCache\n            var i_2 = 0;\n            var vs_4 = Array(this.data.length).fill(null);\n            return this.builder({\n                push: function (v) {\n                    b.push(v);\n                    vs_4[i_2++] = v;\n                },\n                build: function () {\n                    _this.setValueCacheData(col.id, vs_4);\n                    return b.build();\n                },\n            }, null, function (i) { return col.getValue(_this.data[i]); }, build);\n        }\n        return this.builder(b, order, function (i) { return col.getValue(_this.data[i]); }, build);\n    };\n    ARenderTasks.prototype.dirtyColumn = function (col, type) {\n        if (type !== 'data') {\n            return;\n        }\n        this.valueCacheData.delete(col.id);\n        this.valueCacheData.delete(\"\".concat(col.id, \":r\"));\n    };\n    ARenderTasks.prototype.setValueCacheData = function (key, value) {\n        if (value == null) {\n            this.valueCacheData.delete(key);\n        }\n        else {\n            this.valueCacheData.set(key, value);\n        }\n    };\n    ARenderTasks.prototype.valueCache = function (col) {\n        var v = this.valueCacheData.get(col.id);\n        if (!v) {\n            return undefined;\n        }\n        if (col instanceof DateColumn) {\n            return function (dataIndex) { return dateValueCache2Value(v[dataIndex]); };\n        }\n        if (col instanceof CategoricalColumn || col instanceof OrdinalColumn) {\n            return function (dataIndex) { return categoricalValueCache2Value(v[dataIndex], col.categories); };\n        }\n        return function (dataIndex) { return v[dataIndex]; };\n    };\n    return ARenderTasks;\n}());\nexport { ARenderTasks };\n//# sourceMappingURL=tasks.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ARenderTasks, taskNow } from './tasks';\nimport { toIndexArray, sortComplex, getNumberOfBins, } from '../internal';\n/**\n * @internal\n */\nexport function sortDirect(indices, maxDataIndex, lookups) {\n    var order = toIndexArray(indices, maxDataIndex);\n    if (lookups) {\n        sortComplex(order, lookups.sortOrders);\n    }\n    return order;\n}\n/**\n * @internal\n */\nvar DirectRenderTasks = /** @class */ (function (_super) {\n    __extends(DirectRenderTasks, _super);\n    function DirectRenderTasks() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.cache = new Map();\n        return _this;\n    }\n    DirectRenderTasks.prototype.setData = function (data) {\n        this.data = data;\n        this.cache.clear();\n        this.valueCacheData.clear();\n    };\n    DirectRenderTasks.prototype.dirtyColumn = function (col, type) {\n        _super.prototype.dirtyColumn.call(this, col, type);\n        if (type === 'group') {\n            return; // not cached\n        }\n        this.cache.delete(\"\".concat(col.id, \":summary\"));\n        this.cache.delete(\"\".concat(col.id, \":summary:raw\"));\n        this.cache.delete(\"\".concat(col.id, \":summary:b\"));\n        this.cache.delete(\"\".concat(col.id, \":summary:braw\"));\n        if (type === 'summary') {\n            return;\n        }\n        this.cache.delete(\"\".concat(col.id, \":data\"));\n        this.cache.delete(\"\".concat(col.id, \":data:raw\"));\n        this.cache.delete(\"\".concat(col.id, \":data:b\"));\n        this.cache.delete(\"\".concat(col.id, \":data:braw\"));\n    };\n    DirectRenderTasks.prototype.dirtyRanking = function (ranking, type) {\n        for (var _i = 0, _a = ranking.flatColumns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            this.dirtyColumn(col, type);\n        }\n    };\n    DirectRenderTasks.prototype.preCompute = function () {\n        // dummy\n    };\n    DirectRenderTasks.prototype.preComputeData = function () {\n        // dummy\n    };\n    DirectRenderTasks.prototype.preComputeCol = function () {\n        // dummy\n    };\n    DirectRenderTasks.prototype.copyData2Summary = function () {\n        // dummy\n    };\n    DirectRenderTasks.prototype.copyCache = function (col, from) {\n        var fromPrefix = \"\".concat(from.id, \":\");\n        for (var _i = 0, _a = Array.from(this.cache.keys()).sort(); _i < _a.length; _i++) {\n            var key = _a[_i];\n            if (!key.startsWith(fromPrefix)) {\n                continue;\n            }\n            var cacheKey = \"\".concat(col.id, \":\").concat(key.slice(fromPrefix.length));\n            this.cache.set(cacheKey, this.cache.get(key));\n        }\n    };\n    DirectRenderTasks.prototype.sort = function (_ranking, _group, indices, _singleCall, maxDataIndex, lookups) {\n        return Promise.resolve(sortDirect(indices, maxDataIndex, lookups));\n    };\n    DirectRenderTasks.prototype.groupCompare = function (ranking, group, rows) {\n        var rg = ranking.getGroupSortCriteria();\n        if (rg.length === 0) {\n            return taskNow([group.name.toLowerCase()]);\n        }\n        var o = this.byOrder(rows);\n        var vs = [];\n        for (var _i = 0, rg_1 = rg; _i < rg_1.length; _i++) {\n            var s = rg_1[_i];\n            var r = s.col.toCompareGroupValue(o, group);\n            if (Array.isArray(r)) {\n                vs.push.apply(vs, r);\n            }\n            else {\n                vs.push(r);\n            }\n        }\n        vs.push(group.name.toLowerCase());\n        return taskNow(vs);\n    };\n    DirectRenderTasks.prototype.groupRows = function (_col, group, _key, compute) {\n        return taskNow(compute(this.byOrder(group.order)));\n    };\n    DirectRenderTasks.prototype.groupExampleRows = function (_col, group, _key, compute) {\n        return taskNow(compute(this.byOrder(group.order.slice(0, 5))));\n    };\n    DirectRenderTasks.prototype.groupBoxPlotStats = function (col, group, raw) {\n        var _a = this.summaryBoxPlotStatsD(col, raw), summary = _a.summary, data = _a.data;\n        return taskNow({\n            group: this.boxplotBuilder(group.order, col, raw).next(Number.POSITIVE_INFINITY).value,\n            summary: summary,\n            data: data,\n        });\n    };\n    DirectRenderTasks.prototype.groupNumberStats = function (col, group, raw) {\n        var _a = this.summaryNumberStatsD(col, raw), summary = _a.summary, data = _a.data;\n        return taskNow({\n            group: this.statsBuilder(group.order, col, summary.hist.length, raw).next(Number.POSITIVE_INFINITY).value,\n            summary: summary,\n            data: data,\n        });\n    };\n    DirectRenderTasks.prototype.groupCategoricalStats = function (col, group) {\n        var _a = this.summaryCategoricalStatsD(col), summary = _a.summary, data = _a.data;\n        return taskNow({\n            group: this.categoricalStatsBuilder(group.order, col).next(Number.POSITIVE_INFINITY).value,\n            summary: summary,\n            data: data,\n        });\n    };\n    DirectRenderTasks.prototype.groupDateStats = function (col, group) {\n        var _a = this.summaryDateStatsD(col), summary = _a.summary, data = _a.data;\n        return taskNow({\n            group: this.dateStatsBuilder(group.order, col, summary).next(Number.POSITIVE_INFINITY).value,\n            summary: summary,\n            data: data,\n        });\n    };\n    DirectRenderTasks.prototype.groupStringStats = function (col, group) {\n        var _a = this.summaryStringStatsD(col), summary = _a.summary, data = _a.data;\n        return taskNow({\n            group: this.stringStatsBuilder(group.order, col, summary.topN.map(function (d) { return d.value; })).next(Number.POSITIVE_INFINITY).value,\n            summary: summary,\n            data: data,\n        });\n    };\n    DirectRenderTasks.prototype.summaryBoxPlotStats = function (col, raw) {\n        return taskNow(this.summaryBoxPlotStatsD(col, raw));\n    };\n    DirectRenderTasks.prototype.summaryNumberStats = function (col, raw) {\n        return taskNow(this.summaryNumberStatsD(col, raw));\n    };\n    DirectRenderTasks.prototype.summaryCategoricalStats = function (col) {\n        return taskNow(this.summaryCategoricalStatsD(col));\n    };\n    DirectRenderTasks.prototype.summaryDateStats = function (col) {\n        return taskNow(this.summaryDateStatsD(col));\n    };\n    DirectRenderTasks.prototype.summaryStringStats = function (col) {\n        return taskNow(this.summaryStringStatsD(col));\n    };\n    DirectRenderTasks.prototype.summaryNumberStatsD = function (col, raw) {\n        var _this = this;\n        var ranking = col.findMyRanker();\n        return this.cached('summary', col, function () {\n            var order = ranking ? ranking.getOrder() : [];\n            var data = _this.dataNumberStats(col, raw);\n            return {\n                summary: _this.statsBuilder(order, col, data.hist.length, raw).next(Number.POSITIVE_INFINITY).value,\n                data: data,\n            };\n        }, raw ? ':raw' : '', ranking && ranking.getOrderLength() === 0);\n    };\n    DirectRenderTasks.prototype.summaryBoxPlotStatsD = function (col, raw) {\n        var _this = this;\n        var ranking = col.findMyRanker();\n        return this.cached('summary', col, function () {\n            var order = ranking ? ranking.getOrder() : [];\n            var data = _this.dataBoxPlotStats(col, raw);\n            return { summary: _this.boxplotBuilder(order, col, raw).next(Number.POSITIVE_INFINITY).value, data: data };\n        }, raw ? ':braw' : ':b', ranking && ranking.getOrderLength() === 0);\n    };\n    DirectRenderTasks.prototype.summaryCategoricalStatsD = function (col) {\n        var _this = this;\n        var ranking = col.findMyRanker();\n        return this.cached('summary', col, function () {\n            var order = ranking ? ranking.getOrder() : [];\n            var data = _this.dataCategoricalStats(col);\n            return {\n                summary: _this.categoricalStatsBuilder(order, col).next(Number.POSITIVE_INFINITY).value,\n                data: data,\n            };\n        }, '', ranking && ranking.getOrderLength() === 0);\n    };\n    DirectRenderTasks.prototype.summaryDateStatsD = function (col) {\n        var _this = this;\n        var ranking = col.findMyRanker();\n        return this.cached('summary', col, function () {\n            var order = ranking ? ranking.getOrder() : [];\n            var data = _this.dataDateStats(col);\n            return {\n                summary: _this.dateStatsBuilder(order, col, data).next(Number.POSITIVE_INFINITY).value,\n                data: data,\n            };\n        }, '', ranking && ranking.getOrderLength() === 0);\n    };\n    DirectRenderTasks.prototype.summaryStringStatsD = function (col) {\n        var _this = this;\n        return this.cached('summary', col, function () {\n            var ranking = col.findMyRanker().getOrder();\n            var data = _this.dataStringStats(col);\n            return {\n                summary: _this.stringStatsBuilder(ranking, col, undefined).next(Number.POSITIVE_INFINITY).value,\n                data: data,\n            };\n        }, '', col.findMyRanker().getOrderLength() === 0);\n    };\n    DirectRenderTasks.prototype.cached = function (prefix, col, creator, suffix, dontCache) {\n        if (suffix === void 0) { suffix = ''; }\n        if (dontCache === void 0) { dontCache = false; }\n        var key = \"\".concat(col.id, \":\").concat(prefix).concat(suffix);\n        if (this.cache.has(key)) {\n            return this.cache.get(key);\n        }\n        var s = creator();\n        if (!dontCache) {\n            this.cache.set(key, s);\n        }\n        return s;\n    };\n    DirectRenderTasks.prototype.dataBoxPlotStats = function (col, raw) {\n        var _this = this;\n        return this.cached('data', col, function () { return _this.boxplotBuilder(null, col, raw).next(Number.POSITIVE_INFINITY).value; }, raw ? ':braw' : ':b');\n    };\n    DirectRenderTasks.prototype.dataNumberStats = function (col, raw) {\n        var _this = this;\n        return this.cached('data', col, function () {\n            return _this.statsBuilder(null, col, getNumberOfBins(_this.data.length), raw).next(Number.POSITIVE_INFINITY)\n                .value;\n        }, raw ? ':raw' : '');\n    };\n    DirectRenderTasks.prototype.dataCategoricalStats = function (col) {\n        var _this = this;\n        return this.cached('data', col, function () { return _this.categoricalStatsBuilder(null, col).next(Number.POSITIVE_INFINITY).value; });\n    };\n    DirectRenderTasks.prototype.dataDateStats = function (col) {\n        var _this = this;\n        return this.cached('data', col, function () { return _this.dateStatsBuilder(null, col).next(Number.POSITIVE_INFINITY).value; });\n    };\n    DirectRenderTasks.prototype.dataStringStats = function (col) {\n        var _this = this;\n        return this.cached('data', col, function () { return _this.stringStatsBuilder(null, col).next(Number.POSITIVE_INFINITY).value; });\n    };\n    DirectRenderTasks.prototype.terminate = function () {\n        this.cache.clear();\n    };\n    return DirectRenderTasks;\n}(ARenderTasks));\nexport { DirectRenderTasks };\n//# sourceMappingURL=DirectRenderTasks.js.map","import Column from './Column';\nexport function isMapColumn(col) {\n    return ((col instanceof Column &&\n        typeof col.getMap === 'function' &&\n        typeof col.getMapLabel === 'function') ||\n        (!(col instanceof Column) && col.type.endsWith('Map')));\n}\nexport function isArrayColumn(col) {\n    return ((col instanceof Column &&\n        typeof col.getLabels === 'function' &&\n        typeof col.getValues === 'function' &&\n        isMapColumn(col)) ||\n        (!(col instanceof Column) && col.type.endsWith('s') && col.type !== 'actions'));\n}\n//# sourceMappingURL=IArrayColumn.js.map","import Column from './Column';\nimport { isArrayColumn } from './IArrayColumn';\nexport function isCategoricalLikeColumn(col) {\n    return (typeof col.categories !== 'undefined' &&\n        typeof col.iterCategory === 'function');\n}\nexport function isSetColumn(col) {\n    return isCategoricalLikeColumn(col) && typeof col.getSet === 'function';\n}\nexport function isCategoricalColumn(col) {\n    return ((col instanceof Column && typeof col.getCategory === 'function') ||\n        (!(col instanceof Column) && col.type.match(/(categorical|ordinal|hierarchy)/) != null));\n}\nexport function isCategoricalsColumn(col) {\n    return isCategoricalLikeColumn(col) && isArrayColumn(col) && !isSetColumn(col);\n}\nexport function isCategory(v) {\n    return (typeof v.name === 'string' &&\n        typeof v.label === 'string' &&\n        typeof v.color === 'string' &&\n        typeof v.value === 'number');\n}\n//# sourceMappingURL=ICategoricalColumn.js.map","import Column from './Column';\nexport function isDateColumn(col) {\n    return ((col instanceof Column && typeof col.getDate === 'function') ||\n        (!(col instanceof Column) && col.type.startsWith('date')));\n}\nexport function isDatesColumn(col) {\n    return typeof col.getDates === 'function';\n}\n//# sourceMappingURL=IDateColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { abortAble } from 'lineupengine';\nimport { getNumberOfBins, lazySeq, toIndexArray, WorkerTaskScheduler, createWorkerBlob, } from '../internal';\nimport TaskScheduler, { ABORTED, oneShotIterator } from '../internal/scheduler';\nimport { isCategoricalLikeColumn, isDateColumn, isNumberColumn, StringColumn, } from '../model';\nimport { sortDirect } from './DirectRenderTasks';\nimport { ARenderTasks, MultiIndices, taskLater, TaskLater, taskNow, TaskNow } from './tasks';\nvar ScheduleRenderTasks = /** @class */ (function (_super) {\n    __extends(ScheduleRenderTasks, _super);\n    function ScheduleRenderTasks() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.cache = new Map();\n        _this.tasks = new TaskScheduler();\n        _this.workers = new WorkerTaskScheduler(createWorkerBlob());\n        return _this;\n    }\n    ScheduleRenderTasks.prototype.setData = function (data) {\n        this.data = data;\n        this.cache.clear();\n        this.tasks.clear();\n        this.valueCacheData.clear();\n        this.workers.deleteRefs();\n    };\n    ScheduleRenderTasks.prototype.dirtyColumn = function (col, type) {\n        _super.prototype.dirtyColumn.call(this, col, type);\n        // order designed such that first groups, then summaries, then data is deleted\n        for (var _i = 0, _a = Array.from(this.cache.keys()).sort(); _i < _a.length; _i++) {\n            var key = _a[_i];\n            // data = all\n            // summary = summary + group\n            // group = group only\n            if ((type === 'data' && key.startsWith(\"\".concat(col.id, \":\"))) ||\n                (type === 'summary' && key.startsWith(\"\".concat(col.id, \":b:summary:\"))) ||\n                key.startsWith(\"\".concat(col.id, \":a:group\"))) {\n                this.cache.delete(key);\n                this.tasks.abort(key);\n            }\n        }\n        if (type !== 'data') {\n            return;\n        }\n        this.valueCacheData.delete(col.id);\n        this.workers.deleteRef(col.id);\n    };\n    ScheduleRenderTasks.prototype.dirtyRanking = function (ranking, type) {\n        var cols = ranking.flatColumns;\n        var checker;\n        switch (type) {\n            case 'group':\n                checker = cols.map(function (col) { return function (key) { return key.startsWith(\"\".concat(col.id, \":a:group\")); }; });\n                break;\n            case 'summary':\n                checker = cols.map(function (col) { return function (key) { return key.startsWith(\"\".concat(col.id, \":b:summary\")) || key.startsWith(\"\".concat(col.id, \":a:group\")); }; });\n                break;\n            case 'data':\n            default:\n                checker = cols.map(function (col) { return function (key) { return key.startsWith(\"\".concat(col.id, \":\")); }; });\n                break;\n        }\n        var _loop_1 = function (key) {\n            if (checker.some(function (f) { return f(key); })) {\n                this_1.cache.delete(key);\n                this_1.tasks.abort(key);\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = Array.from(this.cache.keys()).sort(); _i < _a.length; _i++) {\n            var key = _a[_i];\n            _loop_1(key);\n        }\n        // group compare tasks\n        this.tasks.abortAll(function (t) { return t.id.startsWith(\"r\".concat(ranking.id, \":\")); });\n        // delete remote caches\n        this.workers.deleteRef(ranking.id, true);\n        if (type !== 'data') {\n            return;\n        }\n        for (var _b = 0, cols_1 = cols; _b < cols_1.length; _b++) {\n            var col = cols_1[_b];\n            _super.prototype.dirtyColumn.call(this, col, type);\n            this.workers.deleteRef(col.id);\n        }\n    };\n    ScheduleRenderTasks.prototype.preCompute = function (ranking, groups, maxDataIndex) {\n        if (groups.length === 0) {\n            return;\n        }\n        var cols = ranking.flatColumns;\n        if (groups.length === 1) {\n            var _a = groups[0], group = _a.group, rows = _a.rows;\n            var multi = new MultiIndices([rows], maxDataIndex);\n            for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n                var col = cols_2[_i];\n                if (isCategoricalLikeColumn(col)) {\n                    this.summaryCategoricalStats(col, multi);\n                }\n                else if (isNumberColumn(col)) {\n                    this.summaryNumberStats(col, false, multi);\n                    this.summaryNumberStats(col, true, multi);\n                }\n                else if (isDateColumn(col)) {\n                    this.summaryDateStats(col, multi);\n                }\n                else if (col instanceof StringColumn) {\n                    this.summaryStringStats(col, multi);\n                }\n                else {\n                    continue;\n                }\n                // copy from summary to group and create proper structure\n                this.chainCopy(\"\".concat(col.id, \":a:group:\").concat(group.name), this.cache.get(\"\".concat(col.id, \":b:summary\")), function (v) { return ({ group: v.summary, summary: v.summary, data: v.data }); });\n                if (isNumberColumn(col)) {\n                    this.chainCopy(\"\".concat(col.id, \":a:group:\").concat(group.name, \":raw\"), this.cache.get(\"\".concat(col.id, \":b:summary:raw\")), function (v) { return ({ group: v.summary, summary: v.summary, data: v.data }); });\n                }\n            }\n            return;\n        }\n        var orderedGroups = groups.map(function (_a) {\n            var rows = _a.rows, group = _a.group;\n            return Object.assign({ order: rows }, group);\n        });\n        var full = new MultiIndices(groups.map(function (d) { return d.rows; }), maxDataIndex);\n        for (var _b = 0, cols_3 = cols; _b < cols_3.length; _b++) {\n            var col = cols_3[_b];\n            if (isCategoricalLikeColumn(col)) {\n                this.summaryCategoricalStats(col, full);\n                for (var _c = 0, orderedGroups_1 = orderedGroups; _c < orderedGroups_1.length; _c++) {\n                    var g = orderedGroups_1[_c];\n                    this.groupCategoricalStats(col, g);\n                }\n            }\n            else if (isDateColumn(col)) {\n                this.summaryDateStats(col, full);\n                for (var _d = 0, orderedGroups_2 = orderedGroups; _d < orderedGroups_2.length; _d++) {\n                    var g = orderedGroups_2[_d];\n                    this.groupDateStats(col, g);\n                }\n            }\n            else if (isNumberColumn(col)) {\n                this.summaryNumberStats(col, false, full);\n                this.summaryNumberStats(col, true, full);\n                for (var _e = 0, orderedGroups_3 = orderedGroups; _e < orderedGroups_3.length; _e++) {\n                    var g = orderedGroups_3[_e];\n                    this.groupNumberStats(col, g, false);\n                    this.groupNumberStats(col, g, true);\n                }\n            }\n            else if (col instanceof StringColumn) {\n                this.summaryStringStats(col, full);\n                for (var _f = 0, orderedGroups_4 = orderedGroups; _f < orderedGroups_4.length; _f++) {\n                    var g = orderedGroups_4[_f];\n                    this.groupStringStats(col, g);\n                }\n            }\n        }\n    };\n    ScheduleRenderTasks.prototype.preComputeData = function (ranking) {\n        for (var _i = 0, _a = ranking.flatColumns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (isCategoricalLikeColumn(col)) {\n                this.dataCategoricalStats(col);\n            }\n            else if (isNumberColumn(col)) {\n                this.dataNumberStats(col, false);\n                this.dataNumberStats(col, true);\n            }\n            else if (isDateColumn(col)) {\n                this.dataDateStats(col);\n            }\n            else if (col instanceof StringColumn) {\n                this.dataStringStats(col);\n            }\n        }\n    };\n    ScheduleRenderTasks.prototype.preComputeCol = function (col) {\n        var ranking = col.findMyRanker();\n        if (col instanceof StringColumn) {\n            this.dataStringStats(col);\n            if (!ranking) {\n                return;\n            }\n            this.summaryStringStats(col);\n            for (var _i = 0, _a = ranking.getGroups(); _i < _a.length; _i++) {\n                var group = _a[_i];\n                this.groupStringStats(col, group);\n            }\n            return;\n        }\n        if (isCategoricalLikeColumn(col)) {\n            this.dataCategoricalStats(col);\n            if (!ranking) {\n                return;\n            }\n            this.summaryCategoricalStats(col);\n            for (var _b = 0, _c = ranking.getGroups(); _b < _c.length; _b++) {\n                var group = _c[_b];\n                this.groupCategoricalStats(col, group);\n            }\n            return;\n        }\n        if (isNumberColumn(col)) {\n            this.dataNumberStats(col, false);\n            this.dataNumberStats(col, true);\n            if (!ranking) {\n                return;\n            }\n            this.summaryNumberStats(col, false);\n            this.summaryNumberStats(col, true);\n            for (var _d = 0, _e = ranking.getGroups(); _d < _e.length; _d++) {\n                var group = _e[_d];\n                this.groupNumberStats(col, group, false);\n                this.groupNumberStats(col, group, true);\n            }\n            return;\n        }\n        if (!isDateColumn(col)) {\n            return;\n        }\n        this.dataDateStats(col);\n        if (!ranking) {\n            return;\n        }\n        this.summaryDateStats(col);\n        for (var _f = 0, _g = ranking.getGroups(); _f < _g.length; _f++) {\n            var group = _g[_f];\n            this.groupDateStats(col, group);\n        }\n    };\n    ScheduleRenderTasks.prototype.copyData2Summary = function (ranking) {\n        for (var _i = 0, _a = ranking.flatColumns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (isCategoricalLikeColumn(col)) {\n                this.dataCategoricalStats(col);\n            }\n            else if (isNumberColumn(col)) {\n                this.dataNumberStats(col, false);\n                this.dataNumberStats(col, true);\n            }\n            else if (isDateColumn(col)) {\n                this.dataDateStats(col);\n            }\n            else if (col instanceof StringColumn) {\n                this.dataStringStats(col);\n            }\n            else {\n                continue;\n            }\n            // copy from data to summary and create proper structure\n            this.chainCopy(\"\".concat(col.id, \":b:summary\"), this.cache.get(\"\".concat(col.id, \":c:data\")), function (data) { return ({\n                summary: data,\n                data: data,\n            }); });\n            if (isNumberColumn(col)) {\n                this.chainCopy(\"\".concat(col.id, \":b:summary:raw\"), this.cache.get(\"\".concat(col.id, \":c:data:raw\")), function (data) { return ({\n                    summary: data,\n                    data: data,\n                }); });\n            }\n        }\n    };\n    ScheduleRenderTasks.prototype.copyCache = function (col, from) {\n        var fromPrefix = \"\".concat(from.id, \":\");\n        for (var _i = 0, _a = Array.from(this.cache.keys()).sort(); _i < _a.length; _i++) {\n            var key = _a[_i];\n            if (!key.startsWith(fromPrefix)) {\n                continue;\n            }\n            var chainKey = \"\".concat(col.id, \":\").concat(key.slice(fromPrefix.length));\n            this.chainCopy(chainKey, this.cache.get(key), function (data) { return data; });\n        }\n    };\n    ScheduleRenderTasks.prototype.groupCompare = function (ranking, group, rows) {\n        var _this = this;\n        return taskLater(this.tasks.push(\"r\".concat(ranking.id, \":\").concat(group.name), function () {\n            var rg = ranking.getGroupSortCriteria();\n            if (rg.length === 0) {\n                return [group.name.toLowerCase()];\n            }\n            var o = _this.byOrder(rows);\n            var vs = [];\n            var _loop_2 = function (s) {\n                var cache = _this.valueCache(s.col);\n                var r = s.col.toCompareGroupValue(o, group, cache ? lazySeq(rows).map(function (d) { return cache(d); }) : undefined);\n                if (Array.isArray(r)) {\n                    vs.push.apply(vs, r);\n                }\n                else {\n                    vs.push(r);\n                }\n            };\n            for (var _i = 0, rg_1 = rg; _i < rg_1.length; _i++) {\n                var s = rg_1[_i];\n                _loop_2(s);\n            }\n            vs.push(group.name.toLowerCase());\n            return vs;\n        }));\n    };\n    ScheduleRenderTasks.prototype.groupRows = function (col, group, key, compute) {\n        var _this = this;\n        return this.cached(\"\".concat(col.id, \":a:group:\").concat(group.name, \":\").concat(key), true, oneShotIterator(function () { return compute(_this.byOrder(group.order)); }));\n    };\n    ScheduleRenderTasks.prototype.groupExampleRows = function (_col, group, _key, compute) {\n        return taskNow(compute(this.byOrder(group.order.slice(0, 5))));\n    };\n    ScheduleRenderTasks.prototype.groupBoxPlotStats = function (col, group, raw) {\n        var _this = this;\n        return this.chain(\"\".concat(col.id, \":a:group:\").concat(group.name).concat(raw ? ':braw' : ':b'), this.summaryBoxPlotStats(col, raw), function (_a) {\n            var summary = _a.summary, data = _a.data;\n            var ranking = col.findMyRanker();\n            var key = raw ? \"\".concat(col.id, \":r\") : col.id;\n            if (_this.valueCacheData.has(key) && group.order.length > 0) {\n                // web worker version\n                return function () {\n                    return _this.workers\n                        .pushStats('boxplotStats', {}, key, _this.valueCacheData.get(key), \"\".concat(ranking.id, \":\").concat(group.name), group.order)\n                        .then(function (group) { return ({ group: group, summary: summary, data: data }); });\n                };\n            }\n            return _this.boxplotBuilder(group.order, col, raw, function (group) { return ({ group: group, summary: summary, data: data }); });\n        });\n    };\n    ScheduleRenderTasks.prototype.groupNumberStats = function (col, group, raw) {\n        var _this = this;\n        return this.chain(\"\".concat(col.id, \":a:group:\").concat(group.name).concat(raw ? ':raw' : ''), this.summaryNumberStats(col, raw), function (_a) {\n            var summary = _a.summary, data = _a.data;\n            var ranking = col.findMyRanker();\n            var key = raw ? \"\".concat(col.id, \":r\") : col.id;\n            if (_this.valueCacheData.has(key) && group.order.length > 0) {\n                // web worker version\n                return function () {\n                    return _this.workers\n                        .pushStats('numberStats', { numberOfBins: summary.hist.length, domain: _this.resolveDomain(col, raw) }, key, _this.valueCacheData.get(key), \"\".concat(ranking.id, \":\").concat(group.name), group.order)\n                        .then(function (group) { return ({ group: group, summary: summary, data: data }); });\n                };\n            }\n            return _this.statsBuilder(group.order, col, summary.hist.length, raw, function (group) { return ({\n                group: group,\n                summary: summary,\n                data: data,\n            }); });\n        });\n    };\n    ScheduleRenderTasks.prototype.groupCategoricalStats = function (col, group) {\n        var _this = this;\n        return this.chain(\"\".concat(col.id, \":a:group:\").concat(group.name), this.summaryCategoricalStats(col), function (_a) {\n            var summary = _a.summary, data = _a.data;\n            var ranking = col.findMyRanker();\n            if (_this.valueCacheData.has(col.id) && group.order.length > 0) {\n                // web worker version\n                return function () {\n                    return _this.workers\n                        .pushStats('categoricalStats', { categories: col.categories.map(function (d) { return d.name; }) }, col.id, _this.valueCacheData.get(col.id), \"\".concat(ranking.id, \":\").concat(group.name), group.order)\n                        .then(function (group) { return ({ group: group, summary: summary, data: data }); });\n                };\n            }\n            return _this.categoricalStatsBuilder(group.order, col, function (group) { return ({ group: group, summary: summary, data: data }); });\n        });\n    };\n    ScheduleRenderTasks.prototype.groupDateStats = function (col, group) {\n        var _this = this;\n        var key = \"\".concat(col.id, \":a:group:\").concat(group.name);\n        return this.chain(key, this.summaryDateStats(col), function (_a) {\n            var summary = _a.summary, data = _a.data;\n            var ranking = col.findMyRanker();\n            if (_this.valueCacheData.has(col.id) && group.order.length > 0) {\n                // web worker version\n                return function () {\n                    return _this.workers\n                        .pushStats('dateStats', { template: summary }, col.id, _this.valueCacheData.get(col.id), \"\".concat(ranking.id, \":\").concat(group.name), group.order)\n                        .then(function (group) { return ({ group: group, summary: summary, data: data }); });\n                };\n            }\n            return _this.dateStatsBuilder(group.order, col, summary, function (group) { return ({ group: group, summary: summary, data: data }); });\n        });\n    };\n    ScheduleRenderTasks.prototype.groupStringStats = function (col, group) {\n        var _this = this;\n        var key = \"\".concat(col.id, \":a:group:\").concat(group.name);\n        return this.chain(key, this.summaryStringStats(col), function (_a) {\n            var summary = _a.summary, data = _a.data;\n            var ranking = col.findMyRanker();\n            var topN = summary.topN.map(function (d) { return d.value; });\n            if (_this.valueCacheData.has(col.id) && group.order.length > 0) {\n                // web worker version\n                return function () {\n                    return _this.workers\n                        .pushStats('stringStats', { topN: _this.options.stringTopNCount }, col.id, _this.valueCacheData.get(col.id), \"\".concat(ranking.id, \":\").concat(group.name), group.order)\n                        .then(function (group) { return ({ group: group, summary: summary, data: data }); });\n                };\n            }\n            return _this.stringStatsBuilder(group.order, col, topN, function (group) { return ({ group: group, summary: summary, data: data }); });\n        });\n    };\n    ScheduleRenderTasks.prototype.summaryBoxPlotStats = function (col, raw, order) {\n        var _this = this;\n        return this.chain(\"\".concat(col.id, \":b:summary\").concat(raw ? ':braw' : ':b'), this.dataBoxPlotStats(col, raw), function (data) {\n            var ranking = col.findMyRanker();\n            var key = raw ? \"\".concat(col.id, \":r\") : col.id;\n            if (_this.valueCacheData.has(key)) {\n                // web worker version\n                return function () {\n                    return _this.workers\n                        .pushStats('boxplotStats', {}, key, _this.valueCacheData.get(key), ranking.id, order ? order.joined : ranking.getOrder())\n                        .then(function (summary) { return ({ summary: summary, data: data }); });\n                };\n            }\n            return _this.boxplotBuilder(order ? order : ranking.getOrder(), col, raw, function (summary) { return ({ summary: summary, data: data }); });\n        });\n    };\n    ScheduleRenderTasks.prototype.summaryNumberStats = function (col, raw, order) {\n        var _this = this;\n        return this.chain(\"\".concat(col.id, \":b:summary\").concat(raw ? ':raw' : ''), this.dataNumberStats(col, raw), function (data) {\n            var ranking = col.findMyRanker();\n            var key = raw ? \"\".concat(col.id, \":r\") : col.id;\n            if (_this.valueCacheData.has(key)) {\n                // web worker version\n                return function () {\n                    return _this.workers\n                        .pushStats('numberStats', { numberOfBins: data.hist.length, domain: _this.resolveDomain(col, raw) }, key, _this.valueCacheData.get(key), ranking.id, order ? order.joined : ranking.getOrder())\n                        .then(function (summary) { return ({ summary: summary, data: data }); });\n                };\n            }\n            return _this.statsBuilder(order ? order : ranking.getOrder(), col, data.hist.length, raw, function (summary) { return ({\n                summary: summary,\n                data: data,\n            }); });\n        });\n    };\n    ScheduleRenderTasks.prototype.summaryCategoricalStats = function (col, order) {\n        var _this = this;\n        return this.chain(\"\".concat(col.id, \":b:summary\"), this.dataCategoricalStats(col), function (data) {\n            var ranking = col.findMyRanker();\n            if (_this.valueCacheData.has(col.id)) {\n                // web worker version\n                return function () {\n                    return _this.workers\n                        .pushStats('categoricalStats', { categories: col.categories.map(function (d) { return d.name; }) }, col.id, _this.valueCacheData.get(col.id), ranking.id, order ? order.joined : ranking.getOrder())\n                        .then(function (summary) { return ({ summary: summary, data: data }); });\n                };\n            }\n            return _this.categoricalStatsBuilder(order ? order : ranking.getOrder(), col, function (summary) { return ({ summary: summary, data: data }); });\n        });\n    };\n    ScheduleRenderTasks.prototype.summaryDateStats = function (col, order) {\n        var _this = this;\n        return this.chain(\"\".concat(col.id, \":b:summary\"), this.dataDateStats(col), function (data) {\n            var ranking = col.findMyRanker();\n            if (_this.valueCacheData.has(col.id)) {\n                // web worker version\n                return function () {\n                    return _this.workers\n                        .pushStats('dateStats', { template: data }, col.id, _this.valueCacheData.get(col.id), ranking.id, order ? order.joined : ranking.getOrder())\n                        .then(function (summary) { return ({ summary: summary, data: data }); });\n                };\n            }\n            return _this.dateStatsBuilder(order ? order : ranking.getOrder(), col, data, function (summary) { return ({ summary: summary, data: data }); });\n        });\n    };\n    ScheduleRenderTasks.prototype.summaryStringStats = function (col, order) {\n        var _this = this;\n        return this.chain(\"\".concat(col.id, \":b:summary\"), this.dataStringStats(col), function (data) {\n            var ranking = col.findMyRanker();\n            if (_this.valueCacheData.has(col.id)) {\n                // web worker version\n                return function () {\n                    return _this.workers\n                        .pushStats('stringStats', { topN: _this.options.stringTopNCount }, col.id, _this.valueCacheData.get(col.id), ranking.id, order ? order.joined : ranking.getOrder())\n                        .then(function (summary) { return ({ summary: summary, data: data }); });\n                };\n            }\n            return _this.stringStatsBuilder(order ? order : ranking.getOrder(), col, undefined, function (summary) { return ({\n                summary: summary,\n                data: data,\n            }); });\n        });\n    };\n    ScheduleRenderTasks.prototype.cached = function (key, canAbort, it) {\n        var _this = this;\n        var dontCache = this.data.length === 0;\n        if (this.isValidCacheEntry(key) && !dontCache) {\n            return this.cache.get(key);\n        }\n        var task = typeof it === 'function' ? abortAble(it()) : this.tasks.pushMulti(key, it, canAbort);\n        var s = taskLater(task);\n        if (!dontCache) {\n            this.cache.set(key, s);\n        }\n        task.then(function (r) {\n            if (_this.cache.get(key) !== s) {\n                return;\n            }\n            if (typeof r === 'symbol') {\n                _this.cache.delete(key);\n            }\n            else {\n                _this.cache.set(key, taskNow(r));\n            }\n        });\n        return s;\n    };\n    ScheduleRenderTasks.prototype.chain = function (key, task, creator) {\n        var _this = this;\n        if (this.isValidCacheEntry(key)) {\n            return this.cache.get(key);\n        }\n        if (task instanceof TaskNow) {\n            if (typeof task.v === 'symbol') {\n                // aborted\n                return taskNow(ABORTED);\n            }\n            return this.cached(key, true, creator(task.v));\n        }\n        var v = task.v;\n        var subTask = v.then(function (data) {\n            if (typeof data === 'symbol') {\n                return ABORTED;\n            }\n            var created = creator(data);\n            if (typeof created === 'function') {\n                // promise\n                return created();\n            }\n            return _this.tasks.pushMulti(key, created);\n        });\n        var s = taskLater(subTask);\n        this.cache.set(key, s);\n        subTask.then(function (r) {\n            if (_this.cache.get(key) !== s) {\n                return;\n            }\n            if (typeof r === 'symbol') {\n                _this.cache.delete(key);\n            }\n            else {\n                _this.cache.set(key, taskNow(r));\n            }\n        });\n        return s;\n    };\n    ScheduleRenderTasks.prototype.isValidCacheEntry = function (key) {\n        if (!this.cache.has(key)) {\n            return false;\n        }\n        var v = this.cache.get(key);\n        // not an aborted task\n        return !(v instanceof TaskNow && typeof v.v === 'symbol') && !(v instanceof TaskLater && v.v.isAborted());\n    };\n    ScheduleRenderTasks.prototype.chainCopy = function (key, task, creator) {\n        var _this = this;\n        if (this.isValidCacheEntry(key)) {\n            return this.cache.get(key);\n        }\n        if (task instanceof TaskNow) {\n            if (typeof task.v === 'symbol') {\n                // aborted\n                return taskNow(ABORTED);\n            }\n            var subTask_1 = taskNow(creator(task.v));\n            this.cache.set(key, subTask_1);\n            return subTask_1;\n        }\n        var v = task.v;\n        var subTask = v.then(function (data) {\n            if (typeof data === 'symbol') {\n                return ABORTED;\n            }\n            return creator(data);\n        });\n        var s = taskLater(subTask);\n        this.cache.set(key, s);\n        subTask.then(function (r) {\n            if (_this.cache.get(key) !== s) {\n                return;\n            }\n            if (typeof r === 'symbol') {\n                _this.cache.delete(key);\n            }\n            else {\n                _this.cache.set(key, taskNow(r));\n            }\n        });\n        return s;\n    };\n    ScheduleRenderTasks.prototype.dataBoxPlotStats = function (col, raw) {\n        var _this = this;\n        var key = \"\".concat(col.id, \":c:data\").concat(raw ? ':braw' : ':b');\n        var valueCacheKey = raw ? \"\".concat(col.id, \":r\") : col.id;\n        if (this.valueCacheData.has(valueCacheKey) && this.data.length > 0) {\n            // use webworker\n            return this.cached(key, false, function () {\n                return _this.workers.pushStats('boxplotStats', {}, valueCacheKey, _this.valueCacheData.get(valueCacheKey));\n            });\n        }\n        return this.cached(key, false, this.boxplotBuilder(null, col, raw));\n    };\n    ScheduleRenderTasks.prototype.dataNumberStats = function (col, raw) {\n        return this.cached(\"\".concat(col.id, \":c:data\").concat(raw ? ':raw' : ''), false, this.statsBuilder(null, col, getNumberOfBins(this.data.length), raw));\n    };\n    ScheduleRenderTasks.prototype.dataCategoricalStats = function (col) {\n        return this.cached(\"\".concat(col.id, \":c:data\"), false, this.categoricalStatsBuilder(null, col));\n    };\n    ScheduleRenderTasks.prototype.dataStringStats = function (col) {\n        return this.cached(\"\".concat(col.id, \":c:data\"), false, this.stringStatsBuilder(null, col));\n    };\n    ScheduleRenderTasks.prototype.dataDateStats = function (col) {\n        return this.cached(\"\".concat(col.id, \":c:data\"), false, this.dateStatsBuilder(null, col));\n    };\n    ScheduleRenderTasks.prototype.sort = function (ranking, group, indices, singleCall, maxDataIndex, lookups) {\n        if (!lookups || indices.length < 1000) {\n            // no thread needed\n            var order = sortDirect(indices, maxDataIndex, lookups);\n            return Promise.resolve(order);\n        }\n        var indexArray = toIndexArray(indices, maxDataIndex);\n        var toTransfer = [indexArray.buffer];\n        if (singleCall) {\n            // can transfer otherwise need to copy\n            toTransfer.push.apply(toTransfer, lookups.transferAbles);\n        }\n        return this.workers.push('sort', {\n            ref: \"\".concat(ranking.id, \":\").concat(group.name),\n            indices: indexArray,\n            sortOrders: lookups.sortOrders,\n        }, toTransfer, function (r) { return r.order; });\n    };\n    ScheduleRenderTasks.prototype.terminate = function () {\n        this.workers.terminate();\n        this.cache.clear();\n        this.valueCacheData.clear();\n    };\n    return ScheduleRenderTasks;\n}(ARenderTasks));\nexport { ScheduleRenderTasks };\n//# sourceMappingURL=ScheduledTasks.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createIndexArray, sortComplex, lazySeq } from '../internal';\nimport { Column, EDirtyReason, Ranking, defaultGroup, CompositeColumn, ValueColumn, } from '../model';\nimport ACommonDataProvider from './ACommonDataProvider';\nimport ADataProvider from './ADataProvider';\nimport { CompareLookup } from './sort';\nimport { DirectRenderTasks } from './DirectRenderTasks';\nimport { ScheduleRenderTasks } from './ScheduledTasks';\nimport { joinGroups, mapIndices, duplicateGroup } from '../model/internal';\n/**\n * a data provider based on an local array\n */\nvar LocalDataProvider = /** @class */ (function (_super) {\n    __extends(LocalDataProvider, _super);\n    function LocalDataProvider(_data, columns, options) {\n        if (columns === void 0) { columns = []; }\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, columns, options) || this;\n        _this._data = _data;\n        _this.ooptions = {\n            /**\n             * whether the filter should be applied to all rankings regardless where they are\n             */\n            filterGlobally: false,\n            jumpToSearchResult: false,\n            taskExecutor: 'direct',\n            stringTopNCount: 10,\n        };\n        _this.filter = null;\n        _this.mapToDataRow = function (i) {\n            if (i < 0 || i >= _this._dataRows.length) {\n                return { i: i, v: {} };\n            }\n            return _this._dataRows[i];\n        };\n        Object.assign(_this.ooptions, options);\n        _this._dataRows = toRows(_data);\n        _this.tasks =\n            _this.ooptions.taskExecutor === 'direct'\n                ? new DirectRenderTasks(_this.ooptions)\n                : new ScheduleRenderTasks(_this.ooptions);\n        _this.tasks.setData(_this._dataRows);\n        for (var _i = 0, _a = _this.getRankings(); _i < _a.length; _i++) {\n            var ranking = _a[_i];\n            for (var _b = 0, _c = ranking.flatColumns; _b < _c.length; _b++) {\n                var col = _c[_b];\n                if (col instanceof ValueColumn) {\n                    col.onDataUpdate(_this._dataRows);\n                }\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var that = _this;\n        _this.reorderAll = function () {\n            //fire for all other rankings a dirty order event, too\n            var ranking = this.source;\n            var type = this.type;\n            for (var _i = 0, _a = that.getRankings(); _i < _a.length; _i++) {\n                var r = _a[_i];\n                if (r !== ranking) {\n                    r.dirtyOrder(type === Ranking.EVENT_FILTER_CHANGED ? [EDirtyReason.FILTER_CHANGED] : [EDirtyReason.UNKNOWN]);\n                }\n            }\n        };\n        return _this;\n    }\n    /**\n     * set a globally applied filter to all data without changing the data source itself\n     * @param {((row: IDataRow) => boolean) | null} filter\n     */\n    LocalDataProvider.prototype.setFilter = function (filter) {\n        this.filter = filter;\n        this.reorderAll.call({ type: Ranking.EVENT_FILTER_CHANGED });\n    };\n    LocalDataProvider.prototype.getFilter = function () {\n        return this.filter;\n    };\n    LocalDataProvider.prototype.getTotalNumberOfRows = function () {\n        return this.data.length;\n    };\n    LocalDataProvider.prototype.getTaskExecutor = function () {\n        return this.tasks;\n    };\n    Object.defineProperty(LocalDataProvider.prototype, \"data\", {\n        get: function () {\n            return this._data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LocalDataProvider.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.tasks.terminate();\n    };\n    /**\n     * replaces the dataset rows with a new one\n     * @param data\n     */\n    LocalDataProvider.prototype.setData = function (data) {\n        this._data = data;\n        this._dataRows = toRows(data);\n        this.dataChanged();\n    };\n    LocalDataProvider.prototype.dataChanged = function () {\n        this.tasks.setData(this._dataRows);\n        for (var _i = 0, _a = this.getRankings(); _i < _a.length; _i++) {\n            var ranking = _a[_i];\n            for (var _b = 0, _c = ranking.flatColumns; _b < _c.length; _b++) {\n                var col = _c[_b];\n                if (col instanceof ValueColumn && col.isLoaded()) {\n                    col.onDataUpdate(this._dataRows);\n                }\n            }\n            // since it uses normalized data\n            this.tasks.preComputeData(ranking);\n        }\n        this.fire(ADataProvider.EVENT_DATA_CHANGED, this._dataRows);\n        this.reorderAll.call({ type: 'data' });\n    };\n    LocalDataProvider.prototype.clearData = function () {\n        this.setData([]);\n    };\n    /**\n     * append rows to the dataset\n     * @param data\n     */\n    LocalDataProvider.prototype.appendData = function (data) {\n        for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n            var d = data_1[_i];\n            this._data.push(d);\n            this._dataRows.push({ v: d, i: this._dataRows.length });\n        }\n        this.dataChanged();\n    };\n    LocalDataProvider.prototype.cloneRanking = function (existing) {\n        var ranking = _super.prototype.cloneRanking.call(this, existing);\n        if (this.ooptions.filterGlobally) {\n            ranking.on(\"\".concat(Ranking.EVENT_FILTER_CHANGED, \".reorderAll\"), this.reorderAll);\n        }\n        this.trackRanking(ranking, existing);\n        return ranking;\n    };\n    LocalDataProvider.prototype.trackRanking = function (ranking, existing) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var that = this;\n        ranking.on(\"\".concat(Column.EVENT_DIRTY_CACHES, \".cache\"), function () {\n            var col = this.origin;\n            while (col instanceof Column) {\n                // console.log(col.label, 'dirty data');\n                that.tasks.dirtyColumn(col, 'data');\n                that.tasks.preComputeCol(col);\n                col = col.parent;\n            }\n        });\n        var cols = ranking.flatColumns;\n        var addKey = \"\".concat(Ranking.EVENT_ADD_COLUMN, \".cache\");\n        var removeKey = \"\".concat(Ranking.EVENT_REMOVE_COLUMN, \".cache\");\n        var loadedKey = \"\".concat(ValueColumn.EVENT_DATA_LOADED, \".cache\");\n        var removeCol = function (col) {\n            _this.tasks.dirtyColumn(col, 'data');\n            if (col instanceof CompositeColumn) {\n                col.on(addKey, null);\n                col.on(removeKey, null);\n            }\n            if (col instanceof ValueColumn) {\n                col.on(loadedKey, null);\n            }\n        };\n        var addCol = function (col) {\n            _this.tasks.preComputeCol(col);\n            if (col instanceof CompositeColumn) {\n                col.on(addKey, addCol);\n                col.on(removeKey, removeCol);\n            }\n            if (col instanceof ValueColumn) {\n                col.on(loadedKey, dataLoaded);\n            }\n        };\n        function dataLoaded(_, loaded) {\n            if (!loaded) {\n                return;\n            }\n            if (this.origin instanceof ValueColumn) {\n                this.origin.onDataUpdate(that._dataRows);\n            }\n        }\n        ranking.on(addKey, addCol);\n        ranking.on(removeKey, removeCol);\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            if (col instanceof CompositeColumn) {\n                col.on(addKey, addCol);\n                col.on(removeKey, removeCol);\n            }\n            if (col instanceof ValueColumn) {\n                col.on(loadedKey, dataLoaded);\n            }\n        }\n        if (existing) {\n            var copy = existing.flatColumns;\n            for (var i = 0; i < cols.length; ++i) {\n                this.tasks.copyCache(cols[i], copy[i]);\n            }\n        }\n        this.tasks.preComputeData(ranking);\n    };\n    LocalDataProvider.prototype.patchColumn = function (column) {\n        var c = _super.prototype.patchColumn.call(this, column);\n        if (c instanceof ValueColumn && c.isLoaded()) {\n            c.onDataUpdate(this._dataRows);\n        }\n        return c;\n    };\n    LocalDataProvider.prototype.cleanUpRanking = function (ranking) {\n        if (this.ooptions.filterGlobally) {\n            ranking.on(\"\".concat(Ranking.EVENT_FILTER_CHANGED, \".reorderAll\"), null);\n        }\n        var cols = ranking.flatColumns;\n        var addKey = \"\".concat(Ranking.EVENT_ADD_COLUMN, \".cache\");\n        var removeKey = \"\".concat(Ranking.EVENT_REMOVE_COLUMN, \".cache\");\n        ranking.on(addKey, null);\n        ranking.on(removeKey, null);\n        for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n            var col = cols_2[_i];\n            if (col instanceof CompositeColumn) {\n                col.on(addKey, null);\n                col.on(removeKey, null);\n            }\n        }\n        this.tasks.dirtyRanking(ranking, 'data');\n        _super.prototype.cleanUpRanking.call(this, ranking);\n    };\n    LocalDataProvider.prototype.resolveFilter = function (ranking) {\n        //do the optional filtering step\n        var filter = [];\n        if (this.ooptions.filterGlobally) {\n            for (var _i = 0, _a = this.getRankings(); _i < _a.length; _i++) {\n                var r = _a[_i];\n                if (r.isFiltered()) {\n                    filter.push.apply(filter, r.flatColumns.filter(function (d) { return d.isFiltered(); }));\n                }\n            }\n        }\n        else if (ranking.isFiltered()) {\n            filter.push.apply(filter, ranking.flatColumns.filter(function (d) { return d.isFiltered(); }));\n        }\n        if (this.filter) {\n            filter.push(this.filter);\n        }\n        return filter;\n    };\n    LocalDataProvider.prototype.noSorting = function (ranking) {\n        // initial no sorting required just index mapping\n        var l = this._data.length;\n        var order = createIndexArray(l, l - 1);\n        var index2pos = order.slice();\n        for (var i = 0; i < l; ++i) {\n            order[i] = i;\n            index2pos[i] = i + 1; // shift since default is 0\n        }\n        this.tasks.preCompute(ranking, [{ rows: order, group: defaultGroup }], l - 1);\n        return { groups: [Object.assign({ order: order }, defaultGroup)], index2pos: index2pos };\n    };\n    LocalDataProvider.prototype.createSorter = function (ranking, filter, needsFiltering, needsGrouping, needsSorting) {\n        var _this = this;\n        var groups = new Map();\n        var groupOrder = [];\n        var maxDataIndex = -1;\n        var groupCriteria = ranking.getGroupCriteria();\n        var lookups = needsSorting\n            ? new CompareLookup(this._data.length, true, ranking, this.tasks.valueCache.bind(this.tasks))\n            : undefined;\n        var pushGroup = function (group, r) {\n            var groupKey = group.name.toLowerCase();\n            if (groups.has(groupKey)) {\n                groups.get(groupKey).rows.push(r.i);\n                return;\n            }\n            var s = { group: group, rows: [r.i] };\n            groups.set(groupKey, s);\n            groupOrder.push(s);\n        };\n        var groupCaches = groupCriteria.map(function (c) { return _this.tasks.valueCache(c); });\n        var filterCaches = filter.map(function (c) { return (typeof c === 'function' ? undefined : _this.tasks.valueCache(c)); });\n        var toGroup = groupCriteria.length === 1\n            ? function (r) { return joinGroups([groupCriteria[0].group(r, groupCaches[0] ? groupCaches[0](r.i) : undefined)]); }\n            : function (r) {\n                return joinGroups(groupCriteria.map(function (c, i) { return c.group(r, groupCaches[i] ? groupCaches[i](r.i) : undefined); }));\n            };\n        if (needsFiltering) {\n            // filter, group, sort\n            outer: for (var _i = 0, _a = this._dataRows; _i < _a.length; _i++) {\n                var r = _a[_i];\n                for (var f = 0; f < filter.length; ++f) {\n                    var fc = filter[f];\n                    var c = filterCaches[f];\n                    if ((typeof fc === 'function' && !fc(r)) || (fc instanceof Column && !fc.filter(r, c ? c(r.i) : undefined))) {\n                        continue outer;\n                    }\n                }\n                if (maxDataIndex < r.i) {\n                    maxDataIndex = r.i;\n                }\n                if (lookups) {\n                    lookups.push(r);\n                }\n                pushGroup(toGroup(r), r);\n            }\n            // some default sorting\n            groupOrder.sort(function (a, b) { return a.group.name.toLowerCase().localeCompare(b.group.name.toLowerCase()); });\n            return { maxDataIndex: maxDataIndex, lookups: lookups, groupOrder: groupOrder };\n        }\n        // reuse the existing groups\n        for (var _b = 0, _c = ranking.getGroups(); _b < _c.length; _b++) {\n            var before = _c[_b];\n            var order = before.order;\n            if (!needsGrouping) {\n                var clone = duplicateGroup(before);\n                // reuse in full\n                groupOrder.push({ group: clone, rows: order });\n                if (!lookups) {\n                    maxDataIndex = order.reduce(function (a, b) { return Math.max(a, b); }, maxDataIndex);\n                    continue;\n                }\n                // sort\n                for (var o = 0; o < order.length; ++o) {\n                    var i = order[o];\n                    if (maxDataIndex < i) {\n                        maxDataIndex = i;\n                    }\n                    lookups.push(this._dataRows[i]);\n                }\n                continue;\n            }\n            // group, [sort]\n            for (var o = 0; o < order.length; ++o) {\n                var i = order[o];\n                if (maxDataIndex < i) {\n                    maxDataIndex = i;\n                }\n                var r = this._dataRows[i];\n                if (lookups) {\n                    lookups.push(r);\n                }\n                pushGroup(toGroup(r), r);\n            }\n        }\n        if (needsGrouping) {\n            // some default sorting\n            groupOrder.sort(function (a, b) { return a.group.name.toLowerCase().localeCompare(b.group.name.toLowerCase()); });\n        }\n        return { maxDataIndex: maxDataIndex, lookups: lookups, groupOrder: groupOrder };\n    };\n    LocalDataProvider.prototype.sortGroup = function (g, i, ranking, lookups, groupLookup, singleGroup, maxDataIndex) {\n        var group = g.group;\n        var sortTask = this.tasks.sort(ranking, group, g.rows, singleGroup, maxDataIndex, lookups);\n        // compute sort group value as task\n        var groupSortTask = groupLookup\n            ? this.tasks.groupCompare(ranking, group, g.rows).then(function (r) { return r; })\n            : [];\n        // trigger task for groups to compute for this group\n        return Promise.all([sortTask, groupSortTask]).then(function (_a) {\n            var order = _a[0], groupC = _a[1];\n            if (groupLookup && Array.isArray(groupC)) {\n                groupLookup.pushValues(i, groupC);\n            }\n            return Object.assign(group, { order: order });\n        });\n    };\n    LocalDataProvider.prototype.sortGroups = function (groups, groupLookup, enforceSorting) {\n        // sort groups\n        if (groupLookup) {\n            var groupIndices = groups.map(function (_, i) { return i; });\n            sortComplex(groupIndices, groupLookup.sortOrders);\n            return groupIndices.map(function (i) { return groups[i]; });\n        }\n        if (enforceSorting) {\n            // create a default sorting\n            return groups.sort(function (a, b) { return a.name.localeCompare(b.name); });\n        }\n        return groups;\n    };\n    LocalDataProvider.prototype.index2pos = function (groups, maxDataIndex) {\n        var total = groups.reduce(function (a, b) { return a + b.order.length; }, 1);\n        var index2pos = createIndexArray(maxDataIndex + 1, total);\n        var offset = 1;\n        for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\n            var g = groups_1[_i];\n            // tslint:disable-next-line\n            for (var i = 0; i < g.order.length; i++, offset++) {\n                index2pos[g.order[i]] = offset;\n            }\n        }\n        return { groups: groups, index2pos: index2pos };\n    };\n    LocalDataProvider.prototype.sort = function (ranking, dirtyReason) {\n        var _this = this;\n        var reasons = new Set(dirtyReason);\n        if (this._data.length === 0) {\n            return { groups: [], index2pos: [] };\n        }\n        // console.log(dirtyReason);\n        var filter = this.resolveFilter(ranking);\n        var needsFiltering = reasons.has(EDirtyReason.UNKNOWN) || reasons.has(EDirtyReason.FILTER_CHANGED);\n        var needsGrouping = needsFiltering ||\n            reasons.has(EDirtyReason.GROUP_CRITERIA_CHANGED) ||\n            reasons.has(EDirtyReason.GROUP_CRITERIA_DIRTY);\n        var needsSorting = needsGrouping || reasons.has(EDirtyReason.SORT_CRITERIA_CHANGED) || reasons.has(EDirtyReason.SORT_CRITERIA_DIRTY);\n        var needsGroupSorting = needsGrouping ||\n            reasons.has(EDirtyReason.GROUP_SORT_CRITERIA_CHANGED) ||\n            reasons.has(EDirtyReason.GROUP_SORT_CRITERIA_DIRTY);\n        if (needsFiltering) {\n            this.tasks.dirtyRanking(ranking, 'summary');\n        }\n        else if (needsGrouping) {\n            this.tasks.dirtyRanking(ranking, 'group');\n        }\n        // otherwise the summary and group summaries should still be valid\n        if (filter.length === 0) {\n            // all rows so summary = data\n            this.tasks.copyData2Summary(ranking);\n        }\n        var isGroupedBy = ranking.getGroupCriteria().length > 0;\n        var isSortedBy = ranking.getSortCriteria().length > 0;\n        var isGroupedSortedBy = ranking.getGroupSortCriteria().length > 0;\n        if (!isGroupedBy && !isSortedBy && filter.length === 0) {\n            return this.noSorting(ranking);\n        }\n        var _a = this.createSorter(ranking, filter, needsFiltering, needsGrouping, needsSorting), maxDataIndex = _a.maxDataIndex, lookups = _a.lookups, groupOrder = _a.groupOrder;\n        if (groupOrder.length === 0) {\n            return { groups: [], index2pos: [] };\n        }\n        this.tasks.preCompute(ranking, groupOrder, maxDataIndex);\n        if (groupOrder.length === 1) {\n            var g = groupOrder[0];\n            // not required if: group sort criteria changed -> lookups will be none\n            return this.sortGroup(g, 0, ranking, lookups, undefined, true, maxDataIndex).then(function (group) {\n                return _this.index2pos([group], maxDataIndex);\n            });\n        }\n        var groupLookup = isGroupedSortedBy && needsGroupSorting ? new CompareLookup(groupOrder.length, false, ranking) : undefined;\n        return Promise.all(groupOrder.map(function (g, i) {\n            // not required if: group sort criteria changed -> lookups will be none\n            return _this.sortGroup(g, i, ranking, lookups, groupLookup, false, maxDataIndex);\n        })).then(function (groups) {\n            // not required if: sort criteria changed -> groupLookup will be none\n            var sortedGroups = _this.sortGroups(groups, groupLookup, needsGroupSorting);\n            return _this.index2pos(sortedGroups, maxDataIndex);\n        });\n    };\n    LocalDataProvider.prototype.viewRaw = function (indices) {\n        var _this = this;\n        return mapIndices(indices, function (i) { return _this._data[i] || {}; });\n    };\n    LocalDataProvider.prototype.viewRawRows = function (indices) {\n        return mapIndices(indices, this.mapToDataRow);\n    };\n    LocalDataProvider.prototype.getRow = function (index) {\n        return this._dataRows[index];\n    };\n    LocalDataProvider.prototype.seq = function (indices) {\n        return lazySeq(indices).map(this.mapToDataRow);\n    };\n    LocalDataProvider.prototype.view = function (indices) {\n        return this.viewRaw(indices);\n    };\n    LocalDataProvider.prototype.mappingSample = function (col) {\n        var _this = this;\n        var MAX_SAMPLE = 120; //at most 120 sample lines\n        var l = this._dataRows.length;\n        if (l <= MAX_SAMPLE) {\n            return lazySeq(this._dataRows).map(function (v) { return col.getRawNumber(v); });\n        }\n        //randomly select 500 elements\n        var indices = new Set();\n        for (var i = 0; i < MAX_SAMPLE; ++i) {\n            var j = Math.floor(Math.random() * (l - 1));\n            while (indices.has(j)) {\n                j = Math.floor(Math.random() * (l - 1));\n            }\n            indices.add(j);\n        }\n        return lazySeq(Array.from(indices)).map(function (i) { return col.getRawNumber(_this._dataRows[i]); });\n    };\n    LocalDataProvider.prototype.searchAndJump = function (search, col) {\n        //case insensitive search\n        search = typeof search === 'string' ? search.toLowerCase() : search;\n        var f = typeof search === 'string'\n            ? function (v) { return v.toLowerCase().indexOf(search) >= 0; }\n            : search.test.bind(search);\n        var indices = [];\n        for (var i = 0; i < this._dataRows.length; ++i) {\n            if (f(col.getLabel(this._dataRows[i]))) {\n                indices.push(i);\n            }\n        }\n        this.jumpToNearest(indices);\n    };\n    return LocalDataProvider;\n}(ACommonDataProvider));\nexport default LocalDataProvider;\nfunction toRows(data) {\n    return data.map(function (v, i) { return ({ v: v, i: i }); });\n}\n//# sourceMappingURL=LocalDataProvider.js.map","export var ERenderMode;\n(function (ERenderMode) {\n    ERenderMode[ERenderMode[\"CELL\"] = 0] = \"CELL\";\n    ERenderMode[ERenderMode[\"GROUP\"] = 1] = \"GROUP\";\n    ERenderMode[ERenderMode[\"SUMMARY\"] = 2] = \"SUMMARY\";\n})(ERenderMode || (ERenderMode = {}));\n//# sourceMappingURL=interfaces.js.map","/**\n * number of bins before switching to dense mode\n * @internal\n */\nexport var DENSE_HISTOGRAM = 19;\n/**\n * minimal width of a column to show the label in the header\n * @internal\n */\nexport var MIN_LABEL_WIDTH = 30;\n/**\n * number of milliseconds to wait before a hovered canvas row will be replaced with a DOM one\n * @type {number}\n * @internal\n */\nexport var HOVER_DELAY_SHOW_DETAIL = 500;\nexport var GUESSED_ROW_HEIGHT = 18;\nexport var GUESSES_GROUP_HEIGHT = 40;\n//# sourceMappingURL=constants.js.map","import { MIN_LABEL_WIDTH } from '../constants';\nimport { isMapAbleColumn, DEFAULT_COLOR } from '../model';\nimport { hsl } from 'd3-color';\nimport { cssClass } from '../styles';\n/** @internal */\nexport function noop() {\n    // no op\n}\nexport var noRenderer = {\n    template: \"<div></div>\",\n    update: noop,\n};\n/** @internal */\nexport function setText(node, text) {\n    if (text === undefined) {\n        return node;\n    }\n    //no performance boost if setting the text node directly\n    //const textNode = <Text>node.firstChild;\n    //if (textNode == null) {\n    //  node.appendChild(node.ownerDocument!.createTextNode(text));\n    //} else {\n    //  textNode.data = text;\n    //}\n    if (node.textContent !== text) {\n        node.textContent = text;\n    }\n    return node;\n}\n/**\n * for each item matching the selector execute the callback\n * @param node\n * @param selector\n * @param callback\n * @internal\n */\nexport function forEach(node, selector, callback) {\n    Array.from(node.querySelectorAll(selector)).forEach(callback);\n}\n/** @internal */\nexport function forEachChild(node, callback) {\n    Array.from(node.children).forEach(callback);\n}\n/**\n * matches the columns and the dom nodes representing them\n * @param {HTMLElement} node row\n * @param columns columns to check\n * @internal\n */\nexport function matchColumns(node, columns, ctx) {\n    if (node.childElementCount === 0) {\n        // initial call fast method\n        node.innerHTML = columns.map(function (c) { return c.template; }).join('');\n        var children_1 = Array.from(node.children);\n        columns.forEach(function (col, i) {\n            var childNode = children_1[i];\n            // set attribute for finding again\n            childNode.dataset.columnId = col.column.id;\n            // store current renderer\n            childNode.dataset.renderer = col.rendererId;\n            childNode.classList.add(cssClass(\"renderer-\".concat(col.rendererId)));\n        });\n        return;\n    }\n    function matches(c, i) {\n        //do both match?\n        var n = node.children[i];\n        return n != null && n.dataset.columnId === c.column.id && n.dataset.renderer === c.rendererId;\n    }\n    if (columns.every(matches)) {\n        return; //nothing to do\n    }\n    var idsAndRenderer = new Set(columns.map(function (c) { return \"\".concat(c.column.id, \"@\").concat(c.rendererId); }));\n    //remove all that are not existing anymore\n    forEachChild(node, function (n) {\n        var id = n.dataset.columnId;\n        var renderer = n.dataset.renderer;\n        var idAndRenderer = \"\".concat(id, \"@\").concat(renderer);\n        if (!idsAndRenderer.has(idAndRenderer)) {\n            node.removeChild(n);\n        }\n    });\n    columns.forEach(function (col) {\n        var childNode = node.querySelector(\"[data-column-id=\\\"\".concat(col.column.id, \"\\\"]\"));\n        if (!childNode) {\n            childNode = ctx.asElement(col.template);\n            childNode.dataset.columnId = col.column.id;\n            childNode.dataset.renderer = col.rendererId;\n            childNode.classList.add(cssClass(\"renderer-\".concat(col.rendererId)));\n        }\n        node.appendChild(childNode);\n    });\n}\nexport function wideEnough(col, length) {\n    if (length === void 0) { length = col.labels.length; }\n    var w = col.getWidth();\n    return w / length > MIN_LABEL_WIDTH; // at least 30 pixel\n}\nexport function wideEnoughCat(col) {\n    var w = col.getWidth();\n    return w / col.categories.length > MIN_LABEL_WIDTH; // at least 30 pixel\n}\n// side effect\nvar adaptTextColorToBgColorCache = {};\n/**\n * Adapts the text color for a given background color\n * @param {string} bgColor as `#ff0000`\n * @returns {string} returns `black` or `white` for best contrast\n */\nexport function adaptTextColorToBgColor(bgColor) {\n    var bak = adaptTextColorToBgColorCache[bgColor];\n    if (bak) {\n        return bak;\n    }\n    return (adaptTextColorToBgColorCache[bgColor] = hsl(bgColor).l > 0.5 ? 'black' : 'white');\n}\n/**\n *\n * Adapts the text color for a given background color\n * @param {HTMLElement} node the node containing the text\n * @param {string} bgColor as `#ff0000`\n * @param {string} title the title to render\n * @param {number} width for which percentages of the cell this background applies (0..1)\n */\nexport function adaptDynamicColorToBgColor(node, bgColor, title, width) {\n    var adapt = adaptTextColorToBgColor(bgColor);\n    if (width <= 0.05 || adapt === 'black' || width > 0.9) {\n        // almost empty or full\n        node.style.color = adapt === 'black' || width <= 0.05 ? null : adapt; // null = black\n        // node.classList.remove('lu-gradient-text');\n        // node.style.backgroundImage = null;\n        return;\n    }\n    node.style.color = null;\n    node.innerText = title;\n    var span = node.ownerDocument.createElement('span');\n    span.classList.add(cssClass('gradient-text'));\n    span.style.color = adapt;\n    span.innerText = title;\n    node.appendChild(span);\n}\n/** @internal */\nexport var uniqueId = (function () {\n    // side effect but just within the function itself, so good for the library\n    var idCounter = 0;\n    return function (prefix) { return \"\".concat(prefix).concat((idCounter++).toString(36)); };\n})();\nvar NUM_EXAMPLE_VALUES = 5;\n/** @internal */\nexport function exampleText(col, rows) {\n    var examples = [];\n    rows.every(function (row) {\n        if (col.getValue(row) == null) {\n            return true;\n        }\n        var v = col.getLabel(row);\n        examples.push(v);\n        return examples.length < NUM_EXAMPLE_VALUES;\n    });\n    if (examples.length === 0) {\n        return '';\n    }\n    return \"\".concat(examples.join(', ')).concat(examples.length < rows.length ? ', ...' : '');\n}\n/** @internal */\nexport function multiLevelGridCSSClass(idPrefix, column) {\n    return cssClass(\"stacked-\".concat(idPrefix, \"-\").concat(column.id));\n}\n/** @internal */\nexport function colorOf(col) {\n    if (isMapAbleColumn(col)) {\n        return col.getColorMapping().apply(0);\n    }\n    return DEFAULT_COLOR;\n}\n// side effect\nvar adaptColorCache = {};\nexport var BIG_MARK_LIGHTNESS_FACTOR = 1.1;\nexport var SMALL_MARK_LIGHTNESS_FACTOR = 0.9;\nexport function adaptColor(color, lightnessFactor, saturationFactor) {\n    if (lightnessFactor === void 0) { lightnessFactor = 1; }\n    if (saturationFactor === void 0) { saturationFactor = 1; }\n    var key = \"\".concat(color, \"-\").concat(saturationFactor, \"-\").concat(lightnessFactor);\n    var r = adaptColorCache[key];\n    if (r) {\n        return r;\n    }\n    var hslColor = hsl(color);\n    hslColor.s = Math.max(Math.min(hslColor.s * saturationFactor, 1), 0);\n    hslColor.l = Math.max(Math.min(hslColor.l * lightnessFactor, 1), 0);\n    var result = hslColor.formatHex();\n    adaptColorCache[key] = result;\n    return result;\n}\n//# sourceMappingURL=utils.js.map","import { ActionColumn } from '../model';\nimport { ERenderMode, } from './interfaces';\nimport { forEachChild, noRenderer } from './utils';\nimport { cssClass } from '../styles';\nvar ActionRenderer = /** @class */ (function () {\n    function ActionRenderer() {\n        this.title = 'Default';\n    }\n    ActionRenderer.prototype.canRender = function (col, mode) {\n        return col instanceof ActionColumn && mode !== ERenderMode.SUMMARY;\n    };\n    ActionRenderer.prototype.create = function (col, context) {\n        var actions = col.actions;\n        return {\n            template: \"<div class=\\\"\".concat(cssClass('actions'), \" \").concat(cssClass('hover-only'), \"\\\">\").concat(actions\n                .map(function (a) {\n                return \"<span title='\".concat(context.sanitize(a.name), \"' class='\").concat(context.sanitize(a.className || ''), \"'>\").concat(context.sanitize(a.icon || ''), \"</span>\");\n            })\n                .join(''), \"</div>\"),\n            update: function (n, d) {\n                forEachChild(n, function (ni, i) {\n                    ni.onclick = function (event) {\n                        event.preventDefault();\n                        event.stopPropagation();\n                        setTimeout(function () { return actions[i].action(d); }, 1); // async\n                    };\n                });\n            },\n        };\n    };\n    ActionRenderer.prototype.createGroup = function (col, context) {\n        var actions = col.groupActions;\n        return {\n            template: \"<div class=\\\"\".concat(cssClass('actions'), \" \").concat(cssClass('hover-only'), \"\\\">\").concat(actions\n                .map(function (a) {\n                return \"<span title='\".concat(context.sanitize(a.name), \"' class='\").concat(context.sanitize(a.className || ''), \"'>\").concat(context.sanitize(a.icon || ''), \"</span>\");\n            })\n                .join(''), \"</div>\"),\n            update: function (n, group) {\n                forEachChild(n, function (ni, i) {\n                    ni.onclick = function (event) {\n                        event.preventDefault();\n                        event.stopPropagation();\n                        context.tasks\n                            .groupRows(col, group, 'identity', function (r) { return r; })\n                            .then(function (rows) {\n                            if (typeof rows === 'symbol') {\n                                return;\n                            }\n                            setTimeout(function () { return actions[i].action(group, Array.from(rows)); }, 1); // async\n                        });\n                    };\n                });\n            },\n        };\n    };\n    ActionRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return ActionRenderer;\n}());\nexport default ActionRenderer;\n//# sourceMappingURL=ActionRenderer.js.map","import { AggregateGroupColumn, EAggregationState, defaultGroup, } from '../model';\nimport { AGGREGATE, CANVAS_HEIGHT, cssClass } from '../styles';\nimport { groupParents, toItemMeta, isAlwaysShowingGroupStrategy, hasTopNStrategy, isSummaryGroup, } from '../provider/internal';\nimport { clear } from '../internal';\nfunction preventDefault(event) {\n    event.preventDefault();\n    event.stopPropagation();\n}\nfunction matchNodes(node, length, clazz, addTopN) {\n    if (clazz === void 0) { clazz = 'agg-level'; }\n    if (addTopN === void 0) { addTopN = false; }\n    var doc = node.ownerDocument;\n    var children = Array.from(node.children);\n    if (addTopN) {\n        // top N buttons\n        length = length + 1;\n    }\n    // add missing\n    for (var i = children.length; i < length; ++i) {\n        var child = doc.createElement('div');\n        child.classList.add(cssClass(clazz));\n        children.push(child);\n        node.appendChild(child);\n    }\n    // remove too many\n    for (var _i = 0, _a = children.splice(length, children.length - length); _i < _a.length; _i++) {\n        var r = _a[_i];\n        r.remove();\n    }\n    if (addTopN) {\n        var last = children[children.length - 1];\n        last.classList.remove(cssClass(clazz));\n        last.classList.add(cssClass('agg-all'));\n    }\n    return children;\n}\nfunction renderGroups(node, group, relativeIndex, col, provider) {\n    var strategy = provider.getAggregationStrategy();\n    var ranking = col.findMyRanker();\n    var topNGetter = function (group) { return provider.getTopNAggregated(ranking, group); };\n    var isRow = relativeIndex >= 0;\n    var isLeafGroup = !group.subGroups || group.subGroups.length === 0;\n    var alwaysShowGroup = isAlwaysShowingGroupStrategy(strategy);\n    var isSummary = !isRow && isSummaryGroup(group, strategy, topNGetter);\n    var hasTopN = isSummary && isLeafGroup && hasTopNStrategy(strategy);\n    var parents = groupParents(group, relativeIndex >= 0 ? toItemMeta(relativeIndex, group, provider.getTopNAggregated(ranking, group)) : 'first last');\n    var children = matchNodes(node, parents.length, 'agg-level', hasTopN);\n    var lastParent = parents.length - 1;\n    var _loop_1 = function (i) {\n        var parent_1 = parents[i];\n        var child = children[i];\n        var state = provider.getAggregationState(ranking, parent_1.group);\n        var isLastGroup = i === lastParent;\n        child.dataset.level = String(parents.length - 1 - i); // count backwards\n        if (alwaysShowGroup && (isRow || i < lastParent)) {\n            // inner or last\n            if (!isSummary && (parent_1.meta === 'last' || parent_1.meta === 'first last')) {\n                child.dataset.meta = 'last';\n            }\n            else {\n                delete child.dataset.meta;\n            }\n            child.classList.toggle(cssClass('agg-inner'), isRow && isLastGroup);\n            child.classList.remove(cssClass('agg-expand'), cssClass('agg-collapse'));\n            child.title = '';\n            delete child.onclick;\n            return \"continue\";\n        }\n        var isCollapsed = state === EAggregationState.COLLAPSE;\n        var isFirst = parent_1.meta === 'first' || parent_1.meta === 'first last';\n        var isShowAll = state === EAggregationState.EXPAND;\n        var childTopN = hasTopN && isLastGroup ? children[parents.length] : null;\n        var meta = parent_1.meta;\n        if (isSummary && parent_1.meta === 'first last') {\n            meta = 'first';\n        }\n        if (meta) {\n            child.dataset.meta = meta;\n        }\n        else {\n            delete child.dataset.meta;\n        }\n        child.classList.toggle(cssClass('agg-expand'), isFirst);\n        child.classList.toggle(cssClass('agg-collapse'), isCollapsed);\n        child.title = isFirst ? (isCollapsed ? 'Expand Group' : 'Collapse Group') : '';\n        if (!isFirst) {\n            delete child.onclick;\n        }\n        else {\n            child.onclick = function (evt) {\n                preventDefault(evt);\n                var nextState;\n                switch (strategy) {\n                    case 'group+top+item':\n                        nextState =\n                            state === EAggregationState.COLLAPSE ? EAggregationState.EXPAND_TOP_N : EAggregationState.COLLAPSE;\n                        break;\n                    case 'group':\n                    case 'item':\n                    case 'group+item':\n                    case 'group+item+top':\n                    default:\n                        nextState = state === EAggregationState.COLLAPSE ? EAggregationState.EXPAND : EAggregationState.COLLAPSE;\n                        break;\n                }\n                col.setAggregated(parent_1.group, nextState);\n            };\n        }\n        if (!childTopN) {\n            return \"continue\";\n        }\n        childTopN.dataset.level = String(i); // count upwards\n        childTopN.classList.toggle(cssClass('agg-compress'), isShowAll);\n        childTopN.title = isShowAll ? \"Show Top \".concat(provider.getShowTopN(), \" Only\") : 'Show All';\n        childTopN.onclick = function (evt) {\n            preventDefault(evt);\n            col.setAggregated(parent_1.group, state === EAggregationState.EXPAND ? EAggregationState.EXPAND_TOP_N : EAggregationState.EXPAND);\n        };\n    };\n    for (var i = 0; i < parents.length; ++i) {\n        _loop_1(i);\n    }\n}\nfunction isDummyGroup(group) {\n    return group.parent == null && group.name === defaultGroup.name;\n}\nvar AggregateGroupRenderer = /** @class */ (function () {\n    function AggregateGroupRenderer() {\n        this.title = 'Default';\n    }\n    AggregateGroupRenderer.prototype.canRender = function (col) {\n        return col instanceof AggregateGroupColumn;\n    };\n    AggregateGroupRenderer.prototype.create = function (col, context) {\n        return {\n            template: \"<div></div>\",\n            update: function (node, _row, i, group) {\n                if (isDummyGroup(group)) {\n                    clear(node);\n                    return;\n                }\n                renderGroups(node, group, i, col, context.provider);\n            },\n            render: function (ctx, _row, i, group) {\n                if (isDummyGroup(group)) {\n                    return undefined;\n                }\n                var parents = groupParents(group, toItemMeta(i, group, context.provider.getTopNAggregated(col.findMyRanker(), group)));\n                ctx.fillStyle = AGGREGATE.color;\n                for (var i_1 = 0; i_1 < parents.length; ++i_1) {\n                    ctx.fillRect(AGGREGATE.levelWidth * i_1 + AGGREGATE.levelOffset, 0, AGGREGATE.strokeWidth, CANVAS_HEIGHT);\n                }\n                return parents.some(function (d) { return d.meta != null; });\n            },\n        };\n    };\n    AggregateGroupRenderer.prototype.createGroup = function (col, context) {\n        return {\n            template: \"<div><div class=\\\"\".concat(cssClass('agg-level'), \"\\\"></div></div>\"),\n            update: function (node, group) {\n                renderGroups(node, group, -1, col, context.provider);\n            },\n        };\n    };\n    AggregateGroupRenderer.prototype.createSummary = function (col, context) {\n        return {\n            template: \"<div></div>\",\n            update: function (node) {\n                var ranking = col.findMyRanker();\n                var groups = ranking.getGroups();\n                if (groups.length === 1 && groups[0].name === defaultGroup.name) {\n                    clear(node);\n                    return;\n                }\n                var gparents = groups.map(function (group) { return groupParents(group, 'first last'); });\n                var max = gparents.reduce(function (a, b) { return Math.max(a, b.length); }, Number.NEGATIVE_INFINITY);\n                var children = matchNodes(node, max, 'agg-expand');\n                var _loop_2 = function (i) {\n                    var child = children[i];\n                    var subGroups = gparents.map(function (d) { return (d[i] ? d[i].group : null); }).filter(function (d) { return d != null; });\n                    var isCollapsed = subGroups.every(function (d) { return context.provider.getAggregationState(ranking, d) === EAggregationState.COLLAPSE; });\n                    child.classList.toggle(cssClass('agg-collapse'), isCollapsed);\n                    child.title = isCollapsed ? 'Expand All Groups' : 'Collapse All Groups';\n                    child.onclick = function (evt) {\n                        preventDefault(evt);\n                        context.provider.aggregateAllOf(ranking, isCollapsed ? EAggregationState.EXPAND : EAggregationState.COLLAPSE, subGroups);\n                    };\n                };\n                for (var i = 0; i < max; ++i) {\n                    _loop_2(i);\n                }\n            },\n        };\n    };\n    return AggregateGroupRenderer;\n}());\nexport default AggregateGroupRenderer;\n//# sourceMappingURL=AggregateGroupRenderer.js.map","import { cssClass } from '../styles';\n/** @internal */\nexport var filterMissingText = 'Filter rows containing missing values';\n/** @internal */\nexport function filterMissingMarkup(bakMissing) {\n    return \"<label class=\\\"\".concat(cssClass('checkbox'), \"\\\">\\n    <input type=\\\"checkbox\\\" \").concat(bakMissing ? 'checked=\"checked\"' : '', \">\\n    <span class=\\\"\").concat(cssClass('filter-missing'), \"\\\">\").concat(filterMissingText, \"</span>\\n  </label>\");\n}\n/** @internal */\nexport function filterMissingNumberMarkup(bakMissing, count) {\n    return \"<label class=\\\"\".concat(cssClass('checkbox'), \"\\\">\\n    <input type=\\\"checkbox\\\" \").concat(bakMissing ? 'checked=\"checked\"' : '', \" \").concat(count === 0 ? 'disabled' : '', \">\\n    <span class=\\\"\").concat(cssClass('filter-missing'), \" \").concat(count === 0 ? cssClass('disabled') : '', \"\\\">Filter \").concat(count, \" missing value rows</span>\\n  </label>\");\n}\n/** @internal */\nexport function findFilterMissing(node) {\n    return node.getElementsByClassName(cssClass('filter-missing'))[0]\n        .previousElementSibling;\n}\n/** @internal */\nexport function updateFilterMissingNumberMarkup(element, count) {\n    var checked = element.getElementsByTagName('input')[0];\n    checked.disabled = count === 0;\n    element.lastElementChild.classList.toggle(cssClass('disabled'), count === 0);\n    element.lastElementChild.textContent = \"Filter \".concat(count, \" missing value rows\");\n}\n//# sourceMappingURL=missing.js.map","import { isMissingValue } from '../model';\nimport { CANVAS_HEIGHT, DASH, cssClass } from '../styles';\nexport function renderMissingValue(ctx, width, height, x, y) {\n    if (x === void 0) { x = 0; }\n    if (y === void 0) { y = 0; }\n    var dashX = Math.max(0, x + (width - DASH.width) / 2); // center horizontally\n    var dashY = Math.max(0, y + (height - DASH.height) / 2); // center vertically\n    ctx.fillStyle = DASH.color;\n    ctx.fillRect(dashX, dashY, Math.min(width, DASH.width), Math.min(height, DASH.height));\n}\nexport function renderMissingDOM(node, col, d) {\n    var missing = isMissingValue(col.getValue(d));\n    node.classList.toggle(cssClass('missing'), missing);\n    return missing;\n}\nexport function renderMissingCanvas(ctx, col, d, width, x, y) {\n    if (x === void 0) { x = 0; }\n    if (y === void 0) { y = 0; }\n    var missing = isMissingValue(col.getValue(d));\n    if (missing) {\n        renderMissingValue(ctx, width, CANVAS_HEIGHT, x, y);\n    }\n    return missing;\n}\n//# sourceMappingURL=missing.js.map","import { StringColumn } from '../model';\nimport { filterMissingMarkup, findFilterMissing } from '../ui/missing';\nimport { renderMissingDOM } from './missing';\nimport { setText, exampleText } from './utils';\nimport { cssClass } from '../styles';\nimport { debounce } from '../internal';\n/**\n * renders a string with additional alignment behavior\n * one instance factory shared among strings\n */\nvar StringCellRenderer = /** @class */ (function () {\n    function StringCellRenderer() {\n        this.title = 'Default';\n    }\n    StringCellRenderer.prototype.canRender = function (col) {\n        return col instanceof StringColumn;\n    };\n    StringCellRenderer.prototype.create = function (col, context) {\n        var align = context.sanitize(col.alignment || 'left');\n        return {\n            template: \"<div\".concat(align !== 'left' ? \" class=\\\"\".concat(cssClass(align), \"\\\"\") : '', \"> </div>\"),\n            update: function (n, d) {\n                renderMissingDOM(n, col, d);\n                if (col.escape) {\n                    setText(n, col.getLabel(d));\n                }\n                else {\n                    n.innerHTML = col.getLabel(d);\n                }\n                n.title = n.textContent;\n            },\n        };\n    };\n    StringCellRenderer.prototype.createGroup = function (col, context) {\n        return {\n            template: \"<div> </div>\",\n            update: function (n, group) {\n                return context.tasks\n                    .groupExampleRows(col, group, 'string', function (rows) { return exampleText(col, rows); })\n                    .then(function (text) {\n                    if (typeof text === 'symbol') {\n                        return;\n                    }\n                    n.classList.toggle(cssClass('missing'), !text);\n                    if (col.escape) {\n                        setText(n, text);\n                    }\n                    else {\n                        n.innerHTML = text;\n                        n.title = text;\n                    }\n                });\n            },\n        };\n    };\n    StringCellRenderer.interactiveSummary = function (col, node) {\n        var form = node;\n        var filterMissing = findFilterMissing(node);\n        var input = node.querySelector('input[type=\"text\"]');\n        var isRegex = node.querySelector('input[type=\"checkbox\"]');\n        var isInputFocused = false;\n        var update = function () {\n            var valid = input.value.trim();\n            if (valid.length <= 0) {\n                var filter = filterMissing.checked ? { filter: null, filterMissing: filterMissing.checked } : null;\n                col.setFilter(filter);\n                return;\n            }\n            col.setFilter({\n                filter: isRegex.checked ? new RegExp(input.value) : input.value,\n                filterMissing: filterMissing.checked,\n            });\n        };\n        filterMissing.onchange = update;\n        input.onchange = update;\n        input.oninput = debounce(update, 100);\n        input.onfocus = function () {\n            isInputFocused = true;\n        };\n        input.onblur = function () {\n            isInputFocused = false;\n        };\n        isRegex.onchange = update;\n        form.onsubmit = function (evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            update();\n            return false;\n        };\n        return function (actCol) {\n            // skip update of form fields if search input is currently in focus\n            // otherwise this function sets an old value while typing\n            if (isInputFocused) {\n                return;\n            }\n            col = actCol;\n            var f = col.getFilter() || { filter: null, filterMissing: false };\n            var bak = f.filter;\n            filterMissing.checked = f.filterMissing;\n            input.value = bak instanceof RegExp ? bak.source : bak || '';\n            isRegex.checked = bak instanceof RegExp;\n        };\n    };\n    StringCellRenderer.prototype.createSummary = function (col, context, interactive) {\n        if (!interactive) {\n            return {\n                template: \"<div></div>\",\n                update: function (node) {\n                    var filter = col.getFilter();\n                    node.textContent = filterToString(filter);\n                },\n            };\n        }\n        var f = col.getFilter() || { filter: null, filterMissing: false };\n        var bak = f.filter || '';\n        var update;\n        return {\n            template: \"<form><input type=\\\"text\\\" placeholder=\\\"Filter \".concat(context.sanitize(col.desc.label), \"...\\\" autofocus\\n      list=\\\"\").concat(context.idPrefix).concat(col.id, \"_dl\\\" value=\\\"\").concat(context.sanitize(filterToString(f)), \"\\\">\\n          <label class=\\\"\").concat(cssClass('checkbox'), \"\\\">\\n            <input type=\\\"checkbox\\\" \").concat(bak instanceof RegExp ? 'checked=\"checked\"' : '', \">\\n            <span>Use regular expressions</span>\\n          </label>\\n          \").concat(filterMissingMarkup(f.filterMissing), \"\\n          <datalist id=\\\"\").concat(context.idPrefix).concat(col.id, \"_dl\\\"></datalist></form>\"),\n            update: function (node) {\n                if (!update) {\n                    update = StringCellRenderer.interactiveSummary(col, node);\n                }\n                update(col);\n                var dl = node.querySelector('datalist');\n                // no return here = loading indicator since it won't affect the rendering\n                void context.tasks.summaryStringStats(col).then(function (r) {\n                    if (typeof r === 'symbol') {\n                        return;\n                    }\n                    var summary = r.summary;\n                    matchDataList(dl, summary.topN);\n                });\n            },\n        };\n    };\n    return StringCellRenderer;\n}());\nexport default StringCellRenderer;\n/**\n * @internal\n */\nexport function filterToString(filter) {\n    if (filter == null || !filter.filter) {\n        return '';\n    }\n    if (filter.filter instanceof RegExp) {\n        return filter.filter.source;\n    }\n    return filter.filter;\n}\n/**\n * matches the given stats to a datalist\n * @internal\n */\nexport function matchDataList(node, matches) {\n    var children = Array.from(node.options);\n    // update existing\n    for (var i = 0; i < matches.length; i++) {\n        var m = matches[i];\n        var child = children[i];\n        if (!child) {\n            child = node.ownerDocument.createElement('option');\n            node.appendChild(child);\n        }\n        child.value = m.value;\n        setText(child, m.count > 1 ? \"\".concat(m.value, \" (\").concat(m.count.toLocaleString(), \")\") : m.value);\n    }\n    // remove extra\n    for (var i = children.length - 1; i >= matches.length; i--) {\n        children[i].remove();\n    }\n}\n//# sourceMappingURL=StringCellRenderer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { AnnotateColumn } from '../model';\nimport StringCellRenderer from './StringCellRenderer';\nimport { cssClass } from '../styles';\nvar AnnotationRenderer = /** @class */ (function (_super) {\n    __extends(AnnotationRenderer, _super);\n    function AnnotationRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.title = 'Default';\n        return _this;\n    }\n    AnnotationRenderer.prototype.canRender = function (col) {\n        return _super.prototype.canRender.call(this, col) && col instanceof AnnotateColumn;\n    };\n    AnnotationRenderer.prototype.create = function (col) {\n        return {\n            template: \"<div>\\n        <span></span>\\n        <input class=\\\"\".concat(cssClass('hover-only'), \" \").concat(cssClass('annotate-input'), \"\\\">\\n       </div>\"),\n            update: function (n, d) {\n                var label = n.firstElementChild;\n                var input = n.lastElementChild;\n                input.onchange = function () {\n                    label.textContent = input.value;\n                    col.setValue(d, input.value);\n                };\n                input.onclick = function (event) {\n                    event.stopPropagation();\n                };\n                label.textContent = input.value = col.getLabel(d);\n            },\n        };\n    };\n    return AnnotationRenderer;\n}(StringCellRenderer));\nexport default AnnotationRenderer;\n//# sourceMappingURL=AnnotationRenderer.js.map","import { isMapAbleColumn, DEFAULT_COLOR } from '../model';\nexport function colorOf(col, row, imposer, valueHint) {\n    if (imposer && imposer.color) {\n        return imposer.color(row, valueHint);\n    }\n    if (!row) {\n        if (isMapAbleColumn(col)) {\n            return col.getColorMapping().apply(valueHint != null ? valueHint : 0);\n        }\n        return DEFAULT_COLOR;\n    }\n    return col.getColor(row);\n}\n//# sourceMappingURL=impose.js.map","import { round } from '../internal';\nimport { isNumbersColumn, isNumberColumn, DEFAULT_COLOR } from '../model';\nimport { setText, adaptDynamicColorToBgColor, noRenderer, BIG_MARK_LIGHTNESS_FACTOR, adaptColor } from './utils';\nimport { CANVAS_HEIGHT, cssClass } from '../styles';\nimport { colorOf } from './impose';\nimport { ERenderMode, } from './interfaces';\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\nvar BarCellRenderer = /** @class */ (function () {\n    /**\n     * flag to always render the value\n     * @type {boolean}\n     */\n    function BarCellRenderer(renderValue) {\n        if (renderValue === void 0) { renderValue = false; }\n        this.renderValue = renderValue;\n        this.title = 'Bar';\n    }\n    BarCellRenderer.prototype.canRender = function (col, mode) {\n        return mode === ERenderMode.CELL && isNumberColumn(col) && !isNumbersColumn(col);\n    };\n    BarCellRenderer.prototype.create = function (col, context, imposer) {\n        var width = context.colWidth(col);\n        return {\n            template: \"<div title=\\\"\\\">\\n          <div class=\\\"\".concat(cssClass('bar-label'), \"\\\" style='background-color: \").concat(DEFAULT_COLOR, \"'>\\n            <span \").concat(this.renderValue ? '' : \"class=\\\"\".concat(cssClass('hover-only'), \"\\\"\"), \"></span>\\n          </div>\\n        </div>\"),\n            update: function (n, d) {\n                var value = col.getNumber(d);\n                var missing = renderMissingDOM(n, col, d);\n                var w = Number.isNaN(value) ? 0 : round(value * 100, 2);\n                var title = col.getLabel(d);\n                n.title = title;\n                var bar = n.firstElementChild;\n                bar.style.width = missing ? '100%' : \"\".concat(w, \"%\");\n                var color = adaptColor(colorOf(col, d, imposer, value), BIG_MARK_LIGHTNESS_FACTOR);\n                bar.style.backgroundColor = missing ? null : color;\n                setText(bar.firstElementChild, title);\n                var item = bar.firstElementChild;\n                setText(item, title);\n                adaptDynamicColorToBgColor(item, color || DEFAULT_COLOR, title, w / 100);\n            },\n            render: function (ctx, d) {\n                if (renderMissingCanvas(ctx, col, d, width)) {\n                    return;\n                }\n                var value = col.getNumber(d);\n                ctx.fillStyle = adaptColor(colorOf(col, d, imposer, value) || DEFAULT_COLOR, BIG_MARK_LIGHTNESS_FACTOR);\n                var w = width * value;\n                ctx.fillRect(0, 0, Number.isNaN(w) ? 0 : w, CANVAS_HEIGHT);\n            },\n        };\n    };\n    BarCellRenderer.prototype.createGroup = function () {\n        return noRenderer;\n    };\n    BarCellRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return BarCellRenderer;\n}());\nexport default BarCellRenderer;\n//# sourceMappingURL=BarCellRenderer.js.map","import { renderMissingDOM } from './missing';\nimport { noRenderer, setText } from './utils';\n/**\n * default renderer instance rendering the value as a text\n */\nvar DefaultCellRenderer = /** @class */ (function () {\n    function DefaultCellRenderer() {\n        this.title = 'String';\n        this.groupTitle = 'None';\n        this.summaryTitle = 'None';\n    }\n    DefaultCellRenderer.prototype.canRender = function (_col, _mode) {\n        return true;\n    };\n    DefaultCellRenderer.prototype.create = function (col) {\n        return {\n            template: \"<div> </div>\",\n            update: function (n, d) {\n                renderMissingDOM(n, col, d);\n                var l = col.getLabel(d);\n                setText(n, l);\n                n.title = l;\n            },\n        };\n    };\n    DefaultCellRenderer.prototype.createGroup = function (_col) {\n        return noRenderer;\n    };\n    DefaultCellRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return DefaultCellRenderer;\n}());\nexport { DefaultCellRenderer };\n//# sourceMappingURL=DefaultCellRenderer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BooleanColumn } from '../model';\nimport { DefaultCellRenderer } from './DefaultCellRenderer';\nimport { ERenderMode } from './interfaces';\nimport { cssClass } from '../styles';\nvar BooleanCellRenderer = /** @class */ (function (_super) {\n    __extends(BooleanCellRenderer, _super);\n    function BooleanCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.title = 'Default';\n        return _this;\n    }\n    BooleanCellRenderer.prototype.canRender = function (col, mode) {\n        return col instanceof BooleanColumn && mode === ERenderMode.CELL;\n    };\n    BooleanCellRenderer.prototype.create = function (col) {\n        var r = _super.prototype.create.call(this, col);\n        r.template = \"<div class=\\\"\".concat(cssClass('center'), \"\\\"> </div>\");\n        return r;\n    };\n    return BooleanCellRenderer;\n}(DefaultCellRenderer));\nexport default BooleanCellRenderer;\n//# sourceMappingURL=BooleanCellRenderer.js.map","import { round } from '../internal';\nimport { NumberColumn, isBoxPlotColumn, isNumberColumn, isMapAbleColumn, } from '../model';\nimport { BOX_PLOT, CANVAS_HEIGHT, DOT, cssClass } from '../styles';\nimport { colorOf } from './impose';\nimport { ERenderMode, } from './interfaces';\nimport { renderMissingCanvas } from './missing';\nimport { tasksAll } from '../provider';\nimport { adaptColor, BIG_MARK_LIGHTNESS_FACTOR, SMALL_MARK_LIGHTNESS_FACTOR } from './utils';\nvar BOXPLOT = \"<div title=\\\"\\\">\\n  <div class=\\\"\".concat(cssClass('boxplot-whisker'), \"\\\">\\n    <div class=\\\"\").concat(cssClass('boxplot-box'), \"\\\"></div>\\n    <div class=\\\"\").concat(cssClass('boxplot-median'), \"\\\"></div>\\n    <div class=\\\"\").concat(cssClass('boxplot-mean'), \"\\\"></div>\\n  </div>\\n</div>\");\nvar MAPPED_BOXPLOT = \"<div title=\\\"\\\">\\n  <div class=\\\"\".concat(cssClass('boxplot-whisker'), \"\\\">\\n    <div class=\\\"\").concat(cssClass('boxplot-box'), \"\\\"></div>\\n    <div class=\\\"\").concat(cssClass('boxplot-median'), \"\\\"></div>\\n    <div class=\\\"\").concat(cssClass('boxplot-mean'), \"\\\"></div>\\n  </div>\\n  <span class=\\\"\").concat(cssClass('mapping-hint'), \"\\\"></span><span class=\\\"\").concat(cssClass('mapping-hint'), \"\\\"></span>\\n</div>\");\n/** @internal */\nexport function computeLabel(col, v) {\n    if (v == null) {\n        return '';\n    }\n    var f = col.getNumberFormat();\n    var mean = v.mean != null ? \"mean = \".concat(f(v.mean), \" (dashed line)\\n\") : '';\n    return \"min = \".concat(f(v.min), \"\\nq1 = \").concat(f(v.q1), \"\\nmedian = \").concat(f(v.median), \"\\n\").concat(mean, \"q3 = \").concat(f(v.q3), \"\\nmax = \").concat(f(v.max));\n}\nvar BoxplotCellRenderer = /** @class */ (function () {\n    function BoxplotCellRenderer() {\n        this.title = 'Box Plot';\n    }\n    BoxplotCellRenderer.prototype.canRender = function (col, mode) {\n        return (isBoxPlotColumn(col) && mode === ERenderMode.CELL) || (isNumberColumn(col) && mode !== ERenderMode.CELL);\n    };\n    BoxplotCellRenderer.prototype.create = function (col, context, imposer) {\n        var sortMethod = col.getSortMethod();\n        var sortedByMe = col.isSortedByMe().asc !== undefined;\n        var width = context.colWidth(col);\n        return {\n            template: BOXPLOT,\n            update: function (n, d) {\n                var data = col.getBoxPlotData(d);\n                n.classList.toggle(cssClass('missing'), !data);\n                if (!data) {\n                    return;\n                }\n                var label = col.getRawBoxPlotData(d);\n                renderDOMBoxPlot(col, n, data, label, sortedByMe ? sortMethod : '', colorOf(col, d, imposer));\n            },\n            render: function (ctx, d) {\n                if (renderMissingCanvas(ctx, col, d, width)) {\n                    return;\n                }\n                // Rectangle\n                var data = col.getBoxPlotData(d);\n                if (!data) {\n                    return;\n                }\n                var scaled = {\n                    min: data.min * width,\n                    median: data.median * width,\n                    mean: data.mean != null ? data.mean * width : undefined,\n                    q1: data.q1 * width,\n                    q3: data.q3 * width,\n                    max: data.max * width,\n                    outlier: data.outlier ? data.outlier.map(function (d) { return d * width; }) : undefined,\n                    whiskerLow: data.whiskerLow != null ? data.whiskerLow * width : undefined,\n                    whiskerHigh: data.whiskerHigh != null ? data.whiskerHigh * width : undefined,\n                };\n                renderBoxPlot(ctx, scaled, sortedByMe ? sortMethod : '', colorOf(col, d, imposer), CANVAS_HEIGHT, 0);\n            },\n        };\n    };\n    BoxplotCellRenderer.prototype.createGroup = function (col, context, imposer) {\n        var sort = col instanceof NumberColumn && col.isGroupSortedByMe().asc !== undefined ? col.getSortMethod() : '';\n        return {\n            template: BOXPLOT,\n            update: function (n, group) {\n                return tasksAll([\n                    context.tasks.groupBoxPlotStats(col, group, false),\n                    context.tasks.groupBoxPlotStats(col, group, true),\n                ]).then(function (data) {\n                    if (typeof data === 'symbol') {\n                        return;\n                    }\n                    // render\n                    var isMissing = data == null ||\n                        data[0] == null ||\n                        data[0].group.count === 0 ||\n                        data[0].group.count === data[0].group.missing;\n                    n.classList.toggle(cssClass('missing'), isMissing);\n                    if (isMissing) {\n                        return;\n                    }\n                    renderDOMBoxPlot(col, n, data[0].group, data[1].group, sort, colorOf(col, null, imposer));\n                });\n            },\n        };\n    };\n    BoxplotCellRenderer.prototype.createSummary = function (col, context, _interactive, imposer) {\n        return {\n            template: isMapAbleColumn(col) ? MAPPED_BOXPLOT : BOXPLOT,\n            update: function (n) {\n                return tasksAll([\n                    context.tasks.summaryBoxPlotStats(col, false),\n                    context.tasks.summaryBoxPlotStats(col, true),\n                ]).then(function (data) {\n                    if (typeof data === 'symbol') {\n                        return;\n                    }\n                    var isMissing = data == null ||\n                        data[0] == null ||\n                        data[0].summary.count === 0 ||\n                        data[0].summary.count === data[0].summary.missing;\n                    n.classList.toggle(cssClass('missing'), isMissing);\n                    if (isMissing) {\n                        return;\n                    }\n                    var mappedSummary = data[0].summary;\n                    var rawSummary = data[1].summary;\n                    var sort = col instanceof NumberColumn && col.isGroupSortedByMe().asc !== undefined ? col.getSortMethod() : '';\n                    if (isMapAbleColumn(col)) {\n                        var range_1 = col.getRange();\n                        Array.from(n.getElementsByTagName('span')).forEach(function (d, i) { return (d.textContent = range_1[i]); });\n                    }\n                    renderDOMBoxPlot(col, n, mappedSummary, rawSummary, sort, colorOf(col, null, imposer), isMapAbleColumn(col));\n                });\n            },\n        };\n    };\n    return BoxplotCellRenderer;\n}());\nexport default BoxplotCellRenderer;\nfunction renderDOMBoxPlot(col, n, data, label, sort, color, hasRange) {\n    if (hasRange === void 0) { hasRange = false; }\n    n.title = computeLabel(col, label);\n    var whiskers = n.firstElementChild;\n    var box = whiskers.firstElementChild;\n    var median = box.nextElementSibling;\n    var mean = whiskers.lastElementChild;\n    var leftWhisker = data.whiskerLow != null ? data.whiskerLow : Math.max(data.q1 - 1.5 * (data.q3 - data.q1), data.min);\n    var rightWhisker = data.whiskerHigh != null ? data.whiskerHigh : Math.min(data.q3 + 1.5 * (data.q3 - data.q1), data.max);\n    whiskers.style.left = \"\".concat(round(leftWhisker * 100, 2), \"%\");\n    var range = rightWhisker - leftWhisker;\n    whiskers.style.width = \"\".concat(round(range * 100, 2), \"%\");\n    //relative within the whiskers\n    box.style.left = \"\".concat(round(((data.q1 - leftWhisker) / range) * 100, 2), \"%\");\n    box.style.width = \"\".concat(round(((data.q3 - data.q1) / range) * 100, 2), \"%\");\n    box.style.backgroundColor = adaptColor(color, BIG_MARK_LIGHTNESS_FACTOR);\n    //relative within the whiskers\n    median.style.left = \"\".concat(round(((data.median - leftWhisker) / range) * 100, 2), \"%\");\n    if (data.mean != null) {\n        mean.style.left = \"\".concat(round(((data.mean - leftWhisker) / range) * 100, 2), \"%\");\n        mean.style.display = null;\n    }\n    else {\n        mean.style.display = 'none';\n    }\n    // match lengths\n    var outliers = Array.from(n.children).slice(1, hasRange ? -2 : undefined);\n    var numOutliers = data.outlier ? data.outlier.length : 0;\n    outliers.splice(numOutliers, outliers.length - numOutliers).forEach(function (v) { return v.remove(); });\n    whiskers.dataset.sort = sort;\n    if (!data.outlier || numOutliers === 0) {\n        return;\n    }\n    for (var i = outliers.length; i < numOutliers; ++i) {\n        var p = n.ownerDocument.createElement('div');\n        p.classList.add(cssClass('boxplot-outlier'));\n        outliers.unshift(p);\n        whiskers.insertAdjacentElement('afterend', p);\n    }\n    data.outlier.forEach(function (v, i) {\n        delete outliers[i].dataset.sort;\n        outliers[i].style.left = \"\".concat(round(v * 100, 2), \"%\");\n    });\n    if (sort === 'min' && data.outlier[0] <= leftWhisker) {\n        // first outliers is the min\n        whiskers.dataset.sort = '';\n        outliers[0].dataset.sort = 'min';\n        if (outliers.length > 1) {\n            // append at the end of the DOM to be on top\n            outliers[outliers.length - 1].insertAdjacentElement('afterend', outliers[0]);\n        }\n    }\n    else if (sort === 'max' && data.outlier[outliers.length - 1] >= rightWhisker) {\n        // last outlier is the max\n        whiskers.dataset.sort = '';\n        outliers[outliers.length - 1].dataset.sort = 'max';\n    }\n}\nfunction renderBoxPlot(ctx, box, sort, color, height, topPadding) {\n    var left = box.whiskerLow != null ? box.whiskerLow : Math.max(box.q1 - 1.5 * (box.q3 - box.q1), box.min);\n    var right = box.whiskerHigh != null ? box.whiskerHigh : Math.min(box.q3 + 1.5 * (box.q3 - box.q1), box.max);\n    ctx.fillStyle = adaptColor(color || BOX_PLOT.box, BIG_MARK_LIGHTNESS_FACTOR);\n    ctx.strokeStyle = adaptColor(BOX_PLOT.stroke, SMALL_MARK_LIGHTNESS_FACTOR);\n    ctx.beginPath();\n    ctx.rect(box.q1, 0, box.q3 - box.q1, height);\n    ctx.fill();\n    ctx.stroke();\n    //Line\n    var bottomPos = height - topPadding;\n    var middlePos = height / 2;\n    ctx.beginPath();\n    ctx.moveTo(left, middlePos);\n    ctx.lineTo(box.q1, middlePos);\n    ctx.moveTo(left, topPadding);\n    ctx.lineTo(left, bottomPos);\n    ctx.moveTo(box.median, 0);\n    ctx.lineTo(box.median, height);\n    ctx.moveTo(box.q3, middlePos);\n    ctx.lineTo(right, middlePos);\n    ctx.moveTo(right, topPadding);\n    ctx.lineTo(right, bottomPos);\n    ctx.stroke();\n    ctx.fill();\n    if (sort !== '') {\n        ctx.strokeStyle = BOX_PLOT.sort;\n        ctx.beginPath();\n        ctx.moveTo(box[sort], topPadding);\n        ctx.lineTo(box[sort], height - topPadding);\n        ctx.stroke();\n        ctx.fill();\n    }\n    if (!box.outlier) {\n        return;\n    }\n    ctx.fillStyle = BOX_PLOT.outlier;\n    box.outlier.forEach(function (v) {\n        // currently dots with 3px\n        ctx.fillRect(Math.max(v - DOT.size / 2, 0), middlePos - DOT.size / 2, DOT.size, DOT.size);\n    });\n}\n//# sourceMappingURL=BoxplotCellRenderer.js.map","import { hsl } from 'd3-color';\nimport { isNumbersColumn, isNumberColumn, isMapAbleColumn, DEFAULT_COLOR, SolidColorFunction, } from '../model';\nimport { CANVAS_HEIGHT, cssClass } from '../styles';\nimport { colorOf } from './impose';\nimport { ERenderMode, } from './interfaces';\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\nimport { noRenderer, setText } from './utils';\nexport function toHeatMapColor(v, row, col, imposer) {\n    if (v == null || Number.isNaN(v)) {\n        v = 1; // max = brightest\n    }\n    if (imposer || !isMapAbleColumn(col)) {\n        //hsl space encoding, encode in lightness\n        var color = hsl(colorOf(col, row, imposer, v) || DEFAULT_COLOR);\n        color.l = 1 - v; // largest value = darkest color\n        return color.toString();\n    }\n    var map = col.getColorMapping();\n    var valueColor = map.apply(v);\n    if (map instanceof SolidColorFunction) {\n        //hsl space encoding, encode in lightness\n        var color = hsl(valueColor);\n        color.l = 1 - v; // largest value = darkest color\n        return color.toString();\n    }\n    // some custom logic that maps to another value\n    return valueColor;\n}\nvar BrightnessCellRenderer = /** @class */ (function () {\n    function BrightnessCellRenderer() {\n        this.title = 'Brightness';\n    }\n    BrightnessCellRenderer.prototype.canRender = function (col, mode) {\n        return isNumberColumn(col) && mode === ERenderMode.CELL && !isNumbersColumn(col);\n    };\n    BrightnessCellRenderer.prototype.create = function (col, context, imposer) {\n        var width = context.colWidth(col);\n        return {\n            template: \"<div title=\\\"\\\">\\n        <div class=\\\"\".concat(cssClass('cat-color'), \"\\\" style=\\\"background-color: \").concat(DEFAULT_COLOR, \"\\\"></div><div class=\\\"\").concat(cssClass('cat-label'), \"\\\"> </div>\\n      </div>\"),\n            update: function (n, d) {\n                var missing = renderMissingDOM(n, col, d);\n                n.title = col.getLabel(d);\n                n.firstElementChild.style.backgroundColor = missing\n                    ? null\n                    : toHeatMapColor(col.getNumber(d), d, col, imposer);\n                setText(n.lastElementChild, n.title);\n            },\n            render: function (ctx, d) {\n                if (renderMissingCanvas(ctx, col, d, width)) {\n                    return;\n                }\n                ctx.fillStyle = toHeatMapColor(col.getNumber(d), d, col, imposer);\n                ctx.fillRect(0, 0, width, CANVAS_HEIGHT);\n            },\n        };\n    };\n    BrightnessCellRenderer.prototype.createGroup = function () {\n        return noRenderer;\n    };\n    BrightnessCellRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return BrightnessCellRenderer;\n}());\nexport default BrightnessCellRenderer;\n//# sourceMappingURL=BrightnessCellRenderer.js.map","import { DENSE_HISTOGRAM } from '../constants';\nimport { round } from '../internal';\nimport { OrdinalColumn, isCategoricalColumn, isCategoricalLikeColumn, CategoricalColumn, SetColumn, BooleanColumn, } from '../model';\nimport { CANVAS_HEIGHT, cssClass, FILTERED_OPACITY } from '../styles';\nimport { filterMissingNumberMarkup, updateFilterMissingNumberMarkup } from '../ui/missing';\nimport { ERenderMode, } from './interfaces';\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\nimport { setText, wideEnough, forEach } from './utils';\nimport { color } from 'd3-color';\nvar CategoricalCellRenderer = /** @class */ (function () {\n    function CategoricalCellRenderer() {\n        this.title = 'Color & Label';\n        this.groupTitle = 'Histogram';\n    }\n    CategoricalCellRenderer.prototype.canRender = function (col, mode) {\n        return isCategoricalLikeColumn(col) && (mode !== ERenderMode.CELL || isCategoricalColumn(col));\n    };\n    CategoricalCellRenderer.prototype.create = function (col, context) {\n        var width = context.colWidth(col);\n        return {\n            template: \"<div>\\n        <div class=\\\"\".concat(cssClass('cat-color'), \"\\\"></div><div class=\\\"\").concat(cssClass('cat-label'), \"\\\"></div>\\n      </div>\"),\n            update: function (n, d) {\n                renderMissingDOM(n, col, d);\n                var v = col.getCategory(d);\n                n.firstElementChild.style.backgroundColor = v ? col.getColor(d) : null;\n                setText(n.lastElementChild, col.getLabel(d));\n            },\n            render: function (ctx, d) {\n                if (renderMissingCanvas(ctx, col, d, width)) {\n                    return;\n                }\n                var v = col.getCategory(d);\n                ctx.fillStyle = v ? col.getColor(d) : '';\n                ctx.fillRect(0, 0, width, CANVAS_HEIGHT);\n            },\n        };\n    };\n    CategoricalCellRenderer.prototype.createGroup = function (col, context) {\n        var _a = hist(col, false, context.sanitize), template = _a.template, update = _a.update, matchBins = _a.matchBins;\n        return {\n            template: \"\".concat(template, \"</div>\"),\n            update: function (n, group) {\n                matchBins(n);\n                return context.tasks.groupCategoricalStats(col, group).then(function (r) {\n                    if (typeof r === 'symbol') {\n                        return;\n                    }\n                    var isMissing = !r || r.group == null || r.group.count === 0 || r.group.count === r.group.missing;\n                    n.classList.toggle(cssClass('missing'), isMissing);\n                    if (isMissing) {\n                        return;\n                    }\n                    update(n, r.group);\n                });\n            },\n        };\n    };\n    CategoricalCellRenderer.prototype.createSummary = function (col, context, interactive) {\n        return col instanceof CategoricalColumn ||\n            col instanceof OrdinalColumn ||\n            col instanceof SetColumn ||\n            col instanceof BooleanColumn\n            ? interactiveSummary(col, context, interactive)\n            : staticSummary(col, context, interactive);\n    };\n    return CategoricalCellRenderer;\n}());\nexport default CategoricalCellRenderer;\nfunction staticSummary(col, context, interactive) {\n    var _a = hist(col, interactive, context.sanitize), template = _a.template, update = _a.update;\n    return {\n        template: \"\".concat(template, \"</div>\"),\n        update: function (n) {\n            return context.tasks.summaryCategoricalStats(col).then(function (r) {\n                if (typeof r === 'symbol') {\n                    return;\n                }\n                var isMissing = !r || r.summary == null || r.summary.count === 0 || r.summary.count === r.summary.missing;\n                n.classList.toggle(cssClass('missing'), isMissing);\n                if (isMissing) {\n                    return;\n                }\n                update(n, r.summary);\n            });\n        },\n    };\n}\nfunction interactiveSummary(col, context, interactive) {\n    var _a = hist(col, interactive || wideEnough(col), context.sanitize), template = _a.template, update = _a.update, matchBins = _a.matchBins;\n    var filterUpdate;\n    return {\n        template: \"\".concat(template).concat(interactive ? filterMissingNumberMarkup(false, 0) : '', \"</div>\"),\n        update: function (n) {\n            n.classList.toggle(cssClass('histogram-i'), interactive);\n            var matchedBins = matchBins(n);\n            if (!filterUpdate || matchedBins) {\n                filterUpdate = interactiveHist(col, n);\n            }\n            return context.tasks.summaryCategoricalStats(col).then(function (r) {\n                if (typeof r === 'symbol') {\n                    return;\n                }\n                var summary = r.summary, data = r.data;\n                filterUpdate(interactive && data ? data.missing : summary ? summary.missing : 0, col);\n                var isMissing = !r || r.summary == null || r.summary.count === 0 || r.summary.count === r.summary.missing;\n                n.classList.toggle(cssClass('missing'), isMissing);\n                if (isMissing) {\n                    return;\n                }\n                update(n, summary, interactive ? data : undefined);\n            });\n        },\n    };\n}\nfunction hist(col, showLabels, sanitize) {\n    var createBin = function (c, color) {\n        return \"<div class=\\\"\".concat(cssClass('histogram-bin'), \"\\\" title=\\\"\").concat(sanitize(c.label), \": 0\\\" data-cat=\\\"\").concat(sanitize(c.name), \"\\\" \").concat(showLabels ? \"data-title=\\\"\".concat(sanitize(c.label), \"\\\"\") : '', \"><div style=\\\"height: 0; background-color: \").concat(color, \"\\\"></div></div>\");\n    };\n    return {\n        template: (function () {\n            var mapping = col.getColorMapping();\n            var bins = col.categories.map(function (c) { return createBin(c, mapping.apply(c)); }).join('');\n            return \"<div class=\\\"\".concat(cssClass('histogram'), \" \").concat(col.categories.length > DENSE_HISTOGRAM ? cssClass('dense') : '', \"\\\">\").concat(bins); // no closing div to be able to append things\n        })(),\n        matchBins: function (n) {\n            // matches bins to current categories, since they can change now\n            var categories = col.categories;\n            var mapping = col.getColorMapping();\n            n.classList.toggle(cssClass('dense'), categories.length > DENSE_HISTOGRAM);\n            // match the histogram bins to the current categories\n            var bins = Array.from(n.querySelectorAll('[data-cat]'));\n            var lastBin = null;\n            var changed = false;\n            for (var _i = 0, categories_1 = categories; _i < categories_1.length; _i++) {\n                var category = categories_1[_i];\n                var bin = bins[0];\n                if (bin && bin.dataset.cat === category.name) {\n                    lastBin = bin;\n                    bins.shift(); // remove first since handled\n                    continue;\n                }\n                // oh no\n                changed = true;\n                if (lastBin) {\n                    lastBin.insertAdjacentHTML('afterend', createBin(category, mapping.apply(category)));\n                    bin = lastBin.nextElementSibling;\n                }\n                else {\n                    n.insertAdjacentHTML('afterbegin', createBin(category, mapping.apply(category)));\n                    bin = n.firstElementChild;\n                }\n                lastBin = bin;\n            }\n            for (var _a = 0, bins_1 = bins; _a < bins_1.length; _a++) {\n                var toRemove = bins_1[_a];\n                // delete extra bins\n                changed = true;\n                toRemove.remove();\n            }\n            return changed;\n        },\n        update: function (n, hist, gHist) {\n            var mapping = col.getColorMapping();\n            var selected = col.categories.map(function (d) {\n                var c = color(mapping.apply(d));\n                c.opacity = FILTERED_OPACITY;\n                return c.toString();\n            });\n            var maxBin = gHist ? gHist.maxBin : hist.maxBin;\n            forEach(n, '[data-cat]', function (d, i) {\n                var cat = col.categories[i];\n                var count = hist.hist[i].count;\n                var inner = d.firstElementChild;\n                if (gHist) {\n                    var gCount = gHist.hist[i].count;\n                    d.title = \"\".concat(cat.label, \": \").concat(count, \" of \").concat(gCount);\n                    inner.style.height = \"\".concat(round((gCount * 100) / maxBin, 2), \"%\");\n                    var relY = 100 - round((count * 100) / gCount, 2);\n                    inner.style.background =\n                        relY === 0\n                            ? mapping.apply(cat)\n                            : relY === 100\n                                ? selected[i]\n                                : \"linear-gradient(\".concat(selected[i], \" \").concat(relY, \"%, \").concat(mapping.apply(cat), \" \").concat(relY, \"%, \").concat(mapping.apply(cat), \" 100%)\");\n                }\n                else {\n                    d.title = \"\".concat(col.categories[i].label, \": \").concat(count);\n                    var inner_1 = d.firstElementChild;\n                    inner_1.style.height = \"\".concat(Math.round((count * 100) / maxBin), \"%\");\n                    inner_1.style.background = mapping.apply(cat);\n                }\n            });\n        },\n    };\n}\nfunction setCategoricalFilter(col, filter, filterMissing) {\n    if (col instanceof SetColumn) {\n        var f = col.getFilter();\n        var mode = f ? f.mode : undefined;\n        col.setFilter({\n            filter: filter,\n            filterMissing: filterMissing,\n            mode: mode,\n        });\n    }\n    else {\n        col.setFilter({\n            filter: filter,\n            filterMissing: filterMissing,\n        });\n    }\n}\n/** @internal */\nexport function interactiveHist(col, node) {\n    var bins = Array.from(node.querySelectorAll('[data-cat]'));\n    var markFilter = function (bin, cat, value) {\n        // update filter highlight eagerly for better user feedback\n        var inner = bin.firstElementChild;\n        var base = col.getColorMapping().apply(cat);\n        if (value) {\n            inner.style.background = base;\n            return;\n        }\n        var c = color(base);\n        c.opacity = FILTERED_OPACITY;\n        inner.style.background = c.toString();\n    };\n    bins.forEach(function (bin, i) {\n        var cat = col.categories[i];\n        bin.onclick = function (evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            // toggle filter\n            var old = col.getFilter();\n            if (old == null || !Array.isArray(old.filter)) {\n                // deselect\n                markFilter(bin, cat, false);\n                var included = col.categories.slice();\n                included.splice(i, 1);\n                setCategoricalFilter(col, included.map(function (d) { return d.name; }), old ? old.filterMissing : false);\n                return;\n            }\n            var filter = old.filter.slice();\n            var contained = filter.indexOf(cat.name);\n            if (contained >= 0) {\n                // remove\n                filter.splice(contained, 1);\n                markFilter(bin, cat, false);\n            }\n            else {\n                // readd\n                filter.push(cat.name);\n                markFilter(bin, cat, true);\n            }\n            if (!old.filterMissing && filter.length === col.categories.length) {\n                // dummy filter\n                col.setFilter(null);\n                return;\n            }\n            setCategoricalFilter(col, filter, old.filterMissing);\n        };\n    });\n    var filterMissing = node.getElementsByTagName('input')[0];\n    if (filterMissing) {\n        filterMissing.onchange = function () {\n            // toggle filter\n            var v = filterMissing.checked;\n            var old = col.getFilter();\n            if (old == null) {\n                if (v) {\n                    setCategoricalFilter(col, col.categories.map(function (d) { return d.name; }), v);\n                }\n                else {\n                    col.setFilter(null);\n                }\n            }\n            else if (!v && Array.isArray(old.filter) && old.filter.length === col.categories.length) {\n                // dummy\n                col.setFilter(null);\n            }\n            else {\n                setCategoricalFilter(col, old.filter, v);\n            }\n        };\n    }\n    return function (missing, actCol) {\n        col = actCol;\n        var f = col.getFilter();\n        if (filterMissing) {\n            filterMissing.checked = f != null && f.filterMissing;\n            updateFilterMissingNumberMarkup(filterMissing.parentElement, missing);\n        }\n    };\n}\n//# sourceMappingURL=CategoricalCellRenderer.js.map","import { isCategoricalsColumn } from '../model';\nimport { toMostFrequentCategoricals } from '../model/internalCategorical';\nimport { CANVAS_HEIGHT, cssClass } from '../styles';\nimport { renderMissingDOM, renderMissingValue } from './missing';\nimport { noop, wideEnough } from './utils';\nimport { GUESSED_ROW_HEIGHT } from '../constants';\nvar CategoricalHeatmapCellRenderer = /** @class */ (function () {\n    function CategoricalHeatmapCellRenderer() {\n        this.title = 'Heatmap';\n    }\n    CategoricalHeatmapCellRenderer.prototype.canRender = function (col) {\n        return isCategoricalsColumn(col) && Boolean(col.dataLength);\n    };\n    CategoricalHeatmapCellRenderer.prototype.createContext = function (col, context) {\n        var width = context.colWidth(col);\n        var cellDimension = width / col.dataLength;\n        var labels = col.labels;\n        var render = function (ctx, data, height) {\n            data.forEach(function (d, j) {\n                var x = j * cellDimension;\n                if (d == null) {\n                    renderMissingValue(ctx, cellDimension, height, x, 0);\n                    return;\n                }\n                ctx.fillStyle = d.color;\n                ctx.fillRect(x, 0, cellDimension, height);\n            });\n        };\n        return {\n            template: \"<canvas height=\\\"\".concat(GUESSED_ROW_HEIGHT, \"\\\" title=\\\"\\\"></canvas>\"),\n            render: render,\n            width: width,\n            mover: function (n, values) { return function (evt) {\n                var percent = evt.offsetX / width;\n                var index = Math.max(0, Math.min(col.dataLength - 1, Math.floor(percent * (col.dataLength - 1) + 0.5)));\n                n.title = \"\".concat(labels[index], \": \").concat(values[index]);\n            }; },\n        };\n    };\n    CategoricalHeatmapCellRenderer.prototype.create = function (col, context) {\n        var _a = this.createContext(col, context), template = _a.template, render = _a.render, mover = _a.mover, width = _a.width;\n        return {\n            template: template,\n            update: function (n, d) {\n                var ctx = n.getContext('2d');\n                ctx.canvas.width = width;\n                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n                if (renderMissingDOM(n, col, d)) {\n                    return;\n                }\n                n.onmousemove = mover(n, col.getLabels(d));\n                n.onmouseleave = function () { return (n.title = ''); };\n                render(ctx, col.getCategories(d), GUESSED_ROW_HEIGHT);\n            },\n            render: function (ctx, d) {\n                render(ctx, col.getCategories(d), CANVAS_HEIGHT);\n            },\n        };\n    };\n    CategoricalHeatmapCellRenderer.prototype.createGroup = function (col, context) {\n        var _this = this;\n        var _a = this.createContext(col, context), template = _a.template, render = _a.render, mover = _a.mover, width = _a.width;\n        return {\n            template: template,\n            update: function (n, group) {\n                return context.tasks\n                    .groupRows(col, group, _this.title, function (rows) { return toMostFrequentCategoricals(rows, col); })\n                    .then(function (data) {\n                    if (typeof data === 'symbol') {\n                        return;\n                    }\n                    var ctx = n.getContext('2d');\n                    ctx.canvas.width = width;\n                    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n                    var isMissing = !data || data.length === 0 || data.every(function (d) { return d == null; });\n                    n.classList.toggle(cssClass('missing'), isMissing);\n                    if (isMissing) {\n                        return;\n                    }\n                    n.onmousemove = mover(n, data.map(function (d) { return (d ? d.label : 'missing'); }));\n                    n.onmouseleave = function () { return (n.title = ''); };\n                    render(ctx, data, GUESSED_ROW_HEIGHT);\n                });\n            },\n        };\n    };\n    CategoricalHeatmapCellRenderer.prototype.createSummary = function (col, context) {\n        var labels = col.labels.slice();\n        while (labels.length > 0 && !wideEnough(col, labels.length)) {\n            labels = labels.filter(function (_, i) { return i % 2 === 0; }); // even\n        }\n        var templateRows = \"<div class=\\\"\".concat(cssClass('heatmap'), \"\\\">\");\n        for (var _i = 0, labels_1 = labels; _i < labels_1.length; _i++) {\n            var label = labels_1[_i];\n            templateRows += \"<div class=\\\"\".concat(cssClass('heatmap-cell'), \"\\\"  title=\\\"\").concat(context.sanitize(label), \"\\\" data-title=\\\"\").concat(context.sanitize(label), \"\\\"></div>\");\n        }\n        templateRows += '</div>';\n        return {\n            template: templateRows,\n            update: noop,\n        };\n    };\n    return CategoricalHeatmapCellRenderer;\n}());\nexport default CategoricalHeatmapCellRenderer;\n//# sourceMappingURL=CategoricalHeatmapCellRenderer.js.map","import { round } from '../internal';\nimport { CategoricalColumn, OrdinalColumn, isCategoricalColumn, DEFAULT_COLOR, } from '../model';\nimport { filterMissingNumberMarkup } from '../ui/missing';\nimport { interactiveHist } from './CategoricalCellRenderer';\nimport { ERenderMode, } from './interfaces';\nimport { noRenderer, adaptTextColorToBgColor } from './utils';\nimport { cssClass, FILTERED_OPACITY } from '../styles';\nimport { color } from 'd3-color';\nvar CategoricalStackedDistributionlCellRenderer = /** @class */ (function () {\n    function CategoricalStackedDistributionlCellRenderer() {\n        this.title = 'Distribution Bar';\n    }\n    CategoricalStackedDistributionlCellRenderer.prototype.canRender = function (col, mode) {\n        return isCategoricalColumn(col) && mode !== ERenderMode.CELL;\n    };\n    CategoricalStackedDistributionlCellRenderer.prototype.create = function () {\n        return noRenderer;\n    };\n    CategoricalStackedDistributionlCellRenderer.prototype.createGroup = function (col, context) {\n        var _a = stackedBar(col, context.sanitize), template = _a.template, update = _a.update;\n        return {\n            template: \"\".concat(template, \"</div>\"),\n            update: function (n, group) {\n                return context.tasks.groupCategoricalStats(col, group).then(function (r) {\n                    if (typeof r === 'symbol') {\n                        return;\n                    }\n                    var isMissing = !r || r.group == null || r.group.count === 0 || r.group.count === r.group.missing;\n                    n.classList.toggle(cssClass('missing'), isMissing);\n                    if (isMissing) {\n                        return;\n                    }\n                    update(n, r.group);\n                });\n            },\n        };\n    };\n    CategoricalStackedDistributionlCellRenderer.prototype.createSummary = function (col, context, interactive) {\n        return col instanceof CategoricalColumn || col instanceof OrdinalColumn\n            ? interactiveSummary(col, context, interactive)\n            : staticSummary(col, context);\n    };\n    return CategoricalStackedDistributionlCellRenderer;\n}());\nexport default CategoricalStackedDistributionlCellRenderer;\nfunction staticSummary(col, context) {\n    var _a = stackedBar(col, context.sanitize), template = _a.template, update = _a.update;\n    return {\n        template: \"\".concat(template, \"</div>\"),\n        update: function (n) {\n            return context.tasks.summaryCategoricalStats(col).then(function (r) {\n                if (typeof r === 'symbol') {\n                    return;\n                }\n                var isMissing = !r || r.summary == null || r.summary.count === 0 || r.summary.count === r.summary.missing;\n                n.classList.toggle(cssClass('missing'), isMissing);\n                if (isMissing) {\n                    return;\n                }\n                update(n, r.summary, r.data);\n            });\n        },\n    };\n}\nfunction interactiveSummary(col, context, interactive) {\n    var _a = stackedBar(col, context.sanitize), template = _a.template, update = _a.update;\n    var filterUpdate;\n    return {\n        template: \"\".concat(template).concat(interactive ? filterMissingNumberMarkup(false, 0) : '', \"</div>\"),\n        update: function (n) {\n            if (!filterUpdate) {\n                filterUpdate = interactiveHist(col, n);\n            }\n            return context.tasks.summaryCategoricalStats(col).then(function (r) {\n                if (typeof r === 'symbol') {\n                    return;\n                }\n                var summary = r.summary, data = r.data;\n                var missing = interactive && data ? data.missing : summary ? summary.missing : 0;\n                filterUpdate(missing, col);\n                var isMissing = !r || r.summary == null || r.summary.count === 0 || r.summary.count === r.summary.missing;\n                n.classList.toggle(cssClass('missing'), isMissing);\n                if (isMissing) {\n                    return;\n                }\n                update(n, summary, data);\n            });\n        },\n    };\n}\nfunction selectedCol(value) {\n    var c = color(value);\n    c.opacity = FILTERED_OPACITY;\n    return c.toString();\n}\nfunction stackedBar(col, sanitize) {\n    var s = sanitize;\n    var mapping = col.getColorMapping();\n    var cats = col.categories.map(function (c) { return ({\n        label: c.label,\n        name: c.name,\n        color: mapping.apply(c),\n        selected: selectedCol(mapping.apply(c)),\n    }); });\n    cats.push({ label: 'Missing Values', name: 'missing', color: DEFAULT_COLOR, selected: 'transparent' });\n    var bins = cats\n        .map(function (c) {\n        return \"<div class=\\\"\".concat(cssClass('distribution-bar'), \"\\\" style=\\\"background-color: \").concat(s(c.color), \"; color: \").concat(adaptTextColorToBgColor(c.color), \"\\\" title=\\\"\").concat(s(c.label), \": 0\\\" data-cat=\\\"\").concat(s(c.name), \"\\\"><span>\").concat(s(c.label), \"</span></div>\");\n    })\n        .join('');\n    return {\n        template: \"<div>\".concat(bins),\n        update: function (n, hist, gHist) {\n            var bins = hist.hist.slice();\n            bins.push({ count: hist.missing });\n            var children = Array.from(n.children);\n            if (!gHist) {\n                var total_1 = bins.reduce(function (acc, _a) {\n                    var count = _a.count;\n                    return acc + count;\n                }, 0);\n                for (var i = 0; i < cats.length; ++i) {\n                    var d = children[i];\n                    var count = bins[i].count;\n                    var label = cats[i].label;\n                    d.style.flexGrow = \"\".concat(round(total_1 === 0 ? 0 : count, 2));\n                    d.title = \"\".concat(label, \": \").concat(count);\n                }\n                return;\n            }\n            var gBins = gHist.hist.slice();\n            gBins.push({ count: gHist.missing });\n            var total = gBins.reduce(function (acc, _a) {\n                var count = _a.count;\n                return acc + count;\n            }, 9);\n            for (var i = 0; i < cats.length; ++i) {\n                var d = children[i];\n                var count = bins[i].count;\n                var label = cats[i].label;\n                var gCount = gBins[i].count;\n                d.style.flexGrow = \"\".concat(round(total === 0 ? 0 : gCount, 2));\n                d.title = \"\".concat(label, \": \").concat(count, \" of \").concat(gCount);\n                var relY = 100 - round((count * 100) / gCount, 2);\n                d.style.background =\n                    relY === 0\n                        ? cats[i].color\n                        : relY === 100\n                            ? cats[i].selected\n                            : \"linear-gradient(\".concat(cats[i].selected, \" \").concat(relY, \"%, \").concat(cats[i].color, \" \").concat(relY, \"%, \").concat(cats[i].color, \" 100%)\");\n            }\n        },\n    };\n}\n//# sourceMappingURL=CategoricalStackedDistributionlCellRenderer.js.map","import { isNumbersColumn, isNumberColumn } from '../model';\nimport { colorOf } from './impose';\nimport { ERenderMode, } from './interfaces';\nimport { renderMissingDOM } from './missing';\nimport { adaptColor, noRenderer, setText, SMALL_MARK_LIGHTNESS_FACTOR } from './utils';\nimport { cssClass } from '../styles';\nvar CircleCellRenderer = /** @class */ (function () {\n    /**\n     * flag to always render the value\n     * @type {boolean}\n     */\n    function CircleCellRenderer(renderValue) {\n        if (renderValue === void 0) { renderValue = false; }\n        this.renderValue = renderValue;\n        this.title = 'Proportional Symbol';\n    }\n    CircleCellRenderer.prototype.canRender = function (col, mode) {\n        return isNumberColumn(col) && mode === ERenderMode.CELL && !isNumbersColumn(col);\n    };\n    CircleCellRenderer.prototype.create = function (col, _context, imposer) {\n        return {\n            template: \"<div style=\\\"background: radial-gradient(circle closest-side, red 100%, transparent 100%)\\\" title=\\\"\\\">\\n              <div class=\\\"\".concat(this.renderValue ? '' : cssClass('hover-only'), \" \").concat(cssClass('bar-label'), \"\\\"></div>\\n          </div>\"),\n            update: function (n, d) {\n                var v = col.getNumber(d);\n                var p = Math.round(v * 100);\n                var missing = renderMissingDOM(n, col, d);\n                n.style.background = missing\n                    ? null\n                    : \"radial-gradient(circle closest-side, \".concat(adaptColor(colorOf(col, d, imposer), SMALL_MARK_LIGHTNESS_FACTOR), \" \").concat(p, \"%, transparent \").concat(p, \"%)\");\n                setText(n.firstElementChild, col.getLabel(d));\n            },\n        };\n    };\n    CircleCellRenderer.prototype.createGroup = function () {\n        return noRenderer;\n    };\n    CircleCellRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return CircleCellRenderer;\n}());\nexport default CircleCellRenderer;\n//# sourceMappingURL=CircleCellRenderer.js.map","import { GUESSES_GROUP_HEIGHT, GUESSED_ROW_HEIGHT } from '../constants';\nimport { concatSeq, round } from '../internal';\nimport { DEFAULT_COLOR, isNumberColumn, isNumbersColumn, } from '../model';\nimport { CANVAS_HEIGHT, DOT, cssClass } from '../styles';\nimport { colorOf } from './impose';\nimport { ERenderMode, } from './interfaces';\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\nimport { adaptColor, noRenderer, SMALL_MARK_LIGHTNESS_FACTOR } from './utils';\nvar PADDED_HEIGHT = 0.8;\nvar radius = DOT.size / 2;\nvar radiusPercentage = (100 * radius) / GUESSED_ROW_HEIGHT;\nvar availableHeight = 100 * PADDED_HEIGHT - radiusPercentage * 2;\nvar shift = 100 * ((1 - PADDED_HEIGHT) / 2) + radiusPercentage;\nvar DotCellRenderer = /** @class */ (function () {\n    /**\n     * flag to always render the value for single dots\n     * @type {boolean}\n     */\n    function DotCellRenderer(renderValue) {\n        if (renderValue === void 0) { renderValue = false; }\n        this.renderValue = renderValue;\n        this.title = 'Dot';\n        this.groupTitle = 'Dots';\n    }\n    DotCellRenderer.prototype.canRender = function (col, mode) {\n        return isNumberColumn(col) && mode !== ERenderMode.SUMMARY;\n    };\n    DotCellRenderer.getCanvasRenderer = function (col, context) {\n        var width = context.colWidth(col);\n        var pi2 = Math.PI * 2;\n        var radius = DOT.size / 2;\n        var availableHeight = GUESSES_GROUP_HEIGHT * PADDED_HEIGHT - radius * 2;\n        var shift = GUESSES_GROUP_HEIGHT * ((1 - PADDED_HEIGHT) / 2) + radius;\n        var render = function (ctx, vs, width) {\n            ctx.save();\n            ctx.globalAlpha = DOT.opacity;\n            for (var _i = 0, vs_1 = vs; _i < vs_1.length; _i++) {\n                var v = vs_1[_i];\n                ctx.fillStyle = v.color || DOT.color;\n                var x = Math.min(width - radius, Math.max(radius, v.value * width));\n                var y = round(Math.random() * availableHeight + shift, 2);\n                ctx.beginPath();\n                ctx.moveTo(x + radius, y);\n                ctx.arc(x, y, radius, 0, pi2, true);\n                ctx.fill();\n            }\n            ctx.restore();\n        };\n        return {\n            template: \"<canvas height=\\\"\".concat(GUESSES_GROUP_HEIGHT, \"\\\"></canvas>\"),\n            render: render,\n            width: width,\n        };\n    };\n    DotCellRenderer.getDOMRenderer = function (col, sanitize) {\n        var dots = !isNumbersColumn(col) ? 1 : col.dataLength;\n        var tmp = '';\n        for (var i = 0; i < dots; ++i) {\n            tmp += \"<div style='background-color: \".concat(DEFAULT_COLOR, \"' title=''></div>\");\n        }\n        var update = function (n, data) {\n            //adapt the number of children\n            var l = data.length;\n            if (n.children.length !== l) {\n                n.innerHTML = data.reduce(function (tmp, r) {\n                    return \"\".concat(tmp, \"<div style='background-color: \").concat(sanitize(r.color), \"' title='\").concat(sanitize(r.label), \"'></div>\");\n                }, '');\n            }\n            var children = n.children;\n            data.forEach(function (v, i) {\n                var d = children[i];\n                d.title = v.label;\n                d.style.display = Number.isNaN(v.value) ? 'none' : null;\n                d.style.left = \"\".concat(round(v.value * 100, 2), \"%\");\n                // jitter\n                d.style.top = l > 1 ? \"\".concat(round(Math.random() * availableHeight + shift, 2), \"%\") : null;\n                d.style.backgroundColor = v.color;\n            });\n        };\n        var render = function (ctx, vs, colors, width) {\n            ctx.save();\n            ctx.globalAlpha = DOT.opacity;\n            vs.forEach(function (v, i) {\n                ctx.fillStyle = colors[i] || DOT.color;\n                ctx.fillRect(Math.max(0, v * width - DOT.size / 2), 0, DOT.size, CANVAS_HEIGHT);\n            });\n            ctx.restore();\n        };\n        return { template: \"<div>\".concat(tmp, \"</div>\"), update: update, render: render };\n    };\n    DotCellRenderer.getSingleDOMRenderer = function (sanitize, renderValue) {\n        var update = function (n, value, label, color) {\n            var sanitizedLabel = sanitize(label);\n            n.title = sanitizedLabel;\n            var dot = n.firstElementChild;\n            dot.style.display = Number.isNaN(value) ? 'none' : null;\n            dot.style.left = \"\".concat(round(value * 100, 2), \"%\");\n            dot.style.backgroundColor = sanitize(color);\n            var labelNode = n.lastElementChild;\n            labelNode.textContent = sanitizedLabel;\n        };\n        var render = function (ctx, value, color, width) {\n            ctx.save();\n            ctx.globalAlpha = DOT.opacitySingle;\n            ctx.fillStyle = color || DOT.color;\n            ctx.fillRect(Math.max(0, value * width - DOT.size / 2), 0, DOT.size, CANVAS_HEIGHT);\n            ctx.restore();\n        };\n        return {\n            template: \"<div class=\\\"\".concat(cssClass('dot-single'), \"\\\"><div style='background-color: \").concat(DEFAULT_COLOR, \"' title=''></div><span \").concat(renderValue ? '' : \"class=\\\"\".concat(cssClass('hover-only'), \"\\\"\"), \"></span></div>\"),\n            update: update,\n            render: render,\n        };\n    };\n    DotCellRenderer.prototype.create = function (col, context, imposer) {\n        var width = context.colWidth(col);\n        var formatter = col.getNumberFormat();\n        if (!isNumbersColumn(col)) {\n            // single\n            var _a = DotCellRenderer.getSingleDOMRenderer(context.sanitize, this.renderValue), template_1 = _a.template, render_1 = _a.render, update_1 = _a.update;\n            return {\n                template: template_1,\n                update: function (n, d) {\n                    if (renderMissingDOM(n, col, d)) {\n                        return;\n                    }\n                    var color = adaptColor(colorOf(col, d, imposer), SMALL_MARK_LIGHTNESS_FACTOR);\n                    return update_1(n, col.getNumber(d), col.getLabel(d), color);\n                },\n                render: function (ctx, d) {\n                    var color = adaptColor(colorOf(col, d, imposer), SMALL_MARK_LIGHTNESS_FACTOR);\n                    return render_1(ctx, col.getNumber(d), color, width);\n                },\n            };\n        }\n        var _b = DotCellRenderer.getDOMRenderer(col, context.sanitize), template = _b.template, render = _b.render, update = _b.update;\n        return {\n            template: template,\n            update: function (n, d) {\n                if (renderMissingDOM(n, col, d)) {\n                    return;\n                }\n                var color = adaptColor(colorOf(col, d, imposer), SMALL_MARK_LIGHTNESS_FACTOR);\n                var data = col\n                    .getNumbers(d)\n                    .filter(function (vi) { return !Number.isNaN(vi); })\n                    .map(function (value) { return ({ value: value, label: formatter(value), color: color }); });\n                return update(n, data);\n            },\n            render: function (ctx, d) {\n                if (renderMissingCanvas(ctx, col, d, width)) {\n                    return;\n                }\n                var color = adaptColor(colorOf(col, d, imposer), SMALL_MARK_LIGHTNESS_FACTOR);\n                var vs = col.getNumbers(d).filter(function (vi) { return !Number.isNaN(vi); });\n                return render(ctx, vs, vs.map(function (_) { return color; }), width);\n            },\n        };\n    };\n    DotCellRenderer.prototype.createGroup = function (col, context, imposer) {\n        var _a = DotCellRenderer.getCanvasRenderer(col, context), template = _a.template, render = _a.render, width = _a.width;\n        return {\n            template: template,\n            update: function (n, group) {\n                return context.tasks\n                    .groupRows(col, group, 'dot', function (rows) {\n                    //value, color, label,\n                    if (!isNumbersColumn(col)) {\n                        return Array.from(rows.map(function (r) { return ({ value: col.getNumber(r), color: colorOf(col, r, imposer) }); }));\n                    }\n                    // concatenate all columns\n                    var vs = rows.map(function (r) {\n                        var color = adaptColor(colorOf(col, r, imposer), SMALL_MARK_LIGHTNESS_FACTOR);\n                        return col\n                            .getNumbers(r)\n                            .filter(function (vi) { return !Number.isNaN(vi); })\n                            .map(function (value) { return ({ value: value, color: color }); });\n                    });\n                    return Array.from(concatSeq(vs));\n                })\n                    .then(function (data) {\n                    if (typeof data === 'symbol') {\n                        return;\n                    }\n                    var isMissing = !data || data.length === 0 || data.every(function (v) { return Number.isNaN(v.value); });\n                    n.classList.toggle(cssClass('missing'), isMissing);\n                    if (isMissing) {\n                        return;\n                    }\n                    var ctx = n.getContext('2d');\n                    ctx.canvas.width = width;\n                    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n                    render(ctx, data, width);\n                });\n            },\n        };\n    };\n    DotCellRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return DotCellRenderer;\n}());\nexport default DotCellRenderer;\n//# sourceMappingURL=DotCellRenderer.js.map","import { GroupColumn, defaultGroup } from '../model';\nimport { noRenderer } from './utils';\nfunction isDummyGroup(group) {\n    return group.parent == null && group.name === defaultGroup.name;\n}\nvar GroupCellRenderer = /** @class */ (function () {\n    function GroupCellRenderer() {\n        this.title = 'Default';\n    }\n    GroupCellRenderer.prototype.canRender = function (col) {\n        return col instanceof GroupColumn;\n    };\n    GroupCellRenderer.prototype.create = function () {\n        return {\n            template: \"<div><div></div></div>\",\n            update: function (node, _row, i, group) {\n                var text = isDummyGroup(group) || i > 0 ? '' : \"\".concat(group.name, \" (\").concat(group.order.length, \")\");\n                node.firstElementChild.textContent = text;\n                node.title = text;\n            },\n            render: function (_ctx, _row, i) {\n                return i === 0;\n            },\n        };\n    };\n    GroupCellRenderer.prototype.createGroup = function () {\n        return {\n            template: \"<div><div></div></div>\",\n            update: function (node, group) {\n                var text = isDummyGroup(group) ? '' : \"\".concat(group.name, \" (\").concat(group.order.length, \")\");\n                node.firstElementChild.textContent = text;\n                node.title = text;\n            },\n        };\n    };\n    GroupCellRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return GroupCellRenderer;\n}());\nexport default GroupCellRenderer;\n//# sourceMappingURL=GroupCellRenderer.js.map","import { renderMissingCanvas, renderMissingDOM } from './missing';\nimport { boxplotBuilder, getSortLabel } from '../internal';\nvar ANumbersCellRenderer = /** @class */ (function () {\n    function ANumbersCellRenderer() {\n    }\n    ANumbersCellRenderer.choose = function (col, rows) {\n        var row = null;\n        var data = rows.map(function (r, i) {\n            if (i === 0) {\n                row = r;\n            }\n            return { n: col.getNumbers(r), raw: col.getRawNumbers(r) };\n        });\n        var cols = col.dataLength;\n        var normalized = [];\n        var raw = [];\n        var _loop_1 = function (i) {\n            var vs = data.map(function (d) { return ({ n: d.n[i], raw: d.raw[i] }); }).filter(function (d) { return !Number.isNaN(d.n); });\n            if (vs.length === 0) {\n                normalized.push(NaN);\n                raw.push(NaN);\n            }\n            else {\n                var bbn_1 = boxplotBuilder();\n                var bbr_1 = boxplotBuilder();\n                var s = col.getSortMethod();\n                vs.forEach(function (d) {\n                    bbn_1.push(d.n);\n                    bbr_1.push(d.raw);\n                });\n                normalized.push(bbn_1.build()[s]);\n                raw.push(bbr_1.build()[s]);\n            }\n        };\n        // mean column)\n        for (var i = 0; i < cols; ++i) {\n            _loop_1(i);\n        }\n        return { normalized: normalized, raw: raw, row: row };\n    };\n    ANumbersCellRenderer.prototype.create = function (col, context, imposer) {\n        var width = context.colWidth(col);\n        var _a = this.createContext(col, context, imposer), templateRow = _a.templateRow, render = _a.render, update = _a.update, clazz = _a.clazz;\n        return {\n            template: \"<div class=\\\"\".concat(clazz, \"\\\">\").concat(templateRow, \"</div>\"),\n            update: function (n, d) {\n                if (renderMissingDOM(n, col, d)) {\n                    return;\n                }\n                update(n, col.getNumbers(d), col.getRawNumbers(d), d);\n            },\n            render: function (ctx, d) {\n                if (renderMissingCanvas(ctx, col, d, width)) {\n                    return;\n                }\n                render(ctx, col.getNumbers(d), d);\n            },\n        };\n    };\n    ANumbersCellRenderer.prototype.createGroup = function (col, context, imposer) {\n        var _this = this;\n        var _a = this.createContext(col, context, imposer), templateRow = _a.templateRow, update = _a.update, clazz = _a.clazz;\n        return {\n            template: \"<div class=\\\"\".concat(clazz, \"\\\">\").concat(templateRow, \"</div>\"),\n            update: function (n, group) {\n                // render a heatmap\n                return context.tasks\n                    .groupRows(col, group, _this.title, function (rows) { return ANumbersCellRenderer.choose(col, rows); })\n                    .then(function (data) {\n                    if (typeof data !== 'symbol') {\n                        update(n, data.normalized, data.raw, data.row, \"\".concat(getSortLabel(col.getSortMethod()), \" \"));\n                    }\n                });\n            },\n        };\n    };\n    return ANumbersCellRenderer;\n}());\nexport { ANumbersCellRenderer };\n/** @internal */\nexport function matchRows(n, length, template) {\n    // first match the number of rows\n    var children = Array.from(n.children);\n    if (children.length > length) {\n        children.slice(length).forEach(function (c) { return c.remove(); });\n    }\n    else if (length > children.length) {\n        n.insertAdjacentHTML('beforeend', template.repeat(length - children.length));\n    }\n}\n//# sourceMappingURL=ANumbersCellRenderer.js.map","import { isNumbersColumn } from '../model';\nimport { CANVAS_HEIGHT, cssClass } from '../styles';\nimport { ANumbersCellRenderer } from './ANumbersCellRenderer';\nimport { toHeatMapColor } from './BrightnessCellRenderer';\nimport { renderMissingValue, renderMissingDOM } from './missing';\nimport { noop, wideEnough } from './utils';\nimport { GUESSED_ROW_HEIGHT } from '../constants';\nimport { getSortLabel } from '../internal';\nvar HeatmapCellRenderer = /** @class */ (function () {\n    function HeatmapCellRenderer() {\n        this.title = 'Heatmap';\n    }\n    HeatmapCellRenderer.prototype.canRender = function (col) {\n        return isNumbersColumn(col) && Boolean(col.dataLength);\n    };\n    HeatmapCellRenderer.prototype.createContext = function (col, context, imposer) {\n        var width = context.colWidth(col);\n        var cellDimension = width / col.dataLength;\n        var labels = col.labels;\n        var render = function (ctx, data, item, height) {\n            data.forEach(function (d, j) {\n                var x = j * cellDimension;\n                if (Number.isNaN(d)) {\n                    renderMissingValue(ctx, cellDimension, height, x, 0);\n                    return;\n                }\n                ctx.fillStyle = toHeatMapColor(d, item, col, imposer);\n                ctx.fillRect(x, 0, cellDimension, height);\n            });\n        };\n        return {\n            template: \"<canvas height=\\\"\".concat(GUESSED_ROW_HEIGHT, \"\\\" title=\\\"\\\"></canvas>\"),\n            render: render,\n            width: width,\n            mover: function (n, values, prefix) { return function (evt) {\n                var percent = evt.offsetX / width;\n                var index = Math.max(0, Math.min(col.dataLength - 1, Math.floor(percent * (col.dataLength - 1) + 0.5)));\n                n.title = \"\".concat(prefix || '').concat(labels[index], \": \").concat(values[index]);\n            }; },\n        };\n    };\n    HeatmapCellRenderer.prototype.create = function (col, context, _hist, imposer) {\n        var _a = this.createContext(col, context, imposer), template = _a.template, render = _a.render, mover = _a.mover, width = _a.width;\n        return {\n            template: template,\n            update: function (n, d) {\n                var ctx = n.getContext('2d');\n                ctx.canvas.width = width;\n                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n                if (renderMissingDOM(n, col, d)) {\n                    return;\n                }\n                n.onmousemove = mover(n, col.getLabels(d));\n                n.onmouseleave = function () { return (n.title = ''); };\n                render(ctx, col.getNumbers(d), d, GUESSED_ROW_HEIGHT);\n            },\n            render: function (ctx, d) {\n                render(ctx, col.getNumbers(d), d, CANVAS_HEIGHT);\n            },\n        };\n    };\n    HeatmapCellRenderer.prototype.createGroup = function (col, context, imposer) {\n        var _this = this;\n        var _a = this.createContext(col, context, imposer), template = _a.template, render = _a.render, mover = _a.mover, width = _a.width;\n        var formatter = col.getNumberFormat();\n        return {\n            template: template,\n            update: function (n, group) {\n                return context.tasks\n                    .groupRows(col, group, _this.title, function (rows) { return ANumbersCellRenderer.choose(col, rows); })\n                    .then(function (data) {\n                    if (typeof data === 'symbol') {\n                        return;\n                    }\n                    var ctx = n.getContext('2d');\n                    ctx.canvas.width = width;\n                    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n                    var isMissing = !data || data.normalized.length === 0 || data.normalized.every(function (v) { return Number.isNaN(v); });\n                    n.classList.toggle(cssClass('missing'), isMissing);\n                    if (isMissing) {\n                        return;\n                    }\n                    n.onmousemove = mover(n, data.raw.map(formatter), \"\".concat(getSortLabel(col.getSortMethod()), \" \"));\n                    n.onmouseleave = function () { return (n.title = ''); };\n                    render(ctx, data.normalized, data.row, GUESSED_ROW_HEIGHT);\n                });\n            },\n        };\n    };\n    HeatmapCellRenderer.prototype.createSummary = function (col, context) {\n        var labels = col.labels.slice();\n        while (labels.length > 0 && !wideEnough(col, labels.length)) {\n            labels = labels.filter(function (_, i) { return i % 2 === 0; }); // even\n        }\n        var templateRows = \"<div class=\\\"\".concat(cssClass('heatmap'), \"\\\">\");\n        for (var _i = 0, labels_1 = labels; _i < labels_1.length; _i++) {\n            var label = labels_1[_i];\n            templateRows += \"<div class=\\\"\".concat(cssClass('heatmap-cell'), \"\\\"  title=\\\"\").concat(context.sanitize(label), \"\\\" data-title=\\\"\").concat(context.sanitize(label), \"\\\"></div>\");\n        }\n        templateRows += '</div>';\n        return {\n            template: templateRows,\n            update: noop,\n        };\n    };\n    return HeatmapCellRenderer;\n}());\nexport default HeatmapCellRenderer;\n//# sourceMappingURL=HeatmapCellRenderer.js.map","export default function getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n\n  return node;\n}","import getWindow from \"./getWindow.js\";\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nfunction isShadowRoot(node) {\n  // IE 11 has no ShadowRoot\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n\n  var OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\n\nexport { isElement, isHTMLElement, isShadowRoot };","export var max = Math.max;\nexport var min = Math.min;\nexport var round = Math.round;","import { isHTMLElement } from \"./instanceOf.js\";\nimport { round } from \"../utils/math.js\";\nexport default function getBoundingClientRect(element, includeScale) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n\n  var rect = element.getBoundingClientRect();\n  var scaleX = 1;\n  var scaleY = 1;\n\n  if (isHTMLElement(element) && includeScale) {\n    var offsetHeight = element.offsetHeight;\n    var offsetWidth = element.offsetWidth; // Do not attempt to divide by 0, otherwise we get `Infinity` as scale\n    // Fallback to 1 in case both values are `0`\n\n    if (offsetWidth > 0) {\n      scaleX = round(rect.width) / offsetWidth || 1;\n    }\n\n    if (offsetHeight > 0) {\n      scaleY = round(rect.height) / offsetHeight || 1;\n    }\n  }\n\n  return {\n    width: rect.width / scaleX,\n    height: rect.height / scaleY,\n    top: rect.top / scaleY,\n    right: rect.right / scaleX,\n    bottom: rect.bottom / scaleY,\n    left: rect.left / scaleX,\n    x: rect.left / scaleX,\n    y: rect.top / scaleY\n  };\n}","import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}","export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}","import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe[incompatible-return]: assume body is always available\n  return ((isElement(element) ? element.ownerDocument : // $FlowFixMe[prop-missing]\n  element.document) || window.document).documentElement;\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}","import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}","import getComputedStyle from \"./getComputedStyle.js\";\nexport default function isScrollParent(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  var _getComputedStyle = getComputedStyle(element),\n      overflow = _getComputedStyle.overflow,\n      overflowX = _getComputedStyle.overflowX,\n      overflowY = _getComputedStyle.overflowY;\n\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport { round } from \"../utils/math.js\";\n\nfunction isElementScaled(element) {\n  var rect = element.getBoundingClientRect();\n  var scaleX = round(rect.width) / element.offsetWidth || 1;\n  var scaleY = round(rect.height) / element.offsetHeight || 1;\n  return scaleX !== 1 || scaleY !== 1;\n} // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var isOffsetParentAnElement = isHTMLElement(offsetParent);\n  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);\n  var documentElement = getDocumentElement(offsetParent);\n  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n    isScrollParent(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent, true);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}","import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}","export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\"; // Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\n\nexport default function getLayoutRect(element) {\n  var clientRect = getBoundingClientRect(element); // Use the clientRect sizes if it's not been transformed.\n  // Fixes https://github.com/popperjs/popper-core/issues/1223\n\n  var width = element.offsetWidth;\n  var height = element.offsetHeight;\n\n  if (Math.abs(clientRect.width - width) <= 1) {\n    width = clientRect.width;\n  }\n\n  if (Math.abs(clientRect.height - height) <= 1) {\n    height = clientRect.height;\n  }\n\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: width,\n    height: height\n  };\n}","import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport { isShadowRoot } from \"./instanceOf.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    // $FlowFixMe[incompatible-return]\n    // $FlowFixMe[prop-missing]\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || ( // DOM Element detected\n    isShadowRoot(element) ? element.host : null) || // ShadowRoot detected\n    // $FlowFixMe[incompatible-call]: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}","import getParentNode from \"./getParentNode.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe[incompatible-return]: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node) && isScrollParent(node)) {\n    return node;\n  }\n\n  return getScrollParent(getParentNode(node));\n}","import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getWindow from \"./getWindow.js\";\nimport isScrollParent from \"./isScrollParent.js\";\n/*\ngiven a DOM element, return the list of all scroll parents, up the list of ancesors\nuntil we get to the top window object. This list is what we attach scroll listeners\nto, because if any of these parent elements scroll, we'll need to re-calculate the\nreference element's position.\n*/\n\nexport default function listScrollParents(element, list) {\n  var _element$ownerDocumen;\n\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}","import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}","import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement, isShadowRoot } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\nimport getParentNode from \"./getParentNode.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n} // `.offsetParent` reports `null` for fixed elements, while absolute elements\n// return the containing block\n\n\nfunction getContainingBlock(element) {\n  var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') !== -1;\n  var isIE = navigator.userAgent.indexOf('Trident') !== -1;\n\n  if (isIE && isHTMLElement(element)) {\n    // In IE 9, 10 and 11 fixed elements containing block is always established by the viewport\n    var elementCss = getComputedStyle(element);\n\n    if (elementCss.position === 'fixed') {\n      return null;\n    }\n  }\n\n  var currentNode = getParentNode(element);\n\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n\n  while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {\n    var css = getComputedStyle(currentNode); // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\n    if (css.transform !== 'none' || css.perspective !== 'none' || css.contain === 'paint' || ['transform', 'perspective'].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === 'filter' || isFirefox && css.filter && css.filter !== 'none') {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n\n  return null;\n} // Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\n\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element);\n\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static')) {\n    return window;\n  }\n\n  return offsetParent || getContainingBlock(element) || window;\n}","export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];","import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}","import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport getComputedStyle from \"./dom-utils/getComputedStyle.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport validateModifiers from \"./utils/validateModifiers.js\";\nimport uniqueBy from \"./utils/uniqueBy.js\";\nimport getBasePlacement from \"./utils/getBasePlacement.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nimport { auto } from \"./enums.js\";\nvar INVALID_ELEMENT_ERROR = 'Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.';\nvar INFINITE_LOOP_ERROR = 'Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.';\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(setOptionsAction) {\n        var options = typeof setOptionsAction === 'function' ? setOptionsAction(state.options) : setOptionsAction;\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, state.options, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        }); // Validate the provided modifiers so that the consumer will get warned\n        // if one of the modifiers is invalid for any reason\n\n        if (process.env.NODE_ENV !== \"production\") {\n          var modifiers = uniqueBy([].concat(orderedModifiers, state.options.modifiers), function (_ref) {\n            var name = _ref.name;\n            return name;\n          });\n          validateModifiers(modifiers);\n\n          if (getBasePlacement(state.options.placement) === auto) {\n            var flipModifier = state.orderedModifiers.find(function (_ref2) {\n              var name = _ref2.name;\n              return name === 'flip';\n            });\n\n            if (!flipModifier) {\n              console.error(['Popper: \"auto\" placements require the \"flip\" modifier be', 'present and enabled to work.'].join(' '));\n            }\n          }\n\n          var _getComputedStyle = getComputedStyle(popper),\n              marginTop = _getComputedStyle.marginTop,\n              marginRight = _getComputedStyle.marginRight,\n              marginBottom = _getComputedStyle.marginBottom,\n              marginLeft = _getComputedStyle.marginLeft; // We no longer take into account `margins` on the popper, and it can\n          // cause bugs with positioning, so we'll warn the consumer\n\n\n          if ([marginTop, marginRight, marginBottom, marginLeft].some(function (margin) {\n            return parseFloat(margin);\n          })) {\n            console.warn(['Popper: CSS \"margin\" styles cannot be used to apply padding', 'between the popper and its reference element or boundary.', 'To replicate margin, use the `offset` modifier, as well as', 'the `padding` option in the `preventOverflow` and `flip`', 'modifiers.'].join(' '));\n          }\n        }\n\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update  it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          if (process.env.NODE_ENV !== \"production\") {\n            console.error(INVALID_ELEMENT_ERROR);\n          }\n\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n        var __debug_loops__ = 0;\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (process.env.NODE_ENV !== \"production\") {\n            __debug_loops__ += 1;\n\n            if (__debug_loops__ > 100) {\n              console.error(INFINITE_LOOP_ERROR);\n              break;\n            }\n          }\n\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update  it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      if (process.env.NODE_ENV !== \"production\") {\n        console.error(INVALID_ELEMENT_ERROR);\n      }\n\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref3) {\n        var name = _ref3.name,\n            _ref3$options = _ref3.options,\n            options = _ref3$options === void 0 ? {} : _ref3$options,\n            effect = _ref3.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator(); // eslint-disable-next-line import/no-unused-modules\n\nexport { detectOverflow };","export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}","export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, current, {\n      options: Object.assign({}, existing.options, current.options),\n      data: Object.assign({}, existing.data, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}","import getWindow from \"../dom-utils/getWindow.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};","import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}","export default function getVariation(placement) {\n  return placement.split('-')[1];\n}","export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}","import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = offsets[mainAxis] - (reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = offsets[mainAxis] + (reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}","import { top, left, right, bottom, end } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport { round } from \"../utils/math.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsetsByDPR(_ref) {\n  var x = _ref.x,\n      y = _ref.y;\n  var win = window;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: round(x * dpr) / dpr || 0,\n    y: round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      variation = _ref2.variation,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive,\n      roundOffsets = _ref2.roundOffsets,\n      isFixed = _ref2.isFixed;\n  var _offsets$x = offsets.x,\n      x = _offsets$x === void 0 ? 0 : _offsets$x,\n      _offsets$y = offsets.y,\n      y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n  var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref3.x;\n  y = _ref3.y;\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n    var heightProp = 'clientHeight';\n    var widthProp = 'clientWidth';\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n\n      if (getComputedStyle(offsetParent).position !== 'static' && position === 'absolute') {\n        heightProp = 'scrollHeight';\n        widthProp = 'scrollWidth';\n      }\n    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n    offsetParent = offsetParent;\n\n    if (placement === top || (placement === left || placement === right) && variation === end) {\n      sideY = bottom;\n      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n      offsetParent[heightProp];\n      y -= offsetY - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left || (placement === top || placement === bottom) && variation === end) {\n      sideX = right;\n      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n      offsetParent[widthProp];\n      x -= offsetX - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref4.x;\n  y = _ref4.y;\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref5) {\n  var state = _ref5.state,\n      options = _ref5.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n      _options$roundOffsets = options.roundOffsets,\n      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    var transitionProperty = getComputedStyle(state.elements.popper).transitionProperty || '';\n\n    if (adaptive && ['transform', 'top', 'right', 'bottom', 'left'].some(function (property) {\n      return transitionProperty.indexOf(property) >= 0;\n    })) {\n      console.warn(['Popper: Detected CSS transitions on at least one of the following', 'CSS properties: \"transform\", \"top\", \"right\", \"bottom\", \"left\".', '\\n\\n', 'Disable the \"computeStyles\" modifier\\'s `adaptive` option to allow', 'for smooth transitions, or remove these properties from the CSS', 'transition declaration on the popper element if only transitioning', 'opacity or background-color for example.', '\\n\\n', 'We recommend using the popper element as a wrapper around an inner', 'element that can have any CSS property transitioned for animations.'].join(' '));\n    }\n  }\n\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    variation: getVariation(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration,\n    isFixed: state.options.strategy === 'fixed'\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};","import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe[cannot-write]\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n  state.styles = initialStyles;\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      }\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};","var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}","var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}","import { isShadowRoot } from \"./instanceOf.js\";\nexport default function contains(parent, child) {\n  var rootNode = child.getRootNode && child.getRootNode(); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (rootNode && isShadowRoot(rootNode)) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe[prop-missing]: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}","export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}","import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport contains from \"./contains.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\nimport { max, min } from \"../utils/math.js\";\n\nfunction getInnerBoundingClientRect(element) {\n  var rect = getBoundingClientRect(element);\n  rect.top = rect.top + element.clientTop;\n  rect.left = rect.left + element.clientLeft;\n  rect.bottom = rect.top + element.clientHeight;\n  rect.right = rect.left + element.clientWidth;\n  rect.width = element.clientWidth;\n  rect.height = element.clientHeight;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\n\nfunction getClientRectFromMixedType(element, clippingParent) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(getParentNode(element));\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}","import getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nexport default function getViewportRect(element) {\n  var win = getWindow(element);\n  var html = getDocumentElement(element);\n  var visualViewport = win.visualViewport;\n  var width = html.clientWidth;\n  var height = html.clientHeight;\n  var x = 0;\n  var y = 0; // NB: This isn't supported on iOS <= 12. If the keyboard is open, the popper\n  // can be obscured underneath it.\n  // Also, `html.clientHeight` adds the bottom bar height in Safari iOS, even\n  // if it isn't open, so if this isn't available, the popper will be detected\n  // to overflow the bottom of the screen too early.\n\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height; // Uses Layout Viewport (like Chrome; Safari does not currently)\n    // In Chrome, it returns a value very close to 0 (+/-) but contains rounding\n    // errors due to floating point numbers, so we need to check precision.\n    // Safari returns a number <= 0, usually < -1 when pinch-zoomed\n    // Feature detection fails in mobile emulation mode in Chrome.\n    // Math.abs(win.innerWidth / visualViewport.scale - visualViewport.width) <\n    // 0.001\n    // Fallback here: \"Not Safari\" userAgent\n\n    if (!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)) {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x + getWindowScrollBarX(element),\n    y: y\n  };\n}","import getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nimport { max } from \"../utils/math.js\"; // Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable\n\nexport default function getDocumentRect(element) {\n  var _element$ownerDocumen;\n\n  var html = getDocumentElement(element);\n  var winScroll = getWindowScroll(element);\n  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);\n  var y = -winScroll.scrollTop;\n\n  if (getComputedStyle(body || html).direction === 'rtl') {\n    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x,\n    y: y\n  };\n}","import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), paddingObject);\n}","export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}","export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}","import getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary);\n  var referenceClientRect = getBoundingClientRect(state.elements.reference);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}","import { max as mathMax, min as mathMin } from \"./math.js\";\nexport function within(min, value, max) {\n  return mathMax(min, mathMin(value, max));\n}\nexport function withinMaxClamp(min, value, max) {\n  var v = within(min, value, max);\n  return v > max ? max : v;\n}","import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport { within, withinMaxClamp } from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\nimport { min as mathMin, max as mathMax } from \"../utils/math.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var normalizedTetherOffsetValue = typeof tetherOffsetValue === 'number' ? {\n    mainAxis: tetherOffsetValue,\n    altAxis: tetherOffsetValue\n  } : Object.assign({\n    mainAxis: 0,\n    altAxis: 0\n  }, tetherOffsetValue);\n  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var _offsetModifierState$;\n\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = offset + overflow[mainSide];\n    var max = offset - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;\n    var tetherMin = offset + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = offset + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? mathMin(min, tetherMin) : min, offset, tether ? mathMax(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _offsetModifierState$2;\n\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _len = altAxis === 'y' ? 'height' : 'width';\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;\n\n    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;\n\n    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;\n\n    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;\n\n    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};","export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}","import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};","import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow }; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper as createPopperLite } from \"./popper-lite.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport * from \"./modifiers/index.js\";","import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};","import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n      specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [];\n\n    if (checkMainAxis) {\n      checks.push(overflow[_basePlacement] <= 0);\n    }\n\n    if (checkAltAxis) {\n      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n    }\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases  research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};","import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements;\n  var allowedPlacements = placements.filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  });\n\n  if (allowedPlacements.length === 0) {\n    allowedPlacements = placements;\n\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(['Popper: The `allowedAutoPlacements` option did not allow any', 'placements. Ensure the `placement` option matches the variation', 'of the allowed placements.', 'For example, \"auto\" cannot be used to allow \"bottom-start\".', 'Use \"auto-start\" instead.'].join(' '));\n    }\n  } // $FlowFixMe[incompatible-type]: Flow seems to have problems with two array unions...\n\n\n  var overflows = allowedPlacements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport { within } from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar toPaddingObject = function toPaddingObject(padding, state) {\n  padding = typeof padding === 'function' ? padding(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : padding;\n  return mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n};\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name,\n      options = _ref.options;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = toPaddingObject(options.padding, state);\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = getOffsetParent(arrowElement);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!isHTMLElement(arrowElement)) {\n      console.error(['Popper: \"arrow\" element must be an HTMLElement (not an SVGElement).', 'To use an SVG arrow, wrap it in an HTMLElement that will be used as', 'the arrow.'].join(' '));\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(['Popper: \"arrow\" modifier\\'s `element` must be a child of the popper', 'element.'].join(' '));\n    }\n\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { createPopper } from '@popperjs/core';\nimport { cssClass } from '../../styles';\nexport function dialogContext(ctx, level, attachment) {\n    return {\n        attachment: attachment.currentTarget != null\n            ? attachment.currentTarget\n            : attachment,\n        level: level,\n        manager: ctx.dialogManager,\n        idPrefix: ctx.idPrefix,\n        sanitize: ctx.sanitize,\n    };\n}\nvar ADialog = /** @class */ (function () {\n    function ADialog(dialog, options) {\n        if (options === void 0) { options = {}; }\n        this.dialog = dialog;\n        this.options = {\n            title: '',\n            livePreview: false,\n            popup: false,\n            placement: 'bottom-start',\n            toggleDialog: true,\n            cancelSubDialogs: false,\n            autoClose: false,\n        };\n        this.popper = null;\n        Object.assign(this.options, options);\n        this.node = dialog.attachment.ownerDocument.createElement('form');\n        this.node.classList.add(cssClass('dialog'));\n    }\n    Object.defineProperty(ADialog.prototype, \"autoClose\", {\n        get: function () {\n            return this.options.autoClose;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ADialog.prototype, \"attachment\", {\n        get: function () {\n            return this.dialog.attachment;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ADialog.prototype, \"level\", {\n        get: function () {\n            return this.dialog.level;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ADialog.prototype.showLivePreviews = function () {\n        return (this.options.livePreview === true ||\n            (typeof this.options.livePreview === 'string' &&\n                this.dialog.manager.livePreviews[this.options.livePreview] === true));\n    };\n    ADialog.prototype.enableLivePreviews = function (selector) {\n        var _this = this;\n        if (!this.showLivePreviews()) {\n            return;\n        }\n        var submitter = function () {\n            _this.submit();\n        };\n        if (typeof selector === 'string') {\n            this.forEach(selector, function (n) {\n                n.addEventListener('change', submitter, { passive: true });\n            });\n        }\n        else {\n            selector.forEach(function (n) {\n                n.addEventListener('change', submitter, { passive: true });\n            });\n        }\n    };\n    ADialog.prototype.equals = function (that) {\n        return this.dialog.level === that.dialog.level && this.dialog.attachment === that.dialog.attachment;\n    };\n    ADialog.prototype.appendDialogButtons = function () {\n        this.node.insertAdjacentHTML('beforeend', \"<div class=\\\"\".concat(cssClass('dialog-buttons'), \"\\\">\\n      <button class=\\\"\").concat(cssClass('dialog-button'), \"\\\" type=\\\"submit\\\" title=\\\"Apply\\\"></button>\\n      <button class=\\\"\").concat(cssClass('dialog-button'), \"\\\" type=\\\"button\\\" title=\\\"Cancel\\\"></button>\\n      <button class=\\\"\").concat(cssClass('dialog-button'), \"\\\" type=\\\"reset\\\" title=\\\"Reset to default values\\\"></button>\\n    </div>\"));\n    };\n    ADialog.prototype.open = function () {\n        var _this = this;\n        if (this.options.toggleDialog && this.dialog.manager.removeLike(this)) {\n            return;\n        }\n        if (this.build(this.node) === false) {\n            return;\n        }\n        var parent = this.attachment.closest(\".\".concat(cssClass()));\n        if (this.options.title) {\n            var title = this.node.ownerDocument.createElement('strong');\n            title.textContent = this.options.title;\n            this.node.insertAdjacentElement('afterbegin', title);\n        }\n        if (!this.options.popup) {\n            this.appendDialogButtons();\n        }\n        parent.appendChild(this.node);\n        this.popper = createPopper(this.attachment, this.node, __assign({ modifiers: [\n                {\n                    name: 'preventOverflow',\n                    options: {\n                        boundariesElement: parent,\n                    },\n                },\n            ] }, this.options));\n        var auto = this.find('input[autofocus]');\n        if (auto) {\n            // delay such that it works\n            setTimeout(function () { return auto.focus(); });\n        }\n        var reset = this.find('button[type=reset]');\n        if (reset) {\n            reset.onclick = function (evt) {\n                evt.stopPropagation();\n                evt.preventDefault();\n                _this.reset();\n                if (_this.showLivePreviews()) {\n                    _this.submit();\n                }\n            };\n        }\n        this.node.onsubmit = function (evt) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            return _this.triggerSubmit();\n        };\n        var cancel = this.find('button[title=Cancel]');\n        if (cancel) {\n            cancel.onclick = function (evt) {\n                evt.stopPropagation();\n                evt.preventDefault();\n                _this.cancel();\n                _this.destroy('cancel');\n            };\n        }\n        if (this.options.cancelSubDialogs) {\n            this.node.addEventListener('click', function () {\n                _this.dialog.manager.removeAboveLevel(_this.dialog.level + 1);\n            });\n        }\n        this.dialog.manager.push(this);\n    };\n    ADialog.prototype.triggerSubmit = function () {\n        if (!this.node.checkValidity()) {\n            return false;\n        }\n        if (this.submit() !== false) {\n            this.destroy('confirm');\n        }\n        return false;\n    };\n    ADialog.prototype.find = function (selector) {\n        return this.node.querySelector(selector);\n    };\n    ADialog.prototype.findInput = function (selector) {\n        return this.find(selector);\n    };\n    ADialog.prototype.forEach = function (selector, callback) {\n        return Array.from(this.node.querySelectorAll(selector)).map(callback);\n    };\n    ADialog.prototype.cleanUp = function (action) {\n        if (action === 'confirm') {\n            this.submit(); // TODO what if submit wasn't successful?\n        }\n        else if (action === 'cancel') {\n            this.cancel();\n        }\n        if (action !== 'handled') {\n            this.dialog.manager.triggerDialogClosed(this, action);\n        }\n        if (this.popper) {\n            this.popper.destroy();\n        }\n        this.node.remove();\n    };\n    ADialog.prototype.destroy = function (action) {\n        if (action === void 0) { action = 'cancel'; }\n        this.dialog.manager.triggerDialogClosed(this, action);\n        this.dialog.manager.remove(this, true);\n    };\n    return ADialog;\n}());\nexport default ADialog;\n//# sourceMappingURL=ADialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ADialog from './ADialog';\nvar APopup = /** @class */ (function (_super) {\n    __extends(APopup, _super);\n    function APopup(dialog, options) {\n        if (options === void 0) { options = {}; }\n        return _super.call(this, dialog, Object.assign({\n            popup: true,\n        }, options)) || this;\n    }\n    APopup.prototype.submit = function () {\n        return true;\n    };\n    APopup.prototype.reset = function () {\n        // dummy\n    };\n    APopup.prototype.cancel = function () {\n        // dummy\n    };\n    return APopup;\n}(ADialog));\nexport default APopup;\n//# sourceMappingURL=APopup.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport APopup from './APopup';\n/** @internal */\nvar InputNumberDialog = /** @class */ (function (_super) {\n    __extends(InputNumberDialog, _super);\n    function InputNumberDialog(dialog, callback, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, dialog) || this;\n        _this.callback = callback;\n        _this.ioptions = {\n            min: NaN,\n            max: NaN,\n            step: 'any',\n            value: NaN,\n            label: null,\n        };\n        Object.assign(_this.ioptions, options);\n        return _this;\n    }\n    InputNumberDialog.prototype.build = function (node) {\n        var o = this.ioptions;\n        node.insertAdjacentHTML('beforeend', \"\\n     <input type=\\\"number\\\" value=\\\"\".concat(Number.isNaN(o.value) ? '' : String(o.value), \"\\\" required autofocus placeholder=\\\"\").concat(this.dialog.sanitize(o.label ? o.label : 'enter number'), \"\\\" \").concat(Number.isNaN(o.min) ? '' : \" min=\\\"\".concat(o.min, \"\\\"\"), \" \").concat(Number.isNaN(o.max) ? '' : \" max=\\\"\".concat(o.max, \"\\\"\"), \" step=\\\"\").concat(o.step, \"\\\">\\n    \"));\n        this.enableLivePreviews('input');\n    };\n    InputNumberDialog.prototype.submit = function () {\n        this.callback(this.findInput('input[type=number]').valueAsNumber);\n        return true;\n    };\n    return InputNumberDialog;\n}(APopup));\nexport default InputNumberDialog;\n//# sourceMappingURL=InputNumberDialog.js.map","import { cssClass } from '../styles';\n/**\n * allow to change the width of a column using dragging the handle\n * @internal\n */\nexport function dragHandle(handle, options) {\n    if (options === void 0) { options = {}; }\n    var o = Object.assign({\n        container: handle.parentElement,\n        filter: function () { return true; },\n        onStart: function () { return undefined; },\n        onDrag: function () { return undefined; },\n        onEnd: function () { return undefined; },\n        minDelta: 2,\n    }, options);\n    var ueberElement = null;\n    // converts the given x coordinate to be relative to the given element\n    var toContainerRelative = function (x, elem) {\n        var rect = elem.getBoundingClientRect();\n        return x - rect.left - elem.clientLeft;\n    };\n    var start = 0;\n    var last = 0;\n    var handleShift = 0;\n    var mouseMove = function (evt) {\n        if (!o.filter(evt)) {\n            return;\n        }\n        evt.stopPropagation();\n        evt.preventDefault();\n        var end = toContainerRelative(evt.clientX, o.container) - handleShift;\n        if (Math.abs(last - end) < o.minDelta) {\n            //ignore\n            return;\n        }\n        last = end;\n        o.onDrag(handle, end, last - end, evt);\n    };\n    var mouseUp = function (evt) {\n        if (!o.filter(evt)) {\n            return;\n        }\n        evt.stopPropagation();\n        evt.preventDefault();\n        var end = toContainerRelative(evt.clientX, o.container) - handleShift;\n        ueberElement.removeEventListener('mousemove', mouseMove);\n        ueberElement.removeEventListener('mouseup', mouseUp);\n        ueberElement.removeEventListener('mouseleave', mouseUp);\n        ueberElement.classList.remove(cssClass('dragging'));\n        if (Math.abs(start - end) < 2) {\n            //ignore\n            return;\n        }\n        o.onEnd(handle, end, start - end, evt);\n    };\n    handle.onmousedown = function (evt) {\n        if (!o.filter(evt)) {\n            return;\n        }\n        evt.stopPropagation();\n        evt.preventDefault();\n        handleShift = toContainerRelative(evt.clientX, handle);\n        start = last = toContainerRelative(evt.clientX, o.container) - handleShift;\n        // register other event listeners\n        ueberElement = handle.closest('body') || handle.closest(\".\".concat(cssClass())); // take the whole body or root lineup\n        ueberElement.addEventListener('mousemove', mouseMove);\n        ueberElement.addEventListener('mouseup', mouseUp);\n        ueberElement.addEventListener('mouseleave', mouseUp);\n        ueberElement.classList.add(cssClass('dragging'));\n        o.onStart(handle, start, 0, evt);\n    };\n}\n//# sourceMappingURL=drag.js.map","import { DENSE_HISTOGRAM } from '../constants';\nimport { round, dragHandle } from '../internal';\nimport { cssClass, FILTERED_OPACITY } from '../styles';\nimport { color } from 'd3-color';\nimport { filterMissingNumberMarkup, updateFilterMissingNumberMarkup } from '../ui/missing';\nfunction filteredColor(input) {\n    var c = color(input);\n    c.opacity = FILTERED_OPACITY;\n    return c.toString();\n}\nexport function histogramTemplate(guessedBins) {\n    var bins = '';\n    for (var i = 0; i < guessedBins; ++i) {\n        bins += \"<div class=\\\"\".concat(cssClass('histogram-bin'), \"\\\" title=\\\"Bin \").concat(i, \": 0\\\" data-x=\\\"\\\"><div style=\\\"height: 0\\\" ></div></div>\");\n    }\n    // no closing div to be able to append things\n    return \"<div class=\\\"\".concat(cssClass('histogram'), \" \").concat(guessedBins > DENSE_HISTOGRAM ? cssClass('dense') : '', \"\\\">\").concat(bins);\n}\nfunction matchBins(n, bins) {\n    //adapt the number of children\n    var nodes = Array.from(n.querySelectorAll('[data-x]'));\n    if (nodes.length > bins) {\n        nodes.splice(bins, nodes.length - bins).forEach(function (d) { return d.remove(); });\n    }\n    else if (nodes.length < bins) {\n        for (var i = nodes.length; i < bins; ++i) {\n            n.insertAdjacentHTML('afterbegin', \"<div class=\\\"\".concat(cssClass('histogram-bin'), \"\\\" title=\\\"Bin \").concat(i, \": 0\\\" data-x=\\\"\\\"><div style=\\\"height: 0\\\" ></div></div>\"));\n        }\n        nodes = Array.from(n.querySelectorAll('[data-x]'));\n    }\n    n.classList.toggle(cssClass('dense'), bins > DENSE_HISTOGRAM);\n    return nodes;\n}\n/** @internal */\nexport function histogramUpdate(n, stats, unfiltered, formatter, colorOf) {\n    var hist = stats.hist;\n    var nodes = matchBins(n, hist.length);\n    nodes.forEach(function (d, i) {\n        var bin = hist[i];\n        var inner = d.firstElementChild;\n        if (!bin) {\n            inner.style.height = '0%';\n            return;\n        }\n        var x0 = bin.x0, x1 = bin.x1, count = bin.count;\n        var color = colorOf(bin);\n        d.dataset.x = formatter(x0);\n        if (unfiltered) {\n            var gCount = (unfiltered.hist[i] || { count: count }).count;\n            d.title = \"\".concat(formatter(x0), \" - \").concat(formatter(x1), \" (\").concat(count, \" of \").concat(gCount, \")\");\n            inner.style.height = \"\".concat(round((gCount * 100) / unfiltered.maxBin, 2), \"%\");\n            var relY = 100 - round((count * 100) / gCount, 2);\n            inner.style.background =\n                relY === 0\n                    ? color\n                    : relY === 100\n                        ? filteredColor(color)\n                        : \"linear-gradient(\".concat(filteredColor(color), \" \").concat(relY, \"%, \").concat(color, \" \").concat(relY, \"%, \").concat(color, \" 100%)\");\n        }\n        else {\n            d.title = \"\".concat(formatter(x0), \" - \").concat(formatter(x1), \" (\").concat(count, \")\");\n            inner.style.height = \"\".concat(round((count * 100) / stats.maxBin, 2), \"%\");\n            inner.style.backgroundColor = color;\n        }\n    });\n}\n/**\n * @internal\n */\nexport function mappingHintTemplate(range) {\n    return \"<span class=\\\"\".concat(cssClass('mapping-hint'), \"\\\" title=\\\"\").concat(range[0], \"\\\">\").concat(range[0], \"</span><span class=\\\"\").concat(cssClass('mapping-hint'), \"\\\" title=\\\"\").concat(range[1], \"\\\">\").concat(range[1], \"</span>\");\n}\n/**\n * @internal\n */\nexport function mappingHintUpdate(n, range) {\n    Array.from(n.getElementsByTagName('span')).forEach(function (d, i) { return (d.textContent = range[i]); });\n}\nexport function filteredHistTemplate(c, f) {\n    return \"\\n    <div class=\\\"\".concat(cssClass('histogram-min-hint'), \"\\\" style=\\\"width: \").concat(c.percent(f.filterMin), \"%\\\"></div>\\n    <div class=\\\"\").concat(cssClass('histogram-max-hint'), \"\\\" style=\\\"width: \").concat(100 - c.percent(f.filterMax), \"%\\\"></div>\\n    <div class=\\\"\").concat(cssClass('histogram-min'), \"\\\" data-value=\\\"\").concat(c.format(f.filterMin), \"\\\" data-raw=\\\"\").concat(c.formatRaw(f.filterMin), \"\\\" style=\\\"left: \").concat(c.percent(f.filterMin), \"%\\\" title=\\\"min filter, drag or double click to change\\\"></div>\\n    <div class=\\\"\").concat(cssClass('histogram-max'), \"\\\" data-value=\\\"\").concat(c.format(f.filterMax), \"\\\" data-raw=\\\"\").concat(c.formatRaw(f.filterMax), \"\\\" style=\\\"right: \").concat(100 - c.percent(f.filterMax), \"%\\\" title=\\\"max filter, drag or double click to change\\\"></div>\\n    \").concat(filterMissingNumberMarkup(f.filterMissing, 0), \"\\n  \");\n}\nexport function initFilter(node, context) {\n    var min = node.getElementsByClassName(cssClass('histogram-min'))[0];\n    var max = node.getElementsByClassName(cssClass('histogram-max'))[0];\n    var minHint = node.getElementsByClassName(cssClass('histogram-min-hint'))[0];\n    var maxHint = node.getElementsByClassName(cssClass('histogram-max-hint'))[0];\n    var filterMissing = node.getElementsByTagName('input')[0];\n    var setFilter = function () {\n        var minValue = context.parseRaw(min.dataset.raw);\n        var maxValue = context.parseRaw(max.dataset.raw);\n        context.setFilter(filterMissing.checked, minValue, maxValue);\n    };\n    var minImpl = function (evt) {\n        evt.preventDefault();\n        evt.stopPropagation();\n        var value = context.parseRaw(min.dataset.raw);\n        context.edit(value, min, 'min').then(function (newValue) {\n            minHint.style.width = \"\".concat(context.percent(newValue), \"%\");\n            min.dataset.value = context.format(newValue);\n            min.dataset.raw = context.formatRaw(newValue);\n            min.style.left = \"\".concat(context.percent(newValue), \"%\");\n            min.classList.toggle(cssClass('swap-hint'), context.percent(newValue) > 15);\n            setFilter();\n        });\n    };\n    min.onclick = function (evt) {\n        if (!evt.shiftKey && !evt.ctrlKey) {\n            return;\n        }\n        minImpl(evt);\n    };\n    min.ondblclick = minImpl;\n    var maxImpl = function (evt) {\n        evt.preventDefault();\n        evt.stopPropagation();\n        var value = context.parseRaw(max.dataset.raw);\n        context.edit(value, max, 'max').then(function (newValue) {\n            maxHint.style.width = \"\".concat(100 - context.percent(newValue), \"%\");\n            max.dataset.value = context.format(newValue);\n            max.dataset.raw = context.formatRaw(newValue);\n            max.style.right = \"\".concat(100 - context.percent(newValue), \"%\");\n            max.classList.toggle(cssClass('swap-hint'), context.percent(newValue) < 85);\n            setFilter();\n        });\n    };\n    max.onclick = function (evt) {\n        if (!evt.shiftKey && !evt.ctrlKey) {\n            return;\n        }\n        maxImpl(evt);\n    };\n    max.ondblclick = maxImpl;\n    filterMissing.onchange = function () { return setFilter(); };\n    var options = {\n        minDelta: 0,\n        filter: function (evt) { return evt.button === 0 && !evt.shiftKey && !evt.ctrlKey; },\n        onStart: function (handle) { return handle.classList.add(cssClass('hist-dragging')); },\n        onDrag: function (handle, x) {\n            var total = node.clientWidth;\n            var px = Math.max(0, Math.min(x, total));\n            var percent = Math.round((100 * px) / total);\n            handle.dataset.value = context.format(context.unpercent(percent));\n            handle.dataset.raw = context.formatRaw(context.unpercent(percent));\n            if (handle.classList.contains(cssClass('histogram-min'))) {\n                handle.style.left = \"\".concat(percent, \"%\");\n                handle.classList.toggle(cssClass('swap-hint'), percent > 15);\n                minHint.style.width = \"\".concat(percent, \"%\");\n                return;\n            }\n            handle.style.right = \"\".concat(100 - percent, \"%\");\n            handle.classList.toggle(cssClass('swap-hint'), percent < 85);\n            maxHint.style.width = \"\".concat(100 - percent, \"%\");\n        },\n        onEnd: function (handle) {\n            handle.classList.remove(cssClass('hist-dragging'));\n            setFilter();\n        },\n    };\n    dragHandle(min, options);\n    dragHandle(max, options);\n    return function (missing, f) {\n        minHint.style.width = \"\".concat(context.percent(f.filterMin), \"%\");\n        maxHint.style.width = \"\".concat(100 - context.percent(f.filterMax), \"%\");\n        min.dataset.value = context.format(f.filterMin);\n        max.dataset.value = context.format(f.filterMax);\n        min.dataset.raw = context.formatRaw(f.filterMin);\n        max.dataset.raw = context.formatRaw(f.filterMax);\n        min.style.left = \"\".concat(context.percent(f.filterMin), \"%\");\n        max.style.right = \"\".concat(100 - context.percent(f.filterMax), \"%\");\n        min.classList.toggle(cssClass('swap-hint'), context.percent(f.filterMin) > 15);\n        max.classList.toggle(cssClass('swap-hint'), context.percent(f.filterMax) < 85);\n        filterMissing.checked = f.filterMissing;\n        updateFilterMissingNumberMarkup(filterMissing.parentElement, missing);\n    };\n}\n//# sourceMappingURL=histogram.js.map","import { numberStatsBuilder, getNumberOfBins } from '../internal';\nimport { isNumberColumn, isNumbersColumn, isMapAbleColumn, Ranking, } from '../model';\nimport InputNumberDialog from '../ui/dialogs/InputNumberDialog';\nimport { colorOf } from './impose';\nimport { ERenderMode, } from './interfaces';\nimport { renderMissingDOM } from './missing';\nimport { cssClass, engineCssClass } from '../styles';\nimport { histogramUpdate, histogramTemplate, mappingHintTemplate, mappingHintUpdate, filteredHistTemplate, initFilter, } from './histogram';\nimport { noNumberFilter } from '../model/internalNumber';\nvar HistogramCellRenderer = /** @class */ (function () {\n    function HistogramCellRenderer() {\n        this.title = 'Histogram';\n    }\n    HistogramCellRenderer.prototype.canRender = function (col, mode) {\n        return (isNumberColumn(col) && mode !== ERenderMode.CELL) || (isNumbersColumn(col) && mode === ERenderMode.CELL);\n    };\n    HistogramCellRenderer.prototype.create = function (col, _context, imposer) {\n        var _a = getHistDOMRenderer(col, imposer), template = _a.template, render = _a.render, guessedBins = _a.guessedBins;\n        return {\n            template: \"\".concat(template, \"</div>\"),\n            update: function (n, row) {\n                if (renderMissingDOM(n, col, row)) {\n                    return;\n                }\n                var b = numberStatsBuilder([0, 1], guessedBins);\n                for (var _i = 0, _a = col.getNumbers(row); _i < _a.length; _i++) {\n                    var n_1 = _a[_i];\n                    b.push(n_1);\n                }\n                var hist = b.build();\n                render(n, hist);\n            },\n        };\n    };\n    HistogramCellRenderer.prototype.createGroup = function (col, context, imposer) {\n        var _a = getHistDOMRenderer(col, imposer), template = _a.template, render = _a.render;\n        return {\n            template: \"\".concat(template, \"</div>\"),\n            update: function (n, group) {\n                return context.tasks.groupNumberStats(col, group).then(function (r) {\n                    if (typeof r === 'symbol') {\n                        return;\n                    }\n                    var isMissing = !r || r.group == null || r.group.count === 0 || r.group.count === r.group.missing;\n                    n.classList.toggle(cssClass('missing'), isMissing);\n                    if (isMissing) {\n                        return;\n                    }\n                    var summary = r.summary, group = r.group;\n                    render(n, group, summary);\n                });\n            },\n        };\n    };\n    HistogramCellRenderer.prototype.createSummary = function (col, context, interactive, imposer) {\n        var r = getHistDOMRenderer(col, imposer);\n        var staticHist = !interactive || !isMapAbleColumn(col);\n        return staticHist\n            ? staticSummary(col, context, r.template, r.render)\n            : interactiveSummary(col, context, r.template, r.render);\n    };\n    return HistogramCellRenderer;\n}());\nexport default HistogramCellRenderer;\nfunction staticSummary(col, context, template, render) {\n    if (isMapAbleColumn(col)) {\n        template += mappingHintTemplate(col.getRange());\n    }\n    return {\n        template: \"\".concat(template, \"</div>\"),\n        update: function (node) {\n            if (isMapAbleColumn(col)) {\n                mappingHintUpdate(node, col.getRange());\n            }\n            return context.tasks.summaryNumberStats(col).then(function (r) {\n                if (typeof r === 'symbol') {\n                    return;\n                }\n                var isMissing = !r || r.summary == null || r.summary.count === 0 || r.summary.count === r.summary.missing;\n                node.classList.toggle(cssClass('missing'), isMissing);\n                if (isMissing) {\n                    return;\n                }\n                render(node, r.summary);\n            });\n        },\n    };\n}\nfunction interactiveSummary(col, context, template, render) {\n    var fContext = createFilterContext(col, context);\n    template += filteredHistTemplate(fContext, createFilterInfo(col));\n    var updateFilter;\n    return {\n        template: \"\".concat(template, \"</div>\"),\n        update: function (node) {\n            if (!updateFilter) {\n                updateFilter = initFilter(node, fContext);\n            }\n            return context.tasks.summaryNumberStats(col, true /* raw */).then(function (r) {\n                if (typeof r === 'symbol') {\n                    return;\n                }\n                var summary = r.summary, data = r.data;\n                updateFilter(data ? data.missing : summary ? summary.missing : 0, createFilterInfo(col));\n                node.classList.add(cssClass('histogram-i'));\n                node.classList.toggle(cssClass('missing'), !summary);\n                if (!summary) {\n                    return;\n                }\n                render(node, summary, data);\n            });\n        },\n    };\n}\n/** @internal */\nexport function createNumberFilter(col, parent, context, livePreviews) {\n    var renderer = getHistDOMRenderer(col);\n    var fContext = createFilterContext(col, context);\n    parent.innerHTML = \"\".concat(renderer.template).concat(filteredHistTemplate(fContext, createFilterInfo(col)), \"</div>\");\n    var summaryNode = parent.firstElementChild;\n    summaryNode.classList.add(cssClass('summary'), cssClass('renderer'));\n    summaryNode.dataset.renderer = 'histogram';\n    summaryNode.dataset.interactive = '';\n    summaryNode.classList.add(cssClass('histogram-i'));\n    var applyFilter = fContext.setFilter;\n    var currentFilter = createFilterInfo(col);\n    fContext.setFilter = function (filterMissing, min, max) {\n        currentFilter = { filterMissing: filterMissing, filterMin: min, filterMax: max };\n        if (livePreviews) {\n            applyFilter(filterMissing, min, max);\n        }\n    };\n    var updateFilter = initFilter(summaryNode, fContext);\n    var rerender = function () {\n        var ready = context.tasks.summaryNumberStats(col, true /* raw */).then(function (r) {\n            if (typeof r === 'symbol') {\n                return;\n            }\n            var summary = r.summary, data = r.data;\n            updateFilter(data ? data.missing : summary ? summary.missing : 0, currentFilter);\n            summaryNode.classList.toggle(cssClass('missing'), !summary);\n            if (!summary) {\n                return;\n            }\n            renderer.render(summaryNode, summary, data);\n        });\n        if (!ready) {\n            return;\n        }\n        summaryNode.classList.add(engineCssClass('loading'));\n        ready.then(function () {\n            summaryNode.classList.remove(engineCssClass('loading'));\n        });\n    };\n    var ranking = col.findMyRanker();\n    if (ranking) {\n        ranking.on(\"\".concat(Ranking.EVENT_ORDER_CHANGED, \".numberFilter\"), function () { return rerender(); });\n    }\n    rerender();\n    return {\n        cleanUp: function () {\n            if (ranking) {\n                ranking.on(\"\".concat(Ranking.EVENT_ORDER_CHANGED, \".numberFilter\"), null);\n            }\n        },\n        reset: function () {\n            currentFilter = createFilterInfo(col, noNumberFilter());\n            rerender();\n        },\n        submit: function () {\n            applyFilter(currentFilter.filterMissing, currentFilter.filterMin, currentFilter.filterMax);\n        },\n    };\n}\n/** @internal */\nexport function getHistDOMRenderer(col, imposer) {\n    var ranking = col.findMyRanker();\n    var guessedBins = ranking ? getNumberOfBins(ranking.getOrderLength()) : 10;\n    var formatter = col.getNumberFormat();\n    var render = function (n, stats, unfiltered) {\n        return histogramUpdate(n, stats, unfiltered || null, formatter, function (bin) { return colorOf(col, null, imposer, (bin.x1 + bin.x0) / 2); });\n    };\n    return {\n        template: histogramTemplate(guessedBins),\n        render: render,\n        guessedBins: guessedBins,\n    };\n}\nfunction createFilterInfo(col, filter) {\n    if (filter === void 0) { filter = col.getFilter(); }\n    var domain = col.getMapping().domain;\n    var filterMin = isFinite(filter.min) ? filter.min : domain[0];\n    var filterMax = isFinite(filter.max) ? filter.max : domain[1];\n    return {\n        filterMissing: filter.filterMissing,\n        filterMin: filterMin,\n        filterMax: filterMax,\n    };\n}\nfunction createFilterContext(col, context) {\n    var domain = col.getMapping().domain;\n    var format = col.getNumberFormat();\n    var clamp = function (v) { return Math.max(0, Math.min(100, v)); };\n    var percent = function (v) { return clamp(Math.round((100 * (v - domain[0])) / (domain[1] - domain[0]))); };\n    var unpercent = function (v) { return (v / 100) * (domain[1] - domain[0]) + domain[0]; };\n    return {\n        percent: percent,\n        unpercent: unpercent,\n        domain: domain,\n        format: format,\n        formatRaw: String,\n        parseRaw: Number.parseFloat,\n        setFilter: function (filterMissing, minValue, maxValue) {\n            return col.setFilter({\n                filterMissing: filterMissing,\n                min: minValue === domain[0] ? Number.NEGATIVE_INFINITY : minValue,\n                max: maxValue === domain[1] ? Number.POSITIVE_INFINITY : maxValue,\n            });\n        },\n        edit: function (value, attachment) {\n            return new Promise(function (resolve) {\n                var dialogCtx = {\n                    attachment: attachment,\n                    manager: context.dialogManager,\n                    level: context.dialogManager.maxLevel + 1,\n                    idPrefix: context.idPrefix,\n                    sanitize: context.sanitize,\n                };\n                var dialog = new InputNumberDialog(dialogCtx, resolve, {\n                    value: value,\n                    min: domain[0],\n                    max: domain[1],\n                });\n                dialog.open();\n            });\n        },\n    };\n}\n//# sourceMappingURL=HistogramCellRenderer.js.map","import { LinkColumn } from '../model';\nimport { ERenderMode } from './interfaces';\nimport { renderMissingDOM } from './missing';\nimport { noRenderer } from './utils';\nimport { abortAble } from 'lineupengine';\nfunction loadImage(src) {\n    return new Promise(function (resolve) {\n        var image = new Image();\n        image.onload = function () { return resolve(image); };\n        image.src = src;\n    });\n}\nvar ImageCellRenderer = /** @class */ (function () {\n    function ImageCellRenderer() {\n        this.title = 'Image';\n    }\n    ImageCellRenderer.prototype.canRender = function (col, mode) {\n        return col instanceof LinkColumn && mode === ERenderMode.CELL;\n    };\n    ImageCellRenderer.prototype.create = function (col) {\n        return {\n            template: \"<div></div>\",\n            update: function (n, d) {\n                var missing = renderMissingDOM(n, col, d);\n                n.style.backgroundImage = null;\n                if (missing) {\n                    n.title = '';\n                    return undefined;\n                }\n                var v = col.getLink(d);\n                n.title = v ? v.alt : '';\n                if (!v) {\n                    return undefined;\n                }\n                return abortAble(loadImage(v.href)).then(function (image) {\n                    if (typeof image === 'symbol') {\n                        return;\n                    }\n                    n.style.backgroundImage = missing || !v ? null : \"url('\".concat(image.src, \"')\");\n                });\n            },\n        };\n    };\n    ImageCellRenderer.prototype.createGroup = function () {\n        return noRenderer;\n    };\n    ImageCellRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return ImageCellRenderer;\n}());\nexport default ImageCellRenderer;\n//# sourceMappingURL=ImageCellRenderer.js.map","import { noRenderer } from './utils';\n/**\n * helper class that renders a group renderer as a selected (e.g. median) single item\n */\nvar AAggregatedGroupRenderer = /** @class */ (function () {\n    function AAggregatedGroupRenderer() {\n    }\n    AAggregatedGroupRenderer.prototype.createGroup = function (col, context, imposer) {\n        var _this = this;\n        var single = this.create(col, context, imposer);\n        return {\n            template: single.template,\n            update: function (node, group) {\n                return context.tasks\n                    .groupRows(col, group, 'aggregated', function (rows) { return _this.aggregatedIndex(rows, col); })\n                    .then(function (data) {\n                    if (typeof data !== 'symbol') {\n                        single.update(node, data.row, data.index, group);\n                    }\n                });\n            },\n        };\n    };\n    AAggregatedGroupRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return AAggregatedGroupRenderer;\n}());\nexport { AAggregatedGroupRenderer };\nexport default AAggregatedGroupRenderer;\n//# sourceMappingURL=AAggregatedGroupRenderer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { round } from '../internal';\nimport { isNumberColumn, isMultiLevelColumn, } from '../model';\nimport { medianIndex } from '../model/internalNumber';\nimport { COLUMN_PADDING } from '../styles';\nimport { AAggregatedGroupRenderer } from './AAggregatedGroupRenderer';\nimport { ERenderMode, } from './interfaces';\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\nimport { matchColumns, multiLevelGridCSSClass } from './utils';\nimport { cssClass } from '../styles';\nimport { abortAbleAll } from 'lineupengine';\n/**\n * @internal\n * @param parent Parent column\n * @param context Render context\n * @param stacked Are the columns stacked?\n * @param mode Render mode\n * @param imposer Imposer object\n */\nexport function createData(parent, context, stacked, mode, imposer) {\n    var padding = COLUMN_PADDING;\n    var offset = 0;\n    var cols = parent.children.map(function (column) {\n        var shift = offset;\n        var width = column.getWidth();\n        offset += width;\n        offset += !stacked ? padding : 0;\n        var renderer = mode === ERenderMode.CELL ? context.renderer(column, imposer) : null;\n        var groupRenderer = mode === ERenderMode.GROUP ? context.groupRenderer(column, imposer) : null;\n        var summaryRenderer = mode === ERenderMode.GROUP ? context.summaryRenderer(column, false, imposer) : null;\n        var template = '';\n        var rendererId = '';\n        switch (mode) {\n            case ERenderMode.CELL:\n                template = renderer.template;\n                rendererId = column.getRenderer();\n                break;\n            case ERenderMode.GROUP:\n                template = groupRenderer.template;\n                rendererId = column.getGroupRenderer();\n                break;\n            case ERenderMode.SUMMARY:\n                template = summaryRenderer.template;\n                rendererId = column.getSummaryRenderer();\n                break;\n        }\n        // inject data attributes\n        template = template.replace(/^<([^ >]+)([ >])/, \"<$1 data-column-id=\\\"\".concat(column.id, \"\\\" data-renderer=\\\"\").concat(rendererId, \"\\\"$2\"));\n        // inject classes\n        if (/^<([^>]+) class=\"([ >]*)/.test(template)) {\n            // has class attribute\n            template = template.replace(/^<([^>]+) class=\"([ >]*)/, \"<$1 class=\\\"\".concat(cssClass(\"renderer-\".concat(rendererId)), \" $2\"));\n        }\n        else {\n            // inject as the others\n            template = template.replace(/^<([^ >]+)([ >])/, \"<$1 class=\\\"\".concat(cssClass(\"renderer-\".concat(rendererId)), \"\\\"$2\"));\n        }\n        return {\n            column: column,\n            shift: shift,\n            width: width,\n            template: template,\n            rendererId: rendererId,\n            renderer: renderer,\n            groupRenderer: groupRenderer,\n            summaryRenderer: summaryRenderer,\n        };\n    });\n    return { cols: cols, stacked: stacked, padding: padding };\n}\nvar MultiLevelCellRenderer = /** @class */ (function (_super) {\n    __extends(MultiLevelCellRenderer, _super);\n    function MultiLevelCellRenderer(stacked) {\n        if (stacked === void 0) { stacked = true; }\n        var _this = _super.call(this) || this;\n        _this.stacked = stacked;\n        _this.title = _this.stacked ? 'Stacked Bar' : 'Nested';\n        return _this;\n    }\n    MultiLevelCellRenderer.prototype.canRender = function (col) {\n        return isMultiLevelColumn(col);\n    };\n    MultiLevelCellRenderer.prototype.create = function (col, context, imposer) {\n        var _this = this;\n        var _a = createData(col, context, this.stacked, ERenderMode.CELL, imposer), cols = _a.cols, stacked = _a.stacked;\n        var width = context.colWidth(col);\n        return {\n            template: \"<div class='\".concat(multiLevelGridCSSClass(context.idPrefix, col), \" \").concat(!stacked ? cssClass('grid-space') : '', \"'>\").concat(cols.map(function (d) { return d.template; }).join(''), \"</div>\"),\n            update: function (n, d, i, group) {\n                if (renderMissingDOM(n, col, d)) {\n                    return null;\n                }\n                matchColumns(n, cols, context);\n                var toWait = [];\n                var children = Array.from(n.children);\n                var total = col.getWidth();\n                var missingWeight = 0;\n                cols.forEach(function (col, ci) {\n                    var weight = col.column.getWidth() / total;\n                    var cNode = children[ci];\n                    cNode.classList.add(cssClass(_this.stacked ? 'stack-sub' : 'nested-sub'), cssClass('detail'));\n                    cNode.dataset.group = 'd';\n                    cNode.style.transform = stacked ? \"translate(-\".concat(round((missingWeight / weight) * 100, 4), \"%,0)\") : null;\n                    cNode.style.gridColumnStart = (ci + 1).toString();\n                    var r = col.renderer.update(cNode, d, i, group);\n                    if (stacked) {\n                        missingWeight += (1 - col.column.getNumber(d)) * weight;\n                        if (ci < cols.length - 1) {\n                            var span = cNode.querySelector('span');\n                            if (span) {\n                                span.style.overflow = 'hidden';\n                            }\n                        }\n                    }\n                    if (r) {\n                        toWait.push(r);\n                    }\n                });\n                if (toWait.length > 0) {\n                    return abortAbleAll(toWait);\n                }\n                return null;\n            },\n            render: function (ctx, d, i, group) {\n                if (renderMissingCanvas(ctx, col, d, width)) {\n                    return null;\n                }\n                var toWait = [];\n                var stackShift = 0;\n                for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n                    var col_1 = cols_1[_i];\n                    var cr = col_1.renderer;\n                    if (cr.render) {\n                        var shift = col_1.shift - stackShift;\n                        ctx.translate(shift, 0);\n                        var r = cr.render(ctx, d, i, group);\n                        if (typeof r !== 'boolean' && r) {\n                            toWait.push({ shift: shift, r: r });\n                        }\n                        ctx.translate(-shift, 0);\n                    }\n                    if (stacked) {\n                        stackShift += col_1.width * (1 - col_1.column.getNumber(d));\n                    }\n                }\n                if (toWait.length === 0) {\n                    return null;\n                }\n                return abortAbleAll(toWait.map(function (d) { return d.r; })).then(function (callbacks) {\n                    return function (ctx) {\n                        if (typeof callbacks === 'symbol') {\n                            return;\n                        }\n                        for (var i_1 = 0; i_1 < callbacks.length; ++i_1) {\n                            var callback = callbacks[i_1];\n                            if (typeof callback !== 'function') {\n                                continue;\n                            }\n                            var shift = toWait[i_1].shift;\n                            ctx.translate(shift, 0);\n                            callback(ctx);\n                            ctx.translate(-shift, 0);\n                        }\n                    };\n                });\n            },\n        };\n    };\n    MultiLevelCellRenderer.prototype.createGroup = function (col, context, imposer) {\n        var _this = this;\n        if (this.stacked && isNumberColumn(col)) {\n            return _super.prototype.createGroup.call(this, col, context, imposer);\n        }\n        var cols = createData(col, context, false, ERenderMode.GROUP, imposer).cols;\n        return {\n            template: \"<div class='\".concat(multiLevelGridCSSClass(context.idPrefix, col), \" \").concat(cssClass('grid-space'), \"'>\").concat(cols\n                .map(function (d) { return d.template; })\n                .join(''), \"</div>\"),\n            update: function (n, group) {\n                matchColumns(n, cols, context);\n                var toWait = [];\n                var children = Array.from(n.children);\n                cols.forEach(function (col, ci) {\n                    var childNode = children[ci];\n                    childNode.classList.add(cssClass(_this.stacked ? 'stack-sub' : 'nested-sub'), cssClass('group'));\n                    childNode.dataset.group = 'g';\n                    childNode.style.gridColumnStart = (ci + 1).toString();\n                    var r = col.groupRenderer.update(childNode, group);\n                    if (r) {\n                        toWait.push(r);\n                    }\n                });\n                if (toWait.length > 0) {\n                    return abortAbleAll(toWait);\n                }\n                return null;\n            },\n        };\n    };\n    MultiLevelCellRenderer.prototype.aggregatedIndex = function (rows, col) {\n        console.assert(isNumberColumn(col));\n        return medianIndex(rows, col);\n    };\n    return MultiLevelCellRenderer;\n}(AAggregatedGroupRenderer));\nexport default MultiLevelCellRenderer;\n//# sourceMappingURL=MultiLevelCellRenderer.js.map","import { CompositeNumberColumn } from '../model';\nimport { CANVAS_HEIGHT, cssClass } from '../styles';\nimport { getHistDOMRenderer } from './HistogramCellRenderer';\nimport { ERenderMode, } from './interfaces';\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\nimport { createData } from './MultiLevelCellRenderer';\nimport { colorOf, matchColumns, forEachChild } from './utils';\nimport { tasksAll } from '../provider';\nvar InterleavingCellRenderer = /** @class */ (function () {\n    function InterleavingCellRenderer() {\n        this.title = 'Interleaved';\n    }\n    InterleavingCellRenderer.prototype.canRender = function (col) {\n        return col instanceof CompositeNumberColumn;\n    };\n    InterleavingCellRenderer.prototype.create = function (col, context) {\n        var cols = createData(col, context, false, ERenderMode.CELL).cols;\n        var width = context.colWidth(col);\n        return {\n            template: \"<div>\".concat(cols.map(function (r) { return r.template; }).join(''), \"</div>\"),\n            update: function (n, d, i, group) {\n                var missing = renderMissingDOM(n, col, d);\n                if (missing) {\n                    return;\n                }\n                matchColumns(n, cols, context);\n                forEachChild(n, function (ni, j) {\n                    cols[j].renderer.update(ni, d, i, group);\n                });\n            },\n            render: function (ctx, d, _i, group) {\n                if (renderMissingCanvas(ctx, col, d, width)) {\n                    return;\n                }\n                ctx.save();\n                ctx.scale(1, 1 / cols.length); // scale since internal use the height, too\n                cols.forEach(function (r, i) {\n                    var rr = r.renderer;\n                    if (rr.render) {\n                        rr.render(ctx, d, i, group);\n                    }\n                    ctx.translate(0, CANVAS_HEIGHT);\n                });\n                ctx.restore();\n            },\n        };\n    };\n    InterleavingCellRenderer.prototype.createGroup = function (col, context) {\n        var cols = createData(col, context, false, ERenderMode.GROUP).cols;\n        return {\n            template: \"<div>\".concat(cols.map(function (r) { return r.template; }).join(''), \"</div>\"),\n            update: function (n, group) {\n                matchColumns(n, cols, context);\n                forEachChild(n, function (ni, j) {\n                    cols[j].groupRenderer.update(ni, group);\n                });\n            },\n        };\n    };\n    InterleavingCellRenderer.prototype.createSummary = function (col, context, _interactive) {\n        var cols = col.children;\n        var acc = 0;\n        var _a = getHistDOMRenderer(col, {\n            color: function () { return colorOf(cols[acc++ % cols.length]); },\n        }), template = _a.template, render = _a.render;\n        return {\n            template: template,\n            update: function (n) {\n                var tasks = cols.map(function (col) { return context.tasks.summaryNumberStats(col); });\n                return tasksAll(tasks).then(function (vs) {\n                    if (typeof vs === 'symbol') {\n                        return;\n                    }\n                    var summaries = vs.map(function (d) { return d.summary; });\n                    if (!summaries.some(Boolean)) {\n                        n.classList.add(cssClass('missing'));\n                        return;\n                    }\n                    n.classList.remove(cssClass('missing'));\n                    var grouped = groupedHist(summaries);\n                    render(n, grouped);\n                });\n            },\n        };\n    };\n    return InterleavingCellRenderer;\n}());\nexport default InterleavingCellRenderer;\nvar dummyBin = {\n    count: 0,\n    x0: 0,\n    x1: 0,\n};\nfunction groupedHist(stats) {\n    var sample = stats.find(Boolean);\n    if (!sample) {\n        return null;\n    }\n    var bins = sample.hist.length;\n    // assert all have the same bin size\n    var hist = [];\n    var maxBin = 0;\n    for (var i = 0; i < bins; ++i) {\n        for (var _a = 0, stats_1 = stats; _a < stats_1.length; _a++) {\n            var s = stats_1[_a];\n            var bin = s ? s.hist[i] : null;\n            if (!bin) {\n                hist.push(dummyBin);\n                continue;\n            }\n            if (bin.count > maxBin) {\n                maxBin = bin.count;\n            }\n            hist.push(bin);\n        }\n    }\n    return {\n        maxBin: maxBin,\n        hist: hist,\n    };\n}\n//# sourceMappingURL=InterleavingCellRenderer.js.map","import { LinkColumn } from '../model';\nimport { ERenderMode, } from './interfaces';\nimport { renderMissingDOM } from './missing';\nimport { noRenderer, setText } from './utils';\nimport { cssClass } from '../styles';\nimport { clear } from '../internal';\nvar LinkCellRenderer = /** @class */ (function () {\n    function LinkCellRenderer() {\n        this.title = 'Link';\n    }\n    LinkCellRenderer.prototype.canRender = function (col, mode) {\n        return col instanceof LinkColumn && mode !== ERenderMode.SUMMARY;\n    };\n    LinkCellRenderer.prototype.create = function (col, context) {\n        var align = context.sanitize(col.alignment || 'left');\n        return {\n            template: \"<a\".concat(align !== 'left' ? \" class=\\\"\".concat(cssClass(align), \"\\\"\") : '', \" target=\\\"_blank\\\" rel=\\\"noopener\\\" href=\\\"\\\"></a>\"),\n            update: function (n, d) {\n                renderMissingDOM(n, col, d);\n                var v = col.getLink(d);\n                n.href = v ? v.href : '';\n                if (col.escape) {\n                    setText(n, v ? v.alt : '');\n                }\n                else {\n                    n.innerHTML = v ? v.alt : '';\n                }\n            },\n        };\n    };\n    LinkCellRenderer.exampleText = function (col, rows) {\n        var numExampleRows = 5;\n        var examples = [];\n        rows.every(function (row) {\n            var v = col.getLink(row);\n            if (!v) {\n                return true;\n            }\n            examples.push(v);\n            return examples.length < numExampleRows;\n        });\n        if (examples.length === 0) {\n            return [[], false];\n        }\n        return [examples, examples.length < rows.length];\n    };\n    LinkCellRenderer.prototype.createGroup = function (col, context) {\n        return {\n            template: \"<div> </div>\",\n            update: function (n, group) {\n                return context.tasks\n                    .groupExampleRows(col, group, 'link', function (rows) { return LinkCellRenderer.exampleText(col, rows); })\n                    .then(function (out) {\n                    if (typeof out === 'symbol') {\n                        return;\n                    }\n                    var links = out[0], more = out[1];\n                    updateLinkList(n, links, more);\n                });\n            },\n        };\n    };\n    LinkCellRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return LinkCellRenderer;\n}());\nexport default LinkCellRenderer;\nexport function updateLinkList(n, links, more) {\n    n.classList.toggle(cssClass('missing'), links.length === 0);\n    clear(n);\n    links.forEach(function (l, i) {\n        if (i > 0) {\n            n.appendChild(n.ownerDocument.createTextNode(', '));\n        }\n        var a = n.ownerDocument.createElement('a');\n        a.href = l.href;\n        a.textContent = l.alt;\n        a.target = '_blank';\n        a.rel = 'noopener';\n        n.appendChild(a);\n    });\n    if (more) {\n        n.insertAdjacentText('beforeend', ', ');\n    }\n}\n//# sourceMappingURL=LinkCellRenderer.js.map","import { clear, round } from '../internal';\nimport { isMapAbleColumn, isMapColumn, isNumberColumn, } from '../model';\nimport { colorOf } from './impose';\nimport { ERenderMode, } from './interfaces';\nimport { renderMissingDOM } from './missing';\nimport { noRenderer, adaptColor, BIG_MARK_LIGHTNESS_FACTOR } from './utils';\nimport { cssClass } from '../styles';\nvar MapBarCellRenderer = /** @class */ (function () {\n    function MapBarCellRenderer() {\n        this.title = 'Bar Table';\n    }\n    MapBarCellRenderer.prototype.canRender = function (col, mode) {\n        return (isMapColumn(col) &&\n            isNumberColumn(col) &&\n            (mode === ERenderMode.CELL || (mode === ERenderMode.SUMMARY && isMapAbleColumn(col))));\n    };\n    MapBarCellRenderer.prototype.create = function (col, _context, imposer) {\n        var formatter = col.getNumberFormat();\n        return {\n            template: \"<div class=\\\"\".concat(cssClass('rtable'), \"\\\"></div>\"),\n            update: function (node, d) {\n                if (renderMissingDOM(node, col, d)) {\n                    return;\n                }\n                renderTable(node, col.getMap(d), function (n, _a) {\n                    var value = _a.value;\n                    if (Number.isNaN(value)) {\n                        n.classList.add(cssClass('missing'));\n                    }\n                    else {\n                        var w = round(value * 100, 2);\n                        n.title = formatter(value);\n                        var inner = n.ownerDocument.createElement('div');\n                        inner.style.width = \"\".concat(w, \"%\");\n                        inner.style.backgroundColor = adaptColor(colorOf(col, d, imposer), BIG_MARK_LIGHTNESS_FACTOR);\n                        n.appendChild(inner);\n                        var span = n.ownerDocument.createElement('span');\n                        span.classList.add(cssClass('hover-only'));\n                        span.textContent = formatter(value);\n                        inner.appendChild(span);\n                    }\n                });\n            },\n        };\n    };\n    MapBarCellRenderer.prototype.createGroup = function () {\n        return noRenderer;\n    };\n    MapBarCellRenderer.prototype.createSummary = function (col) {\n        return {\n            template: \"<div class=\\\"\".concat(cssClass('rtable'), \"\\\"><div>Key</div><div><span></span><span></span>Value</div></div>\"),\n            update: function (node) {\n                var range = col.getRange();\n                var value = node.lastElementChild;\n                value.firstElementChild.textContent = range[0];\n                value.children[1].textContent = range[1];\n            },\n        };\n    };\n    return MapBarCellRenderer;\n}());\nexport default MapBarCellRenderer;\nexport function renderTable(node, arr, renderValue) {\n    clear(node);\n    var doc = node.ownerDocument;\n    for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n        var entry = arr_1[_i];\n        var keyNode = doc.createElement('div');\n        keyNode.textContent = entry.key;\n        node.appendChild(keyNode);\n        var valueNode = doc.createElement('div');\n        renderValue(valueNode, entry);\n        node.appendChild(valueNode);\n    }\n}\n//# sourceMappingURL=MapBarCellRenderer.js.map","import { isArrayColumn, isMapColumn, isMissingValue, } from '../model';\nimport { renderMissingDOM } from './missing';\nimport { forEach, noop } from './utils';\nimport { cssClass } from '../styles';\nimport { renderTable } from './MapBarCellRenderer';\nvar TableCellRenderer = /** @class */ (function () {\n    function TableCellRenderer() {\n        this.title = 'Table';\n    }\n    TableCellRenderer.prototype.canRender = function (col) {\n        return isMapColumn(col);\n    };\n    TableCellRenderer.prototype.create = function (col) {\n        if (isArrayColumn(col) && col.dataLength) {\n            // fixed length optimized rendering\n            return this.createFixed(col);\n        }\n        return {\n            template: \"<div class=\\\"\".concat(cssClass('rtable'), \"\\\"></div>\"),\n            update: function (node, d) {\n                if (renderMissingDOM(node, col, d)) {\n                    return;\n                }\n                renderTable(node, col.getMapLabel(d), function (n, _a) {\n                    var value = _a.value;\n                    n.textContent = value;\n                });\n            },\n        };\n    };\n    TableCellRenderer.template = function (col) {\n        var labels = col.labels;\n        return \"<div>\".concat(labels\n            .map(function (l) { return \"<div class=\\\"\".concat(cssClass('table-cell'), \"\\\">\").concat(l, \"</div><div  class=\\\"\").concat(cssClass('table-cell'), \"\\\" data-v></div>\"); })\n            .join('\\n'), \"</div>\");\n    };\n    TableCellRenderer.prototype.createFixed = function (col) {\n        return {\n            template: TableCellRenderer.template(col),\n            update: function (node, d) {\n                if (renderMissingDOM(node, col, d)) {\n                    return;\n                }\n                var value = col.getLabels(d);\n                forEach(node, '[data-v]', function (n, i) {\n                    n.textContent = value[i];\n                });\n            },\n        };\n    };\n    TableCellRenderer.prototype.createGroup = function (col, context) {\n        if (isArrayColumn(col) && col.dataLength) {\n            // fixed length optimized rendering\n            return this.createFixedGroup(col, context);\n        }\n        return {\n            template: \"<div class=\\\"\".concat(cssClass('rtable'), \"\\\"></div>\"),\n            update: function (node, group) {\n                return context.tasks\n                    .groupRows(col, group, 'table', function (rows) { return groupByKey(rows.map(function (d) { return col.getMapLabel(d); })); })\n                    .then(function (entries) {\n                    if (typeof entries === 'symbol') {\n                        return;\n                    }\n                    renderTable(node, entries, function (n, _a) {\n                        var values = _a.values;\n                        var numExampleRows = 5;\n                        var v = \"\".concat(values\n                            .slice(0, numExampleRows)\n                            .map(function (d) { return d.value; })\n                            .join(', '));\n                        if (numExampleRows < values.length) {\n                            n.textContent = \"\".concat(v, \", \\u2026\");\n                        }\n                        else {\n                            n.textContent = v;\n                        }\n                    });\n                });\n            },\n        };\n    };\n    TableCellRenderer.prototype.createFixedGroup = function (col, context) {\n        return {\n            template: TableCellRenderer.template(col),\n            update: function (node, group) {\n                return context.tasks\n                    .groupExampleRows(col, group, 'table', function (rows) {\n                    var values = col.labels.map(function () { return []; });\n                    rows.forEach(function (row) {\n                        var labels = col.getLabels(row);\n                        for (var i = 0; i < Math.min(values.length, labels.length); ++i) {\n                            if (!isMissingValue(labels[i])) {\n                                values[i].push(labels[i]);\n                            }\n                        }\n                    });\n                    return values;\n                })\n                    .then(function (values) {\n                    if (typeof values === 'symbol') {\n                        return;\n                    }\n                    forEach(node, '[data-v]', function (n, i) {\n                        n.textContent = \"\".concat(values[i].join(', '), \", \\u2026\");\n                    });\n                });\n            },\n        };\n    };\n    TableCellRenderer.prototype.createSummary = function () {\n        return {\n            template: \"<div class=\\\"\".concat(cssClass('rtable'), \"\\\"><div>Key</div><div>Value</div></div>\"),\n            update: noop,\n        };\n    };\n    return TableCellRenderer;\n}());\nexport default TableCellRenderer;\n/** @internal */\nexport function groupByKey(arr) {\n    var m = new Map();\n    arr.forEach(function (a) {\n        return a.forEach(function (d) {\n            if (!m.has(d.key)) {\n                m.set(d.key, [d]);\n            }\n            else {\n                m.get(d.key).push(d);\n            }\n        });\n    });\n    return Array.from(m)\n        .sort(function (a, b) { return a[0].localeCompare(b[0]); })\n        .map(function (_a) {\n        var key = _a[0], values = _a[1];\n        return ({ key: key, values: values });\n    });\n}\n//# sourceMappingURL=TableCellRenderer.js.map","import { LinkMapColumn } from '../model';\nimport { ERenderMode, } from './interfaces';\nimport { renderMissingDOM } from './missing';\nimport { groupByKey } from './TableCellRenderer';\nimport { noRenderer, noop } from './utils';\nimport { cssClass } from '../styles';\nimport { clear } from '../internal';\nimport { updateLinkList } from './LinkCellRenderer';\nimport { renderTable } from './MapBarCellRenderer';\nvar LinkMapCellRenderer = /** @class */ (function () {\n    function LinkMapCellRenderer() {\n        this.title = 'Table with Links';\n    }\n    LinkMapCellRenderer.prototype.canRender = function (col, mode) {\n        return col instanceof LinkMapColumn && mode !== ERenderMode.SUMMARY;\n    };\n    LinkMapCellRenderer.prototype.create = function (col, context) {\n        var align = context.sanitize(col.alignment || 'left');\n        return {\n            template: \"<div class=\\\"\".concat(cssClass('rtable'), \"\\\"></div>\"),\n            update: function (node, d) {\n                if (renderMissingDOM(node, col, d)) {\n                    return;\n                }\n                clear(node);\n                var doc = node.ownerDocument;\n                for (var _i = 0, _a = col.getLinkMap(d); _i < _a.length; _i++) {\n                    var _b = _a[_i], key = _b.key, value = _b.value;\n                    var keyNode = doc.createElement('div');\n                    keyNode.classList.add(cssClass('table-cell'));\n                    keyNode.textContent = key;\n                    node.appendChild(keyNode);\n                    var valueNode = doc.createElement('div');\n                    valueNode.classList.add(cssClass('table-cell'));\n                    if (align !== 'left') {\n                        valueNode.classList.add(cssClass(align));\n                    }\n                    var valueA = doc.createElement('a');\n                    valueA.href = value.href;\n                    valueA.textContent = value.alt;\n                    valueA.target = '_blank';\n                    valueA.rel = 'noopener';\n                    valueNode.appendChild(valueA);\n                    node.appendChild(valueNode);\n                }\n            },\n            render: noop,\n        };\n    };\n    LinkMapCellRenderer.example = function (arr) {\n        var numExampleRows = 5;\n        var examples = [];\n        for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n            var row = arr_1[_i];\n            if (!row || !row.value.href) {\n                continue;\n            }\n            examples.push(row.value);\n            if (examples.length >= numExampleRows) {\n                break;\n            }\n        }\n        if (examples.length === 0) {\n            return [[], false];\n        }\n        return [examples, examples.length < arr.length];\n    };\n    LinkMapCellRenderer.prototype.createGroup = function (col, context) {\n        var align = col.alignment || 'left';\n        return {\n            template: \"<div class=\\\"\".concat(cssClass('rtable'), \"\\\"></div>\"),\n            update: function (node, group) {\n                return context.tasks\n                    .groupRows(col, group, 'linkmap', function (rows) { return groupByKey(rows.map(function (d) { return col.getLinkMap(d); })); })\n                    .then(function (entries) {\n                    if (typeof entries === 'symbol') {\n                        return;\n                    }\n                    renderTable(node, entries, function (n, _a) {\n                        var values = _a.values;\n                        if (align !== 'left') {\n                            n.classList.add(cssClass(align));\n                        }\n                        var _b = LinkMapCellRenderer.example(values), links = _b[0], more = _b[1];\n                        if (links.length === 0) {\n                            n.classList.add(cssClass('missing'));\n                        }\n                        else {\n                            updateLinkList(n, links, more);\n                        }\n                    });\n                });\n            },\n        };\n    };\n    LinkMapCellRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return LinkMapCellRenderer;\n}());\nexport default LinkMapCellRenderer;\n//# sourceMappingURL=LinkMapCellRenderer.js.map","import { noop } from './utils';\nvar LoadingCellRenderer = /** @class */ (function () {\n    function LoadingCellRenderer() {\n        this.title = 'Loading';\n    }\n    LoadingCellRenderer.prototype.canRender = function () {\n        return false; // just direct selection\n    };\n    LoadingCellRenderer.prototype.create = function () {\n        // no typing because ICellRenderer would not be assignable to IGroupCellRenderer and ISummaryRenderer\n        return {\n            template: \"<div>Loading \\u2026</div>\",\n            update: noop,\n        };\n    };\n    LoadingCellRenderer.prototype.createGroup = function () {\n        return this.create();\n    };\n    LoadingCellRenderer.prototype.createSummary = function () {\n        return this.create();\n    };\n    return LoadingCellRenderer;\n}());\nexport default LoadingCellRenderer;\n//# sourceMappingURL=LoadingCellRenderer.js.map","import { RankColumn } from '../model';\nimport { renderMissingDOM } from './missing';\nimport { noRenderer, setText } from './utils';\nimport { cssClass } from '../styles';\nvar RankCellRenderer = /** @class */ (function () {\n    function RankCellRenderer() {\n        this.title = 'Default';\n    }\n    RankCellRenderer.prototype.canRender = function (col) {\n        return col instanceof RankColumn;\n    };\n    RankCellRenderer.prototype.create = function (col) {\n        return {\n            template: \"<div class=\\\"\".concat(cssClass('right'), \"\\\"> </div>\"),\n            update: function (n, d) {\n                renderMissingDOM(n, col, d);\n                setText(n, col.getLabel(d));\n            },\n        };\n    };\n    RankCellRenderer.prototype.createGroup = function (col) {\n        var ranking = col.findMyRanker();\n        return {\n            template: \"<div><div></div><div></div></div>\",\n            update: function (n, group) {\n                var fromTSpan = n.firstElementChild;\n                var toTSpan = n.lastElementChild;\n                if (group.order.length === 0) {\n                    fromTSpan.textContent = '';\n                    toTSpan.textContent = '';\n                    return;\n                }\n                fromTSpan.textContent = ranking.getRank(group.order[0]).toString();\n                toTSpan.textContent = ranking.getRank(group.order[group.order.length - 1]).toString();\n            },\n        };\n    };\n    RankCellRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return RankCellRenderer;\n}());\nexport default RankCellRenderer;\n//# sourceMappingURL=RankCellRenderer.js.map","import { SelectionColumn } from '../model';\nimport { cssClass } from '../styles';\nimport { everyIndices } from '../model/internal';\nimport { rangeSelection } from '../provider/utils';\nvar SelectionRenderer = /** @class */ (function () {\n    function SelectionRenderer() {\n        this.title = 'Default';\n    }\n    SelectionRenderer.prototype.canRender = function (col) {\n        return col instanceof SelectionColumn;\n    };\n    SelectionRenderer.prototype.create = function (col, ctx) {\n        return {\n            template: \"<div></div>\",\n            update: function (n, d, i) {\n                n.onclick = function (event) {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    if (event.shiftKey) {\n                        var ranking = col.findMyRanker().id;\n                        if (rangeSelection(ctx.provider, ranking, d.i, i, event.ctrlKey)) {\n                            return;\n                        }\n                    }\n                    col.toggleValue(d);\n                };\n            },\n        };\n    };\n    SelectionRenderer.prototype.createGroup = function (col, context) {\n        return {\n            template: \"<div></div>\",\n            update: function (n, group) {\n                var selected = 0;\n                var unselected = 0;\n                var total = group.order.length;\n                everyIndices(group.order, function (i) {\n                    var s = context.provider.isSelected(i);\n                    if (s) {\n                        selected++;\n                    }\n                    else {\n                        unselected++;\n                    }\n                    if (selected * 2 > total || unselected * 2 > total) {\n                        // more than half already, can abort already decided\n                        return false;\n                    }\n                    return true;\n                });\n                n.classList.toggle(cssClass('group-selected'), selected * 2 > total);\n                n.onclick = function (event) {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    var value = n.classList.toggle(cssClass('group-selected'));\n                    col.setValues(group.order, value);\n                };\n            },\n        };\n    };\n    SelectionRenderer.prototype.createSummary = function (col, context) {\n        var unchecked = cssClass('icon-unchecked');\n        var checked = cssClass('icon-checked');\n        return {\n            template: \"<div title=\\\"(Un)Select All\\\" class=\\\"\".concat(unchecked, \"\\\"></div>\"),\n            update: function (node) {\n                node.onclick = function (evt) {\n                    evt.stopPropagation();\n                    var isUnchecked = node.classList.contains(unchecked);\n                    if (isUnchecked) {\n                        context.provider.selectAllOf(col.findMyRanker());\n                        node.classList.remove(unchecked);\n                        node.classList.add(checked);\n                    }\n                    else {\n                        context.provider.setSelection([]);\n                        node.classList.remove(checked);\n                        node.classList.add(unchecked);\n                    }\n                };\n            },\n        };\n    };\n    return SelectionRenderer;\n}());\nexport default SelectionRenderer;\n//# sourceMappingURL=SelectionRenderer.js.map","import { isSetColumn } from '../model';\nimport { CANVAS_HEIGHT, cssClass } from '../styles';\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\nimport { forEachChild, noop, wideEnoughCat } from './utils';\nimport { round } from '../internal';\nvar SetCellRenderer = /** @class */ (function () {\n    function SetCellRenderer() {\n        this.title = 'Matrix';\n    }\n    SetCellRenderer.prototype.canRender = function (col) {\n        return isSetColumn(col);\n    };\n    SetCellRenderer.createDOMContext = function (col, sanitize) {\n        var categories = col.categories;\n        var mapping = col.getColorMapping();\n        var templateRows = '';\n        for (var _i = 0, categories_1 = categories; _i < categories_1.length; _i++) {\n            var cat = categories_1[_i];\n            templateRows += \"<div class=\\\"\".concat(cssClass('heatmap-cell'), \"\\\" title=\\\"\").concat(sanitize(cat.label), \"\\\" style=\\\"background-color: \").concat(mapping.apply(cat), \"\\\"></div>\");\n        }\n        return {\n            templateRow: templateRows,\n            render: function (n, value) {\n                forEachChild(n, function (d, i) {\n                    var v = value[i];\n                    d.style.backgroundColor = mapping.apply(categories[i]);\n                    d.style.opacity = typeof v === 'boolean' ? (v ? '1' : '0') : round(v, 2).toString();\n                });\n            },\n        };\n    };\n    SetCellRenderer.prototype.create = function (col, context) {\n        var _a = SetCellRenderer.createDOMContext(col, context.sanitize), templateRow = _a.templateRow, render = _a.render;\n        var width = context.colWidth(col);\n        var cellDimension = width / col.dataLength;\n        var cats = col.categories;\n        var mapping = col.getColorMapping();\n        return {\n            template: \"<div class=\\\"\".concat(cssClass('heatmap'), \"\\\">\").concat(templateRow, \"</div>\"),\n            update: function (n, d) {\n                if (renderMissingDOM(n, col, d)) {\n                    return;\n                }\n                render(n, col.getValues(d));\n            },\n            render: function (ctx, d) {\n                if (renderMissingCanvas(ctx, col, d, width)) {\n                    return;\n                }\n                // Circle\n                var data = col.getValues(d);\n                ctx.save();\n                cats.forEach(function (d, j) {\n                    if (!data[j]) {\n                        return;\n                    }\n                    var posX = j * cellDimension;\n                    ctx.fillStyle = mapping.apply(d);\n                    ctx.fillRect(posX, 0, cellDimension, CANVAS_HEIGHT);\n                });\n                ctx.restore();\n            },\n        };\n    };\n    SetCellRenderer.prototype.createGroup = function (col, context) {\n        var _a = SetCellRenderer.createDOMContext(col, context.sanitize), templateRow = _a.templateRow, render = _a.render;\n        return {\n            template: \"<div class=\\\"\".concat(cssClass('heatmap'), \"\\\">\").concat(templateRow, \"</div>\"),\n            update: function (n, group) {\n                return context.tasks.groupCategoricalStats(col, group).then(function (r) {\n                    if (typeof r === 'symbol') {\n                        return;\n                    }\n                    var isMissing = !r || !r.group || r.group.count === 0 || r.group.count === r.group.missing;\n                    n.classList.toggle(cssClass('missing'), isMissing);\n                    if (isMissing) {\n                        return;\n                    }\n                    render(n, r.group.hist.map(function (d) { return d.count / r.group.maxBin; }));\n                });\n            },\n        };\n    };\n    SetCellRenderer.prototype.createSummary = function (col, context) {\n        var categories = col.categories;\n        var mapping = col.getColorMapping();\n        var templateRows = \"<div class=\\\"\".concat(cssClass('heatmap'), \"\\\">\");\n        var labels = wideEnoughCat(col);\n        for (var _i = 0, categories_2 = categories; _i < categories_2.length; _i++) {\n            var cat = categories_2[_i];\n            templateRows += \"<div class=\\\"\".concat(cssClass('heatmap-cell'), \"\\\" title=\\\"\").concat(context.sanitize(cat.label), \"\\\"\").concat(labels ? \" data-title=\\\"\".concat(context.sanitize(cat.label), \"\\\"\") : '', \" style=\\\"background-color: \").concat(mapping.apply(cat), \"\\\"></div>\");\n        }\n        templateRows += '</div>';\n        return {\n            template: templateRows,\n            update: noop,\n        };\n    };\n    return SetCellRenderer;\n}());\nexport default SetCellRenderer;\n//# sourceMappingURL=SetCellRenderer.js.map","import { NumbersColumn, isNumbersColumn, isMissingValue, } from '../model';\nimport { matchRows } from './ANumbersCellRenderer';\nimport { ERenderMode, } from './interfaces';\nimport { renderMissingDOM } from './missing';\nimport { forEachChild, noRenderer } from './utils';\nimport { cssClass } from '../styles';\n/** @internal */\nexport function line(data) {\n    if (data.length === 0) {\n        return '';\n    }\n    var p = '';\n    var moveNext = true;\n    data.forEach(function (d, i) {\n        if (Number.isNaN(d)) {\n            moveNext = true;\n        }\n        else if (moveNext) {\n            p += \"M\".concat(i, \",\").concat(1 - d, \" \");\n            moveNext = false;\n        }\n        else {\n            p += \"L\".concat(i, \",\").concat(1 - d, \" \");\n        }\n    });\n    return p;\n}\nvar SparklineCellRenderer = /** @class */ (function () {\n    function SparklineCellRenderer() {\n        this.title = 'Sparkline';\n    }\n    SparklineCellRenderer.prototype.canRender = function (col, mode) {\n        return isNumbersColumn(col) && mode !== ERenderMode.SUMMARY;\n    };\n    SparklineCellRenderer.prototype.create = function (col) {\n        var dataLength = col.dataLength;\n        var yPos = 1 - col.getMapping().apply(NumbersColumn.CENTER);\n        return {\n            template: \"<svg viewBox=\\\"0 0 \".concat(dataLength - 1, \" 1\\\" preserveAspectRatio=\\\"none meet\\\"><line x1=\\\"0\\\" x2=\\\"\").concat(dataLength - 1, \"\\\" y1=\\\"\").concat(yPos, \"\\\" y2=\\\"\").concat(yPos, \"\\\"></line><path></path></svg>\"),\n            update: function (n, d) {\n                if (renderMissingDOM(n, col, d)) {\n                    return;\n                }\n                var data = col.getNumbers(d);\n                n.lastElementChild.setAttribute('d', line(data));\n            },\n        };\n    };\n    SparklineCellRenderer.prototype.createGroup = function (col, context) {\n        var dataLength = col.dataLength;\n        var yPos = 1 - col.getMapping().apply(NumbersColumn.CENTER);\n        return {\n            template: \"<svg viewBox=\\\"0 0 \".concat(dataLength - 1, \" 1\\\" preserveAspectRatio=\\\"none meet\\\"><line x1=\\\"0\\\" x2=\\\"\").concat(dataLength - 1, \"\\\" y1=\\\"\").concat(yPos, \"\\\" y2=\\\"\").concat(yPos, \"\\\"></line><path></path></svg>\"),\n            update: function (n, group) {\n                //overlapping ones\n                matchRows(n, group.order.length, \"<path></path>\");\n                return context.tasks\n                    .groupRows(col, group, 'numbers', function (r) { return Array.from(r.map(function (d) { return col.getNumbers(d); })); })\n                    .then(function (vs) {\n                    if (typeof vs === 'symbol') {\n                        return;\n                    }\n                    var isMissing = vs.length === 0 || vs.every(function (v) { return v.every(isMissingValue); });\n                    n.classList.toggle(cssClass('missing'), isMissing);\n                    if (isMissing) {\n                        return;\n                    }\n                    forEachChild(n, function (row, i) {\n                        row.setAttribute('d', line(vs[i]));\n                    });\n                });\n            },\n        };\n    };\n    SparklineCellRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return SparklineCellRenderer;\n}());\nexport default SparklineCellRenderer;\n//# sourceMappingURL=SparklineCellRenderer.js.map","import { isCategoricalColumn, isSetColumn } from '../model';\nimport { CANVAS_HEIGHT, cssClass, UPSET } from '../styles';\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\nvar UpSetCellRenderer = /** @class */ (function () {\n    function UpSetCellRenderer() {\n        this.title = 'UpSet';\n    }\n    UpSetCellRenderer.prototype.canRender = function (col) {\n        // set but not a pure categorical one\n        return isSetColumn(col) && !isCategoricalColumn(col);\n    };\n    UpSetCellRenderer.calculateSetPath = function (setData, cellDimension) {\n        var catindexes = [];\n        setData.forEach(function (d, i) { return (d ? catindexes.push(i) : -1); });\n        var left = catindexes[0] * cellDimension + cellDimension / 2;\n        var right = catindexes[catindexes.length - 1] * cellDimension + cellDimension / 2;\n        return { left: left, right: right };\n    };\n    UpSetCellRenderer.createDOMContext = function (col, sanitize) {\n        var categories = col.categories;\n        var templateRows = '';\n        for (var _i = 0, categories_1 = categories; _i < categories_1.length; _i++) {\n            var cat = categories_1[_i];\n            templateRows += \"<div class=\\\"\".concat(cssClass('upset-dot'), \"\\\" title=\\\"\").concat(sanitize(cat.label), \"\\\"></div>\");\n        }\n        return {\n            template: \"<div><div class=\\\"\".concat(cssClass('upset-line'), \"\\\"></div>\").concat(templateRows, \"</div>\"),\n            render: function (n, value) {\n                Array.from(n.children)\n                    .slice(1)\n                    .forEach(function (d, i) {\n                    var v = value[i];\n                    d.classList.toggle(cssClass('enabled'), v);\n                });\n                var line = n.firstElementChild;\n                var left = value.findIndex(function (d) { return d; });\n                var right = value.length - 1 - value.reverse().findIndex(function (d) { return d; });\n                if (left < 0 || left === right) {\n                    line.style.display = 'none';\n                    return;\n                }\n                line.style.display = null;\n                line.style.left = \"\".concat(Math.round((100 * (left + 0.5)) / value.length), \"%\");\n                line.style.width = \"\".concat(Math.round((100 * (right - left)) / value.length), \"%\");\n            },\n        };\n    };\n    UpSetCellRenderer.prototype.create = function (col, context) {\n        var _a = UpSetCellRenderer.createDOMContext(col, context.sanitize), template = _a.template, render = _a.render;\n        var width = context.colWidth(col);\n        var cellDimension = width / col.categories.length;\n        return {\n            template: template,\n            update: function (n, d) {\n                if (renderMissingDOM(n, col, d)) {\n                    return;\n                }\n                render(n, col.getValues(d));\n            },\n            render: function (ctx, d) {\n                if (renderMissingCanvas(ctx, col, d, width)) {\n                    return;\n                }\n                // Circle\n                var data = col.getValues(d);\n                var hasTrueValues = data.some(function (d) { return d; }); //some values are true?\n                ctx.save();\n                ctx.fillStyle = UPSET.color;\n                ctx.strokeStyle = UPSET.color;\n                if (hasTrueValues) {\n                    var _a = UpSetCellRenderer.calculateSetPath(data, cellDimension), left = _a.left, right = _a.right;\n                    ctx.beginPath();\n                    ctx.moveTo(left, CANVAS_HEIGHT / 2);\n                    ctx.lineTo(right, CANVAS_HEIGHT / 2);\n                    ctx.stroke();\n                }\n                data.forEach(function (d, j) {\n                    var posX = j * cellDimension;\n                    ctx.beginPath();\n                    ctx.globalAlpha = d ? 1 : UPSET.inactive;\n                    ctx.fillRect(posX, 0, cellDimension, CANVAS_HEIGHT);\n                    ctx.fill();\n                });\n                ctx.restore();\n            },\n        };\n    };\n    UpSetCellRenderer.prototype.createGroup = function (col, context) {\n        var _a = UpSetCellRenderer.createDOMContext(col, context.sanitize), template = _a.template, render = _a.render;\n        return {\n            template: template,\n            update: function (n, group) {\n                return context.tasks.groupCategoricalStats(col, group).then(function (r) {\n                    if (typeof r === 'symbol') {\n                        return;\n                    }\n                    render(n, r.group.hist.map(function (d) { return d.count > 0; }));\n                });\n            },\n        };\n    };\n    UpSetCellRenderer.prototype.createSummary = function (col, context) {\n        var _a = UpSetCellRenderer.createDOMContext(col, context.sanitize), template = _a.template, render = _a.render;\n        return {\n            template: template,\n            update: function (n) {\n                return context.tasks.summaryCategoricalStats(col).then(function (r) {\n                    if (typeof r === 'symbol') {\n                        return;\n                    }\n                    render(n, r.summary.hist.map(function (d) { return d.count > 0; }));\n                });\n            },\n        };\n    };\n    return UpSetCellRenderer;\n}());\nexport default UpSetCellRenderer;\n//# sourceMappingURL=UpSetCellRenderer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NumbersColumn, isNumbersColumn } from '../model';\nimport { CANVAS_HEIGHT, cssClass } from '../styles';\nimport { ANumbersCellRenderer } from './ANumbersCellRenderer';\nimport { toHeatMapColor } from './BrightnessCellRenderer';\nimport { ERenderMode } from './interfaces';\nimport { forEachChild, noRenderer } from './utils';\nvar VerticalBarCellRenderer = /** @class */ (function (_super) {\n    __extends(VerticalBarCellRenderer, _super);\n    function VerticalBarCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.title = 'Bar Chart';\n        return _this;\n    }\n    VerticalBarCellRenderer.prototype.canRender = function (col, mode) {\n        return isNumbersColumn(col) && Boolean(col.dataLength) && mode === ERenderMode.CELL;\n    };\n    VerticalBarCellRenderer.compute = function (v, threshold, domain) {\n        if (v < threshold) {\n            //threshold to down\n            return { height: threshold - v, bottom: v - domain[0] };\n        }\n        //from top to down\n        return { height: v - threshold, bottom: threshold - domain[0] };\n    };\n    VerticalBarCellRenderer.prototype.createContext = function (col, context, imposer) {\n        var cellDimension = context.colWidth(col) / col.dataLength;\n        var threshold = col.getMapping().apply(NumbersColumn.CENTER);\n        var range = 1;\n        var templateRows = '';\n        for (var i = 0; i < col.dataLength; ++i) {\n            templateRows += \"<div class=\\\"\".concat(cssClass('heatmap-cell'), \"\\\" style=\\\"background-color: white\\\" title=\\\"\\\"></div>\");\n        }\n        var formatter = col.getNumberFormat();\n        return {\n            clazz: cssClass('heatmap'),\n            templateRow: templateRows,\n            update: function (row, data, raw, item, tooltipPrefix) {\n                var zero = toHeatMapColor(0, item, col, imposer);\n                var one = toHeatMapColor(1, item, col, imposer);\n                forEachChild(row, function (d, i) {\n                    var v = data[i];\n                    var _a = VerticalBarCellRenderer.compute(v, threshold, [0, 1]), bottom = _a.bottom, height = _a.height;\n                    d.title = \"\".concat(tooltipPrefix || '').concat(formatter(raw[i]));\n                    d.style.backgroundColor = v < threshold ? zero : one;\n                    d.style.bottom = \"\".concat(Math.round((100 * bottom) / range), \"%\");\n                    d.style.height = \"\".concat(Math.round((100 * height) / range), \"%\");\n                });\n            },\n            render: function (ctx, data, item) {\n                var zero = toHeatMapColor(0, item, col, imposer);\n                var one = toHeatMapColor(1, item, col, imposer);\n                var scale = CANVAS_HEIGHT / range;\n                data.forEach(function (v, j) {\n                    ctx.fillStyle = v < threshold ? zero : one;\n                    var xpos = j * cellDimension;\n                    var _a = VerticalBarCellRenderer.compute(v, threshold, [0, 1]), bottom = _a.bottom, height = _a.height;\n                    ctx.fillRect(xpos, (range - height - bottom) * scale, cellDimension, height * scale);\n                });\n            },\n        };\n    };\n    VerticalBarCellRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return VerticalBarCellRenderer;\n}(ANumbersCellRenderer));\nexport default VerticalBarCellRenderer;\n//# sourceMappingURL=VerticalBarCellRenderer.js.map","import { DateColumn } from '../model';\nimport { renderMissingDOM } from './missing';\nimport { noop, noRenderer, setText, exampleText } from './utils';\nimport { chooseAggregatedDate } from '../model/internalDate';\nimport { cssClass } from '../styles';\nvar DateCellRenderer = /** @class */ (function () {\n    function DateCellRenderer() {\n        this.title = 'Date';\n        this.groupTitle = 'Date';\n        this.summaryTitle = 'Date';\n    }\n    DateCellRenderer.prototype.canRender = function (col) {\n        return col instanceof DateColumn;\n    };\n    DateCellRenderer.prototype.create = function (col) {\n        return {\n            template: \"<div> </div>\",\n            update: function (n, d) {\n                renderMissingDOM(n, col, d);\n                setText(n, col.getLabel(d));\n            },\n            render: noop,\n        };\n    };\n    DateCellRenderer.prototype.createGroup = function (col, context) {\n        return {\n            template: \"<div> </div>\",\n            update: function (n, group) {\n                var isGrouped = col.isGroupedBy() >= 0;\n                if (isGrouped) {\n                    return context.tasks\n                        .groupRows(col, group, 'date', function (rows) { return chooseAggregatedDate(rows, col.getDateGrouper(), col); })\n                        .then(function (chosen) {\n                        if (typeof chosen === 'symbol') {\n                            return;\n                        }\n                        n.classList.toggle(cssClass('missing'), !chosen);\n                        setText(n, chosen ? chosen.name : '');\n                    });\n                }\n                return context.tasks\n                    .groupExampleRows(col, group, 'date', function (sample) { return exampleText(col, sample); })\n                    .then(function (text) {\n                    if (typeof text === 'symbol') {\n                        return;\n                    }\n                    n.classList.toggle(cssClass('missing'), !text);\n                    setText(n, text);\n                });\n            },\n        };\n    };\n    DateCellRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return DateCellRenderer;\n}());\nexport default DateCellRenderer;\n//# sourceMappingURL=DateCellRenderer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { timeFormat } from 'd3-time-format';\nimport APopup from './APopup';\n/** @internal */\nvar InputDateDialog = /** @class */ (function (_super) {\n    __extends(InputDateDialog, _super);\n    function InputDateDialog(dialog, callback, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, dialog) || this;\n        _this.callback = callback;\n        _this.ioptions = {\n            value: null,\n            label: null,\n        };\n        Object.assign(_this.ioptions, options);\n        return _this;\n    }\n    InputDateDialog.prototype.build = function (node) {\n        var _this = this;\n        var o = this.ioptions;\n        var f = timeFormat('%Y-%m-%d');\n        node.insertAdjacentHTML('beforeend', \"\\n     <input type=\\\"date\\\" value=\\\"\".concat(o.value ? f(o.value) : '', \"\\\" required autofocus placeholder=\\\"\").concat(this.dialog.sanitize(o.label ? o.label : 'enter date'), \"\\\">\\n    \"));\n        this.findInput('input[type=date]').addEventListener('keypress', function (evt) {\n            if (evt.key === 'Enter') {\n                _this.triggerSubmit();\n            }\n        });\n        this.enableLivePreviews('input');\n    };\n    InputDateDialog.prototype.submit = function () {\n        this.callback(this.findInput('input[type=date]').valueAsDate);\n        return true;\n    };\n    return InputDateDialog;\n}(APopup));\nexport default InputDateDialog;\n//# sourceMappingURL=InputDateDialog.js.map","import { dateStatsBuilder } from '../internal';\nimport { isDateColumn, isDatesColumn, Ranking, } from '../model';\nimport { cssClass, engineCssClass } from '../styles';\nimport { ERenderMode, } from './interfaces';\nimport { renderMissingDOM } from './missing';\nimport { colorOf } from './utils';\nimport { histogramUpdate, histogramTemplate, mappingHintTemplate, mappingHintUpdate, filteredHistTemplate, initFilter, } from './histogram';\nimport InputDateDialog from '../ui/dialogs/InputDateDialog';\nimport { shiftFilterDateDay, noDateFilter } from '../model/internalDate';\nvar DateHistogramCellRenderer = /** @class */ (function () {\n    function DateHistogramCellRenderer() {\n        this.title = 'Histogram';\n    }\n    DateHistogramCellRenderer.prototype.canRender = function (col, mode) {\n        return (isDateColumn(col) && mode !== ERenderMode.CELL) || (isDatesColumn(col) && mode === ERenderMode.CELL);\n    };\n    DateHistogramCellRenderer.prototype.create = function (col, _context) {\n        var _a = getHistDOMRenderer(col), template = _a.template, render = _a.render;\n        return {\n            template: \"\".concat(template, \"</div>\"),\n            update: function (n, row) {\n                if (renderMissingDOM(n, col, row)) {\n                    return;\n                }\n                var b = dateStatsBuilder();\n                for (var _i = 0, _a = col.getDates(row); _i < _a.length; _i++) {\n                    var n_1 = _a[_i];\n                    b.push(n_1);\n                }\n                var hist = b.build();\n                render(n, hist);\n            },\n        };\n    };\n    DateHistogramCellRenderer.prototype.createGroup = function (col, context) {\n        var _a = getHistDOMRenderer(col), template = _a.template, render = _a.render;\n        return {\n            template: \"\".concat(template, \"</div>\"),\n            update: function (n, group) {\n                return context.tasks.groupDateStats(col, group).then(function (r) {\n                    if (typeof r === 'symbol') {\n                        return;\n                    }\n                    var isMissing = !r || r.group == null || r.group.count === 0 || r.group.count === r.group.missing;\n                    n.classList.toggle(cssClass('missing'), isMissing);\n                    if (isMissing) {\n                        return;\n                    }\n                    render(n, r.group);\n                });\n            },\n        };\n    };\n    DateHistogramCellRenderer.prototype.createSummary = function (col, context, interactive) {\n        var r = getHistDOMRenderer(col);\n        return interactive\n            ? interactiveSummary(col, context, r.template, r.render)\n            : staticSummary(col, context, false, r.template, r.render);\n    };\n    return DateHistogramCellRenderer;\n}());\nexport default DateHistogramCellRenderer;\nfunction staticSummary(col, context, interactive, template, render) {\n    template += mappingHintTemplate(['', '']);\n    return {\n        template: \"\".concat(template, \"</div>\"),\n        update: function (node) {\n            return context.tasks.summaryDateStats(col).then(function (r) {\n                if (typeof r === 'symbol') {\n                    return;\n                }\n                var summary = r.summary, data = r.data;\n                node.classList.toggle(cssClass('missing'), !summary);\n                if (!summary) {\n                    return;\n                }\n                var formatter = col.getFormatter();\n                mappingHintUpdate(node, [formatter(summary.min), formatter(summary.max)]);\n                render(node, summary, interactive ? data : undefined);\n            });\n        },\n    };\n}\nfunction interactiveSummary(col, context, template, render) {\n    var filter = col.getFilter();\n    var dummyDomain = [\n        isFinite(filter.min) ? filter.min : 0,\n        isFinite(filter.max) ? filter.max : 100,\n    ];\n    template += filteredHistTemplate(createFilterContext(col, context, dummyDomain), createFilterInfo(col, dummyDomain));\n    var fContext;\n    var updateFilter;\n    return {\n        template: \"\".concat(template, \"</div>\"),\n        update: function (node) {\n            return context.tasks.summaryDateStats(col).then(function (r) {\n                if (typeof r === 'symbol') {\n                    return;\n                }\n                var summary = r.summary, data = r.data;\n                if (!updateFilter) {\n                    var domain = [\n                        data.min ? data.min.getTime() : Date.now(),\n                        data.max ? data.max.getTime() : Date.now(),\n                    ];\n                    fContext = createFilterContext(col, context, domain);\n                    updateFilter = initFilter(node, fContext);\n                }\n                updateFilter(data ? data.missing : summary ? summary.missing : 0, createFilterInfo(col, fContext.domain));\n                node.classList.add(cssClass('histogram-i'));\n                node.classList.toggle(cssClass('missing'), !summary);\n                if (!summary) {\n                    return;\n                }\n                render(node, summary, data);\n            });\n        },\n    };\n}\n/** @internal */\nexport function createDateFilter(col, parent, context, livePreviews) {\n    var renderer = getHistDOMRenderer(col);\n    var filter = col.getFilter();\n    var domain = [isFinite(filter.min) ? filter.min : 0, isFinite(filter.max) ? filter.max : 100];\n    var fContext = createFilterContext(col, context, domain);\n    var applyFilter = fContext.setFilter;\n    var currentFilter = createFilterInfo(col, domain);\n    fContext.setFilter = function (filterMissing, min, max) {\n        currentFilter = { filterMissing: filterMissing, filterMin: min, filterMax: max };\n        if (livePreviews) {\n            applyFilter(filterMissing, min, max);\n        }\n    };\n    parent.innerHTML = \"\".concat(renderer.template).concat(filteredHistTemplate(fContext, createFilterInfo(col, domain)), \"</div>\");\n    var summaryNode = parent.firstElementChild;\n    summaryNode.classList.add(cssClass('summary'), cssClass('renderer'));\n    summaryNode.dataset.renderer = 'histogram';\n    summaryNode.dataset.interactive = '';\n    summaryNode.classList.add(cssClass('histogram-i'));\n    var updateFilter = null;\n    var prepareRender = function (min, max) {\n        // reinit with proper domain\n        domain = [min ? min.getTime() : Date.now(), max ? max.getTime() : Date.now()];\n        fContext = createFilterContext(col, context, domain);\n        applyFilter = fContext.setFilter;\n        currentFilter = createFilterInfo(col, domain);\n        fContext.setFilter = function (filterMissing, min, max) {\n            currentFilter = { filterMissing: filterMissing, filterMin: min, filterMax: max };\n            if (livePreviews) {\n                applyFilter(filterMissing, min, max);\n            }\n        };\n        return initFilter(summaryNode, fContext);\n    };\n    var rerender = function () {\n        var ready = context.tasks.summaryDateStats(col).then(function (r) {\n            if (typeof r === 'symbol') {\n                return;\n            }\n            var summary = r.summary, data = r.data;\n            if (!updateFilter) {\n                updateFilter = prepareRender(data.min, data.max);\n            }\n            updateFilter(data ? data.missing : summary ? summary.missing : 0, currentFilter);\n            summaryNode.classList.toggle(cssClass('missing'), !summary);\n            if (!summary) {\n                return;\n            }\n            renderer.render(summaryNode, summary, data);\n        });\n        if (!ready) {\n            return;\n        }\n        summaryNode.classList.add(engineCssClass('loading'));\n        ready.then(function () {\n            summaryNode.classList.remove(engineCssClass('loading'));\n        });\n    };\n    var ranking = col.findMyRanker();\n    if (ranking) {\n        ranking.on(\"\".concat(Ranking.EVENT_ORDER_CHANGED, \".numberFilter\"), function () { return rerender(); });\n    }\n    rerender();\n    return {\n        cleanUp: function () {\n            if (ranking) {\n                ranking.on(\"\".concat(Ranking.EVENT_ORDER_CHANGED, \".numberFilter\"), null);\n            }\n        },\n        reset: function () {\n            currentFilter = createFilterInfo(col, domain, noDateFilter());\n            rerender();\n        },\n        submit: function () {\n            applyFilter(currentFilter.filterMissing, currentFilter.filterMin, currentFilter.filterMax);\n        },\n    };\n}\nfunction getHistDOMRenderer(col) {\n    var guessedBins = 10;\n    var formatter = col.getFormatter();\n    var color = colorOf(col);\n    var render = function (n, stats, unfiltered) {\n        return histogramUpdate(n, stats, unfiltered || null, formatter, function () { return color; });\n    };\n    return {\n        template: histogramTemplate(guessedBins),\n        render: render,\n        guessedBins: guessedBins,\n    };\n}\nfunction createFilterInfo(col, domain, filter) {\n    if (filter === void 0) { filter = col.getFilter(); }\n    var filterMin = isFinite(filter.min) ? filter.min : domain[0];\n    var filterMax = isFinite(filter.max) ? filter.max : domain[1];\n    return {\n        filterMissing: filter.filterMissing,\n        filterMin: filterMin,\n        filterMax: filterMax,\n    };\n}\nfunction createFilterContext(col, context, domain) {\n    var clamp = function (v) { return Math.max(0, Math.min(100, v)); };\n    var percent = function (v) { return clamp(Math.round((100 * (v - domain[0])) / (domain[1] - domain[0]))); };\n    var unpercent = function (v) { return (v / 100) * (domain[1] - domain[0]) + domain[0]; };\n    return {\n        percent: percent,\n        unpercent: unpercent,\n        domain: domain,\n        format: function (v) { return (Number.isNaN(v) ? '' : col.getFormatter()(new Date(v))); },\n        formatRaw: String,\n        parseRaw: function (v) { return Number.parseInt(v, 10); },\n        setFilter: function (filterMissing, minValue, maxValue) {\n            return col.setFilter({\n                filterMissing: filterMissing,\n                min: Math.abs(minValue - domain[0]) < 0.001 ? Number.NEGATIVE_INFINITY : shiftFilterDateDay(minValue, 'min'),\n                max: Math.abs(maxValue - domain[1]) < 0.001 ? Number.POSITIVE_INFINITY : shiftFilterDateDay(maxValue, 'max'),\n            });\n        },\n        edit: function (value, attachment, type) {\n            return new Promise(function (resolve) {\n                var dialogCtx = {\n                    attachment: attachment,\n                    manager: context.dialogManager,\n                    level: context.dialogManager.maxLevel + 1,\n                    idPrefix: context.idPrefix,\n                    sanitize: context.sanitize,\n                };\n                var dialog = new InputDateDialog(dialogCtx, function (d) { return resolve(d == null ? NaN : shiftFilterDateDay(d.getTime(), type)); }, { value: Number.isNaN(value) ? null : new Date(value) });\n                dialog.open();\n            });\n        },\n    };\n}\n//# sourceMappingURL=DateHistogramCellRenderer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { color } from 'd3-color';\nimport { round } from '../internal';\nimport { DEFAULT_COLOR } from '../model';\nimport { cssClass, FILTERED_OPACITY } from '../styles';\nimport StringCellRenderer from './StringCellRenderer';\nvar DEFAULT_FILTERED_COLOR = (function () {\n    var c = color(DEFAULT_COLOR);\n    c.opacity = FILTERED_OPACITY;\n    return c.toString();\n})();\n/**\n * renders a string with additional alignment behavior\n * one instance factory shared among strings\n */\nvar StringHistogramCellRenderer = /** @class */ (function (_super) {\n    __extends(StringHistogramCellRenderer, _super);\n    function StringHistogramCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.title = 'TopN Histogram';\n        return _this;\n    }\n    StringHistogramCellRenderer.prototype.createGroup = function (col, context) {\n        var _a = hist(false), template = _a.template, update = _a.update;\n        return {\n            template: template,\n            update: function (node, group) {\n                return context.tasks.groupStringStats(col, group).then(function (r) {\n                    if (typeof r === 'symbol' || !r) {\n                        return;\n                    }\n                    update(node, r.group, r.summary);\n                });\n            },\n        };\n    };\n    StringHistogramCellRenderer.prototype.createSummary = function (col, context, interactive) {\n        if (interactive) {\n            return _super.prototype.createSummary.call(this, col, context, interactive);\n        }\n        var _a = hist(interactive), template = _a.template, update = _a.update;\n        return {\n            template: template,\n            update: function (node) {\n                return context.tasks.summaryStringStats(col).then(function (r) {\n                    if (typeof r === 'symbol' || !r) {\n                        return;\n                    }\n                    update(node, r.summary);\n                });\n            },\n        };\n    };\n    return StringHistogramCellRenderer;\n}(StringCellRenderer));\nexport default StringHistogramCellRenderer;\nfunction hist(showLabels) {\n    var bins = Array(5)\n        .fill(0)\n        .map(function () {\n        return \"<div class=\\\"\".concat(cssClass('histogram-bin'), \"\\\" title=\\\": 0\\\" data-cat=\\\"\\\" \").concat(showLabels ? \"data-title=\\\"\\\"\" : '', \"><div style=\\\"height: 0; background: \").concat(DEFAULT_COLOR, \"\\\"></div></div>\");\n    })\n        .join('');\n    var template = \"<div class=\\\"\".concat(cssClass('histogram'), \"\\\">\").concat(bins, \"</div>\");\n    return {\n        template: template,\n        update: function (n, hist, gHist) {\n            var maxBin = (gHist !== null && gHist !== void 0 ? gHist : hist).topN.reduce(function (acc, v) { return Math.max(acc, v.count); }, 0);\n            var updateBin = function (d, i) {\n                var _a;\n                var bin = hist.topN[i];\n                var inner = d.firstElementChild;\n                d.dataset.cat = bin.value;\n                if (showLabels) {\n                    d.dataset.title = bin.value;\n                }\n                if (gHist) {\n                    var gCount = ((_a = gHist.topN[i]) !== null && _a !== void 0 ? _a : { count: 0 }).count;\n                    d.title = \"\".concat(bin.value, \": \").concat(bin.count, \" of \").concat(gCount);\n                    inner.style.height = \"\".concat(round((gCount * 100) / maxBin, 2), \"%\");\n                    var relY = 100 - round((bin.count * 100) / gCount, 2);\n                    inner.style.background =\n                        relY === 0\n                            ? DEFAULT_COLOR\n                            : relY === 100\n                                ? DEFAULT_FILTERED_COLOR\n                                : \"linear-gradient(\".concat(DEFAULT_FILTERED_COLOR, \" \").concat(relY, \"%, \").concat(DEFAULT_COLOR, \" \").concat(relY, \"%, \").concat(DEFAULT_COLOR, \" 100%)\");\n                }\n                else {\n                    d.title = \"\".concat(bin.value, \": \").concat(bin.count);\n                    var inner_1 = d.firstElementChild;\n                    inner_1.style.height = \"\".concat(Math.round((bin.count * 100) / maxBin), \"%\");\n                }\n            };\n            var dataBins = hist.topN.length;\n            var bins = Array.from(n.querySelectorAll(\".\".concat(cssClass('histogram-bin'))));\n            for (var i = 0; i < Math.min(bins.length, dataBins); i++) {\n                updateBin(bins[i], i);\n            }\n            for (var i = bins.length; i < dataBins; i++) {\n                var d = n.ownerDocument.createElement('div');\n                d.classList.add(cssClass('histogram-bin'));\n                n.appendChild(d);\n                var dd = n.ownerDocument.createElement('div');\n                dd.style.height = '0';\n                dd.style.background = DEFAULT_COLOR;\n                d.appendChild(dd);\n                updateBin(d, i);\n            }\n            for (var i = dataBins; i < bins.length; i++) {\n                bins[i].remove();\n            }\n        },\n    };\n}\n//# sourceMappingURL=StringHistogramCellRenderer.js.map","import { scaleLinear } from 'd3-scale';\nimport { GUESSES_GROUP_HEIGHT } from '../constants';\nimport { extent } from '../internal';\nimport { isMapAbleColumn, isNumberColumn, NumberColumn } from '../model';\nimport { tasksAll } from '../provider';\nimport { cssClass } from '../styles';\nimport { computeLabel } from './BoxplotCellRenderer';\nimport { colorOf } from './impose';\nimport { ERenderMode, } from './interfaces';\nimport { adaptColor, BIG_MARK_LIGHTNESS_FACTOR, noRenderer, SMALL_MARK_LIGHTNESS_FACTOR } from './utils';\nvar ViolinPlotCellRenderer = /** @class */ (function () {\n    function ViolinPlotCellRenderer() {\n        this.title = 'Violin Plot';\n    }\n    ViolinPlotCellRenderer.prototype.canRender = function (col, mode) {\n        return isNumberColumn(col) && mode !== ERenderMode.CELL;\n    };\n    ViolinPlotCellRenderer.prototype.create = function () {\n        return noRenderer;\n    };\n    ViolinPlotCellRenderer.prototype.createGroup = function (col, context, imposer) {\n        var sort = col instanceof NumberColumn && col.isGroupSortedByMe().asc !== undefined ? col.getSortMethod() : '';\n        return {\n            template: createViolinTemplate(col.getWidth(), false),\n            update: function (n, group) {\n                return tasksAll([\n                    context.tasks.groupBoxPlotStats(col, group, false),\n                    context.tasks.groupBoxPlotStats(col, group, true),\n                ]).then(function (data) {\n                    if (typeof data === 'symbol') {\n                        return;\n                    }\n                    // render\n                    var isMissing = data == null ||\n                        data[0] == null ||\n                        data[0].group.count === 0 ||\n                        data[0].group.count === data[0].group.missing;\n                    n.classList.toggle(cssClass('missing'), isMissing);\n                    if (isMissing) {\n                        return;\n                    }\n                    var color = adaptColor(colorOf(col, null, imposer), SMALL_MARK_LIGHTNESS_FACTOR);\n                    var fillColor = adaptColor(colorOf(col, null, imposer), BIG_MARK_LIGHTNESS_FACTOR);\n                    renderViolin(col, n, data[0].group, data[1].group, sort, color, fillColor);\n                });\n            },\n        };\n    };\n    ViolinPlotCellRenderer.prototype.createSummary = function (col, context, _interactive, imposer) {\n        return {\n            template: createViolinTemplate(col.getWidth(), isMapAbleColumn(col)),\n            update: function (n) {\n                return tasksAll([\n                    context.tasks.summaryBoxPlotStats(col, false),\n                    context.tasks.summaryBoxPlotStats(col, true),\n                ]).then(function (data) {\n                    if (typeof data === 'symbol') {\n                        return;\n                    }\n                    var isMissing = data == null ||\n                        data[0] == null ||\n                        data[0].summary.count === 0 ||\n                        data[0].summary.count === data[0].summary.missing;\n                    n.classList.toggle(cssClass('missing'), isMissing);\n                    if (isMissing) {\n                        return;\n                    }\n                    var mappedSummary = data[0].summary;\n                    var rawSummary = data[1].summary;\n                    var sort = col instanceof NumberColumn && col.isGroupSortedByMe().asc !== undefined ? col.getSortMethod() : '';\n                    if (isMapAbleColumn(col)) {\n                        var range_1 = col.getRange();\n                        Array.from(n.getElementsByTagName('span')).forEach(function (d, i) { return (d.textContent = range_1[i]); });\n                    }\n                    var color = adaptColor(colorOf(col, null, imposer), SMALL_MARK_LIGHTNESS_FACTOR);\n                    var fillColor = adaptColor(colorOf(col, null, imposer), BIG_MARK_LIGHTNESS_FACTOR);\n                    renderViolin(col, n, mappedSummary, rawSummary, sort, color, fillColor);\n                });\n            },\n        };\n    };\n    return ViolinPlotCellRenderer;\n}());\nexport default ViolinPlotCellRenderer;\nfunction createViolinTemplate(width, isMapped) {\n    var mappedHelper = isMapped\n        ? \"<span class=\\\"\".concat(cssClass('mapping-hint'), \"\\\"></span><span class=\\\"\").concat(cssClass('mapping-hint'), \"\\\"></span>\")\n        : '';\n    var h = GUESSES_GROUP_HEIGHT;\n    return \"<div title=\\\"\\\">\\n      <svg class=\\\"\".concat(cssClass('violin'), \"\\\"\\n           viewBox=\\\"0 0 \").concat(width, \" \").concat(h, \"\\\" preserveAspectRatio=\\\"none meet\\\">\\n        <path class=\\\"\").concat(cssClass('violin-path'), \"\\\" d=\\\"M0,0 L100,0\\\"></path>\\n        <line x1=\\\"0\\\" x2=\\\"0\\\" y1=\\\"\").concat(h / 2, \"\\\" y2=\\\"\").concat(h / 2, \"\\\" class=\\\"\").concat(cssClass('violin-iqr'), \"\\\"></line>\\n        <line x1=\\\"0\\\" x2=\\\"0\\\" y1=\\\"\").concat(h / 2 - h * 0.25, \"\\\" y2=\\\"\").concat(h / 2 + h * 0.25, \"\\\" class=\\\"\").concat(cssClass('violin-mean'), \"\\\"></line>\\n        <line x1=\\\"0\\\" x2=\\\"0\\\" y1=\\\"\").concat(h / 2 - h * 0.25, \"\\\" y2=\\\"\").concat(h / 2 + h * 0.25, \"\\\" class=\\\"\").concat(cssClass('violin-median'), \"\\\"></line>\\n      </svg>\\n      \").concat(mappedHelper, \"\\n    </div>\");\n}\nfunction computePath(xScale, data) {\n    var halfH = GUESSES_GROUP_HEIGHT / 2;\n    var yScale = scaleLinear([0, halfH - 1]).domain(extent(data.kdePoints, function (d) { return d.p; }));\n    var pathF = [];\n    var pathB = [];\n    for (var _i = 0, _a = data.kdePoints; _i < _a.length; _i++) {\n        var point = _a[_i];\n        var x = xScale(point.v);\n        var y = yScale(point.p);\n        pathF.push(\"\".concat(pathF.length === 0 ? 'M' : 'L').concat(x, \",\").concat(halfH - y));\n        pathB.push(\"L\".concat(x, \",\").concat(halfH + y));\n    }\n    pathB.reverse();\n    return pathF.join(' ') + pathB.join(' ') + ' Z';\n}\nfunction renderViolin(col, n, data, label, _sort, color, fillColor) {\n    n.title = computeLabel(col, label);\n    var svg = n.firstElementChild;\n    svg.style.color = color;\n    var path = svg.firstElementChild;\n    path.style.fill = fillColor;\n    var xScale = scaleLinear([0, col.getWidth()]).domain([0, 1]);\n    path.setAttribute('d', computePath(xScale, data));\n    var iqrLine = svg.children[1];\n    var medianLine = svg.children[2];\n    var meanLine = svg.children[3];\n    medianLine.setAttribute('x1', xScale(data.median).toString());\n    medianLine.setAttribute('x2', xScale(data.median).toString());\n    meanLine.setAttribute('x1', xScale(data.mean).toString());\n    meanLine.setAttribute('x2', xScale(data.mean).toString());\n    iqrLine.setAttribute('x1', xScale(data.q1).toString());\n    iqrLine.setAttribute('x2', xScale(data.q3).toString());\n}\n//# sourceMappingURL=ViolinPlotCellRenderer.js.map","import { round } from '../internal';\nimport { isNumberColumn } from '../model';\nimport { CANVAS_HEIGHT, cssClass, TICK } from '../styles';\nimport { colorOf } from './impose';\nimport { ERenderMode, } from './interfaces';\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\nimport { adaptColor, noRenderer, SMALL_MARK_LIGHTNESS_FACTOR } from './utils';\nvar TickCellRenderer = /** @class */ (function () {\n    /**\n     * flag to always render the value\n     * @type {boolean}\n     */\n    function TickCellRenderer(renderValue) {\n        if (renderValue === void 0) { renderValue = false; }\n        this.renderValue = renderValue;\n        this.title = 'Tick';\n        this.groupTitle = 'Ticks';\n    }\n    TickCellRenderer.prototype.canRender = function (col, mode) {\n        return isNumberColumn(col) && mode === ERenderMode.CELL;\n    };\n    TickCellRenderer.prototype.create = function (col, context, imposer) {\n        var width = col.getWidth();\n        return {\n            template: \"<div><div></div><span \".concat(this.renderValue ? '' : \"class=\\\"\".concat(cssClass('text-shadow'), \" \").concat(cssClass('hover-only'), \"\\\"\"), \"></span></div>\"),\n            update: function (n, d) {\n                renderMissingDOM(n, col, d);\n                var color = adaptColor(colorOf(col, d, imposer), SMALL_MARK_LIGHTNESS_FACTOR);\n                var l = context.sanitize(col.getLabel(d));\n                var v = col.getNumber(d);\n                n.title = l;\n                var tick = n.firstElementChild;\n                tick.style.background = context.sanitize(color);\n                tick.style.left = \"\".concat(round(v * 100, 2), \"%\");\n                var label = n.lastElementChild;\n                label.textContent = l;\n            },\n            render: function (ctx, d) {\n                if (renderMissingCanvas(ctx, col, d, width)) {\n                    return;\n                }\n                var color = adaptColor(colorOf(col, d, imposer), SMALL_MARK_LIGHTNESS_FACTOR);\n                var v = col.getNumber(d);\n                ctx.save();\n                ctx.globalAlpha = TICK.opacity;\n                ctx.fillStyle = color || TICK.color;\n                ctx.fillRect(Math.max(0, v * width - TICK.size / 2), 0, TICK.size, CANVAS_HEIGHT);\n                ctx.restore();\n            },\n        };\n    };\n    TickCellRenderer.prototype.createGroup = function () {\n        return noRenderer;\n    };\n    TickCellRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return TickCellRenderer;\n}());\nexport default TickCellRenderer;\n//# sourceMappingURL=TickCellRenderer.js.map","import { DENSE_HISTOGRAM } from '../constants';\nimport { round } from '../internal';\nimport { isCategoricalColumn } from '../model';\nimport { CANVAS_HEIGHT, cssClass, TICK } from '../styles';\nimport { colorOf } from './impose';\nimport { ERenderMode, } from './interfaces';\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\nimport { adaptColor, noRenderer, SMALL_MARK_LIGHTNESS_FACTOR } from './utils';\nvar CategoricalTickCellRenderer = /** @class */ (function () {\n    /**\n     * flag to always render the value\n     * @type {boolean}\n     */\n    function CategoricalTickCellRenderer(renderValue) {\n        if (renderValue === void 0) { renderValue = false; }\n        this.renderValue = renderValue;\n        this.title = 'Tick';\n    }\n    CategoricalTickCellRenderer.prototype.canRender = function (col, mode) {\n        return isCategoricalColumn(col) && mode === ERenderMode.CELL;\n    };\n    CategoricalTickCellRenderer.prototype.create = function (col, context, imposer) {\n        var width = col.getWidth();\n        return {\n            template: \"<div><div></div><span \".concat(this.renderValue ? '' : \"class=\\\"\".concat(cssClass('text-shadow'), \" \").concat(cssClass('hover-only'), \"\\\"\"), \"></span></div>\"),\n            update: function (n, d) {\n                renderMissingDOM(n, col, d);\n                var perElem = 100 / col.categories.length;\n                var color = colorOf(col, d, imposer);\n                if (col.categories.length > DENSE_HISTOGRAM) {\n                    color = adaptColor(color, SMALL_MARK_LIGHTNESS_FACTOR);\n                }\n                var l = context.sanitize(col.getLabel(d));\n                var index = col.categories.indexOf(col.getCategory(d));\n                n.title = l;\n                var tick = n.firstElementChild;\n                tick.style.background = context.sanitize(color);\n                tick.style.left = \"\".concat(round(perElem * index, 2), \"%\");\n                tick.style.width = \"\".concat(round(perElem, 2), \"%\");\n                var label = n.lastElementChild;\n                label.textContent = l;\n            },\n            render: function (ctx, d) {\n                if (renderMissingCanvas(ctx, col, d, width)) {\n                    return;\n                }\n                var color = colorOf(col, d, imposer);\n                if (col.categories.length > DENSE_HISTOGRAM) {\n                    color = adaptColor(color, SMALL_MARK_LIGHTNESS_FACTOR);\n                }\n                var perElem = width / col.categories.length;\n                var index = col.categories.indexOf(col.getCategory(d));\n                ctx.save();\n                ctx.globalAlpha = TICK.opacity;\n                ctx.fillStyle = color || TICK.color;\n                ctx.fillRect(Math.max(0, index * perElem), 0, perElem, CANVAS_HEIGHT);\n                ctx.restore();\n            },\n        };\n    };\n    CategoricalTickCellRenderer.prototype.createGroup = function () {\n        return noRenderer;\n    };\n    CategoricalTickCellRenderer.prototype.createSummary = function () {\n        return noRenderer;\n    };\n    return CategoricalTickCellRenderer;\n}());\nexport default CategoricalTickCellRenderer;\n//# sourceMappingURL=CategoricalTickCellRenderer.js.map","import ActionRenderer from './ActionRenderer';\nimport AggregateGroupRenderer from './AggregateGroupRenderer';\nimport AnnotationRenderer from './AnnotationRenderer';\nimport BarCellRenderer from './BarCellRenderer';\nimport BooleanCellRenderer from './BooleanCellRenderer';\nimport BoxplotCellRenderer from './BoxplotCellRenderer';\nimport BrightnessCellRenderer from './BrightnessCellRenderer';\nimport CategoricalCellRenderer from './CategoricalCellRenderer';\nimport CategoricalHeatmapCellRenderer from './CategoricalHeatmapCellRenderer';\nimport CategoricalStackedDistributionlCellRenderer from './CategoricalStackedDistributionlCellRenderer';\nimport CircleCellRenderer from './CircleCellRenderer';\nimport { DefaultCellRenderer } from './DefaultCellRenderer';\nimport DotCellRenderer from './DotCellRenderer';\nimport GroupCellRenderer from './GroupCellRenderer';\nimport HeatmapCellRenderer from './HeatmapCellRenderer';\nimport HistogramCellRenderer from './HistogramCellRenderer';\nimport ImageCellRenderer from './ImageCellRenderer';\nimport { ERenderMode } from './interfaces';\nimport InterleavingCellRenderer from './InterleavingCellRenderer';\nimport LinkCellRenderer from './LinkCellRenderer';\nimport LinkMapCellRenderer from './LinkMapCellRenderer';\nimport LoadingCellRenderer from './LoadingCellRenderer';\nimport MapBarCellRenderer from './MapBarCellRenderer';\nimport MultiLevelCellRenderer from './MultiLevelCellRenderer';\nimport RankCellRenderer from './RankCellRenderer';\nimport SelectionRenderer from './SelectionRenderer';\nimport SetCellRenderer from './SetCellRenderer';\nimport SparklineCellRenderer from './SparklineCellRenderer';\nimport StringCellRenderer from './StringCellRenderer';\nimport TableCellRenderer from './TableCellRenderer';\nimport UpSetCellRenderer from './UpSetCellRenderer';\nimport VerticalBarCellRenderer from './VerticalBarCellRenderer';\nimport DateCellRenderer from './DateCellRenderer';\nimport DateHistogramCellRenderer from './DateHistogramCellRenderer';\nimport StringHistogramCellRenderer from './StringHistogramCellRenderer';\nimport ViolinPlotCellRenderer from './ViolinPlotCellRenderer';\nimport TickCellRenderer from './TickCellRenderer';\nimport CategoricalTickCellRenderer from './CategoricalTickCellRenderer';\nvar defaultCellRenderer = new DefaultCellRenderer();\n/**\n * default render factories\n */\nexport var renderers = {\n    actions: new ActionRenderer(),\n    aggregate: new AggregateGroupRenderer(),\n    annotate: new AnnotationRenderer(),\n    boolean: new BooleanCellRenderer(),\n    boxplot: new BoxplotCellRenderer(),\n    brightness: new BrightnessCellRenderer(),\n    catdistributionbar: new CategoricalStackedDistributionlCellRenderer(),\n    categorical: new CategoricalCellRenderer(),\n    circle: new CircleCellRenderer(),\n    date: new DateCellRenderer(),\n    default: defaultCellRenderer,\n    dot: new DotCellRenderer(),\n    group: new GroupCellRenderer(),\n    heatmap: new HeatmapCellRenderer(),\n    catheatmap: new CategoricalHeatmapCellRenderer(),\n    histogram: new HistogramCellRenderer(),\n    datehistogram: new DateHistogramCellRenderer(),\n    image: new ImageCellRenderer(),\n    interleaving: new InterleavingCellRenderer(),\n    link: new LinkCellRenderer(),\n    linkMap: new LinkMapCellRenderer(),\n    loading: new LoadingCellRenderer(),\n    nested: new MultiLevelCellRenderer(false),\n    number: new BarCellRenderer(),\n    mapbars: new MapBarCellRenderer(),\n    rank: new RankCellRenderer(),\n    selection: new SelectionRenderer(),\n    set: new SetCellRenderer(),\n    sparkline: new SparklineCellRenderer(),\n    stack: new MultiLevelCellRenderer(),\n    string: new StringCellRenderer(),\n    stringhist: new StringHistogramCellRenderer(),\n    table: new TableCellRenderer(),\n    upset: new UpSetCellRenderer(),\n    verticalbar: new VerticalBarCellRenderer(),\n    violin: new ViolinPlotCellRenderer(),\n    tick: new TickCellRenderer(),\n    cattick: new CategoricalTickCellRenderer(),\n};\nexport function chooseRenderer(col, renderers) {\n    var r = renderers[col.getRenderer()];\n    return r && typeof r.create === 'function' ? r : defaultCellRenderer;\n}\nexport function chooseGroupRenderer(col, renderers) {\n    var r = renderers[col.getGroupRenderer()];\n    return r && typeof r.createGroup === 'function' ? r : defaultCellRenderer;\n}\nexport function chooseSummaryRenderer(col, renderers) {\n    var r = renderers[col.getSummaryRenderer()];\n    return r && typeof r.createSummary === 'function' ? r : defaultCellRenderer;\n}\n/**\n * determined the list of possible renderers for a given colum\n * @param col the column to resolve the renderers\n * @param renderers map of possible renderers\n * @param canRender optional custom canRender function\n */\nexport function getPossibleRenderer(col, renderers, canRender) {\n    var all = Object.keys(renderers)\n        .filter(Boolean)\n        .map(function (type) { return ({ type: type, factory: renderers[type] }); });\n    var item = all.filter(function (_a) {\n        var type = _a.type, factory = _a.factory;\n        return typeof factory.create === 'function' &&\n            factory.canRender(col, ERenderMode.CELL) &&\n            (!canRender || canRender(type, factory, col, ERenderMode.CELL));\n    });\n    var group = all.filter(function (_a) {\n        var type = _a.type, factory = _a.factory;\n        return typeof factory.createGroup === 'function' &&\n            factory.canRender(col, ERenderMode.GROUP) &&\n            (!canRender || canRender(type, factory, col, ERenderMode.GROUP));\n    });\n    var summary = all.filter(function (_a) {\n        var type = _a.type, factory = _a.factory;\n        return typeof factory.createSummary === 'function' &&\n            factory.canRender(col, ERenderMode.SUMMARY) &&\n            (!canRender || canRender(type, factory, col, ERenderMode.SUMMARY));\n    });\n    return {\n        item: item.map(function (_a) {\n            var type = _a.type, factory = _a.factory;\n            return ({ type: type, label: factory.title });\n        }),\n        group: group.map(function (_a) {\n            var type = _a.type, factory = _a.factory;\n            return ({ type: type, label: factory.groupTitle || factory.title });\n        }),\n        summary: summary.map(function (_a) {\n            var type = _a.type, factory = _a.factory;\n            return ({\n                type: type,\n                label: factory.summaryTitle || factory.groupTitle || factory.title,\n            });\n        }),\n    };\n}\n//# sourceMappingURL=renderers.js.map","import colors from \"../colors.js\";\n\nexport default colors(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\");\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ADialog from './ADialog';\nimport { uniqueId } from './utils';\nimport { cssClass } from '../../styles';\nimport { color } from 'd3-color';\nimport { schemeCategory10, schemeAccent, schemeDark2, schemePastel1, schemePastel2, schemeSet1, schemeSet2, schemeSet3, } from 'd3-scale-chromatic';\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION, ReplacementColorMappingFunction, } from '../../model/CategoricalColorMappingFunction';\nvar sets = {\n    schemeCategory10: schemeCategory10,\n    schemeAccent: schemeAccent,\n    schemeDark2: schemeDark2,\n    schemePastel1: schemePastel1,\n    schemePastel2: schemePastel2,\n    schemeSet1: schemeSet1,\n    schemeSet2: schemeSet2,\n    schemeSet3: schemeSet3,\n};\n/** @internal */\nvar CategoricalColorMappingDialog = /** @class */ (function (_super) {\n    __extends(CategoricalColorMappingDialog, _super);\n    function CategoricalColorMappingDialog(column, dialog) {\n        var _this = _super.call(this, dialog, {\n            livePreview: 'colorMapping',\n        }) || this;\n        _this.column = column;\n        _this.before = column.getColorMapping().clone();\n        return _this;\n    }\n    CategoricalColorMappingDialog.prototype.build = function (node) {\n        var _this = this;\n        var id = uniqueId(this.dialog.idPrefix);\n        var mapping = this.column.getColorMapping();\n        node.insertAdjacentHTML('beforeend', \"<div class=\\\"\".concat(cssClass('dialog-table'), \"\\\">\\n      <div class=\\\"\").concat(cssClass('dialog-color-table-entry'), \"\\\">\\n        <select id=\\\"\").concat(id, \"Chooser\\\">\\n          <option value=\\\"\\\">Apply Color Scheme...</option>\\n          <option value=\\\"schemeCategory10\\\">D3 Category 10 (\").concat(schemeCategory10.length, \")</option>\\n          <option value=\\\"schemeSet1\\\">Set 1 (\").concat(schemeSet1.length, \")</option>\\n          <option value=\\\"schemeSet2\\\">Set 2 (\").concat(schemeSet2.length, \")</option>\\n          <option value=\\\"schemeSet3\\\">Set 3 (\").concat(schemeSet3.length, \")</option>\\n          <option value=\\\"schemeAccent\\\">Accent (\").concat(schemeAccent.length, \")</option>\\n          <option value=\\\"schemeDark2\\\">Dark2 (\").concat(schemeDark2.length, \")</option>\\n          <option value=\\\"schemePastel1\\\">Pastel 1 (\").concat(schemePastel1.length, \")</option>\\n          <option value=\\\"schemePastel2\\\">Pastel 2 (\").concat(schemePastel2.length, \")</option>\\n        </select>\\n      </div>\\n      \").concat(this.column.categories\n            .map(function () { return \"\\n        <label class=\\\"\".concat(cssClass('checkbox'), \" \").concat(cssClass('dialog-color-table-entry'), \"\\\">\\n          <input data-cat=\\\"\\\" type=\\\"color\\\" value=\\\"\\\">\\n          <span> </span>\\n        </label>\"); })\n            .join(''), \"\\n    </div>\"));\n        var categories = this.column.categories;\n        Array.from(node.querySelectorAll(\"label.\".concat(cssClass('checkbox'), \".\").concat(cssClass('dialog-color-table-entry')))).forEach(function (n, i) {\n            var cat = categories[i];\n            n.firstElementChild.dataset.cat = cat.name;\n            n.firstElementChild.value = color(mapping.apply(cat)).formatHex();\n            n.lastElementChild.textContent = cat.label;\n        });\n        this.findInput('select').onchange = function (evt) {\n            var scheme = sets[evt.currentTarget.value];\n            if (!scheme) {\n                return;\n            }\n            _this.forEach('[data-cat]', function (n, i) {\n                n.value = scheme[i % scheme.length];\n            });\n            if (_this.showLivePreviews()) {\n                _this.submit();\n            }\n        };\n        this.enableLivePreviews('input[type=color]');\n    };\n    CategoricalColorMappingDialog.prototype.reset = function () {\n        var cats = this.column.categories;\n        this.forEach('[data-cat]', function (n, i) {\n            n.value = color(cats[i].color).formatHex();\n        });\n    };\n    CategoricalColorMappingDialog.prototype.submit = function () {\n        var cats = this.column.categories;\n        var map = new Map();\n        this.forEach('input[data-cat]', function (n, i) {\n            var cat = cats[i];\n            if (color(cat.color).formatHex() !== n.value) {\n                map.set(cat, n.value);\n            }\n        });\n        if (map.size === 0) {\n            this.column.setColorMapping(DEFAULT_CATEGORICAL_COLOR_FUNCTION);\n        }\n        else {\n            this.column.setColorMapping(new ReplacementColorMappingFunction(map));\n        }\n        return true;\n    };\n    CategoricalColorMappingDialog.prototype.cancel = function () {\n        this.column.setColorMapping(this.before);\n    };\n    return CategoricalColorMappingDialog;\n}(ADialog));\nexport default CategoricalColorMappingDialog;\n//# sourceMappingURL=CategoricalColorMappingDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { SetColumn, Ranking, } from '../../model';\nimport { findFilterMissing, updateFilterMissingNumberMarkup, filterMissingNumberMarkup } from '../missing';\nimport ADialog from './ADialog';\nimport { forEach } from './utils';\nimport { cssClass, engineCssClass } from '../../styles';\nimport { isCategoryIncluded } from '../../model/internalCategorical';\n/** @internal */\nvar CategoricalFilterDialog = /** @class */ (function (_super) {\n    __extends(CategoricalFilterDialog, _super);\n    function CategoricalFilterDialog(column, dialog, ctx) {\n        var _this = _super.call(this, dialog, {\n            livePreview: 'filter',\n        }) || this;\n        _this.column = column;\n        _this.ctx = ctx;\n        _this.before = _this.column.getFilter() || { filter: '', filterMissing: false };\n        return _this;\n    }\n    CategoricalFilterDialog.prototype.build = function (node) {\n        var _this = this;\n        node.insertAdjacentHTML('beforeend', \"<div class=\\\"\".concat(cssClass('dialog-table'), \"\\\">\\n        <label class=\\\"\").concat(cssClass('checkbox'), \" \").concat(cssClass('dialog-filter-table-entry'), \"\\\">\\n          <input type=\\\"checkbox\\\" checked>\\n          <span>\\n            <span class=\\\"\").concat(cssClass('dialog-filter-table-color'), \"\\\"></span>\\n            <div>Un/Select All</div>\\n          </span>\\n        </label>\\n        \").concat(this.column.categories\n            .map(function (c) { return \"<label class=\\\"\".concat(cssClass('checkbox'), \" \").concat(cssClass('dialog-filter-table-entry'), \"\\\" data-cat=\\\"\\\">\\n          <input data-cat=\\\"\\\" type=\\\"checkbox\\\"\").concat(isCategoryIncluded(_this.before, c) ? 'checked' : '', \">\\n          <span>\\n            <span class=\\\"\").concat(cssClass('dialog-filter-table-color'), \"\\\" style=\\\"background-color: \").concat(_this.ctx.sanitize(c.color), \"\\\"></span>\\n            <div class=\\\"\").concat(cssClass('dialog-filter-table-entry-label'), \"\\\"> </div>\\n            <div class=\\\"\").concat(cssClass('dialog-filter-table-entry-stats'), \"\\\"></div>\\n          </span>\\n        </label>\"); })\n            .join(''), \"\\n    </div>\"));\n        var categories = this.column.categories;\n        Array.from(node.querySelectorAll(\"label.\".concat(cssClass('checkbox'), \"[data-cat]\"))).forEach(function (n, i) {\n            var cat = categories[i];\n            n.firstElementChild.dataset.cat = cat.name;\n            n.querySelector(\".\".concat(cssClass('dialog-filter-table-entry-label'))).textContent = cat.label;\n        });\n        // selectAll\n        var selectAll = this.findInput('input:not([data-cat])');\n        selectAll.onchange = function () {\n            forEach(node, 'input[data-cat]', function (n) { return (n.checked = selectAll.checked); });\n        };\n        if (this.column instanceof SetColumn) {\n            var some = this.before.mode !== 'every';\n            node.insertAdjacentHTML('beforeend', \"<strong>Show rows where</strong>\");\n            node.insertAdjacentHTML('beforeend', \"<label class=\\\"\".concat(cssClass('checkbox'), \"\\\">\\n        <input type=\\\"radio\\\" \").concat(!some ? 'checked=\"checked\"' : '', \" name=\\\"mode\\\" value=\\\"every\\\">\\n        <span>all are selected</span>\\n      </label>\"));\n            node.insertAdjacentHTML('beforeend', \"<label class=\\\"\".concat(cssClass('checkbox'), \"\\\" style=\\\"padding-bottom: 0.6em\\\">\\n        <input type=\\\"radio\\\" \").concat(some ? 'checked=\"checked\"' : '', \" name=\\\"mode\\\" value=\\\"some\\\">\\n        <span>some are selected</span>\\n      </label>\"));\n        }\n        node.insertAdjacentHTML('beforeend', filterMissingNumberMarkup(this.before.filterMissing, 0));\n        this.enableLivePreviews('input[type=checkbox],input[type=radio]');\n        var ranking = this.column.findMyRanker();\n        if (ranking) {\n            ranking.on(\"\".concat(Ranking.EVENT_ORDER_CHANGED, \".catFilter\"), function () { return _this.updateStats(); });\n        }\n        this.updateStats();\n    };\n    CategoricalFilterDialog.prototype.updateStats = function () {\n        var _this = this;\n        var ready = this.ctx.provider\n            .getTaskExecutor()\n            .summaryCategoricalStats(this.column)\n            .then(function (r) {\n            if (typeof r === 'symbol') {\n                return;\n            }\n            var summary = r.summary, data = r.data;\n            var missing = data ? data.missing : summary ? summary.missing : 0;\n            updateFilterMissingNumberMarkup(findFilterMissing(_this.node).parentElement, missing);\n            if (!summary || !data) {\n                return;\n            }\n            _this.forEach(\".\".concat(cssClass('dialog-filter-table-entry-stats')), function (n, i) {\n                var bin = summary.hist[i];\n                var raw = data.hist[i];\n                n.textContent = \"\".concat(bin.count.toLocaleString(), \"/\").concat(raw.count.toLocaleString());\n            });\n        });\n        if (!ready) {\n            return;\n        }\n        this.node.classList.add(engineCssClass('loading'));\n        ready.then(function () {\n            _this.node.classList.remove(engineCssClass('loading'));\n        });\n    };\n    CategoricalFilterDialog.prototype.updateFilter = function (filter, filterMissing, someMode) {\n        if (someMode === void 0) { someMode = false; }\n        var noFilter = filter == null && filterMissing === false;\n        var f = { filter: filter, filterMissing: filterMissing };\n        if (this.column instanceof SetColumn) {\n            f.mode = someMode ? 'some' : 'every';\n        }\n        this.column.setFilter(noFilter ? null : f);\n    };\n    CategoricalFilterDialog.prototype.reset = function () {\n        this.forEach('input[data-cat]', function (n) { return (n.checked = true); });\n        findFilterMissing(this.node).checked = false;\n        var mode = this.findInput('input[value=every]');\n        if (mode) {\n            mode.checked = true;\n        }\n    };\n    CategoricalFilterDialog.prototype.cancel = function () {\n        this.updateFilter(this.before.filter === '' ? null : this.before.filter, this.before.filterMissing, this.before.mode === 'some');\n    };\n    CategoricalFilterDialog.prototype.submit = function () {\n        var f = this.forEach('input[data-cat]:checked', function (n) { return n.dataset.cat; });\n        if (f.length === this.column.categories.length) {\n            // all checked = no filter\n            f = null;\n        }\n        var filterMissing = findFilterMissing(this.node).checked;\n        var mode = this.findInput('input[value=some]');\n        this.updateFilter(f, filterMissing, mode != null && mode.checked);\n        return true;\n    };\n    CategoricalFilterDialog.prototype.cleanUp = function (action) {\n        _super.prototype.cleanUp.call(this, action);\n        var ranking = this.column.findMyRanker();\n        if (ranking) {\n            ranking.on(\"\".concat(Ranking.EVENT_ORDER_CHANGED, \".catFilter\"), null);\n        }\n    };\n    return CategoricalFilterDialog;\n}(ADialog));\nexport default CategoricalFilterDialog;\n//# sourceMappingURL=CategoricalFilterDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { round } from '../../internal';\nimport { isCategoryIncluded } from '../../model/internalCategorical';\nimport { filterMissingMarkup, findFilterMissing } from '../missing';\nimport ADialog from './ADialog';\nimport { forEach } from './utils';\nimport { cssClass } from '../../styles';\n/** @internal */\nvar CategoricalMappingFilterDialog = /** @class */ (function (_super) {\n    __extends(CategoricalMappingFilterDialog, _super);\n    function CategoricalMappingFilterDialog(column, dialog) {\n        var _this = _super.call(this, dialog, {\n            livePreview: 'filter',\n        }) || this;\n        _this.column = column;\n        _this.before = _this.column.getFilter() || {\n            filter: _this.column.categories.map(function (d) { return d.name; }),\n            filterMissing: false,\n        };\n        return _this;\n    }\n    CategoricalMappingFilterDialog.prototype.build = function (node) {\n        var _this = this;\n        var joint = this.column.categories.map(function (d) {\n            return Object.assign({\n                range: round(d.value * 100, 2),\n            }, d);\n        });\n        joint.sort(function (a, b) { return a.label.localeCompare(b.label); });\n        node.insertAdjacentHTML('beforeend', \"<div class=\\\"\".concat(cssClass('dialog-table'), \"\\\">\\n        <label class=\\\"\").concat(cssClass('checkbox'), \" \").concat(cssClass('dialog-filter-table-entry'), \"\\\">\\n          <input type=\\\"checkbox\\\" checked>\\n          <span>\\n            <div>Un/Select All</div>\\n          </span>\\n        </label>\\n        \").concat(joint\n            .map(function (cat) { return \"\\n          <label class=\\\"\".concat(cssClass('checkbox'), \" \").concat(cssClass('dialog-filter-table-entry'), \"\\\">\\n            <input data-cat=\\\"\").concat(cat.name, \"\\\" type=\\\"checkbox\\\"\").concat(isCategoryIncluded(_this.before, cat) ? 'checked' : '', \">\\n            <span>\\n              <input type=\\\"number\\\" value=\\\"\").concat(cat.range, \"\\\" min=\\\"0\\\" max=\\\"100\\\" size=\\\"5\\\">\\n              <div class=\\\"\").concat(cssClass('dialog-filter-color-bar'), \"\\\">\\n                <span style=\\\"background-color: \").concat(cat.color, \"; width: \").concat(cat.range, \"%\\\"></span>\\n              </div>\\n              <div>\").concat(cat.label, \"</div>\\n            </span>\\n          </label>\"); })\n            .join(''), \"\\n    </div>\"));\n        // TODO sanitize\n        // selectAll\n        var selectAll = this.findInput('input[type=checkbox]:not([data-cat])');\n        selectAll.onchange = function () {\n            forEach(node, '[data-cat]', function (n) { return (n.checked = selectAll.checked); });\n        };\n        this.forEach('input[type=number]', function (d) {\n            d.oninput = function () {\n                d.nextElementSibling.firstElementChild.style.width = \"\".concat(d.value, \"%\");\n            };\n        });\n        node.insertAdjacentHTML('beforeend', filterMissingMarkup(this.before.filterMissing));\n        this.enableLivePreviews('input[type=checkbox], input[type=number]');\n    };\n    CategoricalMappingFilterDialog.prototype.updateFilter = function (filter, filterMissing) {\n        var noFilter = filter == null && filterMissing === false;\n        this.column.setFilter(noFilter ? null : { filter: filter, filterMissing: filterMissing });\n    };\n    CategoricalMappingFilterDialog.prototype.cancel = function () {\n        this.updateFilter(this.before.filter, this.before.filterMissing);\n    };\n    CategoricalMappingFilterDialog.prototype.reset = function () {\n        this.forEach('[data-cat]', function (n) {\n            n.checked = false;\n            n.nextElementSibling.value = '50';\n        });\n    };\n    CategoricalMappingFilterDialog.prototype.submit = function () {\n        var items = this.forEach('input[data-cat]', function (n) { return ({\n            checked: n.checked,\n            cat: n.dataset.cat,\n            range: n.nextElementSibling.valueAsNumber,\n        }); });\n        var f = items.filter(function (d) { return d.checked; }).map(function (d) { return d.cat; });\n        if (f.length === this.column.categories.length) {\n            // all checked = no filter\n            f = null;\n        }\n        var filterMissing = findFilterMissing(this.node).checked;\n        this.updateFilter(f, filterMissing);\n        this.column.setMapping(items.map(function (d) { return d.range / 100; }));\n        return true;\n    };\n    return CategoricalMappingFilterDialog;\n}(ADialog));\nexport default CategoricalMappingFilterDialog;\n//# sourceMappingURL=CategoricalMappingFilterDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ADialog from './ADialog';\nimport { cssClass } from '../../styles';\n/** @internal */\nvar ChangeRendererDialog = /** @class */ (function (_super) {\n    __extends(ChangeRendererDialog, _super);\n    function ChangeRendererDialog(column, dialog, ctx) {\n        var _this = _super.call(this, dialog, {\n            livePreview: 'vis',\n        }) || this;\n        _this.column = column;\n        _this.ctx = ctx;\n        _this.before = {\n            renderer: column.getRenderer(),\n            group: column.getGroupRenderer(),\n            summary: column.getSummaryRenderer(),\n        };\n        return _this;\n    }\n    ChangeRendererDialog.prototype.build = function (node) {\n        var current = this.column.getRenderer();\n        var currentGroup = this.column.getGroupRenderer();\n        var currentSummary = this.column.getSummaryRenderer();\n        var _a = this.ctx.getPossibleRenderer(this.column), item = _a.item, group = _a.group, summary = _a.summary;\n        console.assert(item.length > 1 || group.length > 1 || summary.length > 1); // otherwise no need to show this\n        var byName = function (a, b) { return a.label.localeCompare(b.label); };\n        var s = this.ctx.sanitize;\n        node.insertAdjacentHTML('beforeend', \"\\n      <strong>Item Visualization</strong>\\n      \".concat(item\n            .sort(byName)\n            .map(function (d) {\n            return \" <label class=\\\"\".concat(cssClass('checkbox'), \"\\\"><input type=\\\"radio\\\" name=\\\"renderer\\\" value=\\\"\").concat(s(d.type), \"\\\" \").concat(current === d.type ? 'checked' : '', \"><span>\").concat(s(d.label), \"</span></label>\");\n        })\n            .join(''), \"\\n      <strong>Group Visualization</strong>\\n      \").concat(group\n            .sort(byName)\n            .map(function (d) {\n            return \" <label class=\\\"\".concat(cssClass('checkbox'), \"\\\"><input type=\\\"radio\\\" name=\\\"group\\\" value=\\\"\").concat(s(d.type), \"\\\" \").concat(currentGroup === d.type ? 'checked' : '', \"><span>\").concat(s(d.label), \"</span></label>\");\n        })\n            .join(''), \"\\n      <strong>Summary Visualization</strong>\\n      \").concat(summary\n            .sort(byName)\n            .map(function (d) {\n            return \" <label class=\\\"\".concat(cssClass('checkbox'), \"\\\"><input type=\\\"radio\\\" name=\\\"summary\\\" value=\\\"\").concat(s(d.type), \"\\\" \").concat(currentSummary === d.type ? 'checked' : '', \"><span>\").concat(s(d.label), \"</span></label>\");\n        })\n            .join(''), \"\\n    \"));\n        this.enableLivePreviews('input[type=radio]');\n    };\n    ChangeRendererDialog.prototype.cancel = function () {\n        this.column.setRenderer(this.before.renderer);\n        this.column.setGroupRenderer(this.before.group);\n        this.column.setSummaryRenderer(this.before.summary);\n    };\n    ChangeRendererDialog.prototype.reset = function () {\n        var desc = this.column.desc;\n        var r = this.findInput(\"input[name=renderer][value=\\\"\".concat(desc.renderer || desc.type, \"\\\"]\"));\n        if (r) {\n            r.checked = true;\n        }\n        var g = this.findInput(\"input[name=group][value=\\\"\".concat(desc.groupRenderer || desc.type, \"\\\"]\"));\n        if (g) {\n            g.checked = true;\n        }\n        var s = this.findInput(\"input[name=summary][value=\\\"\".concat(desc.summaryRenderer || desc.type, \"\\\"]\"));\n        if (s) {\n            s.checked = true;\n        }\n    };\n    ChangeRendererDialog.prototype.submit = function () {\n        var renderer = this.findInput('input[name=renderer]:checked').value;\n        var group = this.findInput('input[name=group]:checked').value;\n        var summary = this.findInput('input[name=summary]:checked').value;\n        this.column.setRenderer(renderer);\n        this.column.setGroupRenderer(group);\n        this.column.setSummaryRenderer(summary);\n        return true;\n    };\n    return ChangeRendererDialog;\n}(ADialog));\nexport default ChangeRendererDialog;\n//# sourceMappingURL=ChangeRendererDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ADialog from './ADialog';\nimport { schemeCategory10, schemeSet1, schemeSet2, schemeSet3, schemeAccent, schemeDark2, schemePastel2, schemePastel1, } from 'd3-scale-chromatic';\nimport { round } from '../../internal';\nimport { uniqueId } from '../../renderer/utils';\nimport { QuantizedColorFunction, CustomColorMappingFunction, SolidColorFunction, SequentialColorFunction, DivergentColorFunction, } from '../../model/ColorMappingFunction';\nimport { DEFAULT_COLOR } from '../../model';\nimport { cssClass } from '../../styles';\nvar ColorMappingDialog = /** @class */ (function (_super) {\n    __extends(ColorMappingDialog, _super);\n    function ColorMappingDialog(column, dialog, ctx) {\n        var _this = _super.call(this, dialog, {\n            livePreview: 'colorMapping',\n        }) || this;\n        _this.column = column;\n        _this.ctx = ctx;\n        _this.id = uniqueId('col');\n        _this.before = _this.column.getColorMapping();\n        return _this;\n    }\n    ColorMappingDialog.prototype.createTemplate = function (id, wrapped) {\n        var current = wrapped instanceof QuantizedColorFunction ? wrapped.base : wrapped;\n        var entries = current instanceof CustomColorMappingFunction ? current.entries : [];\n        var h = '';\n        h += \"<datalist id=\\\"\".concat(id, \"L\\\">\").concat(schemeCategory10.map(function (d) { return \"<option>\".concat(d, \"\\\"</option>\"); }).join(''), \"</datalist>\");\n        h += \"<datalist id=\\\"\".concat(id, \"LW\\\"><option>#FFFFFF\\\"</option>\").concat(schemeCategory10\n            .slice(0, -1)\n            .map(function (d) { return \"<option>\".concat(d, \"</option>\"); })\n            .join(''), \"</datalist>\");\n        h += \"<strong data-toggle=\\\"\".concat(current instanceof SolidColorFunction ? 'open' : '', \"\\\">Solid Color</strong>\");\n        h += \"<div>\";\n        {\n            var refColor_1 = current instanceof SolidColorFunction ? current.color : '';\n            var has_1 = refColor_1 === DEFAULT_COLOR;\n            var colorSets = [\n                schemeCategory10,\n                schemeAccent,\n                schemeDark2,\n                schemePastel1,\n                schemePastel2,\n                schemeSet1,\n                schemeSet2,\n                schemeSet3,\n            ];\n            var renderColor_1 = function (d) { return \"<label class=\\\"\".concat(cssClass('checkbox-color'), \"\\\">\\n        <input name=\\\"color\\\" type=\\\"radio\\\" value=\\\"\").concat(d, \"\\\" \").concat(d === refColor_1 ? 'checked=\"checked\"' : '', \">\\n        <span style=\\\"background: \").concat(d, \"\\\"></span>\\n      </label>\"); };\n            colorSets.forEach(function (colors, i) {\n                has_1 = has_1 || colors.includes(refColor_1);\n                h += \"<div class=\\\"\".concat(cssClass('color-line'), \"\\\">\\n          \").concat(colors.map(renderColor_1).join(''), \"\\n          \").concat(i === 0 ? renderColor_1(DEFAULT_COLOR) : '', \"\\n        </div>\");\n            });\n            h += \"<label class=\\\"\".concat(cssClass('checkbox'), \" \").concat(cssClass('color-gradient'), \"\\\"><input name=\\\"color\\\" type=\\\"radio\\\" value=\\\"custom:solid\\\" \").concat(refColor_1 && !has_1 ? 'checked=\"checked\"' : '', \">\\n        <span class=\\\"\").concat(cssClass('color-custom'), \"\\\"><input type=\\\"color\\\" name=\\\"solid\\\" list=\\\"\").concat(id, \"L\\\" value=\\\"\").concat(current instanceof SolidColorFunction ? this.ctx.sanitize(current.color) : DEFAULT_COLOR, \"\\\" \").concat(refColor_1 && !has_1 ? '' : 'disabled', \"></span>\\n      </label>\");\n        }\n        h += '</div>';\n        h += \"<strong data-toggle=\\\"\".concat(current instanceof SequentialColorFunction ||\n            (current instanceof CustomColorMappingFunction && entries.length === 2)\n            ? 'open'\n            : '', \"\\\">Sequential Color</strong>\");\n        h += '<div>';\n        h += \"<div><label class=\\\"\".concat(cssClass('checkbox'), \"\\\">\\n      <input name=\\\"kindS\\\" type=\\\"radio\\\" id=\\\"\").concat(id, \"KC_S\\\" value=\\\"continuous\\\" \").concat(!(wrapped instanceof QuantizedColorFunction) ? 'checked' : '', \">\\n      <span>Continuous</span>\\n    </label>\\n    <label class=\\\"\").concat(cssClass('checkbox'), \"\\\">\\n      <input name=\\\"kindS\\\" type=\\\"radio\\\" id=\\\"\").concat(id, \"KQ_S\\\" value=\\\"quantized\\\" \").concat(wrapped instanceof QuantizedColorFunction ? 'checked' : '', \">\\n      <span>Discrete&nbsp;<input type=\\\"number\\\" id=\\\"\").concat(id, \"KQS_S\\\" min=\\\"2\\\" step=\\\"1\\\" style=\\\"width: 3em\\\" value=\\\"\").concat(wrapped instanceof QuantizedColorFunction ? \"\".concat(wrapped.steps, \"\\\"\") : '5\" disabled', \">&nbsp; steps</span>\\n    </label></div>\");\n        {\n            var name_1 = current instanceof SequentialColorFunction ? current.name : '';\n            for (var _i = 0, _a = Object.keys(SequentialColorFunction.FUNCTIONS); _i < _a.length; _i++) {\n                var colors = _a[_i];\n                h += \"<label class=\\\"\".concat(cssClass('checkbox'), \" \").concat(cssClass('color-gradient'), \"\\\"><input name=\\\"color\\\" type=\\\"radio\\\" value=\\\"\").concat(colors, \"\\\" \").concat(colors === name_1 ? 'checked=\"checked\"' : '', \">\\n        <span data-c=\\\"\").concat(colors, \"\\\" style=\\\"background: \").concat(gradient(SequentialColorFunction.FUNCTIONS[colors], 9), \"\\\"></span>\\n      </label>\");\n            }\n            var isCustom = entries.length === 2;\n            h += \"<label class=\\\"\".concat(cssClass('checkbox'), \" \").concat(cssClass('color-gradient'), \"\\\">\\n        <input name=\\\"color\\\" type=\\\"radio\\\" value=\\\"custom:sequential\\\" \").concat(isCustom ? 'checked' : '', \">\\n        <span class=\\\"\").concat(cssClass('color-custom'), \"\\\">\\n          <input type=\\\"color\\\" name=\\\"interpolate0\\\" list=\\\"\").concat(id, \"LW\\\" \").concat(!isCustom ? 'disabled' : \"value=\\\"\".concat(entries[0].color, \"\\\"\"), \">\\n          <input type=\\\"color\\\" name=\\\"interpolate1\\\" list=\\\"\").concat(id, \"LW\\\" \").concat(!isCustom ? 'disabled' : \"value=\\\"\".concat(entries[entries.length - 1].color, \"\\\"\"), \">\\n        </span>\\n      </label>\");\n        }\n        h += '</div>';\n        h += \"<strong data-toggle=\\\"\".concat(current instanceof DivergentColorFunction ||\n            (current instanceof CustomColorMappingFunction && entries.length === 3)\n            ? 'open'\n            : '', \"\\\">Diverging Color</strong>\");\n        h += '<div>';\n        h += \"<div><label class=\\\"\".concat(cssClass('checkbox'), \"\\\">\\n      <input name=\\\"kindD\\\" type=\\\"radio\\\" id=\\\"\").concat(id, \"KC_D\\\" value=\\\"continuous\\\" \").concat(!(wrapped instanceof QuantizedColorFunction) ? 'checked' : '', \">\\n      <span>Continuous</span>\\n    </label>\\n    <label class=\\\"\").concat(cssClass('checkbox'), \"\\\">\\n      <input name=\\\"kindD\\\" type=\\\"radio\\\" id=\\\"\").concat(id, \"KQ_D\\\" value=\\\"quantized\\\" \").concat(wrapped instanceof QuantizedColorFunction ? 'checked' : '', \">\\n      <span>Discrete&nbsp;<input type=\\\"number\\\" id=\\\"\").concat(id, \"KQS_D\\\" min=\\\"2\\\" step=\\\"1\\\" style=\\\"width: 3em\\\" value=\\\"\").concat(wrapped instanceof QuantizedColorFunction ? \"\".concat(wrapped.steps, \"\\\"\") : '5\" disabled', \">&nbsp; steps</span>\\n    </label></div>\");\n        {\n            var name_2 = current instanceof DivergentColorFunction ? current.name : '';\n            for (var _b = 0, _c = Object.keys(DivergentColorFunction.FUNCTIONS); _b < _c.length; _b++) {\n                var colors = _c[_b];\n                h += \"<label class=\\\"\".concat(cssClass('checkbox'), \" \").concat(cssClass('color-gradient'), \"\\\"><input name=\\\"color\\\" type=\\\"radio\\\" value=\\\"\").concat(colors, \"\\\" \").concat(colors === name_2 ? 'checked=\"checked\"' : '', \">\\n        <span data-c=\\\"\").concat(colors, \"\\\" style=\\\"background: \").concat(gradient(DivergentColorFunction.FUNCTIONS[colors], 11), \"\\\"></span>\\n      </label>\");\n            }\n            var isCustom = entries.length === 3;\n            h += \"<label class=\\\"\".concat(cssClass('checkbox'), \" \").concat(cssClass('color-gradient'), \"\\\">\\n        <input name=\\\"color\\\" type=\\\"radio\\\" value=\\\"custom:divergent\\\" \").concat(isCustom ? 'checked' : '', \">\\n        <span class=\\\"\").concat(cssClass('color-custom'), \"\\\">\\n          <input type=\\\"color\\\" name=\\\"divergingm1\\\" list=\\\"\").concat(id, \"L\\\" \").concat(!isCustom ? 'disabled' : \"value=\\\"\".concat(this.ctx.sanitize(entries[0].color), \"\\\"\"), \">\\n          <input type=\\\"color\\\" name=\\\"diverging0\\\" list=\\\"\").concat(id, \"LW\\\" \").concat(!isCustom ? 'disabled' : \"value=\\\"\".concat(this.ctx.sanitize(entries[1].color), \"\\\"\"), \">\\n          <input type=\\\"color\\\" name=\\\"diverging1\\\" list=\\\"\").concat(id, \"L\\\" \").concat(!isCustom ? 'disabled' : \"value=\\\"\".concat(this.ctx.sanitize(entries[2].color), \"\\\"\"), \">\\n        </span>\\n      </label>\");\n        }\n        h += '</div>';\n        return h;\n    };\n    ColorMappingDialog.prototype.applyColor = function () {\n        var selected = this.findInput(\"input[name=color]:checked\");\n        if (!selected) {\n            return;\n        }\n        var quantized = this.findInput(\"#\".concat(this.id, \"KQ_S\"));\n        var steps = this.findInput(\"#\".concat(this.id, \"KQS_S\"));\n        var base = toColor(selected, this.node);\n        if (quantized.checked && !(base instanceof SolidColorFunction)) {\n            this.column.setColorMapping(new QuantizedColorFunction(base, Number.parseInt(steps.value, 10)));\n        }\n        else {\n            this.column.setColorMapping(base);\n        }\n    };\n    ColorMappingDialog.prototype.build = function (node) {\n        var content = node.ownerDocument.createElement('div');\n        content.classList.add(cssClass('dialog-color'));\n        node.appendChild(content);\n        this.render(content, this.column.getColorMapping());\n    };\n    ColorMappingDialog.prototype.render = function (node, value) {\n        var _this = this;\n        var id = this.id;\n        node.innerHTML = this.createTemplate(id, value);\n        var toggles = Array.from(node.querySelectorAll('strong[data-toggle]'));\n        var _loop_1 = function (toggle) {\n            toggle.onclick = function (evt) {\n                evt.preventDefault();\n                evt.stopPropagation();\n                for (var _i = 0, toggles_2 = toggles; _i < toggles_2.length; _i++) {\n                    var t2 = toggles_2[_i];\n                    t2.dataset.toggle = t2.dataset.toggle === 'open' || toggle !== t2 ? '' : 'open';\n                }\n            };\n        };\n        for (var _i = 0, toggles_1 = toggles; _i < toggles_1.length; _i++) {\n            var toggle = toggles_1[_i];\n            _loop_1(toggle);\n        }\n        var customs = [];\n        var updateColor = function (d) {\n            if (!d.checked) {\n                return;\n            }\n            var _loop_2 = function (custom) {\n                Array.from(custom.nextElementSibling.getElementsByTagName('input')).forEach(function (s) { return (s.disabled = custom !== d); });\n            };\n            // disable customs\n            for (var _i = 0, customs_1 = customs; _i < customs_1.length; _i++) {\n                var custom = customs_1[_i];\n                _loop_2(custom);\n            }\n            if (_this.showLivePreviews()) {\n                _this.applyColor();\n            }\n        };\n        var updateSelectedColor = function () {\n            var selected = _this.findInput(\"input[name=color]:checked\");\n            if (selected) {\n                updateColor(selected);\n            }\n        };\n        this.forEach('input[name=color]', function (d) {\n            if (d.value.startsWith('custom:')) {\n                customs.push(d);\n            }\n            d.onchange = function () { return updateColor(d); };\n        });\n        // upon changing custom parameter trigger an update\n        this.forEach(\".\".concat(cssClass('color-custom'), \" input[type=color]\"), function (d) {\n            d.onchange = function () {\n                var item = d.parentElement.previousElementSibling;\n                updateColor(item);\n            };\n        });\n        // sync and apply\n        var continuouos = this.findInput(\"#\".concat(id, \"KC_S\"));\n        var quantized = this.findInput(\"#\".concat(id, \"KQ_S\"));\n        var steps = this.findInput(\"#\".concat(id, \"KQS_S\"));\n        var continuouos2 = this.findInput(\"#\".concat(id, \"KC_D\"));\n        var quantized2 = this.findInput(\"#\".concat(id, \"KQ_D\"));\n        var steps2 = this.findInput(\"#\".concat(id, \"KQS_D\"));\n        continuouos.onchange = continuouos2.onchange = function (evt) {\n            continuouos.checked = continuouos2.checked = evt.currentTarget.checked;\n            steps.disabled = steps2.disabled = !quantized.checked;\n            if (continuouos.checked) {\n                _this.updateGradients(-1);\n                updateSelectedColor();\n            }\n        };\n        steps.onchange = steps2.onchange = function (evt) {\n            steps.value = steps2.value = evt.currentTarget.value;\n            _this.updateGradients(Number.parseInt(steps.value, 10));\n            updateSelectedColor();\n        };\n        quantized.onchange = quantized2.onchange = function (evt) {\n            quantized.checked = quantized2.checked = evt.currentTarget.checked;\n            steps.disabled = steps2.disabled = !quantized.checked;\n            if (quantized.checked) {\n                _this.updateGradients(Number.parseInt(steps.value, 10));\n                updateSelectedColor();\n            }\n        };\n    };\n    ColorMappingDialog.prototype.reset = function () {\n        var desc = this.column.desc;\n        var colorMapping = this.ctx.provider.getTypeFactory().colorMappingFunction(desc.colorMapping || desc.color);\n        this.render(this.node.querySelector(\".\".concat(cssClass('dialog-color'))), colorMapping);\n    };\n    ColorMappingDialog.prototype.submit = function () {\n        this.applyColor();\n        return true;\n    };\n    ColorMappingDialog.prototype.cancel = function () {\n        this.column.setColorMapping(this.before);\n    };\n    ColorMappingDialog.prototype.updateGradients = function (steps) {\n        this.forEach(\"span[data-c]\", function (d) {\n            var key = d.dataset.c;\n            var s = SequentialColorFunction.FUNCTIONS[key];\n            if (s) {\n                d.style.background = steps < 0 ? gradient(s, 9) : steppedGradient(s, steps);\n                return;\n            }\n            var di = DivergentColorFunction.FUNCTIONS[key];\n            if (di) {\n                d.style.background = steps < 0 ? gradient(di, 11) : steppedGradient(di, steps);\n                return;\n            }\n        });\n    };\n    return ColorMappingDialog;\n}(ADialog));\nexport default ColorMappingDialog;\nfunction toColor(input, node) {\n    switch (input.value) {\n        case 'custom:solid':\n            return new SolidColorFunction(node.querySelector('input[name=solid]').value);\n        case 'custom:sequential':\n            var s0 = node.querySelector('input[name=interpolate0]').value;\n            var s1 = node.querySelector('input[name=interpolate1]').value;\n            return new CustomColorMappingFunction([\n                { color: s0, value: 0 },\n                { color: s1, value: 1 },\n            ]);\n        case 'custom:diverging':\n            var dm1 = node.querySelector('input[name=divergentm1]').value;\n            var d0 = node.querySelector('input[name=divergent0]').value;\n            var d1 = node.querySelector('input[name=divergent1]').value;\n            return new CustomColorMappingFunction([\n                { color: dm1, value: 0 },\n                { color: d0, value: 0.5 },\n                { color: d1, value: 1 },\n            ]);\n    }\n    if (input.value in SequentialColorFunction.FUNCTIONS) {\n        return new SequentialColorFunction(input.value);\n    }\n    if (input.value in DivergentColorFunction.FUNCTIONS) {\n        return new DivergentColorFunction(input.value);\n    }\n    return new SolidColorFunction(input.value);\n}\nfunction gradient(interpolate, steps) {\n    if (steps === void 0) { steps = 2; }\n    if (steps <= 1) {\n        return \"\".concat(interpolate(0));\n    }\n    var stepSize = 1 / (steps - 1);\n    var r = \"linear-gradient(to right\";\n    for (var i = 0; i < steps; ++i) {\n        r += \", \".concat(interpolate(i * stepSize), \" \").concat(round(i * stepSize * 100, 2), \"%\");\n    }\n    r += ')';\n    return r;\n}\nfunction steppedGradient(color, count) {\n    if (count === void 0) { count = 2; }\n    if (count === 1) {\n        return \"\".concat(color(0));\n    }\n    var r = \"linear-gradient(to right\";\n    var stepSize = 1 / count;\n    var half = stepSize / 2;\n    for (var i = 0; i < count; ++i) {\n        // stepped\n        // first and last at border else center\n        var shift = i === 0 ? 0 : i === count - 1 ? stepSize : half;\n        var c = color(i * stepSize + shift);\n        r += \", \".concat(c, \" \").concat(round(i * stepSize * 100, 2), \"%, \").concat(c, \" \").concat(round((i + 1) * stepSize * 100, 2), \"%\");\n    }\n    r += ')';\n    return r;\n}\n//# sourceMappingURL=ColorMappingDialog.js.map","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { cssClass } from '../styles';\n/** @internal */\nexport function hasDnDType(e) {\n    var typesToCheck = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        typesToCheck[_i - 1] = arguments[_i];\n    }\n    var available = e.dataTransfer.types;\n    /*\n     * In Chrome data transfer.types is an Array,\n     * while in Firefox it is a DOMStringList\n     * that only implements a contains-method!\n     */\n    if (typeof available.indexOf === 'function') {\n        return typesToCheck.some(function (type) { return available.indexOf(type) >= 0; });\n    }\n    if (typeof available.includes === 'function') {\n        return typesToCheck.some(function (type) { return available.includes(type); });\n    }\n    if (typeof available.contains === 'function') {\n        return typesToCheck.some(function (type) { return available.contains(type); });\n    }\n    return false;\n}\n/**\n * helper storage for dnd in edge since edge doesn't support custom mime-types\n * @type {Map<number, {[p: string]: string}>}\n */\nvar dndTransferStorage = new Map();\nfunction isEdgeDnD(e) {\n    return dndTransferStorage.size > 0 && hasDnDType(e, 'text/plain');\n}\n/**\n * checks whether it is a copy operation\n * @param e\n * @returns {boolean|RegExpMatchArray}\n * @internal\n */\nexport function copyDnD(e) {\n    var dT = e.dataTransfer;\n    return Boolean((e.ctrlKey && dT.effectAllowed.match(/copy/gi)) || !dT.effectAllowed.match(/move/gi));\n}\n/**\n * updates the drop effect according to the current copyDnD state\n * @param e\n * @internal\n */\nexport function updateDropEffect(e) {\n    var dT = e.dataTransfer;\n    if (copyDnD(e)) {\n        dT.dropEffect = 'copy';\n    }\n    else {\n        dT.dropEffect = 'move';\n    }\n}\nvar idCounter = 0;\n/**\n * add drag support for the given element\n * @param {HTMLElement} node\n * @param {() => IDragStartResult} onDragStart callback to compute the payload an object of mime types\n * @param {boolean} stopPropagation whether to stop propagation in case of success\n * @internal\n */\nexport function dragAble(node, onDragStart, onDragEnd, stopPropagation) {\n    if (stopPropagation === void 0) { stopPropagation = false; }\n    var id = ++idCounter;\n    node.classList.add(cssClass('dragable'));\n    node.draggable = true;\n    node.addEventListener('dragstart', function (e) {\n        node.classList.add(cssClass('dragging'));\n        var payload = onDragStart();\n        e.dataTransfer.effectAllowed = payload.effectAllowed;\n        if (stopPropagation) {\n            e.stopPropagation();\n        }\n        // copy all data transfer objects\n        var keys = Object.keys(payload.data);\n        var allSucceeded = keys.every(function (k) {\n            try {\n                e.dataTransfer.setData(k, payload.data[k]);\n                return true;\n            }\n            catch (e) {\n                return false;\n            }\n        });\n        if (allSucceeded) {\n            return;\n        }\n        //compatibility mode for edge\n        var text = payload.data['text/plain'] || '';\n        e.dataTransfer.setData('text/plain', \"\".concat(id).concat(text ? \": \".concat(text) : ''));\n        dndTransferStorage.set(id, payload.data);\n    });\n    node.addEventListener('dragend', function (e) {\n        node.classList.remove(cssClass('dragging'));\n        if (stopPropagation) {\n            e.stopPropagation();\n        }\n        if (dndTransferStorage.size > 0) {\n            //clear the id\n            dndTransferStorage.delete(id);\n        }\n        // remove all\n        var over = node.ownerDocument.getElementsByClassName(cssClass('dragover'))[0];\n        if (over) {\n            over.classList.remove(cssClass('dragover'));\n        }\n        if (onDragEnd) {\n            onDragEnd();\n        }\n    });\n}\n/**\n * add dropable support for the given node\n * @param {HTMLElement} node\n * @param {string[]} mimeTypes mimeTypes to look for\n * @param {(result: IDropResult, e: DragEvent) => boolean} onDrop callback when dropped, returns true if the drop was successful\n * @param {(e: DragEvent) => void} onDragOver optional drag over handler, e.g. for special effects\n * @param {boolean} stopPropagation flag if the event propagation should be stopped in case of success\n * @param {() => boolean} optional whether to enable dropping at all\n * @internal\n */\nexport function dropAble(node, mimeTypes, onDrop, onDragOver, stopPropagation, canDrop) {\n    if (onDragOver === void 0) { onDragOver = null; }\n    if (stopPropagation === void 0) { stopPropagation = false; }\n    if (canDrop === void 0) { canDrop = function () { return true; }; }\n    node.addEventListener('dragenter', function (e) {\n        //var xy = mouse($node.node());\n        if (node.classList.contains(cssClass('dragging')) || !(hasDnDType.apply(void 0, __spreadArray([e], mimeTypes, false)) || isEdgeDnD(e)) || !canDrop()) {\n            // not a valid mime type\n            node.classList.remove(cssClass('dragover'));\n            return undefined;\n        }\n        node.classList.add(cssClass('dragover'));\n        if (stopPropagation) {\n            e.stopPropagation();\n        }\n        //sounds good\n        return false;\n    });\n    node.addEventListener('dragover', function (e) {\n        if (node.classList.contains(cssClass('dragging')) || !(hasDnDType.apply(void 0, __spreadArray([e], mimeTypes, false)) || isEdgeDnD(e)) || !canDrop()) {\n            // not a valid mime type\n            return undefined;\n        }\n        e.preventDefault();\n        updateDropEffect(e);\n        node.classList.add(cssClass('dragover'));\n        if (stopPropagation) {\n            e.stopPropagation();\n        }\n        if (onDragOver) {\n            onDragOver(e);\n        }\n        //sound good\n        return false;\n    });\n    node.addEventListener('dragleave', function (evt) {\n        // same fix as in phovea\n        evt.target.classList.remove(cssClass('dragover'));\n    });\n    node.addEventListener('drop', function (e) {\n        e.preventDefault();\n        if (stopPropagation) {\n            e.stopPropagation();\n        }\n        updateDropEffect(e);\n        var effect = e.dataTransfer.dropEffect;\n        node.classList.remove(cssClass('dragover'));\n        if (isEdgeDnD(e)) {\n            // retrieve from helper\n            var base = e.dataTransfer.getData('text/plain');\n            var id = Number.parseInt(base.indexOf(':') >= 0 ? base.substring(0, base.indexOf(':')) : base, 10);\n            if (dndTransferStorage.has(id)) {\n                var data_1 = dndTransferStorage.get(id);\n                dndTransferStorage.delete(id);\n                return !onDrop({ effect: effect, data: data_1 }, e);\n            }\n            return undefined;\n        }\n        if (!hasDnDType.apply(void 0, __spreadArray([e], mimeTypes, false))) {\n            return undefined;\n        }\n        // copy sub mime types\n        var data = {};\n        //selects the data contained in the data transfer\n        mimeTypes.forEach(function (mime) {\n            var value = e.dataTransfer.getData(mime);\n            if (value !== '') {\n                data[mime] = value;\n            }\n        });\n        return !onDrop({ effect: effect, data: data }, e);\n    });\n}\n//# sourceMappingURL=dnd.js.map","import { getAllToolbarActions, getAllToolbarDialogAddons } from '../model/internal';\nfunction sortActions(a, b) {\n    if (a.options.order === b.options.order) {\n        return a.title.toString().localeCompare(b.title.toString());\n    }\n    return (a.options.order || 50) - (b.options.order || 50);\n}\nfunction getFullToolbar(col, ctx) {\n    var cache = ctx.caches.toolbar;\n    if (cache.has(col.desc.type)) {\n        return cache.get(col.desc.type);\n    }\n    var keys = getAllToolbarActions(col);\n    if (!col.fixed) {\n        keys.push('remove');\n    }\n    {\n        var possible = ctx.getPossibleRenderer(col);\n        if (possible.item.length > 2 || possible.group.length > 2 || possible.summary.length > 2) {\n            // default always possible\n            keys.push('vis');\n        }\n    }\n    var actions = ctx.resolveToolbarActions(col, keys);\n    var r = Array.from(new Set(actions)).sort(sortActions);\n    cache.set(col.desc.type, r);\n    return r;\n}\n/** @internal */\nexport function getToolbar(col, ctx) {\n    var toolbar = getFullToolbar(col, ctx);\n    var flags = ctx.flags;\n    return toolbar.filter(function (a) {\n        if (a.enabled && !a.enabled(col)) {\n            return false;\n        }\n        // level is basic or not one of disabled features\n        return (a.options.featureLevel === 'basic' ||\n            !((flags.advancedModelFeatures === false && a.options.featureCategory === 'model') ||\n                (flags.advancedRankingFeatures === false && a.options.featureCategory === 'ranking') ||\n                (flags.advancedUIFeatures === false && a.options.featureCategory === 'ui')));\n    });\n}\n/** @internal */\nexport function isSortAble(col, ctx) {\n    var toolbar = getFullToolbar(col, ctx);\n    return toolbar.find(function (d) { return d.title === 'Sort' || d.title.startsWith('Sort By'); }) != null;\n}\n/** @internal */\nexport function isGroupAble(col, ctx) {\n    var toolbar = getFullToolbar(col, ctx);\n    return toolbar.find(function (d) { return d.title === 'Group' || d.title.startsWith('Group By'); }) != null;\n}\n/** @internal */\nexport function isGroupSortAble(col, ctx) {\n    var toolbar = getFullToolbar(col, ctx);\n    return toolbar.find(function (d) { return d.title.startsWith('Sort Groups By'); }) != null;\n}\n/** @internal */\nexport function getToolbarDialogAddons(col, key, ctx) {\n    var cacheKey = \"\".concat(col.desc.type, \"@\").concat(key);\n    var cacheAddon = ctx.caches.toolbarAddons;\n    if (cacheAddon.has(cacheKey)) {\n        return cacheAddon.get(cacheKey);\n    }\n    var keys = getAllToolbarDialogAddons(col, key);\n    var actions = ctx.resolveToolbarDialogAddons(col, keys);\n    var r = Array.from(new Set(actions)).sort(function (a, b) {\n        if (a.order === b.order) {\n            return a.title.localeCompare(b.title);\n        }\n        return (a.order || 50) - (b.order || 50);\n    });\n    cacheAddon.set(cacheKey, r);\n    return r;\n}\n//# sourceMappingURL=toolbarResolvers.js.map","import { getSortType } from '../model';\nimport { cssClass } from '../styles';\nimport { getToolbar } from './toolbarResolvers';\n/** @internal */\nexport function actionCSSClass(title) {\n    if (title.endsWith('')) {\n        title = title.slice(0, -2);\n    }\n    if (title.endsWith('&hellip;')) {\n        title = title.slice(0, -'&hellip;'.length - 1);\n    }\n    if (title.endsWith('By')) {\n        title = title.slice(0, -3);\n    }\n    var clean = title.toLowerCase().replace(/[ +-]/gm, '-');\n    return \"\".concat(cssClass('action'), \" \").concat(cssClass(\"action-\".concat(clean)));\n}\nexport function addIconDOM(node, col, ctx, level, showLabel, mode) {\n    return function (action) {\n        var m = isActionMode(col, action, mode, 'shortcut')\n            ? 'o'\n            : isActionMode(col, action, mode, 'menu+shortcut')\n                ? 's'\n                : 'r';\n        var title = ctx.sanitize(action.title);\n        node.insertAdjacentHTML('beforeend', \"<i data-a=\\\"\".concat(m, \"\\\" title=\\\"\").concat(title, \"\\\" class=\\\"\").concat(actionCSSClass(title), \" \").concat(cssClass(\"feature-\".concat(ctx.sanitize(action.options.featureLevel || 'basic'))), \" \").concat(cssClass(\"feature-\".concat(ctx.sanitize(action.options.featureCategory || 'others'))), \"\\\"><span\").concat(!showLabel ? \" class=\\\"\".concat(cssClass('aria'), \"\\\" aria-hidden=\\\"true\\\"\") : '', \">\").concat(title, \"</span> </i>\"));\n        var i = node.lastElementChild;\n        i.onclick = function (evt) {\n            evt.stopPropagation();\n            ctx.dialogManager.setHighlightColumn(col);\n            action.onClick(col, evt, ctx, level, !showLabel);\n        };\n        return i;\n    };\n}\nexport function isActionMode(col, d, mode, value) {\n    var s = d.options.mode === undefined ? 'menu' : d.options.mode;\n    if (s === value) {\n        return true;\n    }\n    if (typeof s === 'function') {\n        return s(col, mode) === value;\n    }\n    return false;\n}\n/** @internal */\nexport function createToolbarMenuItems(node, level, col, ctx, mode) {\n    var addIcon = addIconDOM(node, col, ctx, level, true, mode);\n    getToolbar(col, ctx)\n        .filter(function (d) { return !isActionMode(col, d, mode, 'shortcut'); })\n        .forEach(addIcon);\n}\n/** @internal */\nexport function updateIconState(node, col) {\n    var sort = node.getElementsByClassName(cssClass('action-sort'))[0];\n    if (sort) {\n        var _a = col.isSortedByMe(), asc = _a.asc, priority = _a.priority;\n        sort.dataset.sort = asc !== undefined ? asc : '';\n        sort.dataset.type = getSortType(col);\n        if (priority !== undefined) {\n            sort.dataset.priority = (priority + 1).toString();\n        }\n        else {\n            delete sort.dataset.priority;\n        }\n    }\n    var sortGroups = node.getElementsByClassName(cssClass('action-sort-groups'))[0];\n    if (sortGroups) {\n        var _b = col.isGroupSortedByMe(), asc = _b.asc, priority = _b.priority;\n        sortGroups.dataset.sort = asc !== undefined ? asc : '';\n        sortGroups.dataset.type = getSortType(col);\n        if (priority !== undefined) {\n            sortGroups.dataset.priority = (priority + 1).toString();\n        }\n        else {\n            delete sortGroups.dataset.priority;\n        }\n    }\n    var group = node.getElementsByClassName(cssClass('action-group'))[0];\n    if (group) {\n        var groupedBy = col.isGroupedBy();\n        group.dataset.group = groupedBy >= 0 ? 'true' : 'false';\n        if (groupedBy >= 0) {\n            group.dataset.priority = (groupedBy + 1).toString();\n        }\n        else {\n            delete group.dataset.priority;\n        }\n    }\n    var filter = node.getElementsByClassName(cssClass('action-filter'))[0];\n    if (!filter) {\n        return;\n    }\n    if (col.isFiltered()) {\n        filter.dataset.active = '';\n    }\n    else {\n        delete filter.dataset.active;\n    }\n}\n//# sourceMappingURL=headerTooltip.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createToolbarMenuItems, updateIconState } from '../headerTooltip';\nimport { cssClass } from '../../styles';\nimport APopup from './APopup';\n/** @internal */\nvar MoreColumnOptionsDialog = /** @class */ (function (_super) {\n    __extends(MoreColumnOptionsDialog, _super);\n    function MoreColumnOptionsDialog(column, dialog, mode, ctx) {\n        var _this = _super.call(this, dialog, {\n            autoClose: true,\n        }) || this;\n        _this.column = column;\n        _this.mode = mode;\n        _this.ctx = ctx;\n        return _this;\n    }\n    MoreColumnOptionsDialog.prototype.build = function (node) {\n        node.classList.add(cssClass('more-options'));\n        node.dataset.colId = this.column.id;\n        createToolbarMenuItems(node, this.dialog.level + 1, this.column, this.ctx, this.mode);\n        updateIconState(node, this.column);\n    };\n    return MoreColumnOptionsDialog;\n}(APopup));\nexport default MoreColumnOptionsDialog;\n//# sourceMappingURL=MoreColumnOptionsDialog.js.map","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { MIN_LABEL_WIDTH } from '../constants';\nimport { dragAble, dropAble, hasDnDType } from '../internal';\nimport { categoryOf } from '../model';\nimport { createStackDesc, isArrayColumn, isBoxPlotColumn, isCategoricalColumn, isMapColumn, isNumberColumn, isNumbersColumn, createImpositionDesc, createImpositionsDesc, createImpositionBoxPlotDesc, CompositeColumn, isMultiLevelColumn, } from '../model';\nimport { aria, cssClass, engineCssClass, RESIZE_ANIMATION_DURATION, RESIZE_SPACE } from '../styles';\nimport MoreColumnOptionsDialog from './dialogs/MoreColumnOptionsDialog';\nimport { getToolbar } from './toolbarResolvers';\nimport { dialogContext } from './dialogs';\nimport { addIconDOM, actionCSSClass, isActionMode, updateIconState } from './headerTooltip';\nimport { setText } from '../renderer/utils';\nexport { createToolbarMenuItems, actionCSSClass } from './headerTooltip';\nfunction setTextOrEmpty(node, condition, text, asHTML) {\n    if (asHTML === void 0) { asHTML = false; }\n    if (condition) {\n        setText(node, ' ');\n    }\n    else if (asHTML) {\n        node.innerHTML = text;\n    }\n    else {\n        setText(node, text);\n    }\n    return node;\n}\n/** @internal */\nexport function createHeader(col, ctx, options) {\n    var _a;\n    if (options === void 0) { options = {}; }\n    options = Object.assign({\n        dragAble: true,\n        mergeDropAble: true,\n        rearrangeAble: true,\n        resizeable: true,\n        level: 0,\n        extraPrefix: '',\n    }, options);\n    var node = ctx.document.createElement('section');\n    var extra = options.extraPrefix\n        ? function (name) { return \"\".concat(cssClass(name), \" \").concat(cssClass(\"\".concat(options.extraPrefix, \"-\").concat(name))); }\n        : cssClass;\n    var summary = col.getMetaData().summary;\n    node.innerHTML = \"\\n    <div class=\\\"\".concat(extra('label'), \" \").concat(cssClass('typed-icon'), \"\\\"></div>\\n    <div class=\\\"\").concat(extra('sublabel'), \"\\\"></div>\\n    <div class=\\\"\").concat(extra('toolbar'), \"\\\"></div>\\n    <div class=\\\"\").concat(extra('spacing'), \"\\\"></div>\\n    <div class=\\\"\").concat(extra('handle'), \" \").concat(cssClass('feature-advanced'), \" \").concat(cssClass('feature-ui'), \"\\\"></div>\\n    \").concat(options.mergeDropAble ? \"<div class=\\\"\".concat(extra('header-drop'), \" \").concat(extra('merger'), \"\\\"></div>\") : '', \"\\n    \").concat(options.rearrangeAble\n        ? \"<div class=\\\"\".concat(extra('header-drop'), \" \").concat(extra('placer'), \"\\\" data-draginfo=\\\"Place here\\\"></div>\")\n        : '', \"\\n  \");\n    setTextOrEmpty(node.firstElementChild, col.getWidth() < MIN_LABEL_WIDTH, col.label, col.desc.labelAsHTML);\n    setTextOrEmpty(node.children[1], col.getWidth() < MIN_LABEL_WIDTH || !summary, summary, col.desc.summaryAsHTML);\n    // addTooltip(node, col);\n    createShortcutMenuItems(node.getElementsByClassName(cssClass('toolbar'))[0], options.level, col, ctx, 'header');\n    toggleToolbarIcons(node, col);\n    if (options.dragAble) {\n        dragAbleColumn(node, col, ctx);\n    }\n    if (options.mergeDropAble) {\n        var merger = node.getElementsByClassName(cssClass('merger'))[0];\n        if (!options.rearrangeAble) {\n            merger.style.left = '0';\n            merger.style.width = '100%';\n        }\n        mergeDropAble(merger, col, ctx);\n    }\n    if (options.rearrangeAble) {\n        var placer = node.getElementsByClassName(cssClass('placer'))[0];\n        var nextSibling = col.nextSibling();\n        var widthFactor = !options.rearrangeAble ? 0.5 : 0.2;\n        if (!options.rearrangeAble) {\n            placer.style.left = '50%';\n        }\n        placer.style.width = \"\".concat(col.getWidth() * widthFactor + ((_a = (nextSibling === null || nextSibling === void 0 ? void 0 : nextSibling.getWidth()) / 2) !== null && _a !== void 0 ? _a : 50), \"px\");\n        rearrangeDropAble(placer, col, ctx);\n    }\n    if (options.resizeable) {\n        dragWidth(col, node);\n    }\n    return node;\n}\n/** @internal */\nexport function updateHeader(node, col, minWidth) {\n    var _a;\n    if (minWidth === void 0) { minWidth = MIN_LABEL_WIDTH; }\n    var label = node.getElementsByClassName(cssClass('label'))[0];\n    setTextOrEmpty(label, col.getWidth() < minWidth, col.label, col.desc.labelAsHTML);\n    var summary = col.getMetaData().summary;\n    var subLabel = node.getElementsByClassName(cssClass('sublabel'))[0];\n    if (subLabel) {\n        setTextOrEmpty(subLabel, col.getWidth() < minWidth || !summary, summary, col.desc.summaryAsHTML);\n    }\n    var title = col.label;\n    if (summary) {\n        title = \"\".concat(title, \"\\n\").concat(summary);\n    }\n    if (col.description) {\n        title = \"\".concat(title, \"\\n\").concat(col.description);\n    }\n    node.title = title;\n    node.dataset.colId = col.id;\n    node.dataset.type = col.desc.type;\n    label.dataset.typeCat = categoryOf(col).name;\n    updateIconState(node, col);\n    updateMoreDialogIcons(node, col);\n    // update width for width of next sibling\n    var placer = node.getElementsByClassName(cssClass('placer'))[0];\n    if (placer) {\n        var nextSibling = col.nextSibling();\n        var widthFactor = node.getElementsByClassName(cssClass('merger')).length === 0 ? 0.5 : 0.2;\n        placer.style.width = \"\".concat(col.getWidth() * widthFactor + ((_a = (nextSibling === null || nextSibling === void 0 ? void 0 : nextSibling.getWidth()) * widthFactor) !== null && _a !== void 0 ? _a : 50) + 5, \"px\");\n    }\n}\nfunction updateMoreDialogIcons(node, col) {\n    var root = node.closest(\".\".concat(cssClass()));\n    if (!root) {\n        return;\n    }\n    var dialog = root.querySelector(\".\".concat(cssClass('more-options'), \"[data-col-id=\\\"\").concat(col.id, \"\\\"]\"));\n    if (!dialog) {\n        return;\n    }\n    updateIconState(dialog, col);\n}\n/** @internal */\nexport function createShortcutMenuItems(node, level, col, ctx, mode, willAutoHide) {\n    if (willAutoHide === void 0) { willAutoHide = true; }\n    var addIcon = addIconDOM(node, col, ctx, level, false, mode);\n    var toolbar = getToolbar(col, ctx);\n    var shortcuts = toolbar.filter(function (d) { return !isActionMode(col, d, mode, 'menu'); });\n    var hybrids = shortcuts.reduce(function (a, b) { return a + (isActionMode(col, b, mode, 'menu+shortcut') ? 1 : 0); }, 0);\n    shortcuts.forEach(addIcon);\n    var moreEntries = toolbar.length - shortcuts.length + hybrids;\n    if (shortcuts.length === toolbar.length || (moreEntries === hybrids && !willAutoHide)) {\n        // all visible or just hybrids that will always be visible\n        return;\n    }\n    // need a more entry\n    node.insertAdjacentHTML('beforeend', \"<i data-a=\\\"m\\\" data-m=\\\"\".concat(moreEntries, \"\\\" title=\\\"More \\u2026\\\" class=\\\"\").concat(actionCSSClass('More'), \"\\\">\").concat(aria('More '), \"</i>\"));\n    var i = node.lastElementChild;\n    i.onclick = function (evt) {\n        evt.stopPropagation();\n        ctx.dialogManager.setHighlightColumn(col);\n        var dialog = new MoreColumnOptionsDialog(col, dialogContext(ctx, level, evt), mode, ctx);\n        dialog.open();\n    };\n}\n/** @internal */\nfunction toggleRotatedHeader(node, col, defaultVisibleClientWidth) {\n    // rotate header flag if needed\n    var label = node.getElementsByClassName(cssClass('label'))[0];\n    if (col.getWidth() < MIN_LABEL_WIDTH) {\n        label.classList.remove(\".\".concat(cssClass('rotated')));\n        return;\n    }\n    var width = label.clientWidth;\n    var rotated = width <= 0\n        ? ((col.label.length * defaultVisibleClientWidth) / 3) * 0.6 > col.getWidth()\n        : label.scrollWidth * 0.6 > label.clientWidth;\n    label.classList.toggle(\".\".concat(cssClass('rotated')), rotated);\n}\n/** @internal */\nfunction toggleToolbarIcons(node, col, defaultVisibleClientWidth) {\n    if (defaultVisibleClientWidth === void 0) { defaultVisibleClientWidth = 22.5; }\n    toggleRotatedHeader(node, col, defaultVisibleClientWidth);\n    var toolbar = node.getElementsByClassName(cssClass('toolbar'))[0];\n    if (toolbar.childElementCount === 0) {\n        return;\n    }\n    var availableWidth = col.getWidth();\n    var actions = Array.from(toolbar.children).map(function (d) { return ({\n        node: d,\n        width: d.clientWidth > 0 ? d.clientWidth : defaultVisibleClientWidth,\n    }); });\n    var shortCuts = actions.filter(function (d) { return d.node.dataset.a === 'o'; });\n    var hybrids = actions.filter(function (d) { return d.node.dataset.a === 's'; });\n    var moreIcon = actions.find(function (d) { return d.node.dataset.a === 'm'; });\n    var moreEntries = moreIcon ? Number.parseInt(moreIcon.node.dataset.m, 10) : 0;\n    var needMore = moreEntries > hybrids.length;\n    var total = actions.reduce(function (a, b) { return a + b.width; }, 0);\n    for (var _i = 0, actions_1 = actions; _i < actions_1.length; _i++) {\n        var action = actions_1[_i];\n        // maybe hide not needed \"more\"\n        action.node.classList.remove(cssClass('hidden'));\n    }\n    // all visible\n    if (total < availableWidth) {\n        return;\n    }\n    if (moreIcon && !needMore && total - moreIcon.width < availableWidth) {\n        // available space is enough we can skip the \"more\" and then it fits\n        moreIcon.node.classList.add(cssClass('hidden'));\n        return;\n    }\n    for (var _a = 0, _b = hybrids.reverse().concat(shortCuts.reverse()); _a < _b.length; _a++) {\n        var action = _b[_a];\n        // back to forth and hybrids earlier than pure shortcuts\n        // hide and check if enough\n        action.node.classList.add(cssClass('hidden'));\n        total -= action.width;\n        if (total < availableWidth) {\n            return;\n        }\n    }\n}\n/**\n * allow to change the width of a column using dragging the handle\n * @internal\n */\nexport function dragWidth(col, node) {\n    var ueberElement;\n    var sizeHelper;\n    var currentFooterTransformation = '';\n    var handle = node.getElementsByClassName(cssClass('handle'))[0];\n    var start = 0;\n    var originalWidth = 0;\n    var mouseMove = function (evt) {\n        evt.stopPropagation();\n        evt.preventDefault();\n        var end = evt.clientX;\n        var delta = end - start;\n        if (Math.abs(start - end) < 2) {\n            //ignore\n            return;\n        }\n        start = end;\n        var width = Math.max(0, col.getWidth() + delta);\n        sizeHelper.classList.toggle(cssClass('resize-animated'), width < originalWidth);\n        // no idea why shifted by the size compared to the other footer element\n        sizeHelper.style.transform = \"\".concat(currentFooterTransformation, \" translate(\").concat(width - originalWidth - RESIZE_SPACE, \"px, 0px)\");\n        node.style.width = \"\".concat(width, \"px\");\n        col.setWidth(width);\n        toggleToolbarIcons(node, col);\n    };\n    var mouseUp = function (evt) {\n        evt.stopPropagation();\n        evt.preventDefault();\n        var end = evt.clientX;\n        node.classList.remove(cssClass('change-width'));\n        ueberElement.removeEventListener('mousemove', mouseMove);\n        ueberElement.removeEventListener('mouseup', mouseUp);\n        ueberElement.removeEventListener('mouseleave', mouseUp);\n        ueberElement.classList.remove(cssClass('resizing'));\n        node.style.width = null;\n        setTimeout(function () {\n            sizeHelper.classList.remove(cssClass('resizing'), cssClass('resize-animated'));\n        }, RESIZE_ANIMATION_DURATION * 1.2); // after animation ended\n        if (Math.abs(start - end) < 2) {\n            //ignore\n            return;\n        }\n        var delta = end - start;\n        var width = Math.max(0, col.getWidth() + delta);\n        col.setWidth(width);\n        toggleToolbarIcons(node, col);\n    };\n    handle.onmousedown = function (evt) {\n        evt.stopPropagation();\n        evt.preventDefault();\n        node.classList.add(cssClass('change-width'));\n        originalWidth = col.getWidth();\n        start = evt.clientX;\n        ueberElement = node.closest('body') || node.closest(\".\".concat(cssClass())); // take the whole body or root lineup\n        ueberElement.addEventListener('mousemove', mouseMove);\n        ueberElement.addEventListener('mouseup', mouseUp);\n        ueberElement.addEventListener('mouseleave', mouseUp);\n        ueberElement.classList.add(cssClass('resizing'));\n        sizeHelper = node\n            .closest(\".\".concat(engineCssClass()))\n            .querySelector(\".\".concat(cssClass('resize-helper')));\n        currentFooterTransformation = sizeHelper.previousElementSibling.style.transform;\n        sizeHelper.style.transform = \"\".concat(currentFooterTransformation, \" translate(\").concat(-RESIZE_SPACE, \"px, 0px)\");\n        sizeHelper.classList.add(cssClass('resizing'));\n    };\n    handle.onclick = function (evt) {\n        // avoid resorting\n        evt.stopPropagation();\n        evt.preventDefault();\n    };\n}\n/** @internal */\nexport var MIMETYPE_PREFIX = 'text/x-caleydo-lineup-column';\n/**\n * allow to drag the column away\n * @internal\n */\nexport function dragAbleColumn(node, column, ctx) {\n    dragAble(node, function () {\n        var _a;\n        var header = node.closest(\".\".concat(engineCssClass('header')));\n        if (header) {\n            header.classList.add(cssClass('dragging-column'));\n        }\n        var ref = JSON.stringify(ctx.provider.toDescRef(column.desc));\n        var data = (_a = {\n                'text/plain': column.label\n            },\n            _a[\"\".concat(MIMETYPE_PREFIX, \"-ref\")] = column.id,\n            _a[MIMETYPE_PREFIX] = ref,\n            _a);\n        if (isNumberColumn(column)) {\n            data[\"\".concat(MIMETYPE_PREFIX, \"-number\")] = ref;\n            data[\"\".concat(MIMETYPE_PREFIX, \"-number-ref\")] = column.id;\n        }\n        if (isCategoricalColumn(column)) {\n            data[\"\".concat(MIMETYPE_PREFIX, \"-categorical\")] = ref;\n            data[\"\".concat(MIMETYPE_PREFIX, \"-categorical-ref\")] = column.id;\n        }\n        if (isBoxPlotColumn(column)) {\n            data[\"\".concat(MIMETYPE_PREFIX, \"-boxplot\")] = ref;\n            data[\"\".concat(MIMETYPE_PREFIX, \"-boxplot-ref\")] = column.id;\n        }\n        if (isMapColumn(column)) {\n            data[\"\".concat(MIMETYPE_PREFIX, \"-map\")] = ref;\n            data[\"\".concat(MIMETYPE_PREFIX, \"-map-ref\")] = column.id;\n        }\n        if (isArrayColumn(column)) {\n            data[\"\".concat(MIMETYPE_PREFIX, \"-array\")] = ref;\n            data[\"\".concat(MIMETYPE_PREFIX, \"-array-ref\")] = column.id;\n        }\n        if (isNumbersColumn(column)) {\n            data[\"\".concat(MIMETYPE_PREFIX, \"-numbers\")] = ref;\n            data[\"\".concat(MIMETYPE_PREFIX, \"-numbers-ref\")] = column.id;\n        }\n        return {\n            effectAllowed: 'copyMove',\n            data: data,\n        };\n    }, function () {\n        var header = node.closest(\".\".concat(engineCssClass('header')));\n        if (header) {\n            header.classList.remove(cssClass('dragging-column'));\n        }\n    }, true);\n}\n/**\n * dropper for allowing to rearrange (move, copy) columns\n * @internal\n */\nexport function rearrangeDropAble(node, column, ctx) {\n    dropAble(node, [\"\".concat(MIMETYPE_PREFIX, \"-ref\"), MIMETYPE_PREFIX], function (result) {\n        var col = null;\n        var data = result.data;\n        if (!(\"\".concat(MIMETYPE_PREFIX, \"-ref\") in data)) {\n            var desc = JSON.parse(data[MIMETYPE_PREFIX]);\n            col = ctx.provider.create(ctx.provider.fromDescRef(desc));\n            return col != null && column.insertAfterMe(col) != null;\n        }\n        // find by reference\n        var id = data[\"\".concat(MIMETYPE_PREFIX, \"-ref\")];\n        col = ctx.provider.find(id);\n        if (!col || (col === column && !result.effect.startsWith('copy'))) {\n            return false;\n        }\n        if (result.effect.startsWith('copy')) {\n            col = ctx.provider.clone(col);\n            return col != null && column.insertAfterMe(col) != null;\n        }\n        // detect whether it is an internal move operation or an real remove/insert operation\n        var toInsertParent = col.parent;\n        if (!toInsertParent) {\n            // no parent will always be a move\n            return column.insertAfterMe(col) != null;\n        }\n        if (toInsertParent === column.parent) {\n            // move operation\n            return toInsertParent.moveAfter(col, column) != null;\n        }\n        col.removeMe();\n        return column.insertAfterMe(col) != null;\n    }, null, true);\n}\n/**\n * dropper for merging columns\n * @internal\n */\nexport function mergeDropAble(node, column, ctx) {\n    var resolveDrop = function (result) {\n        var data = result.data;\n        var copy = result.effect === 'copy';\n        var prefix = MIMETYPE_PREFIX;\n        var key = Object.keys(data).find(function (d) { return d.startsWith(prefix) && d.endsWith('-ref'); });\n        if (key) {\n            var id = data[key];\n            var col = ctx.provider.find(id);\n            if (copy) {\n                col = ctx.provider.clone(col);\n            }\n            else if (col === column) {\n                return null;\n            }\n            else {\n                col.removeMe();\n            }\n            return col;\n        }\n        var alternative = Object.keys(data).find(function (d) { return d.startsWith(prefix); });\n        if (!alternative) {\n            return null;\n        }\n        var desc = JSON.parse(alternative);\n        return ctx.provider.create(ctx.provider.fromDescRef(desc));\n    };\n    var pushChild = function (result) {\n        var col = resolveDrop(result);\n        return col != null && column.push(col) != null;\n    };\n    var mergeImpl = function (col, desc) {\n        if (col == null) {\n            return false;\n        }\n        var ranking = column.findMyRanker();\n        var index = ranking.indexOf(column);\n        var parent = ctx.provider.create(desc);\n        column.removeMe();\n        parent.push(column);\n        parent.push(col);\n        return ranking.insert(parent, index) != null;\n    };\n    var mergeWith = function (desc) { return function (result) {\n        var col = resolveDrop(result);\n        return mergeImpl(col, desc);\n    }; };\n    var all = [\"\".concat(MIMETYPE_PREFIX, \"-ref\"), MIMETYPE_PREFIX];\n    var numberlike = [\"\".concat(MIMETYPE_PREFIX, \"-number-ref\"), \"\".concat(MIMETYPE_PREFIX, \"-number\")];\n    var categorical = [\"\".concat(MIMETYPE_PREFIX, \"-categorical-ref\"), \"\".concat(MIMETYPE_PREFIX, \"-categorical\")];\n    if (isMultiLevelColumn(column) || column instanceof CompositeColumn) {\n        // stack column or nested\n        node.dataset.draginfo = '+';\n        return dropAble(node, column.canJustAddNumbers ? numberlike : all, pushChild);\n    }\n    if (isNumbersColumn(column)) {\n        node.dataset.draginfo = 'Color by';\n        return dropAble(node, categorical, mergeWith(createImpositionsDesc()));\n    }\n    if (isBoxPlotColumn(column)) {\n        node.dataset.draginfo = 'Color by';\n        return dropAble(node, categorical, mergeWith(createImpositionBoxPlotDesc()));\n    }\n    if (isNumberColumn(column)) {\n        node.dataset.draginfo = 'Merge';\n        return dropAble(node, categorical.concat(numberlike), function (result) {\n            var col = resolveDrop(result);\n            if (col == null) {\n                return false;\n            }\n            if (isCategoricalColumn(col)) {\n                return mergeImpl(col, createImpositionDesc());\n            }\n            if (isNumberColumn(col)) {\n                return mergeImpl(col, createStackDesc());\n            }\n            return false;\n        }, function (e) {\n            if (hasDnDType.apply(void 0, __spreadArray([e], categorical, false))) {\n                node.dataset.draginfo = 'Color by';\n                return;\n            }\n            if (hasDnDType.apply(void 0, __spreadArray([e], numberlike, false))) {\n                node.dataset.draginfo = 'Sum';\n            }\n        });\n    }\n}\n//# sourceMappingURL=header.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { debounce, clear, suffix } from '../../internal';\nimport { CompositeColumn } from '../../model';\nimport { createHeader, updateHeader } from '../header';\nimport { cssClass, engineCssClass } from '../../styles';\nimport APopup from './APopup';\n/** @internal */\nvar CompositeChildrenDialog = /** @class */ (function (_super) {\n    __extends(CompositeChildrenDialog, _super);\n    function CompositeChildrenDialog(column, dialog, ctx) {\n        var _this = _super.call(this, dialog) || this;\n        _this.column = column;\n        _this.ctx = ctx;\n        _this.id = \".dialog\".concat(Math.random().toString(36).slice(-8).substring(0, 3));\n        return _this;\n    }\n    CompositeChildrenDialog.prototype.cleanUp = function (action) {\n        _super.prototype.cleanUp.call(this, action);\n        this.column.on(suffix(this.id, CompositeColumn.EVENT_ADD_COLUMN, CompositeColumn.EVENT_REMOVE_COLUMN), null);\n    };\n    CompositeChildrenDialog.prototype.build = function (node) {\n        var _this = this;\n        node.classList.add(cssClass('dialog-sub-nested'));\n        var createChildren = function () {\n            _this.column.children.forEach(function (c) {\n                var n = createHeader(c, _this.ctx, {\n                    mergeDropAble: false,\n                    resizeable: false,\n                    level: _this.dialog.level + 1,\n                    extraPrefix: 'sub',\n                });\n                n.className = cssClass('header');\n                updateHeader(n, c);\n                var summary = _this.ctx.summaryRenderer(c, false);\n                var summaryNode = _this.ctx.asElement(summary.template);\n                summaryNode.dataset.renderer = c.getSummaryRenderer();\n                summaryNode.classList.add(cssClass('summary'), cssClass('renderer'), cssClass('th-summary'));\n                var r = summary.update(summaryNode);\n                if (r) {\n                    summaryNode.classList.add(engineCssClass('loading'));\n                    r.then(function () {\n                        summaryNode.classList.remove(engineCssClass('loading'));\n                    });\n                }\n                n.appendChild(summaryNode);\n                node.appendChild(n);\n            });\n        };\n        createChildren();\n        this.column.on(suffix(this.id, CompositeColumn.EVENT_ADD_COLUMN, CompositeColumn.EVENT_REMOVE_COLUMN), debounce(function () {\n            if (!node.parentElement) {\n                // already closed\n                _this.destroy();\n                return;\n            }\n            clear(node);\n            createChildren();\n        }));\n    };\n    return CompositeChildrenDialog;\n}(APopup));\nexport default CompositeChildrenDialog;\n//# sourceMappingURL=CompositeChildrenDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { resolveInnerNodes } from '../../model';\nimport ADialog from './ADialog';\n/** @internal */\nvar CutOffHierarchyDialog = /** @class */ (function (_super) {\n    __extends(CutOffHierarchyDialog, _super);\n    function CutOffHierarchyDialog(column, dialog, ctx) {\n        var _this = _super.call(this, dialog, {\n            livePreview: 'cutOff',\n        }) || this;\n        _this.column = column;\n        _this.ctx = ctx;\n        _this.innerNodes = resolveInnerNodes(_this.column.hierarchy);\n        _this.innerNodePaths = _this.innerNodes.map(function (n) { return n.path; });\n        _this.before = column.getCutOff();\n        return _this;\n    }\n    CutOffHierarchyDialog.prototype.build = function (node) {\n        var s = this.ctx.sanitize;\n        node.insertAdjacentHTML('beforeend', \"\\n        <input type=\\\"text\\\" value=\\\"\".concat(s(this.before.node.label), \"\\\" required=\\\"required\\\" autofocus=\\\"autofocus\\\" list=\\\"ui\").concat(this.ctx.idPrefix, \"lineupHierarchyList\\\" placeholder=\\\"cut off node\\\">\\n        <input type=\\\"number\\\" value=\\\"\").concat(isFinite(this.before.maxDepth) ? this.before.maxDepth : '', \"\\\" placeholder=\\\"max depth (&infin;)\\\">\\n        <datalist id=\\\"ui\").concat(this.ctx.idPrefix, \"lineupHierarchyList\\\">\").concat(this.innerNodes.map(function (node) { return \"<option value=\\\"\".concat(s(node.path), \"\\\">\").concat(s(node.label), \"</option>\"); }), \"</datalist>\"));\n        //custom validation\n        var innerNodePaths = this.innerNodePaths;\n        this.findInput('input[type=\"text\"]').addEventListener('change', function () {\n            var value = this.value;\n            if (innerNodePaths.indexOf(value) < 0) {\n                this.setCustomValidity('invalid node');\n            }\n            else {\n                this.setCustomValidity('');\n            }\n        }, {\n            passive: true,\n        });\n        this.enableLivePreviews('input[type=text],input[type=number]');\n    };\n    CutOffHierarchyDialog.prototype.reset = function () {\n        this.findInput('input[type=\"text\"]').value = this.column.hierarchy.path;\n        this.findInput('input[type=\"number\"]').value = '';\n    };\n    CutOffHierarchyDialog.prototype.cancel = function () {\n        this.column.setCutOff(this.before);\n    };\n    CutOffHierarchyDialog.prototype.submit = function () {\n        var newNode = this.findInput('input[type=\"text\"]').value;\n        var newNodeIndex = this.innerNodePaths.indexOf(newNode);\n        var node = this.innerNodes[newNodeIndex];\n        var maxDepthText = this.findInput('input[type=\"number\"]').value;\n        var maxDepth = maxDepthText === '' ? Number.POSITIVE_INFINITY : Number.parseInt(maxDepthText, 10);\n        this.column.setCutOff({ node: node, maxDepth: maxDepth });\n        return true;\n    };\n    return CutOffHierarchyDialog;\n}(ADialog));\nexport default CutOffHierarchyDialog;\n//# sourceMappingURL=CutOffHierarchyDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { noDateFilter } from '../../model/internalDate';\nimport { createDateFilter } from '../../renderer/DateHistogramCellRenderer';\nimport { cssClass } from '../../styles';\nimport ADialog from './ADialog';\n/** @internal */\nvar DateFilterDialog = /** @class */ (function (_super) {\n    __extends(DateFilterDialog, _super);\n    function DateFilterDialog(column, dialog, ctx) {\n        var _this = this;\n        var _a;\n        _this = _super.call(this, dialog, {\n            livePreview: 'filter',\n            cancelSubDialogs: true,\n        }) || this;\n        _this.column = column;\n        _this.ctx = ctx;\n        _this.handler = null;\n        _this.before = (_a = _this.column.getFilter()) !== null && _a !== void 0 ? _a : noDateFilter();\n        return _this;\n    }\n    DateFilterDialog.prototype.build = function (node) {\n        node.classList.add(cssClass('dialog-mapper'));\n        this.handler = createDateFilter(this.column, node, {\n            dialogManager: this.ctx.dialogManager,\n            idPrefix: this.ctx.idPrefix,\n            tasks: this.ctx.provider.getTaskExecutor(),\n            sanitize: this.ctx.sanitize,\n        }, this.showLivePreviews());\n    };\n    DateFilterDialog.prototype.cleanUp = function (action) {\n        _super.prototype.cleanUp.call(this, action);\n        this.handler.cleanUp();\n    };\n    DateFilterDialog.prototype.reset = function () {\n        this.handler.reset();\n    };\n    DateFilterDialog.prototype.submit = function () {\n        this.handler.submit();\n        return true;\n    };\n    DateFilterDialog.prototype.cancel = function () {\n        this.column.setFilter(this.before);\n    };\n    return DateFilterDialog;\n}(ADialog));\nexport default DateFilterDialog;\n//# sourceMappingURL=DateFilterDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ADialog from './ADialog';\n/** @internal */\nvar EditPatternDialog = /** @class */ (function (_super) {\n    __extends(EditPatternDialog, _super);\n    function EditPatternDialog(column, dialog, ctx) {\n        var _this = _super.call(this, dialog) || this;\n        _this.column = column;\n        _this.ctx = ctx;\n        _this.before = _this.column.getPattern();\n        return _this;\n    }\n    EditPatternDialog.prototype.build = function (node) {\n        var templates = this.column.patternTemplates;\n        var s = this.ctx.sanitize;\n        node.insertAdjacentHTML('beforeend', \"<strong>Edit Pattern (access via ${value}, ${item})</strong><input\\n        type=\\\"text\\\"\\n        size=\\\"30\\\"\\n        value=\\\"\".concat(s(this.before), \"\\\"\\n        required\\n        autofocus\\n        placeholder=\\\"pattern (access via ${value}, ${item})\\\"\\n        \").concat(templates.length > 0 ? \"list=\\\"ui\".concat(this.ctx.idPrefix, \"lineupPatternList\\\"\") : '', \"\\n      >\"));\n        if (templates.length > 0) {\n            node.insertAdjacentHTML('beforeend', \"<datalist id=\\\"ui\".concat(this.ctx.idPrefix, \"lineupPatternList\\\">\").concat(templates.map(function (t) { return \"<option value=\\\"\".concat(s(t), \"\\\">\"); }), \"</datalist>\"));\n        }\n        this.enableLivePreviews('input');\n    };\n    EditPatternDialog.prototype.cancel = function () {\n        this.column.setPattern(this.before);\n    };\n    EditPatternDialog.prototype.reset = function () {\n        this.node.querySelector('input').value = '';\n    };\n    EditPatternDialog.prototype.submit = function () {\n        var newValue = this.node.querySelector('input').value;\n        this.column.setPattern(newValue);\n        return true;\n    };\n    return EditPatternDialog;\n}(ADialog));\nexport default EditPatternDialog;\n//# sourceMappingURL=EditPatternDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ADialog from './ADialog';\nimport { uniqueId, forEach } from './utils';\nimport { getToolbarDialogAddons } from '../toolbarResolvers';\nimport { cssClass } from '../../styles';\n/** @internal */\nvar GroupDialog = /** @class */ (function (_super) {\n    __extends(GroupDialog, _super);\n    function GroupDialog(column, dialog, ctx) {\n        var _this = _super.call(this, dialog, {\n            livePreview: 'group',\n        }) || this;\n        _this.column = column;\n        _this.ctx = ctx;\n        _this.handlers = [];\n        return _this;\n    }\n    GroupDialog.prototype.build = function (node) {\n        var addons = getToolbarDialogAddons(this.column, 'group', this.ctx);\n        for (var _i = 0, addons_1 = addons; _i < addons_1.length; _i++) {\n            var addon = addons_1[_i];\n            var strong = node.ownerDocument.createElement('strong');\n            strong.textContent = addon.title;\n            this.node.insertAdjacentElement('beforeend', strong);\n            this.handlers.push(addon.append(this.column, this.node, this.dialog, this.ctx));\n        }\n        this.handlers.push(sortOrder(node, this.column, this.dialog.idPrefix));\n        for (var _a = 0, _b = this.handlers; _a < _b.length; _a++) {\n            var handler = _b[_a];\n            this.enableLivePreviews(handler.elems);\n        }\n    };\n    GroupDialog.prototype.submit = function () {\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\n            var handler = _a[_i];\n            if (handler.submit() === false) {\n                return false;\n            }\n        }\n        return true;\n    };\n    GroupDialog.prototype.cancel = function () {\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\n            var handler = _a[_i];\n            handler.cancel();\n        }\n    };\n    GroupDialog.prototype.reset = function () {\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\n            var handler = _a[_i];\n            handler.reset();\n        }\n    };\n    return GroupDialog;\n}(ADialog));\nexport default GroupDialog;\nfunction sortOrder(node, column, idPrefix) {\n    var ranking = column.findMyRanker();\n    var current = ranking.getGroupCriteria();\n    var order = current.indexOf(column);\n    var enabled = order >= 0;\n    if (order < 0) {\n        order = current.length;\n    }\n    var id = uniqueId(idPrefix);\n    node.insertAdjacentHTML('afterbegin', \"\\n        <strong>Group By</strong>\\n        <label class=\\\"\".concat(cssClass('checkbox'), \"\\\"><input type=\\\"radio\\\" name=\\\"grouped\\\" value=\\\"true\\\" \").concat(enabled ? 'checked' : '', \" ><span>Enabled</span></label>\\n        <label class=\\\"\").concat(cssClass('checkbox'), \"\\\"><input type=\\\"radio\\\" name=\\\"grouped\\\" value=\\\"false\\\" \").concat(!enabled ? 'checked' : '', \" ><span>Disabled</span></label>\\n        <strong>Group Priority</strong>\\n        <input type=\\\"number\\\" id=\\\"\").concat(id, \"P\\\" step=\\\"1\\\" min=\\\"1\\\" max=\\\"\").concat(current.length + 1, \"\\\" value=\\\"\").concat(order + 1, \"\\\">\\n    \"));\n    var updateDisabled = function (disable) {\n        forEach(node, 'input:not([name=grouped]), select, textarea', function (d) {\n            d.disabled = disable;\n        });\n    };\n    updateDisabled(!enabled);\n    forEach(node, 'input[name=grouped]', function (n) {\n        n.addEventListener('change', function () {\n            var enabled = n.value === 'true';\n            updateDisabled(!enabled);\n        }, {\n            passive: true,\n        });\n    });\n    return {\n        elems: \"input[name=grouped], #\".concat(id, \"P\"),\n        submit: function () {\n            var enabled = node.querySelector('input[name=grouped]:checked').value === 'true';\n            var order = Number.parseInt(node.querySelector(\"#\".concat(id, \"P\")).value, 10) - 1;\n            ranking.groupBy(column, !enabled ? -1 : order);\n            return true;\n        },\n        reset: function () {\n            node.querySelector('input[name=grouped][value=false]').checked = true;\n            node.querySelector(\"#\".concat(id, \"P\")).value = (current.length + (!enabled ? 1 : 0)).toString();\n            updateDisabled(true);\n        },\n        cancel: function () {\n            ranking.groupBy(column, current.indexOf(column));\n        },\n    };\n}\n//# sourceMappingURL=GroupDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { round, similar, dragHandle } from '../../internal';\nimport ADialog from './ADialog';\nimport { cssClass } from '../../styles';\nfunction clamp(v) {\n    return Math.max(Math.min(v, 100), 0);\n}\n/** @internal */\nvar MappingLineDialog = /** @class */ (function (_super) {\n    __extends(MappingLineDialog, _super);\n    function MappingLineDialog(line, dialog, adapter) {\n        var _this = _super.call(this, dialog, {\n            livePreview: 'dataMapping',\n        }) || this;\n        _this.line = line;\n        _this.adapter = adapter;\n        _this.dialog.attachment.classList.add(cssClass('mapping-line-selected'));\n        _this.before = {\n            domain: _this.line.domain,\n            range: _this.line.range,\n        };\n        return _this;\n    }\n    MappingLineDialog.prototype.build = function (node) {\n        var _this = this;\n        var domain = this.adapter.domain();\n        node.insertAdjacentHTML('beforeend', \"\\n        <button class=\\\"\".concat(cssClass('dialog-button'), \" lu-action-remove\\\" title=\\\"Remove\\\" type=\\\"button\\\" \").concat(this.line.frozen ? 'style=\"display: none\"' : '', \" ><span style=\\\"margin-left: 3px\\\">Remove Mapping Line</span></button>\\n        <strong>Input Domain Value (min ... max)</strong>\\n        <input type=\\\"number\\\" value=\\\"\").concat(this.adapter.formatter(this.adapter.unnormalizeRaw(this.line.domain)), \"\\\" \").concat(this.line.frozen ? 'readonly disabled' : '', \" autofocus required min=\\\"\").concat(domain[0], \"\\\" max=\\\"\").concat(domain[1], \"\\\" step=\\\"any\\\">\\n        <strong>Output Normalized Value (0 ... 1)</strong>\\n        <input type=\\\"number\\\" value=\\\"\").concat(round(this.line.range / 100, 3), \"\\\" required min=\\\"0\\\" max=\\\"1\\\" step=\\\"any\\\">\\n      \"));\n        this.find('button').addEventListener('click', function () {\n            _this.destroy('confirm');\n            _this.line.destroy();\n        }, {\n            passive: true,\n        });\n        this.enableLivePreviews('input');\n    };\n    MappingLineDialog.prototype.cleanUp = function (action) {\n        _super.prototype.cleanUp.call(this, action);\n        this.dialog.attachment.classList.remove(cssClass('mapping-line-selected'));\n    };\n    MappingLineDialog.prototype.cancel = function () {\n        this.line.update(this.before.domain, this.before.range, true);\n    };\n    MappingLineDialog.prototype.reset = function () {\n        this.findInput('input[type=number]').value = round(this.adapter.unnormalizeRaw(this.before.domain), 3).toString();\n        this.findInput('input[type=number]:last-of-type').value = round(this.before.range / 100, 3).toString();\n    };\n    MappingLineDialog.prototype.submit = function () {\n        if (!this.node.checkValidity()) {\n            return false;\n        }\n        var domain = this.adapter.normalizeRaw(this.findInput('input[type=number]').valueAsNumber);\n        var range = this.findInput('input[type=number]:last-of-type').valueAsNumber * 100;\n        this.line.update(domain, range, true);\n        return true;\n    };\n    return MappingLineDialog;\n}(ADialog));\nexport default MappingLineDialog;\n/** @internal */\nvar MappingLine = /** @class */ (function () {\n    function MappingLine(g, domain, range, adapter) {\n        var _this = this;\n        this.domain = domain;\n        this.range = range;\n        this.adapter = adapter;\n        var h = 52;\n        g.insertAdjacentHTML('beforeend', \"<g class=\\\"\".concat(cssClass('dialog-mapper-mapping'), \"\\\" transform=\\\"translate(\").concat(domain, \",0)\\\">\\n      <line x1=\\\"0\\\" x2=\\\"\").concat(range - domain, \"\\\" y2=\\\"\").concat(h, \"\\\"></line>\\n      <line x1=\\\"0\\\" x2=\\\"\").concat(range - domain, \"\\\" y2=\\\"\").concat(h, \"\\\"></line>\\n      <circle r=\\\"2\\\"></circle>\\n      <circle cx=\\\"\").concat(range - domain, \"\\\" cy=\\\"\").concat(h, \"\\\" r=\\\"2\\\"></circle>\\n      <text class=\\\"\").concat(cssClass('dialog-mapper-mapping-domain'), \" \").concat(domain > 25 && domain < 75 ? cssClass('dialog-mapper-mapping-middle') : '').concat(domain > 75 ? cssClass('dialog-mapper-mapping-right') : '', \"\\\" dy=\\\"-3\\\">\\n        \").concat(this.adapter.formatter(this.adapter.unnormalizeRaw(domain)), \"\\n      </text>\\n      <text class=\\\"\").concat(cssClass('dialog-mapper-mapping-range'), \" \").concat(range > 25 && range < 75 ? cssClass('dialog-mapper-mapping-middle') : '').concat(range > 50 ? cssClass('dialog-mapper-mapping-right') : '', \"\\\" dy=\\\"3\\\" x=\\\"\").concat(range - domain, \"\\\" y=\\\"\").concat(h, \"\\\">\\n        \").concat(round(range / 100, 3), \"\\n      </text>\\n      <title>Drag the anchor circle to change the mapping, double click to edit</title>\\n    </g>\"));\n        this.node = g.lastElementChild;\n        // freeze 0 and 100 domain = raw domain ones\n        this.node.classList.toggle(cssClass('frozen'), similar(0, domain) || similar(domain, 100));\n        {\n            var beforeDomain_1;\n            var beforeRange_1;\n            var shiftDomain_1;\n            var shiftRange_1;\n            var normalize_1 = function (x) { return (x * 100) / g.getBoundingClientRect().width; };\n            var common = {\n                container: g.parentElement,\n                filter: function (evt) { return evt.button === 0 && !evt.shiftKey; },\n                onStart: function (_, x) {\n                    beforeDomain_1 = _this.domain;\n                    beforeRange_1 = _this.range;\n                    var normalized = normalize_1(x);\n                    shiftDomain_1 = _this.domain - normalized;\n                    shiftRange_1 = _this.range - normalized;\n                },\n                onEnd: function () {\n                    if (!similar(beforeDomain_1, _this.domain) || !similar(beforeRange_1, _this.range)) {\n                        _this.adapter.updated(_this);\n                    }\n                },\n            };\n            var line = this.node.querySelector('line:first-of-type');\n            dragHandle(line, __assign(__assign({}, common), { onDrag: function (_, x) {\n                    var normalized = normalize_1(x);\n                    _this.update(clamp(normalized + shiftDomain_1), clamp(normalized + shiftRange_1));\n                } }));\n            var domainCircle = this.node.querySelector('circle:first-of-type');\n            dragHandle(domainCircle, __assign(__assign({}, common), { onDrag: function (_, x) {\n                    var normalized = normalize_1(x);\n                    _this.update(clamp(normalized), _this.range);\n                } }));\n            var rangeCircle = this.node.querySelector('circle:last-of-type');\n            dragHandle(rangeCircle, __assign(__assign({}, common), { onDrag: function (_, x) {\n                    var normalized = normalize_1(x);\n                    _this.update(_this.domain, clamp(normalized));\n                } }));\n        }\n        this.node.onclick = function (evt) {\n            if (!evt.shiftKey) {\n                return;\n            }\n            _this.openDialog();\n        };\n        this.node.ondblclick = function () {\n            _this.openDialog();\n        };\n    }\n    MappingLine.prototype.openDialog = function () {\n        var ctx = {\n            manager: this.adapter.dialog.manager,\n            level: this.adapter.dialog.level + 1,\n            attachment: this.node,\n            idPrefix: this.adapter.dialog.idPrefix,\n            sanitize: this.adapter.dialog.sanitize,\n        };\n        var dialog = new MappingLineDialog(this, ctx, this.adapter);\n        dialog.open();\n    };\n    Object.defineProperty(MappingLine.prototype, \"frozen\", {\n        get: function () {\n            return this.node.classList.contains(cssClass('frozen'));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MappingLine.prototype.destroy = function (handled) {\n        if (handled === void 0) { handled = false; }\n        this.node.remove();\n        if (!handled) {\n            this.adapter.destroyed(this);\n        }\n    };\n    MappingLine.prototype.update = function (domain, range, trigger) {\n        if (trigger === void 0) { trigger = false; }\n        if (similar(domain, 100)) {\n            domain = 100;\n        }\n        if (similar(domain, 0)) {\n            domain = 0;\n        }\n        if (similar(range, 100)) {\n            range = 100;\n        }\n        if (similar(range, 0)) {\n            range = 0;\n        }\n        if (similar(domain, this.domain) && similar(range, this.range)) {\n            return;\n        }\n        if (this.frozen) {\n            domain = this.domain;\n        }\n        this.domain = domain;\n        this.range = range;\n        this.node.setAttribute('transform', \"translate(\".concat(domain, \",0)\"));\n        var shift = range - domain;\n        Array.from(this.node.querySelectorAll('line')).forEach(function (d) { return d.setAttribute('x2', String(shift)); });\n        this.node.querySelector('circle[cx]').setAttribute('cx', String(shift));\n        var t1 = this.node.querySelector('text');\n        t1.textContent = this.adapter.formatter(this.adapter.unnormalizeRaw(domain));\n        t1.classList.toggle(cssClass('dialog-mapper-mapping-right'), domain > 75);\n        t1.classList.toggle(cssClass('dialog-mapper-mapping-middle'), domain >= 25 && domain <= 75);\n        var t2 = this.node.querySelector('text[x]');\n        t2.textContent = round(range / 100, 3).toString();\n        t2.classList.toggle(cssClass('dialog-mapper-mapping-right'), range > 75);\n        t2.classList.toggle(cssClass('dialog-mapper-mapping-middle'), range >= 25 && range <= 75);\n        t2.setAttribute('x', String(shift));\n        if (trigger) {\n            this.adapter.updated(this);\n        }\n    };\n    return MappingLine;\n}());\nexport { MappingLine };\n//# sourceMappingURL=MappingLineDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { round } from '../../internal';\nimport { isMissingValue, isMapAbleColumn } from '../../model';\nimport ADialog from './ADialog';\nimport { MappingLine } from './MappingLineDialog';\nimport { cssClass } from '../../styles';\nimport { ScaleMappingFunction, ScriptMappingFunction } from '../../model/MappingFunction';\n/** @internal */\nvar MappingDialog = /** @class */ (function (_super) {\n    __extends(MappingDialog, _super);\n    function MappingDialog(column, dialog, ctx) {\n        var _this = _super.call(this, dialog, {\n            livePreview: 'dataMapping',\n            cancelSubDialogs: true,\n        }) || this;\n        _this.column = column;\n        _this.mappingLines = [];\n        _this.mappingAdapter = {\n            destroyed: function (self) {\n                _this.mappingLines.splice(_this.mappingLines.indexOf(self), 1);\n                _this.updateLines(_this.computeScale());\n            },\n            updated: function () { return _this.updateLines(_this.computeScale()); },\n            domain: function () { return _this.rawDomain; },\n            normalizeRaw: _this.normalizeRaw.bind(_this),\n            unnormalizeRaw: _this.unnormalizeRaw.bind(_this),\n            dialog: _this.dialog,\n            formatter: _this.column.getNumberFormat(),\n        };\n        _this.idPrefix = \"me\".concat(ctx.idPrefix);\n        _this.before = _this.column.getMapping().clone();\n        _this.scale = _this.column.getMapping().clone();\n        var domain = _this.scale.domain;\n        _this.rawDomain = [domain[0], domain[domain.length - 1]];\n        _this.data = Promise.resolve(ctx.provider.mappingSample(column));\n        return _this;\n    }\n    Object.defineProperty(MappingDialog.prototype, \"scaleType\", {\n        get: function () {\n            if (this.scale instanceof ScriptMappingFunction) {\n                return 'script';\n            }\n            if (this.scale instanceof ScaleMappingFunction) {\n                var base = this.scale.scaleType;\n                if (base !== 'linear') {\n                    return base;\n                }\n                // check if invert or absolute\n                var r = this.scale.range;\n                if (r.length === 2 && r[0] === 1 && r[1] === 0) {\n                    return 'linear_invert';\n                }\n                if (r.length === 3 && r[0] === 1 && r[1] === 0 && r[2] === 1) {\n                    return 'linear_abs';\n                }\n                return 'linear';\n            }\n            return 'unknown';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MappingDialog.prototype.build = function (node) {\n        var _this = this;\n        node.classList.add(cssClass('dialog-mapper'));\n        var r = this.column.findMyRanker();\n        var others = !r ? [] : r.flatColumns.filter(function (d) { return isMapAbleColumn(d) && d !== _this.column; });\n        node.insertAdjacentHTML('beforeend', \"\\n        <div><label for=\\\"\".concat(this.idPrefix, \"mapping_type\\\"><strong>Normalization Scaling:</strong></label><select id=\\\"\").concat(this.idPrefix, \"mapping_type\\\" class=\\\"browser-default\\\">\\n        <option value=\\\"linear\\\">Linear</option>\\n        <option value=\\\"linear_invert\\\">Invert</option>\\n        <option value=\\\"linear_abs\\\">Absolute</option>\\n        <option value=\\\"log\\\">Log</option>\\n        <option value=\\\"pow1.1\\\">Pow 1.1</option>\\n        <option value=\\\"pow2\\\">Pow 2</option>\\n        <option value=\\\"pow3\\\">Pow 3</option>\\n        <option value=\\\"sqrt\\\">Sqrt</option>\\n        <option value=\\\"script\\\">Custom Script</option>\\n        <option value=\\\"unknown\\\">Unknown</option>\\n        \").concat(others.length > 0\n            ? \"<optgroup label=\\\"Copy From\\\">\".concat(others\n                .map(function (d) { return \"<option value=\\\"copy_\".concat(d.id, \"\\\">\").concat(_this.dialog.sanitize(d.label, d.desc.labelAsHTML), \"</option>\"); })\n                .join(''), \"</optgroup>\")\n            : '', \"\\n      </select>\\n      </div>\\n        <div class=\\\"\").concat(cssClass('dialog-mapper-warning'), \"\\\">\\n          Warning: All items with values outside of the input domain will be set to the min/max value of the input domain.\\n        </div>\\n        <div class=\\\"\").concat(cssClass('dialog-mapper-domain'), \"\\\">\\n          <input id=\\\"\").concat(this.idPrefix, \"min\\\" required type=\\\"number\\\" value=\\\"\").concat(round(this.rawDomain[0], 3), \"\\\" step=\\\"any\\\">\\n          <span>Input Domain (min - max)</span>\\n          <input id=\\\"\").concat(this.idPrefix, \"max\\\" required type=\\\"number\\\" value=\\\"\").concat(round(this.rawDomain[1], 3), \"\\\" step=\\\"any\\\">\\n        </div>\\n        <svg class=\\\"\").concat(cssClass('dialog-mapper-details'), \"\\\" viewBox=\\\"0 0 106 66\\\">\\n           <g transform=\\\"translate(3,7)\\\">\\n              <rect y=\\\"-3\\\" width=\\\"100\\\" height=\\\"10\\\">\\n                <title>Click to create a new mapping line</title>\\n              </rect>\\n              <rect y=\\\"49\\\" width=\\\"100\\\" height=\\\"10\\\">\\n                <title>Click to create a new mapping line</title>\\n              </rect>\\n           </g>\\n        </svg>\\n        <div class=\").concat(cssClass('dialog-mapper-range'), \">\\n          <span>Output Normalized Domain (0 - 1)</span>\\n        </div>\\n        <div class=\\\"\").concat(cssClass('dialog-mapper-script'), \"\\\">\\n          <strong>Custom Normalization Script</strong>\\n          <textarea class=\\\"\").concat(cssClass('textarea'), \"\\\"></textarea>\\n        </div>\"));\n        var g = node.querySelector(\".\".concat(cssClass('dialog-mapper-details'), \" > g\"));\n        this.forEach(\".\".concat(cssClass('dialog-mapper-details'), \" rect\"), function (d) {\n            return (d.onclick = function (evt) {\n                evt.preventDefault();\n                evt.stopPropagation();\n                var bb = d.getBoundingClientRect();\n                var x = round(((evt.x - bb.left) * 100) / bb.width, 2);\n                var m = new MappingLine(g, x, x, _this.mappingAdapter);\n                _this.mappingLines.push(m);\n            });\n        });\n        {\n            var select = this.find('select');\n            var textarea_1 = this.find('textarea');\n            select.onchange = function (evt) {\n                var select = evt.currentTarget;\n                switch (select.value) {\n                    case 'linear_invert':\n                        _this.scale = new ScaleMappingFunction(_this.rawDomain.slice(), 'linear', [1, 0]);\n                        break;\n                    case 'linear_abs':\n                        _this.scale = new ScaleMappingFunction([_this.rawDomain[0], (_this.rawDomain[1] - _this.rawDomain[0]) / 2, _this.rawDomain[1]], 'linear', [1, 0, 1]);\n                        break;\n                    case 'script':\n                        var s = new ScriptMappingFunction(_this.rawDomain.slice());\n                        _this.scale = s;\n                        textarea_1.value = s.code;\n                        break;\n                    case 'unknown':\n                        // clone original again\n                        _this.scale = _this.column.getOriginalMapping().clone();\n                        break;\n                    default:\n                        if (select.value.startsWith('copy_')) {\n                            _this.copyMapping(select.value.slice('copy_'.length));\n                            return;\n                        }\n                        _this.scale = new ScaleMappingFunction(_this.rawDomain.slice(), select.value, [0, 1]);\n                        break;\n                }\n                _this.createMappings();\n                node.dataset.scale = select.value;\n                _this.updateLines();\n            };\n            var scaleType_1 = (node.dataset.scale = this.scaleType);\n            select.selectedIndex = Array.from(select.options).findIndex(function (d) { return d.value === scaleType_1; });\n            if (scaleType_1 === 'script') {\n                textarea_1.value = this.scale.code;\n            }\n            this.createMappings();\n        }\n        this.forEach(\"#\".concat(this.idPrefix, \"min, #\").concat(this.idPrefix, \"max\"), function (d, i) {\n            d.onchange = function () {\n                var v = d.valueAsNumber;\n                if (v === _this.rawDomain[i]) {\n                    d.setCustomValidity('');\n                    return;\n                }\n                var other = _this.rawDomain[1 - i];\n                if (Number.isNaN(v) || (i === 0 && v >= other) || (i === 1 && v <= other)) {\n                    d.setCustomValidity(\"value has to be \".concat(i === 0 ? '<= max' : '>= min'));\n                    return;\n                }\n                d.setCustomValidity('');\n                _this.rawDomain[i] = v;\n                _this.updateDomainWarning();\n                _this.scale = _this.computeScale();\n                var patchedDomain = _this.scale.domain.slice();\n                patchedDomain[0] = _this.rawDomain[0];\n                patchedDomain[patchedDomain.length - 1] = _this.rawDomain[1];\n                _this.scale.domain = patchedDomain;\n                _this.createMappings();\n                _this.updateLines();\n                if (_this.showLivePreviews()) {\n                    _this.column.setMapping(_this.scale);\n                }\n            };\n        });\n        this.data.then(function (values) {\n            values.forEach(function (v) {\n                if (!isMissingValue(v)) {\n                    g.insertAdjacentHTML('afterbegin', \"<line data-v=\\\"\".concat(v, \"\\\" x1=\\\"\").concat(round(_this.normalizeRaw(v), 2), \"\\\" x2=\\\"\").concat(round(_this.scale.apply(v) * 100, 2), \"\\\" y2=\\\"52\\\"></line>\"));\n                }\n            });\n        });\n        this.updateDomainWarning();\n    };\n    MappingDialog.prototype.updateDomainWarning = function () {\n        var warningNode = this.node.querySelector(\".\".concat(cssClass('dialog-mapper-warning')));\n        var originalDomain = this.column.getOriginalMapping().domain;\n        var showWarning = this.rawDomain.some(function (d, i) { return originalDomain[i] !== d; });\n        warningNode.style.display = showWarning ? '' : 'none';\n    };\n    MappingDialog.prototype.createMappings = function () {\n        this.mappingLines.splice(0, this.mappingLines.length).forEach(function (d) { return d.destroy(true); });\n        if (!(this.scale instanceof ScaleMappingFunction)) {\n            return;\n        }\n        var g = this.node.querySelector(\".\".concat(cssClass('dialog-mapper-details'), \" > g\"));\n        var domain = this.scale.domain;\n        var range = this.scale.range;\n        for (var i = 0; i < domain.length; ++i) {\n            this.mappingLines.push(new MappingLine(g, this.normalizeRaw(domain[i]), range[i] * 100, this.mappingAdapter));\n        }\n    };\n    MappingDialog.prototype.update = function () {\n        var _this = this;\n        var scaleType = (this.node.dataset.scale = this.scaleType);\n        var select = this.find('select');\n        select.selectedIndex = Array.from(select.options).findIndex(function (d) { return d.value === scaleType; });\n        if (scaleType === 'script') {\n            this.find('textarea').value = this.scale.code;\n        }\n        this.forEach(\"input[type=number]\", function (d, i) {\n            d.value = round(_this.rawDomain[i], 3).toString();\n        });\n    };\n    MappingDialog.prototype.updateLines = function (scale) {\n        var _this = this;\n        if (scale === void 0) { scale = this.scale; }\n        this.forEach(\".\".concat(cssClass('dialog-mapper-details'), \"  > g > line[x1]\"), function (d) {\n            var v = Number.parseFloat(d.getAttribute('data-v'));\n            d.setAttribute('x1', round(_this.normalizeRaw(v), 2).toString());\n            d.setAttribute('x2', round(scale.apply(v) * 100, 2).toString());\n        });\n    };\n    MappingDialog.prototype.reset = function () {\n        this.scale = this.column.getOriginalMapping().clone();\n        var domain = this.scale.domain;\n        this.rawDomain = [domain[0], domain[domain.length - 1]];\n        this.update();\n        this.createMappings();\n        this.updateLines();\n        this.updateDomainWarning();\n    };\n    MappingDialog.prototype.copyMapping = function (columnId) {\n        var r = this.column.findMyRanker();\n        if (!r) {\n            return;\n        }\n        var ref = r.find(columnId);\n        this.scale = ref.getMapping().clone();\n        this.rawDomain = this.scale.domain.slice();\n        this.update();\n        this.createMappings();\n        this.updateLines();\n    };\n    MappingDialog.prototype.normalizeRaw = function (d) {\n        var v = ((d - this.rawDomain[0]) * 100) / (this.rawDomain[1] - this.rawDomain[0]);\n        return Math.max(Math.min(v, 100), 0); // clamp\n    };\n    MappingDialog.prototype.unnormalizeRaw = function (d) {\n        return (d * (this.rawDomain[1] - this.rawDomain[0])) / 100 + this.rawDomain[0];\n    };\n    MappingDialog.prototype.computeScale = function () {\n        var _this = this;\n        var type = this.scaleType;\n        if (type === 'script') {\n            return new ScriptMappingFunction(this.rawDomain.slice(), this.node.querySelector('textarea').value);\n        }\n        this.mappingLines.sort(function (a, b) { return a.domain - b.domain; });\n        var domain = this.mappingLines.map(function (d) { return _this.unnormalizeRaw(d.domain); });\n        var range = this.mappingLines.map(function (d) { return d.range / 100; });\n        return new ScaleMappingFunction(domain, type, range);\n    };\n    MappingDialog.prototype.submit = function () {\n        if (!this.node.checkValidity()) {\n            return false;\n        }\n        var scale = this.computeScale();\n        this.column.setMapping(scale);\n        return true;\n    };\n    MappingDialog.prototype.cancel = function () {\n        this.column.setMapping(this.before);\n    };\n    return MappingDialog;\n}(ADialog));\nexport default MappingDialog;\n//# sourceMappingURL=MappingDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createNumberFilter } from '../../renderer/HistogramCellRenderer';\nimport { cssClass } from '../../styles';\nimport ADialog from './ADialog';\n/** @internal */\nvar NumberFilterDialog = /** @class */ (function (_super) {\n    __extends(NumberFilterDialog, _super);\n    function NumberFilterDialog(column, dialog, ctx) {\n        var _this = _super.call(this, dialog, {\n            livePreview: 'filter',\n            cancelSubDialogs: true,\n        }) || this;\n        _this.column = column;\n        _this.ctx = ctx;\n        _this.handler = null;\n        _this.before = column.getFilter();\n        return _this;\n    }\n    NumberFilterDialog.prototype.build = function (node) {\n        node.classList.add(cssClass('dialog-mapper'));\n        this.handler = createNumberFilter(this.column, node, {\n            dialogManager: this.ctx.dialogManager,\n            idPrefix: this.ctx.idPrefix,\n            tasks: this.ctx.provider.getTaskExecutor(),\n            sanitize: this.ctx.sanitize,\n        }, this.showLivePreviews());\n    };\n    NumberFilterDialog.prototype.cleanUp = function (action) {\n        _super.prototype.cleanUp.call(this, action);\n        this.handler.cleanUp();\n    };\n    NumberFilterDialog.prototype.reset = function () {\n        this.handler.reset();\n    };\n    NumberFilterDialog.prototype.submit = function () {\n        this.handler.submit();\n        return true;\n    };\n    NumberFilterDialog.prototype.cancel = function () {\n        this.column.setFilter(this.before);\n    };\n    return NumberFilterDialog;\n}(ADialog));\nexport default NumberFilterDialog;\n//# sourceMappingURL=NumberFilterDialog.js.map","import { forEach } from '../../renderer/utils';\nimport { cssClass } from '../../styles';\nimport { getSortLabel } from '../../internal';\n/** @internal */\nexport function sortMethods(node, column, methods) {\n    var bak = column.getSortMethod();\n    methods.forEach(function (d) {\n        return node.insertAdjacentHTML('beforeend', \"<label class=\\\"\".concat(cssClass('checkbox'), \"\\\"><input type=\\\"radio\\\" name=\\\"multivaluesort\\\" value=\\\"\").concat(d, \"\\\"  \").concat(bak === d ? 'checked' : '', \" ><span>\").concat(getSortLabel(d), \"</span></label>\"));\n    });\n    forEach(node, 'input[name=multivaluesort]', function (n) {\n        n.addEventListener('change', function () { return column.setSortMethod(n.value); }, {\n            passive: true,\n        });\n    });\n    return {\n        elems: 'input[name=multivaluesort]',\n        submit: function () {\n            var selected = node.querySelector('input[name=multivaluesort]:checked').value;\n            column.setSortMethod(selected);\n            return true;\n        },\n        cancel: function () {\n            column.setSortMethod(bak);\n        },\n        reset: function () {\n            node.querySelector(\"input[name=multivaluesort][value=\\\"\".concat(bak, \"\\\"]\")).checked = true;\n        },\n    };\n}\n/** @internal */\nexport { uniqueId, forEach, forEachChild, colorOf } from '../../renderer/utils';\n//# sourceMappingURL=utils.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EAdvancedSortMethod } from '../../model';\nimport ADialog from './ADialog';\nimport { sortMethods } from './utils';\n/** @internal */\nvar ReduceDialog = /** @class */ (function (_super) {\n    __extends(ReduceDialog, _super);\n    function ReduceDialog(column, dialog) {\n        var _this = _super.call(this, dialog, {\n            livePreview: 'reduce',\n        }) || this;\n        _this.column = column;\n        _this.handler = null;\n        return _this;\n    }\n    ReduceDialog.prototype.build = function (node) {\n        var _this = this;\n        var wrapper = {\n            getSortMethod: function () { return _this.column.getReduce(); },\n            setSortMethod: function (s) { return _this.column.setReduce(s); },\n        };\n        this.handler = sortMethods(node, wrapper, Object.keys(EAdvancedSortMethod));\n        this.enableLivePreviews(this.handler.elems);\n    };\n    ReduceDialog.prototype.submit = function () {\n        return this.handler.submit();\n    };\n    ReduceDialog.prototype.reset = function () {\n        this.handler.reset();\n    };\n    ReduceDialog.prototype.cancel = function () {\n        this.handler.cancel();\n    };\n    return ReduceDialog;\n}(ADialog));\nexport default ReduceDialog;\n//# sourceMappingURL=ReduceDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ADialog from './ADialog';\nimport { cssClass } from '../../styles';\n/** @internal */\nvar RenameDialog = /** @class */ (function (_super) {\n    __extends(RenameDialog, _super);\n    function RenameDialog(column, dialog) {\n        var _this = _super.call(this, dialog) || this;\n        _this.column = column;\n        _this.before = column.getMetaData();\n        return _this;\n    }\n    RenameDialog.prototype.build = function (node) {\n        node.classList.add(cssClass('dialog-rename'));\n        node.insertAdjacentHTML('beforeend', \"\\n      <input type=\\\"text\\\" required autofocus placeholder=\\\"name\\\">\\n      <input type=\\\"text\\\" placeholder=\\\"summary\\\" name=\\\"summary\\\">\\n      <textarea class=\\\"\".concat(cssClass('textarea'), \"\\\" rows=\\\"5\\\" placeholder=\\\"description\\\"></textarea>\"));\n        node.querySelector('input').value = this.column.label;\n        node.querySelector('input:last-of-type').value = this.column.getMetaData().summary;\n        node.querySelector('textarea').textContent = this.column.description;\n    };\n    RenameDialog.prototype.reset = function () {\n        var desc = this.column.desc;\n        var meta = {\n            label: desc.label || this.column.id,\n            summary: desc.summary || '',\n            description: desc.description || '',\n        };\n        this.findInput('input[type=\"text\"]').value = meta.label;\n        this.findInput('input[name=\"summary\"]').value = meta.summary;\n        this.node.querySelector('textarea').value = meta.description;\n    };\n    RenameDialog.prototype.submit = function () {\n        var label = this.findInput('input[type=\"text\"]').value;\n        var summary = this.findInput('input[name=\"summary\"]').value.trim();\n        var description = this.node.querySelector('textarea').value;\n        this.column.setMetaData({ label: label, description: description, summary: summary });\n        return true;\n    };\n    RenameDialog.prototype.cancel = function () {\n        this.column.setMetaData(this.before);\n    };\n    return RenameDialog;\n}(ADialog));\nexport default RenameDialog;\n//# sourceMappingURL=RenameDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ScriptColumn } from '../../model';\nimport ADialog from './ADialog';\nimport { cssClass } from '../../styles';\n/** @internal */\nvar ScriptEditDialog = /** @class */ (function (_super) {\n    __extends(ScriptEditDialog, _super);\n    function ScriptEditDialog(column, dialog) {\n        var _this = _super.call(this, dialog) || this;\n        _this.column = column;\n        _this.before = column.getScript();\n        return _this;\n    }\n    ScriptEditDialog.prototype.build = function (node) {\n        node.insertAdjacentHTML('beforeend', \"<textarea class=\\\"\".concat(cssClass('textarea'), \"\\\" autofocus=\\\"true\\\" rows=\\\"5\\\" autofocus=\\\"autofocus\\\" style=\\\"width: 95%;\\\">\").concat(this.column.getScript(), \"</textarea>\"));\n    };\n    ScriptEditDialog.prototype.cancel = function () {\n        this.column.setScript(this.before);\n    };\n    ScriptEditDialog.prototype.reset = function () {\n        this.node.querySelector('textarea').value = this.column.desc.script || ScriptColumn.DEFAULT_SCRIPT;\n    };\n    ScriptEditDialog.prototype.submit = function () {\n        this.column.setScript(this.node.querySelector('textarea').value);\n        return true;\n    };\n    return ScriptEditDialog;\n}(ADialog));\nexport default ScriptEditDialog;\n//# sourceMappingURL=ScriptEditDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ADialog from './ADialog';\nimport { cssClass } from '../../styles';\nimport { debounce } from '../../internal';\n/** @internal */\nvar SearchDialog = /** @class */ (function (_super) {\n    __extends(SearchDialog, _super);\n    function SearchDialog(column, dialog, provider) {\n        var _this = _super.call(this, dialog, {\n            livePreview: 'search',\n        }) || this;\n        _this.column = column;\n        _this.provider = provider;\n        return _this;\n    }\n    SearchDialog.prototype.build = function (node) {\n        var _this = this;\n        node.insertAdjacentHTML('beforeend', \"<input type=\\\"text\\\" size=\\\"20\\\" value=\\\"\\\" required autofocus placeholder=\\\"search... (>= 3 chars)\\\">\\n      <label class=\\\"\".concat(cssClass('checkbox'), \"\\\">\\n        <input type=\\\"checkbox\\\">\\n        <span>Use regular expressions</span>\\n      </label>\\n    \"));\n        var input = node.querySelector('input[type=\"text\"]');\n        var checkbox = node.querySelector('input[type=\"checkbox\"]');\n        var update = function () {\n            var search = input.value;\n            if (search.length < 3) {\n                input.setCustomValidity('at least 3 characters');\n                return;\n            }\n            input.setCustomValidity('');\n        };\n        input.addEventListener('input', update, {\n            passive: true,\n        });\n        checkbox.addEventListener('change', update, {\n            passive: true,\n        });\n        this.enableLivePreviews([input, checkbox]);\n        if (!this.showLivePreviews()) {\n            return;\n        }\n        input.addEventListener('input', debounce(function () { return _this.submit(); }, 100), {\n            passive: true,\n        });\n    };\n    SearchDialog.prototype.submit = function () {\n        var input = this.findInput('input[type=\"text\"]');\n        var checkbox = this.findInput('input[type=\"checkbox\"]');\n        var search = input.value;\n        var isRegex = checkbox.checked;\n        if (isRegex) {\n            search = new RegExp(search);\n        }\n        this.provider.searchAndJump(search, this.column);\n        return true;\n    };\n    SearchDialog.prototype.reset = function () {\n        var input = this.findInput('input[type=\"text\"]');\n        var checkbox = this.findInput('input[type=\"checkbox\"]');\n        input.value = '';\n        checkbox.checked = false;\n    };\n    SearchDialog.prototype.cancel = function () {\n        // nothing to do\n    };\n    return SearchDialog;\n}(ADialog));\nexport default SearchDialog;\n//# sourceMappingURL=SearchDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ADialog from './ADialog';\nimport { cssClass } from '../../styles';\n/** @internal */\nvar ShowTopNDialog = /** @class */ (function (_super) {\n    __extends(ShowTopNDialog, _super);\n    function ShowTopNDialog(provider, dialog) {\n        var _this = _super.call(this, dialog) || this;\n        _this.provider = provider;\n        _this.before = _this.provider.getShowTopN();\n        return _this;\n    }\n    ShowTopNDialog.prototype.build = function (node) {\n        node.classList.add(cssClass('dialog-rename'));\n        node.insertAdjacentHTML('beforeend', \"\\n      <input type=\\\"number\\\" min=\\\"0\\\" step=\\\"1\\\" value=\\\"\".concat(this.dialog.sanitize(String(this.before)), \"\\\">\"));\n        this.enableLivePreviews('input');\n    };\n    ShowTopNDialog.prototype.cancel = function () {\n        this.provider.setShowTopN(this.before);\n    };\n    ShowTopNDialog.prototype.submit = function () {\n        var value = this.findInput('input').valueAsNumber;\n        this.provider.setShowTopN(value);\n        return true;\n    };\n    ShowTopNDialog.prototype.reset = function () {\n        var defaultValue = 10;\n        this.findInput('input').value = defaultValue.toString();\n    };\n    return ShowTopNDialog;\n}(ADialog));\nexport default ShowTopNDialog;\n//# sourceMappingURL=ShowTopNDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ADialog from './ADialog';\nimport { uniqueId, forEach } from './utils';\nimport { getToolbarDialogAddons } from '../toolbarResolvers';\nimport { cssClass } from '../../styles';\n/** @internal */\nvar SortDialog = /** @class */ (function (_super) {\n    __extends(SortDialog, _super);\n    function SortDialog(column, groupSortBy, dialog, ctx) {\n        var _this = _super.call(this, dialog, {\n            livePreview: groupSortBy ? 'groupSort' : 'sort',\n        }) || this;\n        _this.column = column;\n        _this.groupSortBy = groupSortBy;\n        _this.ctx = ctx;\n        _this.handlers = [];\n        return _this;\n    }\n    SortDialog.prototype.build = function (node) {\n        var addons = getToolbarDialogAddons(this.column, this.groupSortBy ? 'sortGroup' : 'sort', this.ctx);\n        for (var _i = 0, addons_1 = addons; _i < addons_1.length; _i++) {\n            var addon = addons_1[_i];\n            var title = this.node.ownerDocument.createElement('strong');\n            title.textContent = addon.title;\n            this.node.insertAdjacentElement('beforeend', title);\n            this.handlers.push(addon.append(this.column, this.node, this.dialog, this.ctx));\n        }\n        this.handlers.push(sortOrder(node, this.column, this.dialog.idPrefix, this.groupSortBy));\n        for (var _a = 0, _b = this.handlers; _a < _b.length; _a++) {\n            var handler = _b[_a];\n            this.enableLivePreviews(handler.elems);\n        }\n    };\n    SortDialog.prototype.submit = function () {\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\n            var handler = _a[_i];\n            if (handler.submit() === false) {\n                return false;\n            }\n        }\n        return true;\n    };\n    SortDialog.prototype.cancel = function () {\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\n            var handler = _a[_i];\n            handler.cancel();\n        }\n    };\n    SortDialog.prototype.reset = function () {\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\n            var handler = _a[_i];\n            handler.reset();\n        }\n    };\n    return SortDialog;\n}(ADialog));\nexport default SortDialog;\nfunction sortOrder(node, column, idPrefix, groupSortBy) {\n    if (groupSortBy === void 0) { groupSortBy = false; }\n    var ranking = column.findMyRanker();\n    var current = groupSortBy ? ranking.getGroupSortCriteria() : ranking.getSortCriteria();\n    var order = Object.assign({}, groupSortBy ? column.isGroupSortedByMe() : column.isSortedByMe());\n    var priority = order.priority === undefined ? current.length : order.priority;\n    var id = uniqueId(idPrefix);\n    node.insertAdjacentHTML('afterbegin', \"\\n        <strong>Sort Order</strong>\\n        <label class=\\\"\".concat(cssClass('checkbox'), \"\\\"><input type=\\\"radio\\\" name=\\\"sortorder\\\" value=\\\"asc\\\"  \").concat(order.asc === 'asc' ? 'checked' : '', \" ><span>Ascending</span></label>\\n        <label class=\\\"\").concat(cssClass('checkbox'), \"\\\"><input type=\\\"radio\\\" name=\\\"sortorder\\\" value=\\\"desc\\\"  \").concat(order.asc === 'desc' ? 'checked' : '', \" ><span>Descending</span></label>\\n        <label class=\\\"\").concat(cssClass('checkbox'), \"\\\"><input type=\\\"radio\\\" name=\\\"sortorder\\\" value=\\\"none\\\"  \").concat(order.asc === undefined ? 'checked' : '', \" ><span>Unsorted</span></label>\\n        <strong>Sort Priority</strong>\\n        <input type=\\\"number\\\" id=\\\"\").concat(id, \"P\\\" step=\\\"1\\\" min=\\\"1\\\" max=\\\"\").concat(current.length + 1, \"\\\" value=\\\"\").concat(priority + 1, \"\\\">\\n    \"));\n    var updateDisabled = function (disable) {\n        forEach(node, 'input:not([name=sortorder]), select, textarea', function (d) {\n            d.disabled = disable;\n        });\n    };\n    updateDisabled(order.asc === undefined);\n    forEach(node, 'input[name=sortorder]', function (n) {\n        n.addEventListener('change', function () {\n            updateDisabled(n.value === 'none');\n        }, {\n            passive: true,\n        });\n    });\n    return {\n        elems: \"input[name=sortorder], #\".concat(id, \"P\"),\n        submit: function () {\n            var asc = node.querySelector('input[name=sortorder]:checked').value;\n            var priority = Number.parseInt(node.querySelector(\"#\".concat(id, \"P\")).value, 10) - 1;\n            if (groupSortBy) {\n                ranking.groupSortBy(column, asc === 'asc', asc === 'none' ? -1 : priority);\n            }\n            else {\n                ranking.sortBy(column, asc === 'asc', asc === 'none' ? -1 : priority);\n            }\n            return true;\n        },\n        reset: function () {\n            node.querySelector('input[name=sortorder][value=none]').checked = true;\n            node.querySelector(\"#\".concat(id, \"P\")).value = (current.length + (order.priority === undefined ? 1 : 0)).toString();\n            updateDisabled(true);\n        },\n        cancel: function () {\n            if (groupSortBy) {\n                ranking.groupSortBy(column, order.asc === 'asc', order.asc === undefined ? -1 : order.priority);\n            }\n            else {\n                ranking.sortBy(column, order.asc === 'asc', order.asc === undefined ? -1 : order.priority);\n            }\n        },\n    };\n}\n//# sourceMappingURL=SortDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { filterMissingMarkup, findFilterMissing } from '../missing';\nimport ADialog from './ADialog';\nimport { cssClass } from '../../styles';\nimport { debounce } from '../../internal';\nimport { filterToString, matchDataList } from '../../renderer/StringCellRenderer';\nfunction toInput(text, isRegex) {\n    var v = text.trim();\n    if (v === '') {\n        return null;\n    }\n    return isRegex ? new RegExp(v, 'm') : v;\n}\n/** @internal */\nvar StringFilterDialog = /** @class */ (function (_super) {\n    __extends(StringFilterDialog, _super);\n    function StringFilterDialog(column, dialog, ctx) {\n        var _this = _super.call(this, dialog, {\n            livePreview: 'filter',\n        }) || this;\n        _this.column = column;\n        _this.ctx = ctx;\n        _this.before = _this.column.getFilter();\n        return _this;\n    }\n    StringFilterDialog.prototype.updateFilter = function (filter, filterMissing) {\n        if (filter == null && !filterMissing) {\n            this.column.setFilter(null);\n        }\n        else {\n            this.column.setFilter({ filter: filter, filterMissing: filterMissing });\n        }\n    };\n    StringFilterDialog.prototype.reset = function () {\n        this.findInput('input[type=\"text\"]').value = '';\n        this.forEach('input[type=checkbox]', function (n) { return (n.checked = false); });\n    };\n    StringFilterDialog.prototype.cancel = function () {\n        if (this.before) {\n            this.updateFilter(this.before.filter === '' ? null : this.before.filter, this.before.filterMissing);\n        }\n        else {\n            this.updateFilter(null, false);\n        }\n    };\n    StringFilterDialog.prototype.submit = function () {\n        var filterMissing = findFilterMissing(this.node).checked;\n        var input = this.findInput('input[type=\"text\"]').value;\n        var isRegex = this.findInput('input[type=\"checkbox\"]').checked;\n        this.updateFilter(toInput(input, isRegex), filterMissing);\n        return true;\n    };\n    StringFilterDialog.prototype.build = function (node) {\n        var _this = this;\n        var s = this.ctx.sanitize;\n        var bak = this.column.getFilter() || { filter: '', filterMissing: false };\n        node.insertAdjacentHTML('beforeend', \"<input type=\\\"text\\\" placeholder=\\\"Filter \".concat(s(this.column.desc.label), \" \\u2026\\\" autofocus\\n         value=\\\"\").concat(filterToString(bak), \"\\\" list=\\\"\").concat(this.dialog.idPrefix, \"_sdl\\\">\\n    <label class=\\\"\").concat(cssClass('checkbox'), \"\\\">\\n      <input type=\\\"checkbox\\\" \").concat(bak.filter instanceof RegExp ? 'checked=\"checked\"' : '', \">\\n      <span>Use regular expressions</span>\\n    </label>\\n    \").concat(filterMissingMarkup(bak.filterMissing), \"\\n    <datalist id=\\\"\").concat(this.dialog.idPrefix, \"_sdl\\\"></datalist>\"));\n        var filterMissing = findFilterMissing(node);\n        var input = node.querySelector('input[type=\"text\"]');\n        var isRegex = node.querySelector('input[type=\"checkbox\"]');\n        var dl = node.querySelector('datalist');\n        this.ctx.provider\n            .getTaskExecutor()\n            .summaryStringStats(this.column)\n            .then(function (r) {\n            if (typeof r === 'symbol') {\n                return;\n            }\n            var summary = r.summary;\n            matchDataList(dl, summary.topN);\n        });\n        this.enableLivePreviews([filterMissing, input, isRegex]);\n        if (!this.showLivePreviews()) {\n            return;\n        }\n        input.addEventListener('input', debounce(function () { return _this.submit(); }, 100), {\n            passive: true,\n        });\n    };\n    return StringFilterDialog;\n}(ADialog));\nexport default StringFilterDialog;\n//# sourceMappingURL=StringFilterDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { round } from '../../internal';\nimport ADialog from './ADialog';\nimport { forEach, colorOf } from './utils';\nimport { cssClass } from '../../styles';\n/** @internal */\nvar WeightsEditDialog = /** @class */ (function (_super) {\n    __extends(WeightsEditDialog, _super);\n    function WeightsEditDialog(column, dialog) {\n        var _this = _super.call(this, dialog) || this;\n        _this.column = column;\n        _this.weights = _this.column.getWeights();\n        return _this;\n    }\n    WeightsEditDialog.prototype.cancel = function () {\n        this.column.setWeights(this.weights.slice());\n    };\n    WeightsEditDialog.prototype.reset = function () {\n        var weight = 100 / this.weights.length;\n        forEach(this.node, 'input[type=number]', function (n) {\n            var v = round(weight, 2);\n            n.value = String(v);\n            n.nextElementSibling.firstElementChild.style.width = \"\".concat(v, \"%\");\n        });\n    };\n    WeightsEditDialog.prototype.build = function (node) {\n        var _this = this;\n        var children = this.column.children;\n        node.insertAdjacentHTML('beforeend', \"<div class=\\\"\".concat(cssClass('dialog-table'), \"\\\">\\n        \").concat(this.weights\n            .map(function (weight, i) { return \"<div class=\\\"\".concat(cssClass('dialog-weights-table-entry'), \"\\\">\\n          <input type=\\\"number\\\" value=\\\"\").concat(round(weight * 100, 2), \"\\\" min=\\\"0\\\" max=\\\"100\\\" step=\\\"any\\\" required>\\n          <span class=\\\"\").concat(cssClass('dialog-filter-color-bar'), \"\\\">\\n            <span style=\\\"background-color: \").concat(colorOf(children[i]), \"; width: \").concat(round(weight * 100, 2), \"%\\\"></span>\\n          </span>\\n          \").concat(_this.dialog.sanitize(children[i].label), \"\\n        </div>\"); })\n            .join(''), \"\\n    </div>\"));\n        var inputs = Array.from(this.node.querySelectorAll('input[type=number]'));\n        inputs.forEach(function (d, i) {\n            d.oninput = function () {\n                var weight = d.valueAsNumber;\n                if (weight <= 0) {\n                    d.setCustomValidity('weight cannot be zero');\n                }\n                else {\n                    d.setCustomValidity('');\n                }\n                _this.updateBar(d);\n                if (inputs.length !== 2) {\n                    return;\n                }\n                // corner case auto decrease the other\n                var rest = 100 - weight;\n                if (rest <= 0) {\n                    d.setCustomValidity('weight cannot be 100 in case of two elements');\n                }\n                else {\n                    d.setCustomValidity('');\n                }\n                var other = inputs[1 - i];\n                other.value = round(rest, 2).toString();\n                _this.updateBar(other);\n            };\n        });\n    };\n    WeightsEditDialog.prototype.updateBar = function (input) {\n        input.nextElementSibling.firstElementChild.style.width = \"\".concat(input.value, \"%\");\n    };\n    WeightsEditDialog.prototype.distributeWeights = function () {\n        var inputs = Array.from(this.node.querySelectorAll('input[type=number]')).map(function (d) { return ({\n            input: d,\n            weight: d.value ? d.valueAsNumber : NaN,\n        }); });\n        var hasMissing = inputs.some(function (d) { return Number.isNaN(d.weight); });\n        if (hasMissing) {\n            // compute missing ones\n            var missingIndices = inputs.filter(function (d) { return Number.isNaN(d.weight); });\n            var correct = inputs.filter(function (d) { return !Number.isNaN(d.weight); });\n            var sum_1 = correct.reduce(function (a, b) { return a + b.weight; }, 0);\n            if (sum_1 < 100) {\n                // compute rest\n                var rest = (100 - sum_1) / missingIndices.length;\n                for (var _i = 0, missingIndices_1 = missingIndices; _i < missingIndices_1.length; _i++) {\n                    var input = missingIndices_1[_i];\n                    input.input.value = round(rest, 2).toString();\n                    this.updateBar(input.input);\n                }\n                return;\n            }\n            // already above 100, set missing to 0 and do a regular normalization (user has to deal with it)\n            for (var _a = 0, missingIndices_2 = missingIndices; _a < missingIndices_2.length; _a++) {\n                var input = missingIndices_2[_a];\n                input.input.value = '0';\n                this.updateBar(input.input);\n            }\n        }\n        var weights = inputs.map(function (d) { return d.weight; });\n        if (validWeights(weights)) {\n            return; // nothing to do\n        }\n        // pure distribute the sum\n        var sum = weights.reduce(function (a, b) { return a + b; }, 0);\n        for (var _b = 0, inputs_1 = inputs; _b < inputs_1.length; _b++) {\n            var input = inputs_1[_b];\n            input.input.value = round((input.weight * 100) / sum, 2).toString();\n            this.updateBar(input.input);\n        }\n    };\n    WeightsEditDialog.prototype.appendDialogButtons = function () {\n        var _this = this;\n        _super.prototype.appendDialogButtons.call(this);\n        var buttons = this.node.querySelector(\".\".concat(cssClass('dialog-buttons')));\n        buttons.insertAdjacentHTML('beforeend', \"<button class=\\\"\".concat(cssClass('dialog-button'), \" \").concat(cssClass('dialog-weights-distribute-button'), \"\\\" type=\\\"button\\\" title=\\\"distribute weights\\\"></button>\"));\n        var last = buttons.lastElementChild;\n        last.onclick = function (evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            _this.distributeWeights();\n        };\n    };\n    WeightsEditDialog.prototype.submit = function () {\n        var inputs = Array.from(this.node.querySelectorAll('input[type=number]')).map(function (d) { return ({\n            input: d,\n            weight: d.valueAsNumber,\n        }); });\n        var invalid = false;\n        for (var _i = 0, inputs_2 = inputs; _i < inputs_2.length; _i++) {\n            var input = inputs_2[_i];\n            if (input.weight <= 0) {\n                input.input.setCustomValidity('weight cannot be zero');\n                invalid = true;\n            }\n            else {\n                input.input.setCustomValidity('');\n            }\n        }\n        var weights = inputs.map(function (d) { return d.weight; });\n        if (!invalid && !validWeights(weights)) {\n            inputs[inputs.length - 1].input.setCustomValidity('sum of weights has to be 100, change weights or use the redistribute button to fix');\n            invalid = true;\n        }\n        if (invalid) {\n            if (typeof this.node.reportValidity === 'function') {\n                this.node.reportValidity();\n            }\n            return false;\n        }\n        this.column.setWeights(weights.map(function (d) { return d / 100; }));\n        return true;\n    };\n    return WeightsEditDialog;\n}(ADialog));\nexport default WeightsEditDialog;\nfunction validWeights(weights) {\n    return Math.abs(weights.reduce(function (a, b) { return a + b; }, 0) - 100) < 3;\n}\n//# sourceMappingURL=WeightsEditDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ADialog from './ADialog';\nimport { cssClass } from '../../styles';\n/** @internal */\nvar SelectionFilterDialog = /** @class */ (function (_super) {\n    __extends(SelectionFilterDialog, _super);\n    function SelectionFilterDialog(column, dialog, ctx) {\n        var _this = _super.call(this, dialog, {\n            livePreview: 'filter',\n        }) || this;\n        _this.column = column;\n        _this.ctx = ctx;\n        _this.before = _this.column.getFilter();\n        return _this;\n    }\n    SelectionFilterDialog.prototype.updateFilter = function (filter) {\n        this.column.setFilter(filter);\n    };\n    SelectionFilterDialog.prototype.reset = function () {\n        this.findInput('input[value=none]').checked = true;\n    };\n    SelectionFilterDialog.prototype.cancel = function () {\n        if (this.before) {\n            this.updateFilter(this.before);\n        }\n        else {\n            this.updateFilter(null);\n        }\n    };\n    SelectionFilterDialog.prototype.submit = function () {\n        var _a, _b;\n        var chosen = (_b = (_a = this.findInput('input[name=mode]:checked')) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : 'keep';\n        if (chosen === 'none') {\n            this.updateFilter(null);\n        }\n        else if (chosen === 'update') {\n            this.updateFilter(this.ctx.provider.getSelection());\n        }\n        return true;\n    };\n    SelectionFilterDialog.prototype.guessRemoveFilter = function () {\n        var _this = this;\n        var total = this.ctx.provider.getTotalNumberOfRows();\n        var ranking = this.column.findMyRanker();\n        var hasOtherFilter = ranking.flatColumns.some(function (d) { return d.isFiltered() && d !== _this.column; });\n        return hasOtherFilter ? '?' : total.toLocaleString();\n    };\n    SelectionFilterDialog.prototype.build = function (node) {\n        var _a;\n        var filtered = (_a = this.column.getFilter()) !== null && _a !== void 0 ? _a : [];\n        var selected = this.ctx.provider.getSelection().length;\n        var total = this.ctx.provider.getTotalNumberOfRows();\n        var visible = this.column.findMyRanker().getOrderLength();\n        if (selected === 0 && filtered.length === 0) {\n            // no rows selected and no filter set\n            node.insertAdjacentText('beforeend', 'Select rows to apply this filter');\n        }\n        else if (selected > 0 && filtered.length === 0) {\n            // rows select but no filter yet\n            node.insertAdjacentHTML('beforeend', \"<div class=\\\"\".concat(cssClass('dialog-table'), \"\\\">\\n        <label class=\\\"\").concat(cssClass('checkbox'), \" \").concat(cssClass('dialog-filter-table-entry'), \" \").concat(cssClass('dialog-table-entry-wide'), \"\\\">\\n          <input type=\\\"radio\\\" checked=\\\"checked\\\" name=\\\"mode\\\" value=\\\"none\\\">\\n          <span>\\n            <div class=\\\"\").concat(cssClass('dialog-filter-table-entry-label'), \"\\\">No filter</div>\\n            <div class=\\\"\").concat(cssClass('dialog-filter-table-entry-stats'), \"\\\">\").concat(visible.toLocaleString(), \"/\").concat(total.toLocaleString(), \"</div>\\n          </span>\\n        </label>\\n        <label class=\\\"\").concat(cssClass('checkbox'), \" \").concat(cssClass('dialog-filter-table-entry'), \" \").concat(cssClass('dialog-table-entry-wide'), \"\\\">\\n          <input type=\\\"radio\\\" name=\\\"mode\\\" value=\\\"update\\\">\\n          <span>\\n            <div class=\\\"\").concat(cssClass('dialog-filter-table-entry-label'), \"\\\">Set filter to current selection</div>\\n            <div class=\\\"\").concat(cssClass('dialog-filter-table-entry-stats'), \"\\\">\").concat(selected.toLocaleString(), \"/\").concat(total.toLocaleString(), \"</div>\\n          </span>\\n        </label>\\n      </div>\"));\n        }\n        else {\n            var guessedRemoved = this.guessRemoveFilter();\n            node.insertAdjacentHTML('beforeend', \"<div class=\\\"\".concat(cssClass('dialog-table'), \"\\\" >\\n        <label class=\\\"\").concat(cssClass('checkbox'), \" \").concat(cssClass('dialog-filter-table-entry'), \" \").concat(cssClass('dialog-table-entry-wide'), \"\\\">\\n          <input type=\\\"radio\\\" \").concat(filtered.length === 0 ? 'checked=\"checked\"' : '', \" name=\\\"mode\\\" value=\\\"none\\\">\\n          <span>\\n            <div class=\\\"\").concat(cssClass('dialog-filter-table-entry-label'), \"\\\">Remove filter</div>\\n            <div class=\\\"\").concat(cssClass('dialog-filter-table-entry-stats'), \"\\\">\").concat(guessedRemoved, \"/\").concat(total.toLocaleString(), \"</div>\\n          </span>\\n        </label>\\n        <label class=\\\"\").concat(cssClass('checkbox'), \" \").concat(cssClass('dialog-filter-table-entry'), \" \").concat(cssClass('dialog-table-entry-wide'), \"\\\">\\n          <input type=\\\"radio\\\" \").concat(filtered.length > 0 ? 'checked=\"checked\"' : '', \" name=\\\"mode\\\" value=\\\"keep\\\">\\n          <span>\\n            <div class=\\\"\").concat(cssClass('dialog-filter-table-entry-label'), \"\\\">Keep current filter</div>\\n            <div class=\\\"\").concat(cssClass('dialog-filter-table-entry-stats'), \"\\\">\").concat(filtered.length.toLocaleString(), \"/\").concat(total.toLocaleString(), \"</div>\\n          </span>\\n        </label>\\n        <label class=\\\"\").concat(cssClass('checkbox'), \" \").concat(cssClass('dialog-filter-table-entry'), \" \").concat(cssClass('dialog-table-entry-wide'), \"\\\">\\n          <input type=\\\"radio\\\" name=\\\"mode\\\" value=\\\"update\\\" \").concat(selected === 0 ? 'disabled=\"disabled\"' : '', \">\\n          <span>\\n            <div class=\\\"\").concat(cssClass('dialog-filter-table-entry-label'), \"\\\">Set filter to current selection</div>\\n            <div class=\\\"\").concat(cssClass('dialog-filter-table-entry-stats'), \"\\\">\").concat(selected.toLocaleString(), \"/\").concat(total.toLocaleString(), \"</div>\\n          </span>\\n        </label>\\n      </div>\"));\n        }\n        var inputs = Array.from(node.querySelectorAll('input'));\n        this.enableLivePreviews(inputs);\n    };\n    return SelectionFilterDialog;\n}(ADialog));\nexport default SelectionFilterDialog;\n//# sourceMappingURL=SelectionFilterDialog.js.map","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { EAdvancedSortMethod, EDateSort, ESortMethod, isSortingAscByDefault, isSupportType, } from '../model';\nimport { cssClass } from '../styles';\nimport { dialogContext } from './dialogs/ADialog';\nimport CategoricalColorMappingDialog from './dialogs/CategoricalColorMappingDialog';\nimport CategoricalFilterDialog from './dialogs/CategoricalFilterDialog';\nimport CategoricalMappingFilterDialog from './dialogs/CategoricalMappingFilterDialog';\nimport ChangeRendererDialog from './dialogs/ChangeRendererDialog';\nimport ColorMappingDialog from './dialogs/ColorMappingDialog';\nimport CompositeChildrenDialog from './dialogs/CompositeChildrenDialog';\nimport CutOffHierarchyDialog from './dialogs/CutOffHierarchyDialog';\nimport DateFilterDialog from './dialogs/DateFilterDialog';\nimport EditPatternDialog from './dialogs/EditPatternDialog';\nimport GroupDialog from './dialogs/GroupDialog';\nimport MappingDialog from './dialogs/MappingDialog';\nimport NumberFilterDialog from './dialogs/NumberFilterDialog';\nimport ReduceDialog from './dialogs/ReduceDialog';\nimport RenameDialog from './dialogs/RenameDialog';\nimport ScriptEditDialog from './dialogs/ScriptEditDialog';\nimport SearchDialog from './dialogs/SearchDialog';\nimport ShowTopNDialog from './dialogs/ShowTopNDialog';\nimport SortDialog from './dialogs/SortDialog';\nimport StringFilterDialog from './dialogs/StringFilterDialog';\nimport WeightsEditDialog from './dialogs/WeightsEditDialog';\nimport SelectionFilterDialog from './dialogs/SelectionFilterDialog';\nimport appendDate from './dialogs/groupDate';\nimport appendNumber from './dialogs/groupNumber';\nimport appendString from './dialogs/groupString';\nimport { sortMethods } from './dialogs/utils';\nfunction ui(title, onClick, options) {\n    if (options === void 0) { options = {}; }\n    return { title: title, onClick: onClick, options: options };\n}\nfunction uiDialog(title, dialogClass, extraArgs, options) {\n    if (extraArgs === void 0) { extraArgs = function () { return []; }; }\n    if (options === void 0) { options = {}; }\n    return {\n        title: title,\n        onClick: function (col, evt, ctx, level) {\n            var dialog = new (dialogClass.bind.apply(dialogClass, __spreadArray([void 0, col, dialogContext(ctx, level, evt)], extraArgs(ctx), false)))();\n            dialog.open();\n        },\n        options: options,\n    };\n}\nvar sort = {\n    title: 'Sort',\n    onClick: function (col, evt, ctx, level) {\n        ctx.dialogManager.removeAboveLevel(level);\n        if (!evt.ctrlKey) {\n            col.toggleMySorting();\n            return;\n        }\n        var ranking = col.findMyRanker();\n        var current = ranking.getSortCriteria();\n        var order = col.isSortedByMe();\n        var isAscByDefault = isSortingAscByDefault(col);\n        if (order.priority === undefined) {\n            ranking.sortBy(col, isAscByDefault, current.length);\n            return;\n        }\n        var next = undefined;\n        if (isAscByDefault) {\n            next = order.asc ? 'desc' : undefined;\n        }\n        else {\n            next = !order.asc ? 'asc' : undefined;\n        }\n        ranking.sortBy(col, next === 'asc', next ? order.priority : -1);\n    },\n    options: {\n        mode: 'shortcut',\n        order: 1,\n        featureCategory: 'ranking',\n        featureLevel: 'basic',\n    },\n};\nvar sortBy = {\n    title: 'Sort By ',\n    onClick: function (col, evt, ctx, level) {\n        var dialog = new SortDialog(col, false, dialogContext(ctx, level, evt), ctx);\n        dialog.open();\n    },\n    options: {\n        mode: 'menu',\n        order: 1,\n        featureCategory: 'ranking',\n        featureLevel: 'advanced',\n    },\n};\nvar sortGroupBy = {\n    title: 'Sort Groups By ',\n    onClick: function (col, evt, ctx, level) {\n        var dialog = new SortDialog(col, true, dialogContext(ctx, level, evt), ctx);\n        dialog.open();\n    },\n    options: {\n        mode: 'menu',\n        order: 3,\n        featureCategory: 'ranking',\n        featureLevel: 'advanced',\n    },\n};\nvar rename = {\n    title: 'Rename ',\n    onClick: function (col, evt, ctx, level) {\n        var dialog = new RenameDialog(col, dialogContext(ctx, level, evt));\n        dialog.open();\n    },\n    options: {\n        order: 5,\n        featureCategory: 'ui',\n        featureLevel: 'advanced',\n    },\n};\nvar vis = {\n    title: 'Visualization ',\n    onClick: function (col, evt, ctx, level) {\n        var dialog = new ChangeRendererDialog(col, dialogContext(ctx, level, evt), ctx);\n        dialog.open();\n    },\n    options: {\n        featureCategory: 'ui',\n        featureLevel: 'advanced',\n    },\n};\nvar clone = {\n    title: 'Clone',\n    onClick: function (col, _evt, ctx) {\n        ctx.dialogManager.removeAll(); // since the column will be removed\n        ctx.provider.takeSnapshot(col);\n    },\n    options: {\n        order: 80,\n        featureCategory: 'model',\n        featureLevel: 'advanced',\n    },\n};\nvar remove = {\n    title: 'Remove',\n    onClick: function (col, _evt, ctx) {\n        ctx.dialogManager.removeAll(); // since the column will be removed\n        var ranking = col.findMyRanker();\n        var last = ranking.children.every(function (d) { return isSupportType(d) || d.fixed || d === col; });\n        if (!last) {\n            col.removeMe();\n            return;\n        }\n        ctx.provider.removeRanking(ranking);\n        ctx.provider.ensureOneRanking();\n    },\n    options: {\n        order: 90,\n        featureCategory: 'model',\n        featureLevel: 'advanced',\n    },\n};\n// basic ranking\nvar group = ui('Group', function (col, evt, ctx, level) {\n    ctx.dialogManager.removeAboveLevel(level);\n    if (!evt.ctrlKey) {\n        col.groupByMe();\n        return;\n    }\n    var ranking = col.findMyRanker();\n    var current = ranking.getGroupCriteria();\n    var order = current.indexOf(col);\n    ranking.groupBy(col, order >= 0 ? -1 : current.length);\n}, { mode: 'shortcut', order: 2, featureCategory: 'ranking', featureLevel: 'basic' });\n// advanced ranking\nvar groupBy = ui('Group By ', function (col, evt, ctx, level) {\n    var dialog = new GroupDialog(col, dialogContext(ctx, level, evt), ctx);\n    dialog.open();\n}, { mode: 'menu', order: 2, featureCategory: 'ranking', featureLevel: 'advanced' });\nfunction toggleCompressExpand(col, evt, ctx, level) {\n    ctx.dialogManager.removeAboveLevel(level);\n    var mcol = col;\n    mcol.setCollapsed(!mcol.getCollapsed());\n    var collapsed = mcol.getCollapsed();\n    var i = evt.currentTarget;\n    i.title = collapsed ? 'Expand' : 'Compress';\n    i.classList.toggle(cssClass('action-compress'), !collapsed);\n    i.classList.toggle(cssClass('action-expand'), collapsed);\n    var inner = i.getElementsByTagName('span')[0];\n    if (inner) {\n        inner.textContent = i.title;\n    }\n}\nvar compress = {\n    title: 'Compress',\n    enabled: function (col) { return !col.getCollapsed(); },\n    onClick: toggleCompressExpand,\n    options: { featureCategory: 'model', featureLevel: 'advanced' },\n};\nvar expand = {\n    title: 'Expand',\n    enabled: function (col) { return col.getCollapsed(); },\n    onClick: toggleCompressExpand,\n    options: { featureCategory: 'model', featureLevel: 'advanced' },\n};\nvar setShowTopN = {\n    title: 'Change Show Top N',\n    onClick: function (_col, evt, ctx, level) {\n        var dialog = new ShowTopNDialog(ctx.provider, dialogContext(ctx, level, evt));\n        dialog.open();\n    },\n    options: {\n        featureCategory: 'ui',\n        featureLevel: 'advanced',\n    },\n};\nexport var toolbarActions = {\n    vis: vis,\n    group: group,\n    groupBy: groupBy,\n    compress: compress,\n    expand: expand,\n    sort: sort,\n    sortBy: sortBy,\n    sortGroupBy: sortGroupBy,\n    clone: clone,\n    remove: remove,\n    rename: rename,\n    setShowTopN: setShowTopN,\n    search: uiDialog('Search ', SearchDialog, function (ctx) { return [ctx.provider]; }, {\n        mode: 'menu+shortcut',\n        order: 4,\n        featureCategory: 'ranking',\n        featureLevel: 'basic',\n    }),\n    filterNumber: uiDialog('Filter ', NumberFilterDialog, function (ctx) { return [ctx]; }, {\n        mode: 'menu+shortcut',\n        featureCategory: 'ranking',\n        featureLevel: 'basic',\n    }),\n    filterDate: uiDialog('Filter ', DateFilterDialog, function (ctx) { return [ctx]; }, {\n        mode: 'menu+shortcut',\n        featureCategory: 'ranking',\n        featureLevel: 'basic',\n    }),\n    filterString: uiDialog('Filter ', StringFilterDialog, function (ctx) { return [ctx]; }, {\n        mode: 'menu+shortcut',\n        featureCategory: 'ranking',\n        featureLevel: 'basic',\n    }),\n    filterSelection: uiDialog('Filter ', SelectionFilterDialog, function (ctx) { return [ctx]; }, {\n        mode: 'menu+shortcut',\n        featureCategory: 'ranking',\n        featureLevel: 'basic',\n    }),\n    filterCategorical: uiDialog('Filter ', CategoricalFilterDialog, function (ctx) { return [ctx]; }, {\n        mode: 'menu+shortcut',\n        featureCategory: 'ranking',\n        featureLevel: 'basic',\n    }),\n    filterOrdinal: uiDialog('Filter ', CategoricalMappingFilterDialog, function () { return []; }, {\n        mode: 'menu+shortcut',\n        featureCategory: 'ranking',\n        featureLevel: 'basic',\n    }),\n    colorMapped: uiDialog('Color Mapping ', ColorMappingDialog, function (ctx) { return [ctx]; }, {\n        mode: 'menu',\n        featureCategory: 'ui',\n        featureLevel: 'advanced',\n    }),\n    colorMappedCategorical: uiDialog('Color Mapping ', CategoricalColorMappingDialog, function () { return []; }, {\n        mode: 'menu',\n        featureCategory: 'ui',\n        featureLevel: 'advanced',\n    }),\n    script: uiDialog('Edit Combine Script ', ScriptEditDialog, function () { return []; }, {\n        mode: 'menu+shortcut',\n        featureCategory: 'model',\n        featureLevel: 'advanced',\n    }),\n    reduce: uiDialog('Reduce by ', ReduceDialog, function () { return []; }, {\n        featureCategory: 'model',\n        featureLevel: 'advanced',\n    }),\n    cutoff: uiDialog('Set Cut Off ', CutOffHierarchyDialog, function (ctx) { return [ctx]; }, {\n        featureCategory: 'model',\n        featureLevel: 'advanced',\n    }),\n    editMapping: uiDialog('Data Mapping ', MappingDialog, function (ctx) { return [ctx]; }, {\n        featureCategory: 'model',\n        featureLevel: 'advanced',\n    }),\n    editPattern: uiDialog('Edit Pattern ', EditPatternDialog, function (ctx) { return [ctx]; }, {\n        featureCategory: 'model',\n        featureLevel: 'advanced',\n    }),\n    editWeights: uiDialog('Edit Weights ', WeightsEditDialog, function () { return []; }, {\n        mode: 'menu+shortcut',\n        featureCategory: 'model',\n        featureLevel: 'advanced',\n    }),\n    compositeContained: uiDialog('Contained Columns ', CompositeChildrenDialog, function (ctx) { return [ctx]; }, {\n        featureCategory: 'model',\n        featureLevel: 'advanced',\n    }),\n    splitCombined: ui('Split Combined Column', function (col, _evt, ctx, level) {\n        ctx.dialogManager.removeAboveLevel(level - 1); // close itself\n        // split the combined column into its children\n        col.children.reverse().forEach(function (c) { return col.insertAfterMe(c); });\n        col.removeMe();\n    }, { featureCategory: 'model', featureLevel: 'advanced' }),\n    invertSelection: ui('Invert Selection', function (col, _evt, ctx, level) {\n        ctx.dialogManager.removeAboveLevel(level - 1); // close itself\n        var s = ctx.provider.getSelection();\n        var order = Array.from(col.findMyRanker().getOrder());\n        if (s.length === 0) {\n            ctx.provider.setSelection(order);\n            return;\n        }\n        var ss = new Set(s);\n        var others = order.filter(function (d) { return !ss.has(d); });\n        ctx.provider.setSelection(others);\n    }, { featureCategory: 'model', featureLevel: 'advanced' }),\n};\nfunction uiSortMethod(methods) {\n    methods = methods.sort(function (a, b) { return a.toLowerCase().localeCompare(b.toLowerCase()); });\n    return {\n        title: 'Sort By',\n        order: 2,\n        append: function (col, node) {\n            return sortMethods(node, col, methods);\n        },\n    };\n}\nexport var toolbarDialogAddons = {\n    sortNumber: uiSortMethod(Object.keys(EAdvancedSortMethod)),\n    sortNumbers: uiSortMethod(Object.keys(EAdvancedSortMethod)),\n    sortBoxPlot: uiSortMethod(Object.keys(ESortMethod)),\n    sortDates: uiSortMethod(Object.keys(EDateSort)),\n    sortGroups: uiSortMethod(['count', 'name']),\n    groupNumber: {\n        title: 'Split',\n        order: 2,\n        append: appendNumber,\n    },\n    groupString: {\n        title: 'Groups',\n        order: 2,\n        append: appendString,\n    },\n    groupDate: {\n        title: 'Granularity',\n        order: 2,\n        append: appendDate,\n    },\n};\n//# sourceMappingURL=toolbar.js.map","import { round, getNumberOfBins } from '../../internal';\nimport { forEach } from '../../renderer/utils';\nimport { cssClass } from '../../styles';\n/** @internal */\nexport default function groupNumber(col, node, dialog) {\n    var domain = col.getMapping().domain;\n    var before = col.getGroupThresholds();\n    var isThreshold = before.length <= 1;\n    var ranking = col.findMyRanker();\n    node.insertAdjacentHTML('beforeend', \"\\n    <label class=\\\"\".concat(cssClass('checkbox'), \"\\\">\\n      <input type=\\\"radio\\\" name=\\\"threshold\\\" value=\\\"threshold\\\" \").concat(isThreshold ? 'checked' : '', \">\\n      <span>at&nbsp;<input type=\\\"number\\\" size=\\\"10\\\" id=\\\"\").concat(dialog.idPrefix, \"N1\\\" value=\\\"\").concat(before.length > 0 ? before[0] : round((domain[1] - domain[0]) / 2, 2), \"\\\"\\n          required min=\\\"\").concat(domain[0], \"\\\" max=\\\"\").concat(domain[1], \"\\\" step=\\\"any\\\" \").concat(!isThreshold ? 'disabled' : '', \">\\n      </span>\\n    </label>\\n    <label class=\\\"\").concat(cssClass('checkbox'), \"\\\">\\n      <input type=\\\"radio\\\" name=\\\"threshold\\\" value=\\\"bins\\\" \").concat(!isThreshold ? 'checked' : '', \">\\n      <span> in&nbsp;<input type=\\\"number\\\" size=\\\"5\\\" id=\\\"\").concat(dialog.idPrefix, \"N2\\\" value=\\\"\").concat(before.length > 1 ? before.length : getNumberOfBins(ranking.getOrderLength()), \"\\\"\\n          required min=\\\"2\\\" step=\\\"1\\\" \").concat(isThreshold ? 'disabled' : '', \">&nbsp;bins\\n      </span>\\n    </label>\\n  \"));\n    var threshold = node.querySelector(\"#\".concat(dialog.idPrefix, \"N1\"));\n    var bins = node.querySelector(\"#\".concat(dialog.idPrefix, \"N2\"));\n    forEach(node, 'input[name=threshold]', function (d) {\n        d.addEventListener('change', function () {\n            var isThreshold = d.value === 'threshold';\n            threshold.disabled = !isThreshold;\n            bins.disabled = isThreshold;\n        }, { passive: true });\n    });\n    return {\n        elems: \"input[name=threshold], #\".concat(dialog.idPrefix, \"N1, #\").concat(dialog.idPrefix, \"N2\"),\n        submit: function () {\n            var isThreshold = node.querySelector('input[name=threshold]:checked').value === 'threshold';\n            if (isThreshold) {\n                col.setGroupThresholds([threshold.valueAsNumber]);\n                return true;\n            }\n            var count = Number.parseInt(bins.value, 10);\n            var delta = (domain[1] - domain[0]) / count;\n            var act = domain[0] + delta;\n            var thresholds = [act];\n            for (var i = 1; i < count - 1; ++i) {\n                act += delta;\n                thresholds.push(act);\n            }\n            col.setGroupThresholds(thresholds);\n            return true;\n        },\n        cancel: function () {\n            col.setGroupThresholds(before);\n        },\n        reset: function () {\n            var value = round((domain[1] - domain[0]) / 2, 2);\n            threshold.value = value.toString();\n            threshold.disabled = false;\n            bins.value = getNumberOfBins(ranking.getOrderLength()).toString();\n            bins.disabled = true;\n            node.querySelector('input[name=threshold][value=threshold]').checked = true;\n        },\n    };\n}\n//# sourceMappingURL=groupNumber.js.map","import { EStringGroupCriteriaType } from '../../model';\nimport { cssClass } from '../../styles';\n/** @internal */\nexport default function groupString(col, node, dialog) {\n    var current = col.getGroupCriteria();\n    var type = current.type, values = current.values;\n    node.insertAdjacentHTML('beforeend', \"\\n    <label class=\\\"\".concat(cssClass('checkbox'), \"\\\">\\n      <input type=\\\"radio\\\" name=\\\"\").concat(dialog.idPrefix, \"groupString\\\" value=\\\"\").concat(EStringGroupCriteriaType.value, \"\\\" id=\\\"\").concat(dialog.idPrefix, \"VAL\\\" \").concat(type === EStringGroupCriteriaType.value ? 'checked' : '', \">\\n      <span>Use text value</span>\\n    </label>\\n    <label class=\\\"\").concat(cssClass('checkbox'), \"\\\">\\n      <input type=\\\"radio\\\" name=\\\"\").concat(dialog.idPrefix, \"groupString\\\" value=\\\"\").concat(EStringGroupCriteriaType.startsWith, \"\\\" id=\\\"\").concat(dialog.idPrefix, \"RW\\\" \").concat(type === EStringGroupCriteriaType.startsWith ? 'checked' : '', \">\\n      <span>Text starts with \\u2026</span>\\n    </label>\\n    <label class=\\\"\").concat(cssClass('checkbox'), \"\\\">\\n      <input type=\\\"radio\\\" name=\\\"\").concat(dialog.idPrefix, \"groupString\\\" value=\\\"\").concat(EStringGroupCriteriaType.regex, \"\\\" id=\\\"\").concat(dialog.idPrefix, \"RE\\\" \").concat(type === EStringGroupCriteriaType.regex ? 'checked' : '', \">\\n      <span>Use regular expressions</span>\\n    </label>\\n    <textarea rows=\\\"5\\\" placeholder=\\\"one value per row, e.g., \\nA\\nB\\\" id=\\\"\").concat(dialog.idPrefix, \"T\\\">\").concat(values\n        .map(function (value) { return (value instanceof RegExp ? value.source : value); })\n        .join('\\n'), \"</textarea>\\n  \"));\n    var valueRadioButton = node.querySelector(\"#\".concat(dialog.idPrefix, \"VAL\"));\n    var startsWithRadioButton = node.querySelector(\"#\".concat(dialog.idPrefix, \"RW\"));\n    var regexRadioButton = node.querySelector(\"#\".concat(dialog.idPrefix, \"RE\"));\n    var text = node.querySelector(\"#\".concat(dialog.idPrefix, \"T\"));\n    var showOrHideTextarea = function (show) {\n        text.style.display = show ? null : 'none';\n    };\n    showOrHideTextarea(type !== EStringGroupCriteriaType.value);\n    valueRadioButton.onchange = function () { return showOrHideTextarea(!valueRadioButton.checked); };\n    startsWithRadioButton.onchange = function () { return showOrHideTextarea(startsWithRadioButton.checked); };\n    regexRadioButton.onchange = function () { return showOrHideTextarea(regexRadioButton.checked); };\n    return {\n        elems: [text, valueRadioButton, startsWithRadioButton, regexRadioButton],\n        submit: function () {\n            var checkedNode = node.querySelector(\"input[name=\\\"\".concat(dialog.idPrefix, \"groupString\\\"]:checked\"));\n            var newType = checkedNode.value;\n            var items = text.value\n                .trim()\n                .split('\\n')\n                .map(function (d) { return d.trim(); })\n                .filter(function (d) { return d.length > 0; });\n            if (newType === EStringGroupCriteriaType.regex) {\n                items = items.map(function (d) { return new RegExp(d.toString(), 'm'); });\n            }\n            col.setGroupCriteria({\n                type: newType,\n                values: items,\n            });\n            return true;\n        },\n        cancel: function () {\n            col.setGroupCriteria(current);\n        },\n        reset: function () {\n            text.value = '';\n            startsWithRadioButton.checked = true;\n        },\n    };\n}\n//# sourceMappingURL=groupString.js.map","import { cssClass } from '../../styles';\nimport { defaultDateGrouper } from '../../model/internalDate';\n/** @internal */\nexport default function appendDate(col, node) {\n    var before = col.getDateGrouper();\n    var html = '';\n    for (var _i = 0, _a = [\n        'century',\n        'decade',\n        'year',\n        'month',\n        'week',\n        'day_of_week',\n        'day_of_month',\n        'day_of_year',\n        'hour',\n        'minute',\n        'second',\n    ]; _i < _a.length; _i++) {\n        var g = _a[_i];\n        html += \"<label class=\\\"\".concat(cssClass('checkbox'), \"\\\">\\n    <input type=\\\"radio\\\" name=\\\"granularity\\\" value=\\\"\").concat(g, \"\\\" \").concat(before.granularity === g ? 'checked' : '', \">\\n    <span> by \").concat(g, \" </span>\\n  </label>\");\n    }\n    html += \"<label class=\\\"\".concat(cssClass('checkbox'), \"\\\">\\n    <input type=\\\"checkbox\\\" name=\\\"circular\\\" \").concat(before.circular ? 'checked' : '', \">\\n    <span> Circular </span>\\n  </label>\");\n    node.insertAdjacentHTML('beforeend', html);\n    var circular = node.querySelector('input[name=circular]');\n    return {\n        elems: 'input[name=granularity],input[name=circular]',\n        submit: function () {\n            var granularity = node.querySelector('input[name=granularity]:checked')\n                .value;\n            col.setDateGrouper({\n                granularity: granularity,\n                circular: circular.checked,\n            });\n            return true;\n        },\n        cancel: function () {\n            col.setDateGrouper(before);\n        },\n        reset: function () {\n            var r = defaultDateGrouper();\n            circular.checked = r.circular;\n            var g = node.querySelector(\"input[name=granularity][value=\\\"\".concat(r.granularity, \"\\\"]\"));\n            g.checked = true;\n        },\n    };\n}\n//# sourceMappingURL=groupDate.js.map","import { renderers } from './renderer/renderers';\nimport { toolbarDialogAddons, toolbarActions } from './ui/toolbar';\nfunction resolveToolbarActions(col, keys, lookup) {\n    var actions = [];\n    keys.forEach(function (key) {\n        if (lookup.hasOwnProperty(key)) {\n            actions.push(lookup[key]);\n        }\n        else {\n            console.warn(\"cannot find toolbar action of type: \\\"\".concat(col.desc.type, \"\\\" with key \\\"\").concat(key, \"\\\"\"));\n        }\n    });\n    return actions;\n}\nfunction resolveToolbarDialogAddons(col, keys, lookup) {\n    var actions = [];\n    keys.forEach(function (key) {\n        if (lookup.hasOwnProperty(key)) {\n            actions.push(lookup[key]);\n        }\n        else {\n            console.warn(\"cannot find toolbar dialog addon of type: \\\"\".concat(col.desc.type, \"\\\" with key \\\"\").concat(key, \"\\\"\"));\n        }\n    });\n    return actions;\n}\nexport function defaultOptions() {\n    return {\n        toolbarActions: toolbarActions,\n        toolbarDialogAddons: toolbarDialogAddons,\n        resolveToolbarActions: resolveToolbarActions,\n        resolveToolbarDialogAddons: resolveToolbarDialogAddons,\n        renderers: Object.assign({}, renderers),\n        canRender: function () { return true; },\n        labelRotation: 0,\n        summaryHeader: true,\n        animated: true,\n        expandLineOnHover: false,\n        sidePanel: true,\n        sidePanelCollapsed: false,\n        hierarchyIndicator: true,\n        defaultSlopeGraphMode: 'item',\n        overviewMode: false,\n        livePreviews: {\n            search: true,\n            filter: true,\n            vis: true,\n            sort: true,\n            group: true,\n            groupSort: true,\n            colorMapping: true,\n        },\n        onDialogBackgroundClick: 'confirm',\n        rowHeight: 18,\n        groupHeight: 40,\n        groupPadding: 5,\n        rowPadding: 2,\n        levelOfDetail: function () { return 'high'; },\n        customRowUpdate: function () { return undefined; },\n        dynamicHeight: function () { return null; },\n        flags: {\n            disableFrozenColumns: true,\n            advancedRankingFeatures: true,\n            advancedModelFeatures: true,\n            advancedUIFeatures: true,\n        },\n        ignoreUnsupportedBrowser: false,\n        copyableRows: true,\n        instanceId: Math.random().toString(36).slice(-8).substring(0, 3), // generate a random string with length 3\n    };\n}\n//# sourceMappingURL=config.js.map","var TYPE_OBJECT = '[object Object]';\n/**\n * deep merge the source object into the target object and return the target object.\n * will concatenate arrays instead of replacing them.\n * @internal\n */\nexport default function merge(target, source) {\n    var result = target;\n    if (!source) {\n        return result;\n    }\n    var bKeys = Object.keys(source);\n    if (bKeys.length === 0) {\n        return result;\n    }\n    for (var _i = 0, bKeys_1 = bKeys; _i < bKeys_1.length; _i++) {\n        var key = bKeys_1[_i];\n        var value = source[key];\n        //merge just POJOs\n        if (Object.prototype.toString.call(value) === TYPE_OBJECT && Object.getPrototypeOf(value) === Object.prototype) {\n            //pojo\n            if (result[key] == null) {\n                result[key] = {};\n            }\n            result[key] = merge(result[key], value);\n        }\n        else if (Array.isArray(value)) {\n            if (result[key] == null) {\n                result[key] = [];\n            }\n            result[key] = result[key].concat(value);\n        }\n        else {\n            result[key] = value;\n        }\n    }\n    return result;\n}\n//# sourceMappingURL=merge.js.map","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar BrowserInfo = /** @class */ (function () {\n    function BrowserInfo(name, version, os) {\n        this.name = name;\n        this.version = version;\n        this.os = os;\n        this.type = 'browser';\n    }\n    return BrowserInfo;\n}());\nexport { BrowserInfo };\nvar NodeInfo = /** @class */ (function () {\n    function NodeInfo(version) {\n        this.version = version;\n        this.type = 'node';\n        this.name = 'node';\n        this.os = process.platform;\n    }\n    return NodeInfo;\n}());\nexport { NodeInfo };\nvar SearchBotDeviceInfo = /** @class */ (function () {\n    function SearchBotDeviceInfo(name, version, os, bot) {\n        this.name = name;\n        this.version = version;\n        this.os = os;\n        this.bot = bot;\n        this.type = 'bot-device';\n    }\n    return SearchBotDeviceInfo;\n}());\nexport { SearchBotDeviceInfo };\nvar BotInfo = /** @class */ (function () {\n    function BotInfo() {\n        this.type = 'bot';\n        this.bot = true; // NOTE: deprecated test name instead\n        this.name = 'bot';\n        this.version = null;\n        this.os = null;\n    }\n    return BotInfo;\n}());\nexport { BotInfo };\nvar ReactNativeInfo = /** @class */ (function () {\n    function ReactNativeInfo() {\n        this.type = 'react-native';\n        this.name = 'react-native';\n        this.version = null;\n        this.os = null;\n    }\n    return ReactNativeInfo;\n}());\nexport { ReactNativeInfo };\n// tslint:disable-next-line:max-line-length\nvar SEARCHBOX_UA_REGEX = /alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/;\nvar SEARCHBOT_OS_REGEX = /(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\\ Jeeves\\/Teoma|ia_archiver)/;\nvar REQUIRED_VERSION_PARTS = 3;\nvar userAgentRules = [\n    ['aol', /AOLShield\\/([0-9\\._]+)/],\n    ['edge', /Edge\\/([0-9\\._]+)/],\n    ['edge-ios', /EdgiOS\\/([0-9\\._]+)/],\n    ['yandexbrowser', /YaBrowser\\/([0-9\\._]+)/],\n    ['kakaotalk', /KAKAOTALK\\s([0-9\\.]+)/],\n    ['samsung', /SamsungBrowser\\/([0-9\\.]+)/],\n    ['silk', /\\bSilk\\/([0-9._-]+)\\b/],\n    ['miui', /MiuiBrowser\\/([0-9\\.]+)$/],\n    ['beaker', /BeakerBrowser\\/([0-9\\.]+)/],\n    ['edge-chromium', /EdgA?\\/([0-9\\.]+)/],\n    [\n        'chromium-webview',\n        /(?!Chrom.*OPR)wv\\).*Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/,\n    ],\n    ['chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/],\n    ['phantomjs', /PhantomJS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['crios', /CriOS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['firefox', /Firefox\\/([0-9\\.]+)(?:\\s|$)/],\n    ['fxios', /FxiOS\\/([0-9\\.]+)/],\n    ['opera-mini', /Opera Mini.*Version\\/([0-9\\.]+)/],\n    ['opera', /Opera\\/([0-9\\.]+)(?:\\s|$)/],\n    ['opera', /OPR\\/([0-9\\.]+)(:?\\s|$)/],\n    ['pie', /^Microsoft Pocket Internet Explorer\\/(\\d+\\.\\d+)$/],\n    ['pie', /^Mozilla\\/\\d\\.\\d+\\s\\(compatible;\\s(?:MSP?IE|MSInternet Explorer) (\\d+\\.\\d+);.*Windows CE.*\\)$/],\n    ['netfront', /^Mozilla\\/\\d\\.\\d+.*NetFront\\/(\\d.\\d)/],\n    ['ie', /Trident\\/7\\.0.*rv\\:([0-9\\.]+).*\\).*Gecko$/],\n    ['ie', /MSIE\\s([0-9\\.]+);.*Trident\\/[4-7].0/],\n    ['ie', /MSIE\\s(7\\.0)/],\n    ['bb10', /BB10;\\sTouch.*Version\\/([0-9\\.]+)/],\n    ['android', /Android\\s([0-9\\.]+)/],\n    ['ios', /Version\\/([0-9\\._]+).*Mobile.*Safari.*/],\n    ['safari', /Version\\/([0-9\\._]+).*Safari/],\n    ['facebook', /FB[AS]V\\/([0-9\\.]+)/],\n    ['instagram', /Instagram\\s([0-9\\.]+)/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Mobile/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Gecko\\)$/],\n    ['curl', /^curl\\/([0-9\\.]+)$/],\n    ['searchbot', SEARCHBOX_UA_REGEX],\n];\nvar operatingSystemRules = [\n    ['iOS', /iP(hone|od|ad)/],\n    ['Android OS', /Android/],\n    ['BlackBerry OS', /BlackBerry|BB10/],\n    ['Windows Mobile', /IEMobile/],\n    ['Amazon OS', /Kindle/],\n    ['Windows 3.11', /Win16/],\n    ['Windows 95', /(Windows 95)|(Win95)|(Windows_95)/],\n    ['Windows 98', /(Windows 98)|(Win98)/],\n    ['Windows 2000', /(Windows NT 5.0)|(Windows 2000)/],\n    ['Windows XP', /(Windows NT 5.1)|(Windows XP)/],\n    ['Windows Server 2003', /(Windows NT 5.2)/],\n    ['Windows Vista', /(Windows NT 6.0)/],\n    ['Windows 7', /(Windows NT 6.1)/],\n    ['Windows 8', /(Windows NT 6.2)/],\n    ['Windows 8.1', /(Windows NT 6.3)/],\n    ['Windows 10', /(Windows NT 10.0)/],\n    ['Windows ME', /Windows ME/],\n    ['Windows CE', /Windows CE|WinCE|Microsoft Pocket Internet Explorer/],\n    ['Open BSD', /OpenBSD/],\n    ['Sun OS', /SunOS/],\n    ['Chrome OS', /CrOS/],\n    ['Linux', /(Linux)|(X11)/],\n    ['Mac OS', /(Mac_PowerPC)|(Macintosh)/],\n    ['QNX', /QNX/],\n    ['BeOS', /BeOS/],\n    ['OS/2', /OS\\/2/],\n];\nexport function detect(userAgent) {\n    if (!!userAgent) {\n        return parseUserAgent(userAgent);\n    }\n    if (typeof document === 'undefined' &&\n        typeof navigator !== 'undefined' &&\n        navigator.product === 'ReactNative') {\n        return new ReactNativeInfo();\n    }\n    if (typeof navigator !== 'undefined') {\n        return parseUserAgent(navigator.userAgent);\n    }\n    return getNodeVersion();\n}\nfunction matchUserAgent(ua) {\n    // opted for using reduce here rather than Array#first with a regex.test call\n    // this is primarily because using the reduce we only perform the regex\n    // execution once rather than once for the test and for the exec again below\n    // probably something that needs to be benchmarked though\n    return (ua !== '' &&\n        userAgentRules.reduce(function (matched, _a) {\n            var browser = _a[0], regex = _a[1];\n            if (matched) {\n                return matched;\n            }\n            var uaMatch = regex.exec(ua);\n            return !!uaMatch && [browser, uaMatch];\n        }, false));\n}\nexport function browserName(ua) {\n    var data = matchUserAgent(ua);\n    return data ? data[0] : null;\n}\nexport function parseUserAgent(ua) {\n    var matchedRule = matchUserAgent(ua);\n    if (!matchedRule) {\n        return null;\n    }\n    var name = matchedRule[0], match = matchedRule[1];\n    if (name === 'searchbot') {\n        return new BotInfo();\n    }\n    // Do not use RegExp for split operation as some browser do not support it (See: http://blog.stevenlevithan.com/archives/cross-browser-split)\n    var versionParts = match[1] && match[1].split('.').join('_').split('_').slice(0, 3);\n    if (versionParts) {\n        if (versionParts.length < REQUIRED_VERSION_PARTS) {\n            versionParts = __spreadArray(__spreadArray([], versionParts, true), createVersionParts(REQUIRED_VERSION_PARTS - versionParts.length), true);\n        }\n    }\n    else {\n        versionParts = [];\n    }\n    var version = versionParts.join('.');\n    var os = detectOS(ua);\n    var searchBotMatch = SEARCHBOT_OS_REGEX.exec(ua);\n    if (searchBotMatch && searchBotMatch[1]) {\n        return new SearchBotDeviceInfo(name, version, os, searchBotMatch[1]);\n    }\n    return new BrowserInfo(name, version, os);\n}\nexport function detectOS(ua) {\n    for (var ii = 0, count = operatingSystemRules.length; ii < count; ii++) {\n        var _a = operatingSystemRules[ii], os = _a[0], regex = _a[1];\n        var match = regex.exec(ua);\n        if (match) {\n            return os;\n        }\n    }\n    return null;\n}\nexport function getNodeVersion() {\n    var isNode = typeof process !== 'undefined' && process.version;\n    return isNode ? new NodeInfo(process.version.slice(1)) : null;\n}\nfunction createVersionParts(count) {\n    var output = [];\n    for (var ii = 0; ii < count; ii++) {\n        output.push('0');\n    }\n    return output;\n}\n","import { detect } from 'detect-browser';\nexport var SUPPORTED_FIREFOX_VERSION = 57;\nexport var SUPPORTED_CHROME_VERSION = 64;\nexport var SUPPORTED_EDGE_VERSION = 16;\n/**\n * @internal\n */\nexport function getUnsupportedBrowserError() {\n    var info = detect();\n    if (!info || !info.version) {\n        return 'browser cannot be detected';\n    }\n    var prefix = \"unsupported browser detected:\";\n    switch (info.name) {\n        case 'firefox':\n            var fVersion = Number.parseInt(info.version.slice(0, info.version.indexOf('.')), 10);\n            if (fVersion <= SUPPORTED_FIREFOX_VERSION && fVersion !== 52) {\n                // ESR\n                return \"\".concat(prefix, \" Firefox \").concat(info.version, \" (&lt; \").concat(SUPPORTED_FIREFOX_VERSION, \")\");\n            }\n            return null;\n        case 'edge':\n            var eVersion = Number.parseInt(info.version.slice(0, info.version.indexOf('.')), 10);\n            if (eVersion <= SUPPORTED_EDGE_VERSION) {\n                return \"\".concat(prefix, \" Edge \").concat(info.version, \" (&lt; \").concat(SUPPORTED_EDGE_VERSION, \")\");\n            }\n            return null;\n        case 'chrome':\n            var cVersion = Number.parseInt(info.version.slice(0, info.version.indexOf('.')), 10);\n            if (cVersion <= SUPPORTED_CHROME_VERSION) {\n                return \"\".concat(prefix, \" Chrome \").concat(info.version, \" (&lt; \").concat(SUPPORTED_CHROME_VERSION, \")\");\n            }\n            return null;\n        case 'ie':\n            return \"\".concat(prefix, \" Internet Explorer\");\n    }\n    console.warn('unknown browser detected', info, 'assuming fine...');\n    return null;\n}\n/**\n * checks whether the current browser is compatible with lineupjs\n * @return boolean\n */\nexport function isBrowserSupported() {\n    return getUnsupportedBrowserError() == null;\n}\n//# sourceMappingURL=browser.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { cssClass } from '../../styles';\nimport { AEventDispatcher } from '../../internal';\nvar DialogManager = /** @class */ (function (_super) {\n    __extends(DialogManager, _super);\n    function DialogManager(options) {\n        var _this = _super.call(this) || this;\n        _this.escKeyListener = function (evt) {\n            if (evt.which === 27) {\n                _this.removeLast();\n            }\n        };\n        _this.openDialogs = [];\n        var doc = options.doc;\n        _this.livePreviews = options.livePreviews;\n        _this.onDialogBackgroundClick = options.onDialogBackgroundClick;\n        _this.node = doc.createElement('div');\n        _this.node.classList.add(cssClass('backdrop'));\n        var backdrop = doc.createElement('div');\n        backdrop.classList.add(cssClass('backdrop-bg'));\n        _this.node.appendChild(backdrop);\n        _this.node.onclick = function () {\n            _this.removeAll();\n        };\n        return _this;\n    }\n    DialogManager.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([DialogManager.EVENT_DIALOG_CLOSED, DialogManager.EVENT_DIALOG_OPENED]);\n    };\n    DialogManager.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    Object.defineProperty(DialogManager.prototype, \"maxLevel\", {\n        get: function () {\n            return this.openDialogs.reduce(function (acc, a) { return Math.max(acc, a.level); }, 0);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DialogManager.prototype.setHighlight = function (mask) {\n        var area = this.node.firstElementChild;\n        // @see https://bennettfeely.com/clippy/ -> select `Frame` example\n        // use webkit prefix for safari\n        area.style.clipPath = area.style.webkitClipPath = \"polygon(\\n      0% 0%,\\n      0% 100%,\\n      \".concat(mask.left, \"px 100%,\\n      \").concat(mask.left, \"px \").concat(mask.top, \"px,\\n      \").concat(mask.left + mask.width, \"px \").concat(mask.top, \"px,\\n      \").concat(mask.left + mask.width, \"px \").concat(mask.top + mask.height, \"px,\\n      \").concat(mask.left, \"px \").concat(mask.top + mask.height, \"px,\\n      \").concat(mask.left, \"px 100%,\\n      100% 100%,\\n      100% 0%\\n    )\");\n    };\n    DialogManager.prototype.setHighlightColumn = function (column) {\n        var root = this.node.parentElement;\n        if (!root) {\n            this.clearHighlight();\n            return;\n        }\n        var header = root.querySelector(\".\".concat(cssClass('header'), \"[data-col-id=\\\"\").concat(column.id, \"\\\"]\"));\n        if (!header) {\n            this.clearHighlight();\n            return;\n        }\n        var base = header.getBoundingClientRect();\n        var offset = root.getBoundingClientRect();\n        this.setHighlight({\n            left: base.left - offset.left,\n            top: base.top - offset.top,\n            width: base.width,\n            height: offset.height,\n        });\n    };\n    DialogManager.prototype.clearHighlight = function () {\n        var area = this.node.firstElementChild;\n        area.style.clipPath = null;\n    };\n    DialogManager.prototype.removeLast = function () {\n        if (this.openDialogs.length === 0) {\n            return;\n        }\n        this.remove(this.openDialogs[this.openDialogs.length - 1]);\n    };\n    DialogManager.prototype.removeAll = function () {\n        var _this = this;\n        if (this.openDialogs.length === 0) {\n            return;\n        }\n        var all = this.openDialogs.splice(0, this.openDialogs.length);\n        all.reverse().forEach(function (d) { return d.cleanUp(_this.onDialogBackgroundClick); });\n        this.takeDown();\n    };\n    DialogManager.prototype.triggerDialogClosed = function (dialog, action) {\n        this.fire(DialogManager.EVENT_DIALOG_CLOSED, dialog, action);\n    };\n    DialogManager.prototype.remove = function (dialog, handled) {\n        var _this = this;\n        if (handled === void 0) { handled = false; }\n        var index = this.openDialogs.indexOf(dialog);\n        if (index < 0) {\n            return false;\n        }\n        // destroy self and all levels below that = after that\n        var destroyed = this.openDialogs.splice(index, this.openDialogs.length - index);\n        destroyed.reverse().forEach(function (d) { return d.cleanUp(handled ? 'handled' : _this.onDialogBackgroundClick); });\n        while (handled && this.openDialogs.length > 0 && this.openDialogs[this.openDialogs.length - 1].autoClose) {\n            var dialog_1 = this.openDialogs.pop();\n            dialog_1.cleanUp(this.onDialogBackgroundClick);\n        }\n        if (this.openDialogs.length === 0) {\n            this.takeDown();\n        }\n        return true;\n    };\n    DialogManager.prototype.removeAboveLevel = function (level) {\n        var _this = this;\n        // hide all dialogs which have a higher or equal level to the newly opened one\n        this.openDialogs\n            .filter(function (d) { return d.level >= level; })\n            .reverse()\n            .forEach(function (d) { return _this.remove(d); });\n    };\n    DialogManager.prototype.removeLike = function (dialog) {\n        var similar = this.openDialogs.find(function (d) { return dialog.equals(d); });\n        if (!similar) {\n            return false;\n        }\n        this.remove(similar);\n        return true;\n    };\n    DialogManager.prototype.setUp = function () {\n        this.node.ownerDocument.addEventListener('keyup', this.escKeyListener, {\n            passive: true,\n        });\n        this.node.style.display = 'block';\n    };\n    DialogManager.prototype.takeDown = function () {\n        this.clearHighlight();\n        this.node.ownerDocument.removeEventListener('keyup', this.escKeyListener);\n        this.node.style.display = null;\n    };\n    DialogManager.prototype.push = function (dialog) {\n        this.removeAboveLevel(dialog.level);\n        if (this.openDialogs.length === 0) {\n            this.setUp();\n        }\n        this.openDialogs.push(dialog);\n        this.fire(DialogManager.EVENT_DIALOG_OPENED, dialog);\n    };\n    DialogManager.EVENT_DIALOG_OPENED = 'dialogOpened';\n    DialogManager.EVENT_DIALOG_CLOSED = 'dialogClosed';\n    return DialogManager;\n}(AEventDispatcher));\nexport default DialogManager;\n//# sourceMappingURL=DialogManager.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { getUnsupportedBrowserError, SUPPORTED_CHROME_VERSION, SUPPORTED_EDGE_VERSION, SUPPORTED_FIREFOX_VERSION, } from '../browser';\nimport { AEventDispatcher, clear } from '../internal';\nimport { DataProvider } from '../provider';\nimport { cssClass } from '../styles';\nimport DialogManager from './dialogs/DialogManager';\nimport { isPromiseLike } from '../provider/utils';\nvar ALineUp = /** @class */ (function (_super) {\n    __extends(ALineUp, _super);\n    function ALineUp(node, _data, ignoreIncompatibleBrowser) {\n        var _this = _super.call(this) || this;\n        _this.node = node;\n        _this._data = _data;\n        _this.highlightListeners = 0;\n        var error = getUnsupportedBrowserError();\n        _this.isBrowserSupported = ignoreIncompatibleBrowser || !error;\n        if (!_this.isBrowserSupported) {\n            _this.node.classList.add(cssClass('unsupported-browser'));\n            _this.node.innerHTML = \"<span>\".concat(error, \"</span>\\n      <div class=\\\"\").concat(cssClass('unsupported-browser'), \"\\\">\\n        <a href=\\\"https://www.mozilla.org/en-US/firefox/\\\" rel=\\\"noopener\\\" target=\\\"_blank\\\" data-browser=\\\"firefox\\\" data-version=\\\"\").concat(SUPPORTED_FIREFOX_VERSION, \"\\\"></a>\\n        <a href=\\\"https://www.google.com/chrome/index.html\\\" rel=\\\"noopener\\\" target=\\\"_blank\\\" data-browser=\\\"chrome\\\" data-version=\\\"\").concat(SUPPORTED_CHROME_VERSION, \"\\\" title=\\\"best support\\\"></a>\\n        <a href=\\\"https://www.microsoft.com/en-us/windows/microsoft-edge\\\" rel=\\\"noopener\\\" target=\\\"_blank\\\" data-browser=\\\"edge\\\" data-version=\\\"\").concat(SUPPORTED_EDGE_VERSION, \"\\\"></a>\\n      </div><span>use the <code>ignoreUnsupportedBrowser=true</code> option to ignore this error at your own risk</span>\");\n        }\n        _this.forward(_data, \"\".concat(DataProvider.EVENT_SELECTION_CHANGED, \".main\"));\n        _data.on(\"\".concat(DataProvider.EVENT_BUSY, \".busy\"), function (busy) { return _this.node.classList.toggle(cssClass('busy'), busy); });\n        return _this;\n    }\n    ALineUp.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([\n            ALineUp.EVENT_HIGHLIGHT_CHANGED,\n            ALineUp.EVENT_SELECTION_CHANGED,\n            ALineUp.EVENT_DIALOG_OPENED,\n            ALineUp.EVENT_DIALOG_CLOSED,\n        ]);\n    };\n    ALineUp.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    Object.defineProperty(ALineUp.prototype, \"data\", {\n        get: function () {\n            return this._data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ALineUp.prototype.destroy = function () {\n        // just clear since we hand in the node itself\n        clear(this.node);\n        this._data.destroy();\n    };\n    ALineUp.prototype.dump = function () {\n        return this.data.dump();\n    };\n    ALineUp.prototype.restore = function (dump) {\n        this._data.restore(dump);\n    };\n    ALineUp.prototype.setDataProvider = function (data, dump) {\n        var _this = this;\n        if (this._data) {\n            this.unforward(this._data, \"\".concat(DataProvider.EVENT_SELECTION_CHANGED, \".taggle\"));\n            this._data.on(\"\".concat(DataProvider.EVENT_BUSY, \".busy\"), null);\n        }\n        this._data = data;\n        if (dump) {\n            data.restore(dump);\n        }\n        this.forward(data, \"\".concat(DataProvider.EVENT_SELECTION_CHANGED, \".taggle\"));\n        data.on(\"\".concat(DataProvider.EVENT_BUSY, \".busy\"), function (busy) { return _this.node.classList.toggle(cssClass('busy'), busy); });\n    };\n    ALineUp.prototype.getSelection = function () {\n        return this._data.getSelection();\n    };\n    ALineUp.prototype.setSelection = function (dataIndices) {\n        this._data.setSelection(dataIndices);\n    };\n    /**\n     * sorts LineUp by he given column\n     * @param column callback function finding the column to sort\n     * @param ascending\n     * @returns {boolean}\n     */\n    ALineUp.prototype.sortBy = function (column, ascending) {\n        if (ascending === void 0) { ascending = false; }\n        var col = this.data.find(column);\n        if (col) {\n            col.sortByMe(ascending);\n        }\n        return col != null;\n    };\n    ALineUp.prototype.listenersChanged = function (type, enabled) {\n        _super.prototype.listenersChanged.call(this, type, enabled);\n        if (!type.startsWith(ALineUp.EVENT_HIGHLIGHT_CHANGED)) {\n            return;\n        }\n        if (enabled) {\n            this.highlightListeners++;\n            if (this.highlightListeners === 1) {\n                // first\n                this.enableHighlightListening(true);\n            }\n        }\n        else {\n            this.highlightListeners -= 1;\n            if (this.highlightListeners === 0) {\n                // last\n                this.enableHighlightListening(false);\n            }\n        }\n    };\n    ALineUp.prototype.enableHighlightListening = function (_enable) {\n        // hook\n    };\n    ALineUp.prototype.addCopyListener = function () {\n        var _this = this;\n        this.node.addEventListener('copy', function (e) {\n            if (!_this.data || !_this.data.getFirstRanking()) {\n                return;\n            }\n            var selections = _this.data.getSelection();\n            var data;\n            if (selections.length === 0) {\n                // copy all\n                data = _this.data.exportTable(_this.data.getFirstRanking());\n            }\n            else {\n                // copy subset\n                data = _this.data.exportSelection();\n            }\n            e.preventDefault();\n            if (isPromiseLike(data)) {\n                data.then(function (csv) {\n                    e.clipboardData.setData('text/plain', csv);\n                    e.clipboardData.setData('text/tsv', csv);\n                });\n            }\n            else {\n                e.clipboardData.setData('text/plain', data);\n                e.clipboardData.setData('text/tsv', data);\n            }\n        });\n    };\n    ALineUp.EVENT_SELECTION_CHANGED = DataProvider.EVENT_SELECTION_CHANGED;\n    ALineUp.EVENT_DIALOG_OPENED = DialogManager.EVENT_DIALOG_OPENED;\n    ALineUp.EVENT_DIALOG_CLOSED = DialogManager.EVENT_DIALOG_CLOSED;\n    ALineUp.EVENT_HIGHLIGHT_CHANGED = 'highlightChanged';\n    return ALineUp;\n}(AEventDispatcher));\nexport { ALineUp };\nexport default ALineUp;\n//# sourceMappingURL=ALineUp.js.map","export { default as KeyFinder } from './KeyFinder';\n/**\n * different row animation modes\n */\nexport var EAnimationMode;\n(function (EAnimationMode) {\n    /**\n     * plain update existed both before and after\n     */\n    EAnimationMode[EAnimationMode[\"UPDATE\"] = 0] = \"UPDATE\";\n    /**\n     * exists both before and after but wasn't visible yet thus was created\n     */\n    EAnimationMode[EAnimationMode[\"UPDATE_CREATE\"] = 1] = \"UPDATE_CREATE\";\n    /**\n     * exists both before and after is visible but not needed anymore and thus removed\n     */\n    EAnimationMode[EAnimationMode[\"UPDATE_REMOVE\"] = 2] = \"UPDATE_REMOVE\";\n    /**\n     * row appears\n     */\n    EAnimationMode[EAnimationMode[\"SHOW\"] = 3] = \"SHOW\";\n    /**\n     * row disappears\n     */\n    EAnimationMode[EAnimationMode[\"HIDE\"] = 4] = \"HIDE\";\n})(EAnimationMode || (EAnimationMode = {}));\nvar NO_CHANGE_DELTA = 1;\nexport function noAnimationChange(_a, previousHeight, currentHeight) {\n    var previous = _a.previous, mode = _a.mode, nodeY = _a.nodeY, current = _a.current;\n    // sounds like the same\n    var prev = previous.height == null ? previousHeight : previous.height;\n    var curr = current.height == null ? currentHeight : current.height;\n    return (mode === EAnimationMode.UPDATE &&\n        Math.abs(previous.y - nodeY) <= NO_CHANGE_DELTA &&\n        Math.abs(prev - curr) <= NO_CHANGE_DELTA);\n}\n/**\n * maximal duration of all animations + extra waiting before e.g. rows are really removed\n * @type {number}\n */\nvar MAX_ANIMATION_TIME = 1100;\nexport var defaultPhases = [\n    {\n        delay: 0,\n        apply: function (_a) {\n            var mode = _a.mode, previous = _a.previous, nodeY = _a.nodeY, current = _a.current, node = _a.node;\n            var actNode = node;\n            actNode.dataset.animation = EAnimationMode[mode].toLowerCase();\n            actNode.style.transform = \"translate(0, \" + (previous.y - nodeY) + \"px)\";\n            if (mode === EAnimationMode.SHOW) {\n                // already target height\n                actNode.style.height = current.height !== null ? current.height + \"px\" : '';\n            }\n            else {\n                // always set previous height for default height changes\n                actNode.style.height = previous.height + \"px\";\n            }\n            if (mode === EAnimationMode.SHOW) {\n                actNode.style.opacity = '0';\n            }\n            else if (mode === EAnimationMode.HIDE) {\n                actNode.style.opacity = '1';\n            }\n            else {\n                actNode.style.opacity = '';\n            }\n        },\n    },\n    {\n        delay: 10,\n        apply: function (_a) {\n            var mode = _a.mode, current = _a.current, nodeY = _a.nodeY, node = _a.node;\n            var actNode = node;\n            // null for added/update since already at the right position\n            actNode.style.transform =\n                mode === EAnimationMode.HIDE || mode === EAnimationMode.UPDATE_REMOVE\n                    ? \"translate(0, \" + (current.y - nodeY) + \"px)\"\n                    : '';\n            if (mode !== EAnimationMode.HIDE) {\n                // keep height for removal\n                actNode.style.height = current.height !== null ? current.height + \"px\" : '';\n            }\n            if (mode === EAnimationMode.SHOW) {\n                actNode.style.opacity = '1';\n            }\n            else if (mode === EAnimationMode.HIDE) {\n                actNode.style.opacity = '0';\n            }\n            else {\n                actNode.style.opacity = '';\n            }\n        },\n    },\n    {\n        delay: MAX_ANIMATION_TIME,\n        apply: function (_a) {\n            var node = _a.node;\n            var actNode = node;\n            delete actNode.dataset.animation;\n            actNode.style.opacity = '';\n            actNode.style.transform = '';\n        },\n    },\n];\n//# sourceMappingURL=index.js.map","/**\n * utility class for optimized row context access\n */\nvar KeyFinder = /** @class */ (function () {\n    /**\n     * constructor for fast key based row access\n     * @param {IExceptionContext} context context to use\n     * @param {(rowIndex: number) => string} key key function\n     */\n    function KeyFinder(context, key) {\n        var _this = this;\n        this.context = context;\n        this.key = key;\n        this.cache = [];\n        this.lastFilled = 0;\n        this.key2index = new Map();\n        this.context.exceptions.forEach(function (e) {\n            _this.cache[e.index] = e.y;\n            _this.key2index.set(key(e.index), e.index);\n        });\n    }\n    KeyFinder.prototype.findValidStart = function (before) {\n        for (var i = before - 1; i >= 0; i -= 1) {\n            if (this.cache[i] !== undefined) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * returns the position of the given given or -1 if not found\n     * @param {string} key\n     */\n    KeyFinder.prototype.posByKey = function (key) {\n        var index = this.key2index.get(key);\n        if (index != null) {\n            return { index: index, pos: this.pos(index) };\n        }\n        return this.fillCacheTillKey(key);\n    };\n    /**\n     * returns the position of the given index\n     * @param {number} index index to look for\n     */\n    KeyFinder.prototype.pos = function (index) {\n        if (this.context.exceptions.length === 0) {\n            // fast pass\n            return index * this.context.defaultRowHeight;\n        }\n        var cached = this.cache[index];\n        if (cached !== undefined) {\n            return cached;\n        }\n        // need to compute it\n        // find the starting point where to start counting\n        var start = this.findValidStart(index);\n        if (start < 0) {\n            this.fillCache(0, index, 0);\n        }\n        else {\n            this.fillCache(start + 1, index, this.cache[start] + this.heightOf(start));\n        }\n        return this.cache[index];\n    };\n    KeyFinder.prototype.fillCache = function (first, last, offset, callback) {\n        if (last <= this.lastFilled) {\n            // everything already there\n            if (!callback) {\n                return;\n            }\n            for (var i = first; i <= last; i += 1) {\n                callback(i, this.key(i), this.cache[i]);\n            }\n            return;\n        }\n        var pos = offset;\n        for (var i = first; i <= last; i += 1) {\n            this.cache[i] = pos;\n            var key = this.key(i);\n            this.key2index.set(key, i);\n            if (callback) {\n                callback(i, key, pos);\n            }\n            pos += this.heightOf(i);\n        }\n    };\n    /**\n     * returns the height of the row identified by index\n     * @param {number} index\n     */\n    KeyFinder.prototype.heightOf = function (index) {\n        var _a;\n        var lookup = this.context.exceptionsLookup;\n        return (_a = lookup.get(index)) !== null && _a !== void 0 ? _a : this.context.defaultRowHeight;\n    };\n    KeyFinder.prototype.exceptionHeightOf = function (index, returnDefault) {\n        if (returnDefault === void 0) { returnDefault = false; }\n        var padding = this.context.padding(index);\n        var lookup = this.context.exceptionsLookup;\n        var entry = lookup.get(index);\n        if (entry != null) {\n            return entry - padding;\n        }\n        return returnDefault ? this.context.defaultRowHeight - padding : null;\n    };\n    /**\n     * padding of the given index\n     * @param {number} index\n     * @returns {number}\n     */\n    KeyFinder.prototype.padding = function (index) {\n        return this.context.padding(index);\n    };\n    KeyFinder.prototype.fillCacheTillKey = function (target) {\n        var pos = 0;\n        for (var i = this.lastFilled; i < this.context.numberOfRows; i += 1, this.lastFilled += 1) {\n            var c = this.cache[i];\n            if (c !== undefined) {\n                pos = c + this.heightOf(i);\n                continue;\n            }\n            // new one fill up\n            var key = this.key(i);\n            this.cache[i] = pos;\n            this.key2index.set(key, i);\n            if (key === target) {\n                return { index: i, pos: pos };\n            }\n            pos += this.heightOf(i);\n        }\n        return { index: -1, pos: -1 };\n    };\n    /**\n     * computes the positions and keys for a range of given indices\n     * @param {number} first first row index\n     * @param {number} last last row index\n     * @param {number} offset pos offset for the first row index\n     * @param {(index: number, key: string, pos: number) => void} callback callback for each identified index\n     */\n    KeyFinder.prototype.positions = function (first, last, offset, callback) {\n        this.fillCache(first, last, offset, callback);\n    };\n    return KeyFinder;\n}());\nexport default KeyFinder;\n//# sourceMappingURL=KeyFinder.js.map","export var defaultMode = 'animation'; // Boolean((<any>window).chrome) ? 'animation' : 0, // animation frame on chrome;\nfunction dummy() {\n    return {\n        handler: [],\n        prev: null,\n        timer: -1,\n    };\n}\nvar ScrollHandler = /** @class */ (function () {\n    function ScrollHandler(node) {\n        // this.current = this.asInfo();\n        var _this = this;\n        this.node = node;\n        this.sync = dummy();\n        this.animation = dummy();\n        this.numbers = new Map();\n        this.handleAnimationImpl = function () {\n            if (_this.animation.timer !== 1) {\n                return;\n            }\n            _this.handle(_this.animation);\n            _this.animation.timer = -1;\n        };\n        node.addEventListener('scroll', function () {\n            // this.current = this.asInfo();\n            // if (this.prev && (Math.abs(this.current.left - this.prev.left) + Math.abs(this.current.top - this.prev.top)) < 4) {\n            //   return;\n            // }\n            // this.prev = this.current;\n            if (_this.sync.handler.length > 0) {\n                _this.handle(_this.sync);\n            }\n            _this.handleAnimation();\n            _this.handleTimeouts();\n        }, {\n            passive: true,\n        });\n    }\n    Object.defineProperty(ScrollHandler.prototype, \"current\", {\n        // current: IScrollInfo;\n        // private prev: IScrollInfo | null = null;\n        get: function () {\n            return this.asInfo();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ScrollHandler.prototype.handle = function (handler) {\n        var info = this.current;\n        if (handler.prev && Math.abs(info.left - handler.prev.left) + Math.abs(info.top - handler.prev.top) < 4) {\n            return;\n        }\n        // eslint-disable-next-line no-param-reassign\n        handler.prev = info;\n        for (var _i = 0, _a = handler.handler; _i < _a.length; _i++) {\n            var s = _a[_i];\n            s(info);\n        }\n    };\n    ScrollHandler.prototype.handleAnimation = function () {\n        if (this.animation.timer !== -1 || this.animation.handler.length === 0) {\n            return;\n        }\n        this.animation.timer = 1;\n        requestAnimationFrame(this.handleAnimationImpl);\n    };\n    ScrollHandler.prototype.handleTimeouts = function () {\n        var _this = this;\n        if (this.numbers.size === 0) {\n            return;\n        }\n        this.numbers.forEach(function (handler, n) {\n            if (handler.handler.length === 0) {\n                return;\n            }\n            // eslint-disable-next-line no-param-reassign, no-restricted-globals\n            handler.timer = self.setTimeout(function () {\n                _this.handle(handler);\n                // eslint-disable-next-line no-param-reassign\n                handler.timer = -1;\n            }, n);\n        });\n    };\n    ScrollHandler.prototype.asInfo = function () {\n        return {\n            left: this.node.scrollLeft,\n            top: this.node.scrollTop,\n            width: this.node.clientWidth,\n            height: this.node.clientHeight,\n        };\n    };\n    ScrollHandler.prototype.push = function (mode, handler) {\n        var _a;\n        if (typeof mode === 'number') {\n            var entry = (_a = this.numbers.get(mode)) !== null && _a !== void 0 ? _a : dummy();\n            entry.handler.push(handler);\n            this.numbers.set(mode, entry);\n        }\n        switch (mode) {\n            case 'sync':\n                this.sync.handler.push(handler);\n                break;\n            case 'animation':\n                this.animation.handler.push(handler);\n                break;\n        }\n    };\n    ScrollHandler.prototype.remove = function (handler) {\n        var test = [this.sync, this.animation].concat(Array.from(this.numbers.values()));\n        return test.some(function (d) {\n            var index = d.handler.indexOf(handler);\n            if (index >= 0) {\n                d.handler.splice(index, 1);\n            }\n            return index >= 0;\n        });\n    };\n    ScrollHandler.prototype.isWaiting = function (mode) {\n        var _a, _b;\n        switch (mode) {\n            case 'animation':\n                return this.animation.timer >= 0;\n            case 'sync':\n                return false;\n            default:\n                return ((_b = (_a = this.numbers.get(mode)) === null || _a === void 0 ? void 0 : _a.timer) !== null && _b !== void 0 ? _b : -1) >= 0;\n        }\n    };\n    return ScrollHandler;\n}());\n/**\n * @internal\n */\nexport function addScroll(scrollElement, mode, handler) {\n    // hide in element to have just one real listener\n    var c = scrollElement;\n    if (!c.__le_scroller__) {\n        c.__le_scroller__ = new ScrollHandler(scrollElement);\n    }\n    var s = c.__le_scroller__;\n    s.push(mode, handler);\n    return s.asInfo();\n}\n/**\n * @internal\n */\nexport function isScrollEventWaiting(scroller, mode) {\n    var c = scroller;\n    if (!c.__le_scroller__) {\n        return false;\n    }\n    var s = c.__le_scroller__;\n    return s.isWaiting(mode);\n}\n/**\n * @internal\n */\nexport function removeScroll(scroller, handler) {\n    var c = scroller;\n    if (c.__le_scroller__) {\n        c.__le_scroller__.remove(handler);\n    }\n}\n//# sourceMappingURL=scroll.js.map","export * from './scroll';\n/**\n * clear node clearing\n * @param node\n * @internal\n */\nexport function clear(node) {\n    while (node.lastChild) {\n        node.removeChild(node.lastChild);\n    }\n    return node;\n}\n//# sourceMappingURL=index.js.map","var RowHeightException = /** @class */ (function () {\n    function RowHeightException(index, y, height) {\n        this.index = index;\n        this.y = y;\n        this.height = height;\n    }\n    Object.defineProperty(RowHeightException.prototype, \"y2\", {\n        get: function () {\n            return this.y + this.height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return RowHeightException;\n}());\n/**\n * creates a uniform exception context, i.e no exceptions all rows are of the same height\n * @param {number} numberOfRows\n * @param {number} currentRowHeight\n * @param {number} rowPadding padding between rows\n * @return {IExceptionContext}\n */\nexport function uniformContext(numberOfRows, rowHeight, rowPadding) {\n    if (rowPadding === void 0) { rowPadding = 0; }\n    var currentRowHeight = rowHeight + rowPadding;\n    var exceptionsLookup = {\n        keys: function () { return [].values(); },\n        get: function () { return currentRowHeight; },\n        has: function () { return false; },\n        size: 0,\n    };\n    return {\n        exceptions: [],\n        exceptionsLookup: exceptionsLookup,\n        totalHeight: numberOfRows * currentRowHeight,\n        numberOfRows: numberOfRows,\n        defaultRowHeight: currentRowHeight,\n        padding: function () { return rowPadding; },\n    };\n}\n/**\n * computes the most frequent value in a given array like\n * @param {} values\n * @return {number}\n */\nfunction mostFrequentValue(values) {\n    var lookup = new Map();\n    values.forEach(function (value) {\n        lookup.set(value, (lookup.get(value) || 0) + 1);\n    });\n    if (lookup.size === 0) {\n        return 20; // default value since it doesn't matter\n    }\n    // sort desc take first key and asc by the second in case of tie, it is optimized to have exceptions for higher rows less for big rows\n    var sorted = Array.from(lookup).sort(function (a, b) {\n        if (a[1] !== b[1]) {\n            return b[1] - a[1];\n        }\n        return a[0] - b[0];\n    });\n    var mostFrequent = sorted[0][0];\n    if (mostFrequent === 0) {\n        // corner case\n        return sorted.length > 1 ? sorted[1][0] : 20; // all empty\n    }\n    return mostFrequent;\n}\n/**\n * creates a non uniform context based on the given array like heights\n * @param rowHeights array like to get the heights\n * @param {number} defaultRowHeight if not given the most frequent value will be used\n * @param {number} rowPadding padding between rows\n * @return {IExceptionContext}\n */\nexport function nonUniformContext(rowHeights, defaultRowHeight, rowPadding) {\n    if (defaultRowHeight === void 0) { defaultRowHeight = Number.NaN; }\n    if (rowPadding === void 0) { rowPadding = 0; }\n    var exceptionsLookup = new Map();\n    var exceptions = [];\n    var padding = typeof rowPadding === 'function' ? rowPadding : function () { return rowPadding; };\n    var actualDefaultRowHeight = defaultRowHeight;\n    if (Number.isNaN(actualDefaultRowHeight)) {\n        actualDefaultRowHeight = mostFrequentValue(rowHeights);\n    }\n    actualDefaultRowHeight += padding(-1);\n    var prev = -1;\n    var acc = 0;\n    var totalHeight = 0;\n    var numberOfRows = 0;\n    rowHeights.forEach(function (height, index) {\n        var paddedHeight = height + padding(index);\n        totalHeight += paddedHeight;\n        numberOfRows += 1;\n        if (paddedHeight === actualDefaultRowHeight) {\n            // regular\n            return;\n        }\n        exceptionsLookup.set(index, paddedHeight);\n        var between = (index - prev - 1) * actualDefaultRowHeight;\n        prev = index;\n        var y = acc + between;\n        acc = y + paddedHeight;\n        exceptions.push(new RowHeightException(index, y, paddedHeight));\n    });\n    return {\n        exceptionsLookup: exceptionsLookup,\n        exceptions: exceptions,\n        totalHeight: totalHeight,\n        defaultRowHeight: actualDefaultRowHeight,\n        numberOfRows: numberOfRows,\n        padding: padding,\n    };\n}\n/**\n * creates a random context with the given constraints\n * @param {number} numberOfRows\n * @param {number} defaultRowHeight\n * @param {number} minRowHeight\n * @param {number} maxRowHeight\n * @param {number} ratio around ratio percent will get a non uniform height\n * @param {number} seed random seed\n * @return {IExceptionContext}\n */\nexport function randomContext(numberOfRows, defaultRowHeight, minRowHeight, maxRowHeight, ratio, seed) {\n    if (minRowHeight === void 0) { minRowHeight = 2; }\n    if (maxRowHeight === void 0) { maxRowHeight = defaultRowHeight * 10; }\n    if (ratio === void 0) { ratio = 0.2; }\n    if (seed === void 0) { seed = Date.now(); }\n    var actSeed = seed;\n    var random = function () {\n        var x = Math.sin(actSeed) * 10000;\n        actSeed += 1;\n        return x - Math.floor(x);\n    };\n    var getter = function () {\n        var coin = random();\n        if (coin < ratio) {\n            // non uniform\n            return minRowHeight + Math.round(random() * (maxRowHeight - minRowHeight));\n        }\n        return defaultRowHeight;\n    };\n    var forEach = function (callback) {\n        for (var index = 0; index < numberOfRows; index += 1) {\n            callback(getter(), index);\n        }\n    };\n    return nonUniformContext({ forEach: forEach }, defaultRowHeight);\n}\n/**\n * computes the visible range\n * @param {number} scrollTop top scrolling\n * @param {number} clientHeight visible height\n * @param {number} rowHeight height of a row by default\n * @param {IRowHeightException[]} heightExceptions exceptions of this default height\n * @param {number} numberOfRows the number of rows\n * @return {IVisibleRange} the computed visible range\n */\nexport function range(scrollTop, clientHeight, rowHeight, heightExceptions, numberOfRows) {\n    if (numberOfRows === 0) {\n        return { first: 0, last: -1, firstRowPos: 0, endPos: 0 };\n    }\n    if (numberOfRows === 1) {\n        return {\n            first: 0,\n            last: 0,\n            firstRowPos: 0,\n            endPos: heightExceptions.length === 0 ? rowHeight : heightExceptions[0].y2,\n        };\n    }\n    var offset = scrollTop;\n    var offset2 = offset + clientHeight;\n    function indexOf(pos, indexShift) {\n        return Math.min(numberOfRows - 1, indexShift + Math.max(0, Math.floor(pos / rowHeight)));\n    }\n    function calc(offsetShift, indexShift) {\n        var shifted = offset - offsetShift;\n        var shifted2 = offset2 - offsetShift;\n        var first = indexOf(shifted, indexShift);\n        var last = indexOf(shifted2, indexShift);\n        var firstRowPos = offsetShift + (first - indexShift) * rowHeight;\n        var endPos = offsetShift + (last + 1 - indexShift) * rowHeight;\n        // if (!isGuess) {\n        //  console.log(first, '@', firstRowPos, last, '#', end, offset, offset2, firstRowPos <= offset, offset2 <= end);\n        // }\n        // console.assert(\n        //   !isGuess || !(firstRowPos > offset || (endPos < offset2 && last < numberOfRows - 1)),\n        //   'error',\n        //   isGuess,\n        //   firstRowPos,\n        //   endPos,\n        //   offset,\n        //   offset2,\n        //   indexShift,\n        //   offsetShift\n        // );\n        return { first: first, last: last, firstRowPos: firstRowPos, endPos: endPos };\n    }\n    var r = calc(0, 0);\n    if (heightExceptions.length === 0) {\n        // uniform\n        return r;\n    }\n    if (r.last < heightExceptions[0].index) {\n        // console.log('before the first exception = uniform with no shift');\n        // console.log(r.first, '@', r.firstRowPos, r.last, '#', r.end, offset, offset2, r.firstRowPos <= offset, offset2 <= r.end);\n        return r;\n    }\n    if (r.last === heightExceptions[0].index && heightExceptions[0].height > rowHeight) {\n        return Object.assign(r, { endPos: heightExceptions[0].y2 });\n    }\n    // the position where the exceptions ends\n    var lastPos = heightExceptions[heightExceptions.length - 1];\n    if (offset >= lastPos.y) {\n        var rest = calc(lastPos.y2, lastPos.index + 1);\n        if (offset < lastPos.y2) {\n            // include me\n            return Object.assign(rest, {\n                first: lastPos.index,\n                firstRowPos: lastPos.y,\n            });\n        }\n        return rest;\n    }\n    // we have some exceptions\n    var visible = [];\n    var closest = heightExceptions[0]; // closest before not in range\n    for (var _i = 0, heightExceptions_1 = heightExceptions; _i < heightExceptions_1.length; _i++) {\n        var item = heightExceptions_1[_i];\n        var y = item.y, y2 = item.y2;\n        if (y >= offset2) {\n            break;\n        }\n        if (y2 <= offset) {\n            closest = item;\n            continue;\n        }\n        visible.push(item);\n    }\n    if (visible.length === 0) {\n        // console.log('we are in the between some exceptions and none are visible');\n        return calc(closest.y2, closest.index + 1); // skip myself\n    }\n    {\n        // console.log('we show at least one exception');\n        var firstException = visible[0];\n        var lastException = visible[visible.length - 1];\n        var first = Math.max(0, firstException.index - Math.max(0, Math.ceil((firstException.y - offset) / rowHeight)));\n        var last = lastException.index;\n        if (offset2 >= lastException.y2) {\n            last = indexOf(offset2 - lastException.y2, lastException.index + 1);\n        }\n        var firstRowPos = firstException.y - (firstException.index - first) * rowHeight;\n        var endPos = lastException.y2 + (last - lastException.index) * rowHeight;\n        // console.log(first, '@', firstRowPos, last, '#', end, offset, offset2, firstRowPos <= offset, offset2 <= end);\n        // console.assert(\n        //   firstRowPos <= offset && (endPos >= offset2 || last === numberOfRows - 1),\n        //   'error',\n        //   firstRowPos,\n        //   endPos,\n        //   offset,\n        //   offset2,\n        //   firstException,\n        //   lastException\n        // );\n        return { first: first, last: last, firstRowPos: firstRowPos, endPos: endPos };\n    }\n}\nexport function frozenDelta(current, target) {\n    var currentLength = current.length;\n    var targetLength = target.length;\n    if (currentLength === 0) {\n        return { added: target, removed: [], common: 0 };\n    }\n    if (targetLength === 0) {\n        return { added: [], removed: current, common: 0 };\n    }\n    if (currentLength === targetLength) {\n        // since sorted and left increasing true\n        return { added: [], removed: [], common: currentLength };\n    }\n    var removed = current.slice(Math.min(targetLength, currentLength));\n    var added = target.slice(Math.min(targetLength, currentLength));\n    return { added: added, removed: removed, common: currentLength - removed.length };\n}\nexport function updateFrozen(old, columns, first) {\n    var oldLast = old.length === 0 ? 0 : old[old.length - 1] + 1;\n    var added = [];\n    var removed = [];\n    for (var i = old.length - 1; i >= 0; i -= 1) {\n        var index = old[i];\n        if (index >= first) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            removed.push(old.pop());\n        }\n        else {\n            // can stop since sorted and it will never happen again\n            break;\n        }\n    }\n    // added\n    for (var i = oldLast; i < first; i += 1) {\n        if (columns[i].frozen) {\n            added.push(i);\n            old.push(i);\n        }\n    }\n    return { target: old, added: added, removed: removed };\n}\n//# sourceMappingURL=logic.js.map","/**\n * scrolling result\n */\nexport var EScrollResult;\n(function (EScrollResult) {\n    /**\n     * nothing has changed\n     */\n    EScrollResult[EScrollResult[\"NONE\"] = 0] = \"NONE\";\n    /**\n     * all rows needed to be recreated\n     */\n    EScrollResult[EScrollResult[\"ALL\"] = 1] = \"ALL\";\n    /**\n     * unknown\n     */\n    EScrollResult[EScrollResult[\"SOME\"] = 2] = \"SOME\";\n    /**\n     * some rows are added at the bottom\n     */\n    EScrollResult[EScrollResult[\"SOME_BOTTOM\"] = 3] = \"SOME_BOTTOM\";\n    /**\n     * some rows are added at the top\n     */\n    EScrollResult[EScrollResult[\"SOME_TOP\"] = 4] = \"SOME_TOP\";\n})(EScrollResult || (EScrollResult = {}));\n//# sourceMappingURL=IMixin.js.map","var PREFIX = 'le';\n/**\n * @internal\n * @param suffix suffix to suffix\n */\nexport function cssClass(suffix) {\n    if (!suffix) {\n        return PREFIX;\n    }\n    return PREFIX + \"-\" + suffix;\n}\nexport var CSS_CLASS_LOADING = cssClass('loading');\nexport var CSS_CLASS_FROZEN = cssClass('frozen');\nexport var CSS_CLASS_HIDDEN = cssClass('hidden');\nexport var CSS_CLASS_MULTI = cssClass('multi');\nexport var CSS_CLASS_EVEN = cssClass('even');\nexport var CSS_CLASS_SHIFTED = cssClass('shifted');\nexport var CSS_CLASS_SCROLLBAR_TESTER = cssClass('scrollbar-tester');\nexport var CSS_CLASS_HEADER = cssClass('header');\nexport var CSS_CLASS_BODY = cssClass('body');\nexport var CSS_CLASS_FOOTER = cssClass('footer');\nexport var CSS_CLASS_THEAD = cssClass('thead');\nexport var CSS_CLASS_TBODY = cssClass('tbody');\nexport var CSS_CLASS_TR = cssClass('tr');\nexport var CSS_CLASS_TH = cssClass('th');\nexport var CSS_CLASS_TD = cssClass('td');\nexport var CSS_CLASS_SCROLLING = cssClass('scrolling');\nexport var CSS_CLASS_ROW_ANIMATION = cssClass('row-animation');\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { ABORTED, isAbortAble } from './abortAble';\nimport { defaultPhases, EAnimationMode, noAnimationChange, } from './animation';\nimport KeyFinder from './animation/KeyFinder';\nimport { addScroll, clear, defaultMode, removeScroll } from './internal';\nimport { isScrollEventWaiting } from './internal/scroll';\nimport { range } from './logic';\nimport { EScrollResult } from './mixin';\nimport { cssClass, CSS_CLASS_EVEN, CSS_CLASS_FOOTER, CSS_CLASS_LOADING, CSS_CLASS_ROW_ANIMATION, CSS_CLASS_SCROLLING, CSS_CLASS_TR, } from './styles';\nexport function isLoadingCell(node) {\n    return node.classList.contains(CSS_CLASS_LOADING);\n}\n/**\n * base class for creating a scalable table renderer based on rows\n */\nvar ARowRenderer = /** @class */ (function () {\n    function ARowRenderer(body, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        this.body = body;\n        this.pool = [];\n        this.loadingPool = [];\n        this.loading = new WeakMap();\n        /**\n         * currently visible slice\n         */\n        this.visible = {\n            first: 0,\n            forcedFirst: 0,\n            last: -1,\n            forcedLast: -1,\n        };\n        /**\n         * position of the first visible row in pixel\n         * @type {number}\n         */\n        this.visibleFirstRowPos = 0;\n        this.scrollListener = null;\n        this.lastScrollInfo = null;\n        this.abortAnimation = function () { return undefined; };\n        this.options = {\n            async: defaultMode,\n            minScrollDelta: 10,\n            mixins: [],\n            scrollingHint: false,\n            batchSize: 10,\n            striped: false,\n            viewportOversize: 200,\n        };\n        this.adapter = this.createAdapter();\n        Object.assign(this.options, options);\n        this.mixins = this.options.mixins.map(function (MixinClass) { return new MixinClass(_this.adapter); });\n        this.fragment = body.ownerDocument.createDocumentFragment();\n    }\n    /**\n     * register another mixin to this renderer\n     * @param {IMixinClass} MixinClass the mixin class to instantiate\n     * @param options optional constructor options\n     */\n    ARowRenderer.prototype.addMixin = function (MixinClass, options) {\n        this.mixins.push(new MixinClass(this.adapter, options));\n    };\n    ARowRenderer.prototype.createAdapter = function () {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var that = this;\n        return {\n            visible: this.visible,\n            addAtBeginning: function (from, to) { return _this.addAtBeginning(from, to); },\n            addAtBottom: this.addAtBottom.bind(this),\n            removeFromBeginning: function (from, to) { return _this.removeFromBeginning(from, to); },\n            removeFromBottom: this.removeFromBottom.bind(this),\n            updateOffset: this.updateOffset.bind(this),\n            isScrollEventWaiting: function () { return isScrollEventWaiting(_this.bodyScroller, _this.options.async); },\n            get visibleFirstRowPos() {\n                return that.visibleFirstRowPos;\n            },\n            get context() {\n                return that.context;\n            },\n            get scrollOffset() {\n                return that.lastScrollInfo ? that.lastScrollInfo.top : 0;\n            },\n            get scrollTotal() {\n                return that.lastScrollInfo ? that.lastScrollInfo.height : that.bodyScroller.clientHeight;\n            },\n        };\n    };\n    Object.defineProperty(ARowRenderer.prototype, \"bodyScroller\", {\n        /**\n         * get the scrolling container i.e. parent of the body element\n         * @returns {HTMLElement}\n         */\n        get: function () {\n            return this.body.parentElement;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ARowRenderer.prototype, \"bodySizer\", {\n        get: function () {\n            var parent = this.bodyScroller;\n            var sizer = Array.from(parent.children).find(function (d) { return d.tagName.toLowerCase() === 'footer'; });\n            if (sizer) {\n                return sizer;\n            }\n            var s = parent.ownerDocument.createElement('footer');\n            s.classList.add(CSS_CLASS_FOOTER, cssClass(\"footer-\" + this.idPrefix));\n            parent.insertBefore(s, parent.firstChild);\n            return s;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * initializes the table and register the onscroll listener\n     * @returns {void} nothing\n     */\n    ARowRenderer.prototype.init = function () {\n        var _this = this;\n        var scroller = this.bodyScroller;\n        var old = addScroll(scroller, this.options.async, (this.scrollListener = function (act) {\n            _this.lastScrollInfo = act;\n            if (Math.abs(old.top - act.top) < _this.options.minScrollDelta &&\n                Math.abs(old.height - act.height) < _this.options.minScrollDelta) {\n                return;\n            }\n            var isGoingDown = act.top > old.top;\n            old = act;\n            _this.onScrolledVertically(act.top, act.height, isGoingDown);\n            if (_this.options.scrollingHint) {\n                _this.body.classList.remove(CSS_CLASS_SCROLLING);\n            }\n        }));\n        if (this.options.scrollingHint) {\n            addScroll(scroller, 'animation', function () { return _this.body.classList.add(CSS_CLASS_SCROLLING); });\n        }\n        this.recreate();\n    };\n    /**\n     * destroys this renderer and unregisters all event listeners\n     */\n    ARowRenderer.prototype.destroy = function () {\n        if (this.scrollListener) {\n            removeScroll(this.bodyScroller, this.scrollListener);\n        }\n        this.body.remove();\n    };\n    ARowRenderer.cleanUp = function (item) {\n        // eslint-disable-next-line no-param-reassign\n        item.style.height = '';\n    };\n    ARowRenderer.prototype.select = function (index) {\n        var item = this.pool.pop();\n        var result;\n        if (item != null) {\n            result = this.updateRow(item, index);\n        }\n        else {\n            item = this.loadingPool.pop();\n            if (item != null) {\n                item.classList.remove(CSS_CLASS_LOADING);\n                result = this.createRow(item, index);\n            }\n            else {\n                item = this.body.ownerDocument.createElement('div');\n                item.classList.add(CSS_CLASS_TR, cssClass(\"tr-\" + this.idPrefix));\n                result = this.createRow(item, index);\n            }\n        }\n        item.dataset.index = String(index);\n        if (this.options.striped) {\n            item.classList.toggle(CSS_CLASS_EVEN, index % 2 === 0);\n        }\n        return { item: item, result: result };\n    };\n    ARowRenderer.prototype.selectProxy = function () {\n        var proxy = this.loadingPool.pop();\n        if (proxy == null) {\n            proxy = this.body.ownerDocument.createElement('div');\n            proxy.classList.add(CSS_CLASS_LOADING, CSS_CLASS_TR, cssClass(\"tr-\" + this.idPrefix));\n        }\n        return proxy;\n    };\n    ARowRenderer.prototype.recycle = function (item) {\n        ARowRenderer.cleanUp(item);\n        // check if the original dom element is still being manipulated\n        var abort = this.loading.get(item);\n        if (abort != null) {\n            abort.abort();\n        }\n        else {\n            this.pool.push(item);\n        }\n    };\n    ARowRenderer.prototype.proxy = function (item, result) {\n        var _this = this;\n        if (!isAbortAble(result)) {\n            return item;\n        }\n        var abort = result;\n        // lazy loading\n        var real = item;\n        var proxy = this.selectProxy();\n        // copy attributes\n        proxy.dataset.index = real.dataset.index;\n        proxy.style.height = real.style.height;\n        this.loading.set(proxy, abort);\n        abort.then(function (abortResult) {\n            if (abortResult === ABORTED) {\n                // aborted can recycle the real one\n                ARowRenderer.cleanUp(real);\n                _this.pool.push(real);\n            }\n            else {\n                // fully loaded\n                _this.body.replaceChild(real, proxy);\n            }\n            _this.loading.delete(proxy);\n            ARowRenderer.cleanUp(proxy);\n            _this.loadingPool.push(proxy);\n        }, function () {\n            // handle as aborted\n            // aborted can recycle the real one\n            ARowRenderer.cleanUp(real);\n            _this.pool.push(real);\n            _this.loading.delete(proxy);\n            ARowRenderer.cleanUp(proxy);\n            _this.loadingPool.push(proxy);\n        });\n        return proxy;\n    };\n    ARowRenderer.prototype.create = function (index) {\n        var _a = this.select(index), item = _a.item, result = _a.result;\n        var _b = this.context, ex = _b.exceptionsLookup, padding = _b.padding;\n        var exceptionHeight = ex.get(index);\n        if (exceptionHeight != null) {\n            item.style.height = exceptionHeight - padding(index) + \"px\";\n        }\n        return this.proxy(item, result);\n    };\n    ARowRenderer.prototype.removeAll = function (perform) {\n        if (perform === void 0) { perform = true; }\n        var b = this.body;\n        if (!perform) {\n            return Array.from(b.children);\n        }\n        var toRecycle = [];\n        while (b.lastElementChild) {\n            var i = b.lastElementChild;\n            b.removeChild(i);\n            this.recycle(i);\n            toRecycle.push(i);\n        }\n        return toRecycle;\n    };\n    /**\n     * triggers and visual update of all visible rows\n     */\n    ARowRenderer.prototype.update = function () {\n        var _this = this;\n        var first = this.visible.first;\n        var fragment = this.fragment;\n        var items = Array.from(this.body.children);\n        clear(this.body);\n        items.forEach(function (item, i) {\n            if (_this.loading.has(item)) {\n                // still loading\n                fragment.appendChild(item);\n                return;\n            }\n            var abort = _this.updateRow(item, i + first);\n            fragment.appendChild(_this.proxy(item, abort));\n        });\n        this.body.appendChild(fragment);\n    };\n    /**\n     * utility to execute a function for each visible row\n     * @param {(row: HTMLElement, rowIndex: number) => void} callback callback to execute\n     * @param {boolean} inPlace whether the DOM changes should be performed in place instead of in a fragment\n     */\n    ARowRenderer.prototype.forEachRow = function (callback, inPlace) {\n        var _this = this;\n        if (inPlace === void 0) { inPlace = false; }\n        var rows = Array.from(this.body.children);\n        var fragment = this.fragment;\n        if (!inPlace) {\n            clear(this.body);\n        }\n        rows.forEach(function (row, index) {\n            if (!isLoadingCell(row) && row.dataset.animation !== 'update_remove' && row.dataset.animation !== 'hide') {\n                // skip loading ones and temporary ones\n                callback(row, index + _this.visible.first);\n            }\n            if (!inPlace) {\n                fragment.appendChild(row);\n            }\n        });\n        if (!inPlace) {\n            this.body.appendChild(fragment);\n        }\n    };\n    ARowRenderer.prototype.removeFromBeginning = function (from, to, perform) {\n        if (perform === void 0) { perform = true; }\n        return this.remove(from, to, true, perform);\n    };\n    ARowRenderer.prototype.removeFromBottom = function (from, to, perform) {\n        if (perform === void 0) { perform = true; }\n        return this.remove(from, to, false, perform);\n    };\n    ARowRenderer.prototype.remove = function (from, to, fromBeginning, perform) {\n        if (perform === void 0) { perform = true; }\n        if (to < from) {\n            return [];\n        }\n        var b = this.body;\n        var toRecycle = [];\n        // console.log('remove', fromBeginning, (to - from) + 1, this.body.childElementCount - ((to - from) + 1));\n        var act = (fromBeginning ? b.firstChild : b.lastChild);\n        for (var i = from; i <= to; i += 1) {\n            var item = act;\n            act = (fromBeginning ? act.nextSibling : act.previousSibling);\n            if (perform) {\n                b.removeChild(item);\n                this.recycle(item);\n            }\n            toRecycle.push(item);\n        }\n        return toRecycle;\n    };\n    ARowRenderer.prototype.addAtBeginning = function (from, to, perform) {\n        if (perform === void 0) { perform = true; }\n        if (to < from) {\n            return null;\n        }\n        // console.log('add', (to - from) + 1, this.body.childElementCount + ((to - from) + 1));\n        var fragment = this.fragment;\n        if (from === to && perform) {\n            this.body.insertBefore(this.create(from), this.body.firstChild);\n            return null;\n        }\n        for (var i = from; i <= to; i += 1) {\n            fragment.appendChild(this.create(i));\n        }\n        if (perform) {\n            this.body.insertBefore(fragment, this.body.firstChild);\n        }\n        return fragment;\n    };\n    ARowRenderer.prototype.addAtBottom = function (from, to, perform) {\n        if (perform === void 0) { perform = true; }\n        if (to < from) {\n            return null;\n        }\n        // console.log('add_b', (to - from) + 1, this.body.childElementCount + ((to - from) + 1));\n        if (from === to && perform) {\n            this.body.appendChild(this.create(from));\n            return null;\n        }\n        var fragment = this.fragment;\n        for (var i = from; i <= to; i += 1) {\n            fragment.appendChild(this.create(i));\n        }\n        if (perform) {\n            this.body.appendChild(fragment);\n        }\n        return fragment;\n    };\n    ARowRenderer.prototype.updateOffset = function (firstRowPos) {\n        this.visibleFirstRowPos = firstRowPos;\n        this.updateSizer(firstRowPos);\n    };\n    ARowRenderer.prototype.updateSizer = function (firstRowPos) {\n        var totalHeight = this.context.totalHeight;\n        setTransform(this.body, 0, firstRowPos.toFixed(0));\n        setTransform(this.bodySizer, 0, Math.max(0, totalHeight - 1).toFixed(0));\n    };\n    /**\n     * removes all rows and recreates the table\n     * @param {IAnimationContext} ctx optional animation context to create a transition between the previous and the current tables\n     * @returns {void} nothing\n     */\n    ARowRenderer.prototype.recreate = function (ctx) {\n        this.abortAnimation();\n        if (ctx) {\n            return this.recreateAnimated(ctx);\n        }\n        return this.recreatePure();\n    };\n    ARowRenderer.prototype.recreatePure = function () {\n        var context = this.context;\n        var scroller = this.bodyScroller;\n        // update first to avoid resetting scrollTop\n        this.updateOffset(0);\n        this.removeAll();\n        this.clearPool();\n        var _a = range(scroller.scrollTop, scroller.clientHeight, context.defaultRowHeight, context.exceptions, context.numberOfRows), first = _a.first, last = _a.last, firstRowPos = _a.firstRowPos;\n        this.visible.first = first;\n        this.visible.forcedFirst = first;\n        this.visible.last = last;\n        this.visible.forcedLast = last;\n        if (first < 0) {\n            // empty\n            this.updateOffset(0);\n            return;\n        }\n        this.addAtBottom(first, last);\n        this.updateOffset(firstRowPos);\n    };\n    ARowRenderer.prototype.recreateAnimated = function (ctx) {\n        var _this = this;\n        var lookup = new Map();\n        var prev = new KeyFinder(ctx.previous, ctx.previousKey);\n        var cur = new KeyFinder(this.context, ctx.currentKey);\n        var next = range(this.bodyScroller.scrollTop, this.bodyScroller.clientHeight, cur.context.defaultRowHeight, cur.context.exceptions, cur.context.numberOfRows);\n        {\n            var rows_1 = Array.from(this.body.children);\n            var old = __assign({}, this.visible);\n            // store the current rows in a lookup and clear\n            clear(this.body);\n            prev.positions(old.first, Math.min(old.last, old.first + rows_1.length), this.visibleFirstRowPos, function (i, key, pos) {\n                var n = rows_1[i];\n                if (n) {\n                    // shouldn't happen that it is not there\n                    lookup.set(key, { n: n, pos: pos, i: i });\n                }\n                // else {\n                //  console.error(i, key, pos, rows);\n                // }\n            });\n        }\n        this.visible.first = next.first;\n        this.visible.forcedFirst = next.first;\n        this.visible.last = next.last;\n        this.visible.forcedLast = next.last;\n        var fragment = this.fragment;\n        var animation = [];\n        var nodeY = next.firstRowPos;\n        cur.positions(next.first, next.last, next.firstRowPos, function (i, key, pos) {\n            var node;\n            var mode = EAnimationMode.UPDATE;\n            var previous;\n            var item = lookup.get(key);\n            if (item != null) {\n                // still visible\n                lookup.delete(key);\n                // update height\n                item.n.dataset.index = String(i);\n                node = _this.proxy(item.n, _this.updateRow(item.n, i));\n                previous = {\n                    index: item.i,\n                    y: item.pos,\n                    height: prev.exceptionHeightOf(item.i, true),\n                };\n            }\n            else {\n                // need a new row\n                var old = prev.posByKey(key);\n                // maybe not visible  before so keep in place\n                node = _this.create(i);\n                mode = old.index < 0 ? EAnimationMode.SHOW : EAnimationMode.UPDATE_CREATE;\n                previous = {\n                    index: old.index,\n                    y: old.pos >= 0 ? old.pos : pos,\n                    height: old.index < 0 ? cur.exceptionHeightOf(i, true) : prev.exceptionHeightOf(old.index, true),\n                };\n            }\n            animation.push({\n                node: node,\n                key: key,\n                mode: mode,\n                previous: previous,\n                nodeY: nodeY,\n                nodeYCurrentHeight: pos,\n                current: {\n                    index: i,\n                    y: pos,\n                    height: cur.exceptionHeightOf(i),\n                },\n            });\n            node.style.transform = \"translate(0, \" + (nodeY - pos) + \"px)\";\n            nodeY += previous.height + (previous.index < 0 ? cur.padding(i) : prev.padding(previous.index));\n            fragment.appendChild(node);\n        });\n        var nodeYCurrentHeight = next.endPos;\n        // items that are going to be removed\n        lookup.forEach(function (item, key) {\n            // calculate their next position\n            var r = cur.posByKey(key);\n            // maybe not visible anymore, keep in place\n            var nextPos = r.pos >= 0 ? r.pos : item.pos;\n            var node = item.n;\n            // located at addedPos\n            // should end up at nextPos\n            // was previously at item.pos\n            node.style.transform = \"translate(0, \" + (item.pos - nodeY) + \"px)\";\n            fragment.appendChild(node);\n            var prevHeight = prev.exceptionHeightOf(item.i, true);\n            animation.push({\n                node: item.n,\n                key: key,\n                mode: r.index < 0 ? EAnimationMode.HIDE : EAnimationMode.UPDATE_REMOVE,\n                previous: {\n                    index: item.i,\n                    y: item.pos,\n                    height: prevHeight,\n                },\n                nodeY: nodeY,\n                nodeYCurrentHeight: nodeYCurrentHeight,\n                current: {\n                    index: r.index,\n                    y: nextPos,\n                    height: r.index < 0 ? null : cur.exceptionHeightOf(r.index),\n                },\n            });\n            nodeYCurrentHeight +=\n                r.index < 0 ? cur.context.defaultRowHeight : cur.exceptionHeightOf(r.index, true) + cur.padding(r.index);\n            nodeY += prevHeight + prev.padding(item.i);\n        });\n        this.updateOffset(next.firstRowPos);\n        this.animate(animation, ctx.phases || defaultPhases, prev, cur, fragment);\n    };\n    ARowRenderer.prototype.animate = function (animation, phases, previousFinder, currentFinder, fragment) {\n        var _this = this;\n        var activeAnimation = animation;\n        if (activeAnimation.length <= 0) {\n            this.body.appendChild(fragment);\n            return;\n        }\n        var currentTimer = -1;\n        var actPhase = 0;\n        var executePhase = function (phase, items) {\n            if (items === void 0) { items = activeAnimation; }\n            items.forEach(function (anim) { return phase.apply(anim, previousFinder, currentFinder); });\n        };\n        var run = function () {\n            // dummy log for forcing dom update\n            // eslint-disable-next-line no-console\n            console.assert(activeAnimation[0].node.offsetTop >= 0, 'dummy log for forcing dom update');\n            executePhase(phases[actPhase]);\n            actPhase += 1;\n            // shifted by one since already added through ++\n            if (actPhase < phases.length) {\n                // schedule the next one\n                var next = phases[actPhase];\n                // eslint-disable-next-line no-restricted-globals\n                currentTimer = self.setTimeout(run, next.delay);\n                return;\n            }\n            // last one\n            var body = _this.body.classList;\n            Array.from(body).forEach(function (v) {\n                if (v.startsWith(cssClass()) && v.endsWith('-animation')) {\n                    body.remove(v);\n                }\n            });\n            // clean up\n            activeAnimation.forEach(function (_a) {\n                var node = _a.node, mode = _a.mode;\n                if (mode !== EAnimationMode.UPDATE_REMOVE && mode !== EAnimationMode.HIDE) {\n                    return;\n                }\n                node.remove();\n                // eslint-disable-next-line no-param-reassign\n                node.style.transform = '';\n                _this.recycle(node);\n            });\n            _this.abortAnimation = function () { return undefined; };\n            currentTimer = -1;\n        };\n        // execute all phases having a delay of zero\n        while (phases[actPhase].delay === 0) {\n            executePhase(phases[actPhase]);\n            actPhase += 1;\n        }\n        // after the initial one\n        var body = this.body;\n        this.body.appendChild(fragment);\n        var dummyAnimation = [];\n        activeAnimation = activeAnimation.filter(function (d) {\n            if (noAnimationChange(d, previousFinder.context.defaultRowHeight, currentFinder.context.defaultRowHeight)) {\n                dummyAnimation.push(d);\n                return false;\n            }\n            return true;\n        });\n        if (dummyAnimation.length > 0) {\n            // execute all phases for them\n            phases.slice(actPhase).forEach(function (phase) { return executePhase(phase, dummyAnimation); });\n        }\n        if (activeAnimation.length === 0) {\n            return;\n        }\n        body.classList.add(CSS_CLASS_ROW_ANIMATION);\n        new Set(activeAnimation.map(function (d) { return d.mode; })).forEach(function (mode) {\n            // add class but map to UPDATE only\n            body.classList.add(cssClass(EAnimationMode[mode].toLowerCase().split('_')[0] + \"-animation\"));\n        });\n        this.abortAnimation = function () {\n            if (currentTimer <= 0) {\n                return;\n            }\n            // abort by removing\n            clearTimeout(currentTimer);\n            currentTimer = -1;\n            // run the last phase\n            actPhase = phases.length - 1;\n            run();\n        };\n        // next tick such that DOM will be updated\n        // eslint-disable-next-line no-restricted-globals\n        currentTimer = self.setTimeout(run, phases[actPhase].delay);\n    };\n    /**\n     * clears the row pool used for faster creation\n     */\n    ARowRenderer.prototype.clearPool = function () {\n        // clear pool\n        this.pool.splice(0, this.pool.length);\n    };\n    /**\n     * triggers a revalidation of the current scrolling offset\n     */\n    ARowRenderer.prototype.revalidate = function () {\n        var scroller = this.bodyScroller;\n        this.onScrolledVertically(scroller.scrollTop, scroller.clientHeight, true);\n        this.updateOffset(this.visibleFirstRowPos);\n    };\n    /**\n     * scrolling vertically\n     * @param {number} scrollTop top scrolling\n     * @param {number} clientHeight visible height\n     * @param {boolean} isGoingDown hint whether the scrollTop increases\n     * @return {EScrollResult} full in case of a full rebuild or partial update\n     */\n    ARowRenderer.prototype.onScrolledVertically = function (scrollTop, clientHeight, isGoingDown) {\n        var shift = this.options.viewportOversize;\n        var shiftTop = Math.max(0, scrollTop - shift);\n        var scrollResult = this.onScrolledImpl(shiftTop, clientHeight + shift + (scrollTop - shiftTop));\n        for (var _i = 0, _a = this.mixins; _i < _a.length; _i++) {\n            var mixin = _a[_i];\n            mixin.onScrolled(isGoingDown, scrollResult);\n        }\n        return scrollResult;\n    };\n    ARowRenderer.prototype.shiftLast = function (current, currentDelta) {\n        var b = this.options.batchSize;\n        if (currentDelta >= b) {\n            return current;\n        }\n        var total = this.context.numberOfRows;\n        return Math.min(total - 1, current + (this.options.batchSize - currentDelta));\n    };\n    ARowRenderer.prototype.shiftFirst = function (current, currentFirstRow, currentDelta) {\n        var _a;\n        var b = this.options.batchSize;\n        if (currentDelta >= b || current <= 0) {\n            return { first: current, firstRowPos: currentFirstRow };\n        }\n        var first = Math.max(0, current - (this.options.batchSize - currentDelta));\n        var _b = this.context, exceptionsLookup = _b.exceptionsLookup, defaultRowHeight = _b.defaultRowHeight;\n        var firstRowPos = currentFirstRow;\n        for (var i = first; i < current; i += 1) {\n            firstRowPos -= (_a = exceptionsLookup.get(i)) !== null && _a !== void 0 ? _a : defaultRowHeight;\n        }\n        return { first: first, firstRowPos: firstRowPos };\n    };\n    ARowRenderer.prototype.onScrolledImpl = function (scrollTop, clientHeight) {\n        var context = this.context;\n        var _a = range(scrollTop, clientHeight, context.defaultRowHeight, context.exceptions, context.numberOfRows), first = _a.first, last = _a.last, firstRowPos = _a.firstRowPos;\n        var visible = this.visible;\n        visible.forcedFirst = first;\n        visible.forcedLast = last;\n        if (first - visible.first >= 0 && last - visible.last <= 0) {\n            // nothing to do\n            return EScrollResult.NONE;\n        }\n        var r = EScrollResult.SOME;\n        var toRecycle;\n        var toAdd;\n        var toAddBottom = false;\n        if (first > visible.last || last < visible.first) {\n            // no overlap, clean and draw everything\n            // console.log(`ff added: ${last - first + 1} removed: ${visibleLast - visibleFirst + 1} ${first}:${last} ${offset}`);\n            // removeRows(visibleFirst, visibleLast);\n            toRecycle = this.removeAll(false);\n            toAdd = this.addAtBottom(first, last, false);\n            toAddBottom = true;\n            r = EScrollResult.ALL;\n        }\n        else if (first < visible.first) {\n            // some first rows missing and some last rows to much\n            // console.log(`up added: ${visibleFirst - first + 1} removed: ${visibleLast - last + 1} ${first}:${last} ${offset}`);\n            var toRemove = visible.last - (last + 1);\n            if (toRemove >= this.options.batchSize) {\n                toRecycle = this.removeFromBottom(last + 1, visible.last, false);\n            }\n            else {\n                last = visible.last;\n            }\n            var shift = this.shiftFirst(first, firstRowPos, visible.first - 1 - first);\n            first = shift.first;\n            firstRowPos = shift.firstRowPos;\n            toAdd = this.addAtBeginning(first, visible.first - 1, false);\n            toAddBottom = false;\n            r = EScrollResult.SOME_TOP;\n        }\n        else {\n            // console.log(`do added: ${last - visibleLast + 1} removed: ${first - visibleFirst + 1} ${first}:${last} ${offset}`);\n            // some last rows missing and some first rows to much\n            var toRemove = first - 1 - visible.first;\n            if (toRemove >= this.options.batchSize) {\n                toRecycle = this.removeFromBeginning(visible.first, first - 1, false);\n            }\n            else {\n                first = visible.first;\n                firstRowPos = this.visibleFirstRowPos;\n            }\n            last = this.shiftLast(last, last - visible.last + 1);\n            toAdd = this.addAtBottom(visible.last + 1, last, false);\n            toAddBottom = true;\n            r = EScrollResult.SOME_BOTTOM;\n        }\n        visible.first = first;\n        visible.last = last;\n        this.updateOffset(firstRowPos);\n        this.manipulate(toRecycle, toAdd, toAddBottom);\n        return r;\n    };\n    ARowRenderer.prototype.manipulate = function (toRecycle, toAdd, bottom) {\n        if (toRecycle) {\n            for (var _i = 0, toRecycle_1 = toRecycle; _i < toRecycle_1.length; _i++) {\n                var item = toRecycle_1[_i];\n                item.remove();\n                this.recycle(item);\n            }\n        }\n        if (!toAdd) {\n            return;\n        }\n        if (bottom) {\n            this.body.appendChild(toAdd);\n        }\n        else {\n            this.body.insertBefore(toAdd, this.body.firstChild);\n        }\n    };\n    return ARowRenderer;\n}());\nexport { ARowRenderer };\nexport default ARowRenderer;\nexport function setTransform(elem, x, y) {\n    var text = \"translate(\" + x + \"px, \" + y + \"px)\";\n    var anyElem = elem;\n    // eslint-disable-next-line no-underscore-dangle\n    if (anyElem.__transform__ === text) {\n        return;\n    }\n    // eslint-disable-next-line no-underscore-dangle\n    anyElem.__transform__ = text;\n    // eslint-disable-next-line no-param-reassign\n    elem.style.transform = text;\n}\n//# sourceMappingURL=ARowRenderer.js.map","// import manually import './style.scss';\nfunction assignStyles(target, source) {\n    var targetObj = target;\n    for (var _i = 0, _a = Object.keys(source); _i < _a.length; _i++) {\n        var key = _a[_i];\n        var v = source[key];\n        if (!v.endsWith(' !important')) {\n            if (targetObj[key] !== v) {\n                // eslint-disable-next-line no-param-reassign\n                targetObj[key] = v;\n            }\n            continue;\n        }\n        // handle special important case\n        var plain = v.slice(0, -' !important'.length);\n        if (targetObj[key] === plain) {\n            continue;\n        }\n        // eslint-disable-next-line no-param-reassign\n        targetObj[key] = plain;\n        // see https://gist.github.com/youssman/745578062609e8acac9f\n        var hyphen = key.replace(/([a-zA-Z])(?=[A-Z])/g, '$1-').toLowerCase();\n        target.setProperty(hyphen, plain, 'important');\n    }\n}\nvar StyleManager = /** @class */ (function () {\n    /**\n     * the parent element to append this managed style\n     * @param {HTMLElement} root\n     */\n    function StyleManager(root) {\n        this.rules = [];\n        this.testVerifyTimeout = -1;\n        this.node = root.ownerDocument.createElement('style');\n        this.node.appendChild(root.ownerDocument.createTextNode('')); // for webkit?\n        root.appendChild(this.node);\n    }\n    StyleManager.prototype.destroy = function () {\n        this.node.remove();\n    };\n    StyleManager.prototype.verifySheet = function () {\n        var _this = this;\n        var sheet = this.sheet;\n        if (!sheet) {\n            if (this.testVerifyTimeout >= 0) {\n                return;\n            }\n            // test till attached\n            // eslint-disable-next-line no-restricted-globals\n            this.testVerifyTimeout = self.setTimeout(function () {\n                _this.testVerifyTimeout = -1;\n                _this.verifySheet();\n            }, 20);\n            return;\n        }\n        var rules = sheet.cssRules;\n        if (rules.length === this.rules.length &&\n            this.rules.every(function (d, i) { return rules[i].selectorText === d.selector; })) {\n            // same\n            return;\n        }\n        // console.warn('invalid sheet rules detected');\n        var l = rules.length;\n        for (var i = l - 1; i >= 0; i -= 1) {\n            sheet.deleteRule(i);\n        }\n        // create all\n        for (var _i = 0, _a = this.rules; _i < _a.length; _i++) {\n            var rule = _a[_i];\n            var index = sheet.insertRule(rule.selector + \" {}\", sheet.cssRules.length);\n            var cssRule = sheet.cssRules[index];\n            rule.selector = cssRule.selectorText;\n            assignStyles(cssRule.style, rule.style);\n        }\n    };\n    Object.defineProperty(StyleManager.prototype, \"sheet\", {\n        get: function () {\n            return this.node.sheet;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    StyleManager.prototype.getSheetRule = function (index) {\n        var sheet = this.sheet;\n        return sheet ? sheet.cssRules[index] : null;\n    };\n    /**\n     * add a custom css rule\n     * @param {string} id unique id of the rule for later identification\n     * @param {string} selector the css selector\n     * @param {Partial<CSSStyleDeclaration>} style the style attributes\n     * @returns {string} the id again\n     */\n    StyleManager.prototype.addRule = function (id, selector, style) {\n        this.verifySheet();\n        var sheet = this.sheet;\n        if (!sheet) {\n            // upon next update\n            this.rules.push({ id: id, selector: selector, style: style });\n            return null;\n        }\n        var index = sheet.insertRule(selector + \" {}\", sheet.cssRules.length);\n        var rule = sheet.cssRules[index];\n        this.rules.push({ id: id, selector: rule.selectorText, style: style });\n        assignStyles(rule.style, style);\n        return id;\n    };\n    /**\n     * updates or add a rule, see @addRule\n     * @param {string} id unique id of the rule for later identification\n     * @param {string} selector the css selector\n     * @param {Partial<CSSStyleDeclaration>} style the style attributes\n     * @returns {string} the id again\n     */\n    StyleManager.prototype.updateRule = function (id, selector, style) {\n        this.verifySheet();\n        var index = this.rules.findIndex(function (d) { return d.id === id; });\n        if (index < 0) {\n            return this.addRule(id, selector, style);\n        }\n        var stored = this.rules[index];\n        stored.selector = selector;\n        stored.style = style;\n        var rule = this.getSheetRule(index);\n        if (rule) {\n            if (rule.selectorText.replace(/\\s/gm, '') !== selector.replace(/\\s/gm, '')) {\n                // ignoring white space\n                rule.selectorText = selector;\n                stored.selector = rule.selectorText;\n            }\n            assignStyles(rule.style, style);\n        }\n        return id;\n    };\n    /**\n     * deletes the given rule by id\n     * @param {string} id the rule to delete\n     */\n    StyleManager.prototype.deleteRule = function (id) {\n        this.verifySheet();\n        var index = this.rules.findIndex(function (d) { return d.id === id; });\n        if (index < 0) {\n            return;\n        }\n        this.rules.splice(index, 1);\n        var sheet = this.sheet;\n        if (sheet) {\n            sheet.deleteRule(index);\n        }\n    };\n    Object.defineProperty(StyleManager.prototype, \"ruleNames\", {\n        /**\n         * get a list of all registered rule ids\n         */\n        get: function () {\n            return this.rules.map(function (d) { return d.id; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return StyleManager;\n}());\nexport default StyleManager;\n//# sourceMappingURL=StyleManager.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { addScroll } from '../internal';\nimport { cssClass, CSS_CLASS_BODY, CSS_CLASS_FOOTER, CSS_CLASS_HEADER, CSS_CLASS_SCROLLBAR_TESTER, CSS_CLASS_SHIFTED, CSS_CLASS_TBODY, CSS_CLASS_THEAD, } from '../styles';\nimport StyleManager from './StyleManager';\nexport function setTemplate(root, id) {\n    var cleanId = id.startsWith('#') ? id.slice(1) : id;\n    // eslint-disable-next-line no-param-reassign\n    root.innerHTML = \"\\n  <header id=\\\"header-\" + cleanId + \"\\\" class=\\\"\" + CSS_CLASS_HEADER + \" \" + cssClass(\"header-\" + cleanId) + \"\\\">\\n    <article class=\\\"\" + CSS_CLASS_THEAD + \" \" + cssClass(\"thead-\" + cleanId) + \"\\\"></article>\\n  </header>\\n  <main id=\\\"body-\" + cleanId + \"\\\" class=\\\"\" + CSS_CLASS_BODY + \" \" + cssClass(\"body-\" + cleanId) + \"\\\">\\n    <footer class=\\\"\" + CSS_CLASS_FOOTER + \"\\\">&nbsp;</footer>\\n    <article class=\\\"\" + CSS_CLASS_TBODY + \" \" + cssClass(\"tbody-\" + cleanId) + \"\\\"></article>\\n  </main>\";\n    return root;\n}\n/**\n * generates the HTML Ids used for the header and body article of a table\n * @param {string} tableId base table id\n * @param {boolean} asSelector flag whether to prepend with # for CSS selector\n * @return {ISelectors} the table ids used for header and body\n */\nexport function tableIds(tableId) {\n    return {\n        thead: \"thead-\" + tableId,\n        tbody: \"tbody-\" + tableId,\n        tr: \"tr-\" + tableId,\n        th: \"th-\" + tableId,\n        td: \"td-\" + tableId,\n    };\n}\nexport function tableCSSClasses(tableId) {\n    var ids = tableIds(tableId);\n    return {\n        thead: cssClass(ids.thead),\n        tbody: cssClass(ids.tbody),\n        tr: cssClass(ids.tr),\n        th: cssClass(ids.th),\n        td: cssClass(ids.td),\n    };\n}\n/**\n * utility for custom generated CSS rules with a focus on dynamically generated grid layouts\n */\nvar GridStyleManager = /** @class */ (function (_super) {\n    __extends(GridStyleManager, _super);\n    function GridStyleManager(root, id) {\n        var _this = _super.call(this, root) || this;\n        _this.id = id.startsWith('#') ? id.slice(1) : id;\n        _this.ids = tableIds(_this.id);\n        _this.cssClasses = tableCSSClasses(_this.id);\n        var headerScroller = root.getElementsByTagName('header')[0];\n        var bodyScroller = root.getElementsByTagName('main')[0];\n        // async since style needs to be added to dom first\n        // eslint-disable-next-line no-restricted-globals\n        self.setTimeout(function () {\n            var width = measureScrollbar(root).width;\n            _this.updateRule('__scrollBarFix2', \"#header-\" + _this.id + \" > article:last-of-type\", {\n                borderRight: width + \"px solid transparent\",\n            });\n        }, 20);\n        var old = headerScroller.scrollLeft;\n        // update frozen and sync header with body\n        addScroll(bodyScroller, 'animation', function (act) {\n            var newValue = act.left;\n            if (old !== newValue) {\n                headerScroller.scrollLeft = newValue;\n                old = newValue;\n            }\n            root.classList.toggle(CSS_CLASS_SHIFTED, act.left > 0);\n        });\n        return _this;\n    }\n    /**\n     * updates the column widths and default row height for a table\n     * @param {number} defaultRowHeight\n     * @param {IColumn[]} columns\n     * @param {number} frozenShift shift frozen columns\n     * @param {string} tableId optional tableId in case of multiple tables within the same engine\n     * @param {string} unit\n     */\n    GridStyleManager.prototype.update = function (defaultRowHeight, columns, padding, frozenShift, tableId, unit) {\n        if (unit === void 0) { unit = 'px'; }\n        var ids = tableIds(tableId);\n        var selectors = tableCSSClasses(tableId);\n        var total = \"\" + columns.reduce(function (a, b, i) { return a + b.width + padding(i); }, 0) + unit;\n        this.updateRule(\"__heightsRule\" + selectors.tr, \".\" + selectors.tr, {\n            height: defaultRowHeight + \"px\",\n            width: total,\n        });\n        this.updateRule(\"__heightsRule\" + selectors.tbody, \"#\" + ids.tbody, {\n            width: total,\n        });\n        this.updateColumns(columns, padding, selectors, frozenShift, unit);\n    };\n    /**\n     * removes a given tableId if not needed anymore\n     * @param {string} tableId tableId to remove\n     */\n    GridStyleManager.prototype.remove = function (tableId) {\n        var selectors = tableCSSClasses(tableId);\n        this.deleteRule(\"__heightsRule\" + selectors.tr);\n        this.deleteRule(\"__heightsRule\" + selectors.tbody);\n        var prefix = \"__col\" + selectors.td + \"_\";\n        var rules = this.ruleNames.reduce(function (a, b) { return a + (b.startsWith(prefix) ? 1 : 0); }, 0);\n        // reset\n        for (var i = 0; i < rules; i += 1) {\n            this.deleteRule(\"\" + prefix + i);\n        }\n    };\n    GridStyleManager.prototype.updateColumns = function (columns, padding, cssSelectors, frozenShift, unit) {\n        var _this = this;\n        if (unit === void 0) { unit = 'px'; }\n        var prefix = \"__col\" + cssSelectors.td + \"_\";\n        var rules = new Set(this.ruleNames.filter(function (d) { return d.startsWith(prefix); }));\n        var acc = 0;\n        columns.forEach(function (c, i) {\n            var th = \".\" + cssSelectors.th + \"[data-id=\\\"\" + c.id + \"\\\"]\";\n            var thStyles = {\n                width: \"\" + c.width + unit,\n            };\n            var td = \".\" + cssSelectors.td + \"[data-id=\\\"\" + c.id + \"\\\"]\";\n            var tdStyles = {\n                transform: \"translateX(\" + acc + unit + \")\",\n                width: \"\" + c.width + unit,\n            };\n            if (c.frozen) {\n                thStyles.left = acc + \"px\";\n                _this.updateRule(\"\" + prefix + td + \"F\", \".\" + cssSelectors.td + \".\" + CSS_CLASS_SHIFTED + \"[data-id=\\\"\" + c.id + \"\\\"]\", {\n                    transform: \"translateX(0)\",\n                    left: \"\" + (acc + frozenShift) + unit,\n                });\n                rules.delete(\"\" + prefix + td + \"F\");\n            }\n            _this.updateRule(\"\" + prefix + th, th, thStyles);\n            rules.delete(\"\" + prefix + th);\n            _this.updateRule(\"\" + prefix + td, td, tdStyles);\n            rules.delete(\"\" + prefix + td);\n            acc += c.width + padding(i);\n        });\n        rules.forEach(function (d) { return _this.deleteRule(d); });\n    };\n    return GridStyleManager;\n}(StyleManager));\nexport default GridStyleManager;\n/**\n * measure the width and height of the scrollbars\n * based on Slick grid implementation\n * @param root\n */\nfunction measureScrollbar(root) {\n    var _a;\n    var body = (_a = root.ownerDocument) === null || _a === void 0 ? void 0 : _a.body;\n    if (!body) {\n        return { width: 10, height: 10 };\n    }\n    body.insertAdjacentHTML('beforeend', \"<div class=\\\"\" + CSS_CLASS_SCROLLBAR_TESTER + \"\\\"><div></div></div>\");\n    var elem = body.lastElementChild;\n    var width = elem.offsetWidth - elem.clientWidth;\n    var height = elem.offsetHeight - elem.clientHeight;\n    elem.remove();\n    return { width: width, height: height };\n}\n//# sourceMappingURL=GridStyleManager.js.map","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { setTransform } from '../ARowRenderer';\nimport { addScroll, defaultMode } from '../internal';\nimport { GridStyleManager, tableCSSClasses, tableIds } from '../style';\nimport { cssClass, CSS_CLASS_BODY, CSS_CLASS_FOOTER, CSS_CLASS_HEADER, CSS_CLASS_MULTI, CSS_CLASS_TBODY, CSS_CLASS_THEAD, } from '../styles';\n/**\n * manager of multiple columns separated by separators each an own row renderer\n */\nvar MultiTableRowRenderer = /** @class */ (function () {\n    function MultiTableRowRenderer(node, htmlId, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        this.node = node;\n        this.tableId = 0;\n        this.sections = [];\n        this.options = {\n            columnPadding: 0,\n            async: defaultMode,\n            minScrollDelta: 30,\n        };\n        Object.assign(this.options, options);\n        var cleanHTMLId = htmlId.startsWith('#') ? htmlId.slice(1) : htmlId;\n        // eslint-disable-next-line no-param-reassign\n        node.id = cleanHTMLId;\n        // eslint-disable-next-line no-param-reassign\n        node.innerHTML = \"<header id=\\\"header-\" + cleanHTMLId + \"\\\" class=\\\"\" + CSS_CLASS_HEADER + \" \" + cssClass(\"header-\" + cleanHTMLId) + \"\\\">\\n      <footer class=\\\"\" + CSS_CLASS_FOOTER + \" \" + cssClass(\"footer-\" + cleanHTMLId) + \"\\\">&nbsp;</footer>\\n    </header>\\n    <main id=\\\"body-\" + cleanHTMLId + \"\\\" class=\\\"\" + CSS_CLASS_BODY + \" \" + cssClass(\"body-\" + cleanHTMLId) + \"\\\">\\n      <footer class=\\\"\" + CSS_CLASS_FOOTER + \"\\\">&nbsp;</footer>\\n    </main>\";\n        node.classList.add(cssClass(), CSS_CLASS_MULTI, 'lineup-engine');\n        this.style = new GridStyleManager(this.node, cleanHTMLId);\n        var old = addScroll(this.main, this.options.async, function (act) {\n            if (Math.abs(old.left - act.left) < _this.options.minScrollDelta &&\n                Math.abs(old.width - act.width) < _this.options.minScrollDelta) {\n                return;\n            }\n            var isGoingRight = act.left > old.left;\n            old = act;\n            _this.onScrolledHorizontally(act.left, act.width, isGoingRight);\n        });\n    }\n    MultiTableRowRenderer.prototype.update = function () {\n        var _this = this;\n        this.onScrolledHorizontally(this.main.scrollLeft, this.main.clientWidth, false);\n        var offset = 0;\n        this.sections.forEach(function (s) {\n            // eslint-disable-next-line no-param-reassign\n            s.body.style.left = offset + \"px\";\n            // eslint-disable-next-line no-param-reassign\n            s.header.style.left = offset + \"px\";\n            offset += s.width + _this.options.columnPadding;\n        });\n    };\n    MultiTableRowRenderer.prototype.onScrolledHorizontally = function (scrollLeft, clientWidth, isGoingRight) {\n        var _this = this;\n        var offset = 0;\n        var scrollEnd = scrollLeft + clientWidth;\n        this.sections.forEach(function (s) {\n            var end = offset + s.width;\n            if (end < scrollLeft || offset > scrollEnd) {\n                s.hide();\n            }\n            else {\n                s.show(Math.max(0, scrollLeft - offset), Math.min(scrollEnd - offset, s.width), isGoingRight);\n            }\n            offset = end + _this.options.columnPadding;\n        });\n        this.updateOffset();\n    };\n    MultiTableRowRenderer.prototype.updateOffset = function () {\n        var _this = this;\n        var headerFooter = this.header.getElementsByTagName('footer')[0];\n        var bodyFooter = this.main.getElementsByTagName('footer')[0];\n        var maxHeight = this.sections.reduce(function (acc, d) { return Math.max(acc, d.height); }, 0);\n        var total = this.sections.reduce(function (a, c) { return a + c.width + _this.options.columnPadding; }, 0);\n        setTransform(headerFooter, total, 0);\n        setTransform(bodyFooter, total, maxHeight);\n    };\n    MultiTableRowRenderer.prototype.destroy = function () {\n        this.sections.forEach(function (d) { return d.destroy(); });\n        this.node.remove();\n    };\n    Object.defineProperty(MultiTableRowRenderer.prototype, \"doc\", {\n        get: function () {\n            return this.node.ownerDocument;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MultiTableRowRenderer.prototype, \"header\", {\n        get: function () {\n            return this.node.getElementsByTagName('header')[0];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MultiTableRowRenderer.prototype, \"main\", {\n        get: function () {\n            return this.node.getElementsByTagName('main')[0];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * push another table to this instance\n     * @param {ITableFactory<T extends ITableSection>} factory factory for the table\n     * @param extras additional arguments to provide for the factory\n     * @returns {T} the table instance\n     */\n    MultiTableRowRenderer.prototype.pushTable = function (factory) {\n        var extras = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            extras[_i - 1] = arguments[_i];\n        }\n        var header = this.doc.createElement('article');\n        var body = this.doc.createElement('article');\n        var tableId = this.node.id + \"T\" + this.tableId;\n        this.tableId += 1;\n        var ids = tableIds(tableId);\n        var cssClasses = tableCSSClasses(tableId);\n        header.id = ids.thead;\n        header.classList.add(CSS_CLASS_THEAD, cssClasses.thead);\n        body.id = ids.tbody;\n        body.classList.add(CSS_CLASS_TBODY, cssClasses.tbody);\n        this.header.insertBefore(header, this.header.lastElementChild); // before the footer\n        this.main.appendChild(body);\n        var table = factory.call.apply(factory, __spreadArray([this, header, body, tableId, this.style], extras, false));\n        table.init();\n        this.sections.push(table);\n        this.update();\n        return table;\n    };\n    /**\n     * push another separator to the manager\n     * @param {ISeparatorFactory<T extends ITableSection>} factory the factory to create the separator\n     * @param extras optional additional arguments\n     * @returns {T} the new created separator\n     */\n    MultiTableRowRenderer.prototype.pushSeparator = function (factory) {\n        var extras = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            extras[_i - 1] = arguments[_i];\n        }\n        var header = this.doc.createElement('section');\n        var body = this.doc.createElement('section');\n        header.classList.add(cssClass('header-separator'));\n        body.classList.add(cssClass('separator'));\n        this.header.insertBefore(header, this.header.lastElementChild); // before the footer\n        this.main.appendChild(body);\n        var separator = factory.call.apply(factory, __spreadArray([this, header, body, this.style], extras, false));\n        separator.init();\n        this.sections.push(separator);\n        this.update();\n        return separator;\n    };\n    /**\n     * removes a given table section\n     * @param {ITableSection} section section to remove\n     * @returns {boolean} successful flag\n     */\n    MultiTableRowRenderer.prototype.remove = function (section) {\n        var index = this.sections.indexOf(section);\n        if (index < 0) {\n            return false;\n        }\n        this.sections.splice(index, 1);\n        section.destroy();\n        this.update();\n        return true;\n    };\n    MultiTableRowRenderer.prototype.clear = function () {\n        this.sections.splice(0, this.sections.length).forEach(function (s) { return s.destroy(); });\n        this.update();\n    };\n    /**\n     * triggers and update because of a change in width of one or more table sections\n     */\n    MultiTableRowRenderer.prototype.widthChanged = function () {\n        this.update();\n    };\n    return MultiTableRowRenderer;\n}());\nexport default MultiTableRowRenderer;\n//# sourceMappingURL=MultiTableRowRenderer.js.map","/**\n * caches parsing of html strings in a dom element cache\n * @param doc the doc to create the elements under\n * @internal\n */\nexport default function domElementCache(doc) {\n    var cache = new Map();\n    var helper = doc.createElement('div');\n    return function (html) {\n        if (cache.has(html)) {\n            return cache.get(html).cloneNode(true);\n        }\n        helper.innerHTML = html;\n        var node = helper.firstElementChild;\n        // keep a copy\n        cache.set(html, node.cloneNode(true));\n        return node;\n    };\n}\nexport function createSanitizer(doc) {\n    // prepare variables\n    // based on https://stackoverflow.com/questions/24816/escaping-html-strings-with-jquery/17546215#17546215\n    var textNode = doc.createTextNode('');\n    var wrapper = doc.createElement('div');\n    wrapper.appendChild(textNode);\n    return function (v) {\n        if (!v) {\n            return '';\n        }\n        textNode.nodeValue = v;\n        return wrapper.innerHTML;\n    };\n}\n//# sourceMappingURL=domElementCache.js.map","import { range } from '../logic';\nimport { EScrollResult } from './IMixin';\n/**\n * mixin that prefetches rows depending on the scrolling direction for faster rendering\n */\nvar PrefetchMixin = /** @class */ (function () {\n    function PrefetchMixin(adapter, options) {\n        this.adapter = adapter;\n        this.prefetchTimeout = -1;\n        this.cleanupTimeout = -1;\n        this.options = {\n            prefetchRows: 20,\n            cleanUpRows: 10,\n            delay: 200,\n        };\n        Object.assign(this.options, options);\n        return this;\n    }\n    PrefetchMixin.prototype.prefetchDown = function () {\n        this.prefetchTimeout = -1;\n        if (this.adapter.isScrollEventWaiting()) {\n            return;\n        }\n        var context = this.adapter.context;\n        var nextLast = Math.min(this.adapter.visible.forcedLast + this.options.prefetchRows, context.numberOfRows - 1);\n        // add some rows in advance\n        if (this.adapter.visible.last === nextLast &&\n            this.adapter.visible.last >= this.adapter.visible.forcedLast + this.options.prefetchRows) {\n            return;\n        }\n        this.adapter.addAtBottom(this.adapter.visible.last + 1, nextLast);\n        // console.log('prefetch', visibleFirst, visibleLast + 1, '=>', nextLast, ranking.children.length);\n        this.adapter.visible.last = nextLast;\n    };\n    PrefetchMixin.prototype.prefetchUp = function () {\n        this.prefetchTimeout = -1;\n        if (this.adapter.isScrollEventWaiting() ||\n            this.adapter.visible.first <= this.adapter.visible.forcedFirst - this.options.prefetchRows) {\n            return;\n        }\n        var context = this.adapter.context;\n        var fakeOffset = Math.max(this.adapter.scrollOffset - this.options.prefetchRows * context.defaultRowHeight, 0);\n        var height = this.adapter.scrollTotal;\n        var _a = range(fakeOffset, height, context.defaultRowHeight, context.exceptions, context.numberOfRows), first = _a.first, firstRowPos = _a.firstRowPos;\n        if (first === this.adapter.visible.first) {\n            return;\n        }\n        var frozenShift = this.adapter.syncFrozen ? this.adapter.syncFrozen(first) : 0;\n        this.adapter.addAtBeginning(first, this.adapter.visible.first - 1, frozenShift);\n        // console.log('prefetch up ', visibleFirst, '=>', first, visibleLast, ranking.children.length);\n        this.adapter.visible.first = first;\n        this.adapter.updateOffset(firstRowPos);\n    };\n    PrefetchMixin.prototype.triggerPrefetch = function (isGoingDown) {\n        if (this.prefetchTimeout >= 0) {\n            clearTimeout(this.prefetchTimeout);\n        }\n        var prefetchDownPossible = this.adapter.visible.last < this.adapter.visible.forcedLast + this.options.prefetchRows;\n        var prefetchUpPossible = this.adapter.visible.first > this.adapter.visible.forcedFirst - this.options.prefetchRows;\n        var isLast = this.adapter.visible.last === this.adapter.context.numberOfRows;\n        var isFirst = this.adapter.visible.first === 0;\n        if ((isGoingDown && !prefetchDownPossible && !isLast) || (!isGoingDown && !prefetchUpPossible && !isFirst)) {\n            return;\n        }\n        // go down if we are already at the top, too\n        var op = isGoingDown || isFirst ? this.prefetchDown.bind(this) : this.prefetchUp.bind(this);\n        // eslint-disable-next-line no-restricted-globals\n        this.prefetchTimeout = self.setTimeout(op, this.options.delay);\n    };\n    PrefetchMixin.prototype.cleanUpTop = function (first) {\n        this.cleanupTimeout = -1;\n        if (this.adapter.isScrollEventWaiting()) {\n            return;\n        }\n        var newFirst = Math.max(0, first - this.options.cleanUpRows);\n        if (newFirst <= this.adapter.visible.first) {\n            return;\n        }\n        // console.log('cleanup top');\n        var frozenShift = this.adapter.syncFrozen ? this.adapter.syncFrozen(newFirst) : 0;\n        this.adapter.removeFromBeginning(this.adapter.visible.first, newFirst - 1, frozenShift);\n        var context = this.adapter.context;\n        // console.log('cleanup up ', visibleFirst, '=>', newFirst, visibleLast, ranking.children.length);\n        var shift = (newFirst - this.adapter.visible.first) * context.defaultRowHeight;\n        if (context.exceptions.length > 0) {\n            for (var i = this.adapter.visible.first; i < newFirst; i += 1) {\n                var ex = context.exceptionsLookup.get(i);\n                if (ex != null) {\n                    shift += ex - context.defaultRowHeight;\n                }\n            }\n        }\n        this.adapter.visible.first = newFirst;\n        this.adapter.updateOffset(this.adapter.visibleFirstRowPos + shift);\n        this.prefetchDown();\n    };\n    PrefetchMixin.prototype.cleanUpBottom = function (last) {\n        this.cleanupTimeout = -1;\n        var newLast = last + this.options.cleanUpRows;\n        if (this.adapter.visible.last <= newLast) {\n            return;\n        }\n        // console.log('cleanup bottom');\n        this.adapter.removeFromBottom(newLast + 1, this.adapter.visible.last);\n        this.adapter.visible.last = newLast;\n        this.prefetchUp();\n    };\n    PrefetchMixin.prototype.triggerCleanUp = function (first, last, isGoingDown) {\n        if (this.cleanupTimeout >= 0) {\n            clearTimeout(this.cleanupTimeout);\n        }\n        if ((isGoingDown && first - this.options.cleanUpRows <= this.adapter.visible.first) ||\n            (!isGoingDown && this.adapter.visible.last <= last + this.options.cleanUpRows)) {\n            return;\n        }\n        // eslint-disable-next-line no-restricted-globals\n        this.cleanupTimeout = self.setTimeout(isGoingDown ? this.cleanUpTop.bind(this) : this.cleanUpBottom.bind(this), this.options.delay, isGoingDown ? first : last);\n    };\n    PrefetchMixin.prototype.onScrolled = function (isGoingDown, scrollResult) {\n        if (this.adapter.isScrollEventWaiting()) {\n            return;\n        }\n        if (scrollResult !== EScrollResult.ALL && this.options.cleanUpRows > 0) {\n            this.triggerCleanUp(this.adapter.visible.forcedFirst, this.adapter.visible.forcedLast, isGoingDown);\n        }\n        if (scrollResult !== EScrollResult.NONE && this.options.prefetchRows > 0) {\n            this.triggerPrefetch(isGoingDown);\n        }\n    };\n    return PrefetchMixin;\n}());\nexport default PrefetchMixin;\n//# sourceMappingURL=PrefetchMixin.js.map","import { ABORTED, isAbortAble, isAsyncUpdate } from '../../abortAble';\nimport { isLoadingCell } from '../../ARowRenderer';\nimport { clear } from '../../internal';\nimport { isScrollEventWaiting } from '../../internal/scroll';\nimport { range, updateFrozen } from '../../logic';\nimport { EScrollResult } from '../../mixin';\nimport { cssClass, CSS_CLASS_FROZEN, CSS_CLASS_LOADING, CSS_CLASS_SHIFTED, CSS_CLASS_TD, CSS_CLASS_TH, } from '../../styles';\n/**\n * @internal\n */\nvar ACellAdapter = /** @class */ (function () {\n    function ACellAdapter(header, style, tableId, mixinClasses) {\n        var _this = this;\n        if (mixinClasses === void 0) { mixinClasses = []; }\n        this.header = header;\n        this.style = style;\n        this.tableId = tableId;\n        /**\n         * pool of cells per column\n         * @type {Array}\n         */\n        this.cellPool = [];\n        this.loading = new WeakMap();\n        this.visibleColumns = {\n            frozen: [],\n            first: 0,\n            forcedFirst: 0,\n            last: -1,\n            forcedLast: -1,\n        };\n        this.visibleFirstColumnPos = 0;\n        this.horizontallyShifted = false;\n        this.columnAdapter = this.createColumnAdapter();\n        this.columnMixins = mixinClasses.map(function (MixinClass) { return new MixinClass(_this.columnAdapter); });\n        this.columnFragment = header.ownerDocument.createDocumentFragment();\n    }\n    ACellAdapter.prototype.leftShift = function () {\n        var ctx = this.context;\n        var frozen = this.visibleColumns.frozen.reduce(function (a, d) { return a + ctx.columns[d].width + ctx.column.padding(d); }, 0);\n        return this.visibleFirstColumnPos - frozen;\n    };\n    Object.defineProperty(ACellAdapter.prototype, \"headerScroller\", {\n        get: function () {\n            return this.header.parentElement;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ACellAdapter.prototype.addColumnMixin = function (MixinClass, options) {\n        this.columnMixins.push(new MixinClass(this.columnAdapter, options));\n    };\n    ACellAdapter.prototype.createColumnAdapter = function () {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var that = this;\n        var r = {\n            visible: this.visibleColumns,\n            addAtBeginning: this.addColumnAtStart.bind(this),\n            addAtBottom: this.addColumnAtEnd.bind(this),\n            removeFromBeginning: this.removeColumnFromStart.bind(this),\n            removeFromBottom: this.removeColumnFromEnd.bind(this),\n            updateOffset: this.updateColumnOffset.bind(this),\n            scroller: this.headerScroller,\n            syncFrozen: this.syncFrozen.bind(this),\n            isScrollEventWaiting: function () { return isScrollEventWaiting(_this.headerScroller, 'animation'); },\n            get visibleFirstRowPos() {\n                return that.visibleFirstColumnPos;\n            },\n            get context() {\n                return that.context.column;\n            },\n            get scrollOffset() {\n                return that.lastScrollInfo ? that.lastScrollInfo.left : 0;\n            },\n            get scrollTotal() {\n                return that.lastScrollInfo ? that.lastScrollInfo.width : that.headerScroller.clientWidth;\n            },\n        };\n        return r;\n    };\n    ACellAdapter.prototype.init = function () {\n        var _this = this;\n        var context = this.context;\n        this.style.update(context.defaultRowHeight - context.padding(-1), context.columns, context.column.padding, 0, this.tableId);\n        context.columns.forEach(function () {\n            // init pool\n            _this.cellPool.push([]);\n        });\n    };\n    ACellAdapter.prototype.onScrolledHorizontally = function (scrollLeft, clientWidth, isGoingRight) {\n        var scrollResult = this.onScrolledHorizontallyImpl(scrollLeft, clientWidth);\n        for (var _i = 0, _a = this.columnMixins; _i < _a.length; _i++) {\n            var mixin = _a[_i];\n            mixin.onScrolled(isGoingRight, scrollResult);\n        }\n        return scrollResult;\n    };\n    ACellAdapter.prototype.removeColumnFromStart = function (from, to, frozenShift) {\n        var _this = this;\n        if (frozenShift === void 0) { frozenShift = this.visibleColumns.frozen.length; }\n        this.forEachRow(function (row) {\n            _this.removeCellFromStart(row, from, to, frozenShift);\n        });\n        // if (debug) {\n        //   this.verifyRows();\n        // }\n    };\n    ACellAdapter.prototype.removeCellFromStart = function (row, from, to, frozenShift) {\n        for (var i = from; i <= to; i += 1) {\n            var node = (frozenShift === 0 ? row.firstElementChild : row.children[frozenShift]);\n            node.remove();\n            this.recycleCell(node, i);\n        }\n        // if (debug) {\n        //   verifyRow(row, -1, this.context.columns);\n        // }\n    };\n    ACellAdapter.prototype.removeColumnFromEnd = function (from, to) {\n        var _this = this;\n        this.forEachRow(function (row) {\n            _this.removeCellFromEnd(row, from, to);\n        });\n        // if (debug) {\n        //   this.verifyRows();\n        // }\n    };\n    ACellAdapter.prototype.removeCellFromEnd = function (row, from, to) {\n        for (var i = to; i >= from; i -= 1) {\n            var node = row.lastElementChild;\n            node.remove();\n            this.recycleCell(node, i);\n        }\n        // if (debug) {\n        //   verifyRow(row, -1, this.context.columns);\n        // }\n    };\n    ACellAdapter.prototype.removeFrozenCells = function (row, columnIndices, shift) {\n        for (var _i = 0, columnIndices_1 = columnIndices; _i < columnIndices_1.length; _i++) {\n            var columnIndex = columnIndices_1[_i];\n            var node = row.children[shift];\n            node.remove();\n            this.recycleCell(node, columnIndex);\n        }\n        // if (debug) {\n        //   verifyRow(row, -1, this.context.columns);\n        // }\n    };\n    ACellAdapter.prototype.removeFrozenColumns = function (columnIndices, shift) {\n        var _this = this;\n        this.forEachRow(function (row) {\n            _this.removeFrozenCells(row, columnIndices, shift);\n        });\n        // if (debug) {\n        //   this.verifyRows();\n        // }\n    };\n    ACellAdapter.prototype.removeAllColumns = function (includingFrozen) {\n        var _this = this;\n        this.forEachRow(function (row) {\n            _this.removeAllCells(row, includingFrozen);\n        });\n        // if (debug) {\n        //   this.verifyRows();\n        // }\n    };\n    ACellAdapter.prototype.removeAllCells = function (row, includingFrozen, shift) {\n        var _this = this;\n        if (shift === void 0) { shift = this.visibleColumns.first; }\n        var arr = Array.from(row.children);\n        var frozen = this.visibleColumns.frozen;\n        clear(row);\n        if (includingFrozen || frozen.length === 0) {\n            for (var _i = 0, frozen_1 = frozen; _i < frozen_1.length; _i++) {\n                var i = frozen_1[_i];\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                this.recycleCell(arr.shift(), i);\n            }\n        }\n        else {\n            // have frozen and keep them, so readd them\n            for (var i = 0; i < frozen.length; i += 1) {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                row.appendChild(arr.shift());\n            }\n        }\n        arr.forEach(function (item, i) {\n            _this.recycleCell(item, i + shift);\n        });\n        // if (debug) {\n        //   verifyRow(row, -1, this.context.columns);\n        // }\n    };\n    ACellAdapter.prototype.selectProxyCell = function (row, column, columns) {\n        var pool = this.cellPool[column];\n        var columnObj = columns[column];\n        var item;\n        var ready;\n        var pooled = pool.pop();\n        var r = pooled\n            ? this.updateCell(pooled, row, columnObj) || pooled\n            : this.createCell(this.header.ownerDocument, row, columnObj);\n        if (isAsyncUpdate(r)) {\n            item = r.item;\n            ready = r.ready;\n        }\n        else {\n            item = r;\n        }\n        if (item !== pooled) {\n            item.dataset.id = columnObj.id;\n            item.classList.add(CSS_CLASS_TD, this.style.cssClasses.td, cssClass(\"td-\" + this.tableId));\n        }\n        this.updateShiftedState(item, columnObj);\n        return { item: item, ready: ready };\n    };\n    ACellAdapter.prototype.handleCellReady = function (item, ready, column) {\n        var _this = this;\n        if (column === void 0) { column = -1; }\n        item.classList.add(CSS_CLASS_LOADING);\n        var abort = ready;\n        // lazy loading\n        this.loading.set(item, abort);\n        abort.then(function (result) {\n            _this.loading.delete(item);\n            item.classList.remove(CSS_CLASS_LOADING);\n            if (result === ABORTED && column >= 0) {\n                // aborted can recycle the real one\n                _this.cellPool[column].push(item);\n            }\n        });\n        return item;\n    };\n    ACellAdapter.prototype.selectCell = function (row, column, columns) {\n        var _a = this.selectProxyCell(row, column, columns), item = _a.item, ready = _a.ready;\n        if (!isAbortAble(ready)) {\n            return item;\n        }\n        return this.handleCellReady(item, ready, column);\n    };\n    ACellAdapter.prototype.updateShiftedState = function (node, col) {\n        node.classList.toggle(CSS_CLASS_SHIFTED, col.frozen && this.horizontallyShifted);\n    };\n    ACellAdapter.prototype.recycleCell = function (item, column) {\n        if (column === void 0) { column = -1; }\n        // check if the dom element is still being manipulated\n        var abort = this.loading.get(item);\n        if (abort != null) {\n            abort.abort();\n        }\n        else if (!isLoadingCell(item) && column >= 0) {\n            this.cellPool[column].push(item);\n        }\n    };\n    ACellAdapter.prototype.addColumnAtStart = function (from, to, frozenShift) {\n        var _this = this;\n        if (frozenShift === void 0) { frozenShift = this.visibleColumns.frozen.length; }\n        var columns = this.context.columns;\n        this.forEachRow(function (row, rowIndex) {\n            _this.addCellAtStart(row, rowIndex, from, to, frozenShift, columns);\n        });\n        // if (debug) {\n        //   this.verifyRows();\n        // }\n    };\n    ACellAdapter.prototype.addCellAtStart = function (row, rowIndex, from, to, frozenShift, columns) {\n        // if (debug) {\n        //   verifyRow(row, rowIndex, this.context.columns);\n        // }\n        for (var i = to; i >= from; i -= 1) {\n            var cell = this.selectCell(rowIndex, i, columns);\n            row.insertBefore(cell, frozenShift > 0 ? row.children[frozenShift] : row.firstChild);\n        }\n        // if (debug) {\n        //   verifyRow(row, rowIndex, this.context.columns);\n        // }\n    };\n    ACellAdapter.prototype.insertFrozenCells = function (row, rowIndex, columnIndices, shift, columns) {\n        var before = row.children[shift];\n        for (var _i = 0, columnIndices_2 = columnIndices; _i < columnIndices_2.length; _i++) {\n            var i = columnIndices_2[_i];\n            var cell = this.selectCell(rowIndex, i, columns);\n            if (before) {\n                row.insertBefore(cell, before);\n            }\n            else {\n                row.appendChild(cell);\n            }\n        }\n    };\n    ACellAdapter.prototype.insertFrozenColumns = function (columnIndices, shift) {\n        var _this = this;\n        var columns = this.context.columns;\n        this.forEachRow(function (row, rowIndex) {\n            _this.insertFrozenCells(row, rowIndex, columnIndices, shift, columns);\n        });\n    };\n    ACellAdapter.prototype.addColumnAtEnd = function (from, to) {\n        var _this = this;\n        var columns = this.context.columns;\n        this.forEachRow(function (row, rowIndex) {\n            _this.addCellAtEnd(row, rowIndex, from, to, columns);\n        });\n        // if (debug) {\n        //   this.verifyRows();\n        // }\n    };\n    // private verifyRows() {\n    //   const { columns } = this.context;\n    //   this.forEachRow((row, rowIndex) => verifyRow(row, rowIndex, columns));\n    // }\n    ACellAdapter.prototype.addCellAtEnd = function (row, rowIndex, from, to, columns) {\n        for (var i = from; i <= to; i += 1) {\n            var cell = this.selectCell(rowIndex, i, columns);\n            row.appendChild(cell);\n        }\n        // if (debug) {\n        //   verifyRow(row, rowIndex, this.context.columns);\n        // }\n    };\n    ACellAdapter.prototype.updateHeaders = function () {\n        var _this = this;\n        var columns = this.context.columns;\n        Array.from(this.header.children).forEach(function (node, i) {\n            var base = node;\n            var col = columns[i];\n            var r = _this.updateHeader(base, col);\n            var n;\n            if (isAsyncUpdate(r)) {\n                n = _this.handleCellReady(r.item, r.ready, -1);\n            }\n            else {\n                n = r || base;\n            }\n            if (n === base) {\n                return;\n            }\n            n.dataset.id = col.id;\n            n.classList.add(CSS_CLASS_TH, _this.style.cssClasses.th, cssClass(\"th-\" + _this.tableId));\n            _this.header.replaceChild(base, n);\n        });\n    };\n    ACellAdapter.prototype.recreate = function (left, width) {\n        var _this = this;\n        var _a;\n        var context = this.context;\n        this.style.update(context.defaultRowHeight - context.padding(-1), context.columns, context.column.padding, 0, this.tableId);\n        this.clearPool();\n        // init pool\n        for (var i = this.cellPool.length; i < context.columns.length; i += 1) {\n            this.cellPool.push([]);\n        }\n        // create all header columns\n        {\n            var fragment_1 = this.columnFragment;\n            var document_1 = fragment_1.ownerDocument;\n            // create lookup cache to reuse headers\n            var ids_1 = new Map();\n            while (this.header.lastChild) {\n                var c = this.header.lastChild;\n                this.header.removeChild(c);\n                ids_1.set((_a = c.dataset.id) !== null && _a !== void 0 ? _a : '', c);\n            }\n            context.columns.forEach(function (col) {\n                var existing = ids_1.get(col.id);\n                var r = existing ? _this.updateHeader(existing, col) || existing : _this.createHeader(document_1, col);\n                var n;\n                if (isAsyncUpdate(r)) {\n                    n = _this.handleCellReady(r.item, r.ready, -1);\n                }\n                else {\n                    n = r;\n                }\n                if (n !== existing) {\n                    n.dataset.id = col.id;\n                    n.classList.add(CSS_CLASS_TH, _this.style.cssClasses.th, cssClass(\"th-\" + _this.tableId));\n                }\n                fragment_1.appendChild(n);\n            });\n            this.header.appendChild(fragment_1);\n        }\n        var _b = range(left, width, context.column.defaultRowHeight, context.column.exceptions, context.column.numberOfRows), first = _b.first, last = _b.last, firstRowPos = _b.firstRowPos;\n        this.visibleColumns.first = first;\n        this.visibleColumns.forcedFirst = first;\n        this.visibleColumns.last = last;\n        this.visibleColumns.forcedLast = last;\n        if (context.columns.some(function (c) { return c.frozen; })) {\n            var target = updateFrozen([], context.columns, first).target;\n            this.visibleColumns.frozen = target;\n        }\n        else {\n            this.visibleColumns.frozen = [];\n        }\n        this.updateColumnOffset(firstRowPos);\n    };\n    ACellAdapter.prototype.clearPool = function () {\n        this.cellPool.forEach(function (p) { return p.splice(0, p.length); });\n    };\n    ACellAdapter.prototype.updateColumnOffset = function (firstColumnPos) {\n        var changed = firstColumnPos !== this.visibleFirstColumnPos;\n        this.visibleFirstColumnPos = firstColumnPos;\n        if (changed) {\n            var context = this.context;\n            this.style.update(context.defaultRowHeight - context.padding(-1), context.columns, context.column.padding, 0, this.tableId);\n        }\n    };\n    ACellAdapter.prototype.createRow = function (node, rowIndex) {\n        var columns = this.context.columns;\n        var visible = this.visibleColumns;\n        if (visible.frozen.length > 0) {\n            for (var _i = 0, _a = visible.frozen; _i < _a.length; _i++) {\n                var i = _a[_i];\n                var cell = this.selectCell(rowIndex, i, columns);\n                node.appendChild(cell);\n            }\n        }\n        for (var i = visible.first; i <= visible.last; i += 1) {\n            var cell = this.selectCell(rowIndex, i, columns);\n            node.appendChild(cell);\n        }\n    };\n    ACellAdapter.prototype.updateRow = function (node, rowIndex) {\n        var _a;\n        var columns = this.context.columns;\n        var visible = this.visibleColumns;\n        // columns may not match anymore if it is a pooled item a long time ago\n        switch (node.childElementCount) {\n            case 0:\n                if (visible.frozen.length > 0) {\n                    this.insertFrozenCells(node, rowIndex, visible.frozen, 0, columns);\n                }\n                this.addCellAtEnd(node, rowIndex, visible.first, visible.last, columns);\n                break;\n            case 1: {\n                var old = node.firstElementChild;\n                var id_1 = (_a = old.dataset.id) !== null && _a !== void 0 ? _a : '';\n                var columnIndex = columns.findIndex(function (c) { return c.id === id_1; });\n                node.removeChild(old);\n                if (columnIndex >= 0) {\n                    this.recycleCell(old, columnIndex);\n                }\n                if (visible.frozen.length > 0) {\n                    this.insertFrozenCells(node, rowIndex, visible.frozen, 0, columns);\n                }\n                this.addCellAtEnd(node, rowIndex, visible.first, visible.last, columns);\n                break;\n            }\n            default:\n                this.mergeColumns(node, rowIndex);\n                break;\n        }\n    };\n    ACellAdapter.prototype.mergeColumns = function (node, rowIndex) {\n        var _this = this;\n        var columns = this.context.columns;\n        var visible = this.visibleColumns;\n        var ids = new Map();\n        while (node.lastChild) {\n            var c = node.lastChild;\n            node.removeChild(c);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            ids.set(c.dataset.id, c);\n        }\n        var updateImpl = function (i) {\n            var col = columns[i];\n            var existing = ids.get(col.id);\n            if (!existing) {\n                var cell_1 = _this.selectCell(rowIndex, i, columns);\n                node.appendChild(cell_1);\n                return;\n            }\n            ids.delete(col.id);\n            var r = _this.updateCell(existing, rowIndex, col) || existing;\n            var cell;\n            if (isAsyncUpdate(r)) {\n                cell = _this.handleCellReady(r.item, r.ready, i);\n            }\n            else {\n                cell = r;\n            }\n            if (cell && cell !== existing) {\n                cell.dataset.id = col.id;\n                cell.classList.add(CSS_CLASS_TD, _this.style.cssClasses.td, cssClass(\"td-\" + _this.tableId));\n            }\n            _this.updateShiftedState(cell, col);\n            node.appendChild(cell);\n        };\n        for (var _i = 0, _a = visible.frozen; _i < _a.length; _i++) {\n            var frozen = _a[_i];\n            updateImpl(frozen);\n        }\n        for (var i = visible.first; i <= visible.last; i += 1) {\n            updateImpl(i);\n        }\n        if (ids.size === 0) {\n            return;\n        }\n        // recycle\n        var byId = new Map(columns.map(function (d, i) { return [d.id, i]; }));\n        ids.forEach(function (idNode, key) {\n            var index = byId.get(key);\n            if (index != null && index >= 0) {\n                _this.recycleCell(idNode, index);\n            }\n        });\n    };\n    ACellAdapter.prototype.updateShiftedStates = function () {\n        if (!this.context.columns.some(function (d) { return d.frozen; })) {\n            return;\n        }\n        var shifted = this.horizontallyShifted;\n        var clazz = CSS_CLASS_SHIFTED;\n        if (shifted) {\n            var headers = Array.from(this.header.querySelectorAll(\".\" + CSS_CLASS_FROZEN + \":not(.\" + clazz + \")\"));\n            var bodies = Array.from(this.body.querySelectorAll(\".\" + CSS_CLASS_FROZEN + \":not(.\" + clazz + \")\"));\n            for (var _i = 0, headers_1 = headers; _i < headers_1.length; _i++) {\n                var item = headers_1[_i];\n                item.classList.add(clazz);\n            }\n            for (var _a = 0, bodies_1 = bodies; _a < bodies_1.length; _a++) {\n                var item = bodies_1[_a];\n                item.classList.add(clazz);\n            }\n        }\n        else {\n            var headers = Array.from(this.header.querySelectorAll(\".\" + CSS_CLASS_FROZEN + \".\" + clazz));\n            var bodies = Array.from(this.body.querySelectorAll(\".\" + CSS_CLASS_FROZEN + \".\" + clazz));\n            for (var _b = 0, headers_2 = headers; _b < headers_2.length; _b++) {\n                var item = headers_2[_b];\n                item.classList.remove(clazz);\n            }\n            for (var _c = 0, bodies_2 = bodies; _c < bodies_2.length; _c++) {\n                var item = bodies_2[_c];\n                item.classList.remove(clazz);\n            }\n        }\n    };\n    ACellAdapter.prototype.syncFrozen = function (first) {\n        var columns = this.context.columns;\n        var visible = this.visibleColumns;\n        if (!columns.some(function (d) { return d.frozen; })) {\n            return 0;\n        }\n        if (first === 0) {\n            if (visible.frozen.length > 0) {\n                this.removeFrozenColumns(visible.frozen, 0);\n                visible.frozen = [];\n            }\n            return 0;\n        }\n        var old = visible.frozen.length;\n        var _a = updateFrozen(visible.frozen, columns, first), target = _a.target, added = _a.added, removed = _a.removed;\n        if (removed.length > 0) {\n            this.removeFrozenColumns(removed, old - removed.length);\n        }\n        if (added.length > 0) {\n            this.insertFrozenColumns(added, old - removed.length);\n        }\n        visible.frozen = target;\n        return target.length;\n    };\n    ACellAdapter.prototype.onScrolledHorizontallyImpl = function (scrollLeft, clientWidth) {\n        var shiftingChanged = this.horizontallyShifted !== scrollLeft > 0;\n        this.horizontallyShifted = scrollLeft > 0;\n        var column = this.context.column;\n        var _a = range(scrollLeft, clientWidth, column.defaultRowHeight, column.exceptions, column.numberOfRows), first = _a.first, last = _a.last, firstRowPos = _a.firstRowPos;\n        var visible = this.visibleColumns;\n        visible.forcedFirst = first;\n        visible.forcedLast = last;\n        if (first - visible.first >= 0 && last - visible.last <= 0) {\n            // nothing to do\n            if (shiftingChanged) {\n                this.updateShiftedStates();\n            }\n            return EScrollResult.NONE;\n        }\n        var r = EScrollResult.SOME;\n        var frozenShift = this.syncFrozen(first);\n        if (first > visible.last || last < visible.first) {\n            // no overlap, clean and draw everything\n            // console.log(\n            //   `ff added: ${last - first + 1} removed: ${visible.last - visible.first + 1} ${first}:${last} ${frozenShift}`\n            // );\n            // removeRows(visibleFirst, visibleLast);\n            this.removeAllColumns(false);\n            // this.updateShiftedStates();\n            this.addColumnAtEnd(first, last);\n            r = EScrollResult.ALL;\n        }\n        else if (first < visible.first) {\n            // some first rows missing and some last rows to much\n            // console.log(\n            //   `up added: ${visible.first - first + 1} removed: ${visible.last - last + 1} ${first}:${last} ${frozenShift}`\n            // );\n            this.removeColumnFromEnd(last + 1, visible.last);\n            this.updateShiftedStates();\n            this.addColumnAtStart(first, visible.first - 1, frozenShift);\n            r = EScrollResult.SOME_TOP;\n        }\n        else {\n            // console.log(\n            //   `do added: ${last - visible.last + 1} removed: ${first - visible.first + 1} ${first}:${last} ${frozenShift}`\n            // );\n            // some last rows missing and some first rows to much\n            this.removeColumnFromStart(visible.first, first - 1, frozenShift);\n            this.updateShiftedStates();\n            this.addColumnAtEnd(visible.last + 1, last);\n            r = EScrollResult.SOME_BOTTOM;\n        }\n        visible.first = first;\n        visible.last = last;\n        this.updateColumnOffset(firstRowPos);\n        return r;\n    };\n    return ACellAdapter;\n}());\nexport { ACellAdapter };\n/**\n * @internal\n */\nexport default ACellAdapter;\n// function verifyRow(row: HTMLElement, index: number, columns: IColumn[]) {\n//   const cols = Array.from(row.children) as HTMLElement[];\n//   // sort incrementally\n//   if (cols.length <= 1) {\n//     return;\n//   }\n//   const colObjs = cols.map((c) => columns.find((d) => d.id === c.dataset.id));\n//   console.assert(\n//     colObjs.every((d) => Boolean(d)),\n//     'all columns must exist',\n//     index\n//   );\n//   console.assert(\n//     colObjs.every((d, i) => i === 0 || d.index >= colObjs[i - 1]!.index),\n//     'all columns in ascending order',\n//     index\n//   );\n//   console.assert(new Set(colObjs).size === colObjs.length, 'unique columns', colObjs);\n// }\n//# sourceMappingURL=ACellAdapter.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ARowRenderer, setTransform } from '../ARowRenderer';\nimport { EScrollResult } from '../mixin';\nimport { CSS_CLASS_HIDDEN, CSS_CLASS_LOADING } from '../styles';\nimport { ACellAdapter } from './internal/ACellAdapter';\n/**\n * base class for a cell renderer as table section\n */\nvar ACellTableSection = /** @class */ (function (_super) {\n    __extends(ACellTableSection, _super);\n    function ACellTableSection(header, body, tableId, style, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, body, options) || this;\n        _this.header = header;\n        _this.body = body;\n        _this.tableId = tableId;\n        _this.style = style;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var that = _this;\n        var LocalCell = /** @class */ (function (_super) {\n            __extends(LocalCell, _super);\n            function LocalCell() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            Object.defineProperty(LocalCell.prototype, \"context\", {\n                get: function () {\n                    return that.context;\n                },\n                enumerable: false,\n                configurable: true\n            });\n            Object.defineProperty(LocalCell.prototype, \"body\", {\n                get: function () {\n                    return that.body;\n                },\n                enumerable: false,\n                configurable: true\n            });\n            Object.defineProperty(LocalCell.prototype, \"lastScrollInfo\", {\n                get: function () {\n                    return that.lastScrollInfo;\n                },\n                enumerable: false,\n                configurable: true\n            });\n            LocalCell.prototype.createHeader = function (document, column) {\n                return that.createHeader(document, column);\n            };\n            LocalCell.prototype.updateHeader = function (node, column) {\n                return that.updateHeader(node, column);\n            };\n            LocalCell.prototype.createCell = function (document, index, column) {\n                return that.createCell(document, index, column);\n            };\n            LocalCell.prototype.updateColumnOffset = function (firstColumnPos) {\n                _super.prototype.updateColumnOffset.call(this, firstColumnPos);\n                that.updateOffset(that.visibleFirstRowPos);\n            };\n            LocalCell.prototype.updateCell = function (node, index, column) {\n                return that.updateCell(node, index, column);\n            };\n            LocalCell.prototype.forEachRow = function (callback) {\n                return that.forEachRow(callback);\n            };\n            return LocalCell;\n        }(ACellAdapter));\n        _this.cell = new LocalCell(_this.header, _this.style, tableId, options.mixins || []);\n        return _this;\n    }\n    ACellTableSection.prototype.addColumnMixin = function (mixinClass, options) {\n        this.cell.addColumnMixin(mixinClass, options);\n    };\n    Object.defineProperty(ACellTableSection.prototype, \"idPrefix\", {\n        get: function () {\n            return this.tableId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ACellTableSection.prototype, \"width\", {\n        get: function () {\n            return this.context.column.totalHeight;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ACellTableSection.prototype, \"visibleColumns\", {\n        get: function () {\n            return this.cell.visibleColumns;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ACellTableSection.prototype, \"visibleFirstColumnPos\", {\n        get: function () {\n            return this.cell.visibleFirstColumnPos;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ACellTableSection.prototype, \"height\", {\n        get: function () {\n            return this.context.totalHeight;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ACellTableSection.prototype, \"hidden\", {\n        get: function () {\n            return this.header.classList.contains(CSS_CLASS_LOADING);\n        },\n        set: function (value) {\n            var old = this.hidden;\n            if (old === value) {\n                return;\n            }\n            this.header.classList.toggle(CSS_CLASS_LOADING, value);\n            this.body.classList.toggle(CSS_CLASS_LOADING, value);\n            this.header.classList.toggle(CSS_CLASS_HIDDEN, value);\n            this.body.classList.toggle(CSS_CLASS_HIDDEN, value);\n            this.onVisibilityChanged(!value);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ACellTableSection.prototype.updateSizer = function (firstRowPos) {\n        this.updateShifts(firstRowPos, this.cell.leftShift());\n        // no sizer update since centrally managed\n    };\n    ACellTableSection.prototype.updateShifts = function (top, _left) {\n        setTransform(this.body, 0 /* left.toFixed(0) */, top.toFixed(0));\n    };\n    /**\n     * hook when the visibility changes\n     * @param {boolean} _visible current visibility\n     */\n    ACellTableSection.prototype.onVisibilityChanged = function (_visible) {\n        // hook\n    };\n    ACellTableSection.prototype.hide = function () {\n        this.hidden = true;\n    };\n    ACellTableSection.prototype.show = function (scrollLeft, clientWidth, isGoingRight) {\n        var wasHidden = this.hidden;\n        this.hidden = false;\n        if (wasHidden) {\n            // full update\n            this.revalidate();\n        }\n        else {\n            this.onScrolledHorizontally(scrollLeft, clientWidth, isGoingRight);\n        }\n    };\n    ACellTableSection.prototype.init = function () {\n        this.hide(); // hide by default\n        this.cell.init();\n        _super.prototype.init.call(this);\n    };\n    ACellTableSection.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.header.remove();\n        this.style.remove(this.tableId);\n    };\n    ACellTableSection.prototype.onScrolledVertically = function (scrollTop, clientHeight, isGoingDown) {\n        if (this.hidden) {\n            return EScrollResult.NONE;\n        }\n        return _super.prototype.onScrolledVertically.call(this, scrollTop, clientHeight, isGoingDown);\n    };\n    ACellTableSection.prototype.onScrolledHorizontally = function (scrollLeft, clientWidth, isGoingRight) {\n        var r = this.cell.onScrolledHorizontally(scrollLeft, clientWidth, isGoingRight);\n        this.updateSizer(this.visibleFirstRowPos);\n        return r;\n    };\n    /**\n     * triggers updating the header\n     */\n    ACellTableSection.prototype.updateHeaders = function () {\n        this.cell.updateHeaders();\n    };\n    ACellTableSection.prototype.handleCellReady = function (item, ready, column) {\n        if (column === void 0) { column = -1; }\n        return this.cell.handleCellReady(item, ready, column);\n    };\n    ACellTableSection.prototype.recycleCell = function (item, column) {\n        if (column === void 0) { column = -1; }\n        this.cell.recycleCell(item, column);\n    };\n    /**\n     * trigger an update all all column widths\n     */\n    ACellTableSection.prototype.updateColumnWidths = function () {\n        var context = this.context;\n        this.style.update(context.defaultRowHeight - context.padding(-1), context.columns, context.column.padding, 0, this.tableId);\n    };\n    ACellTableSection.prototype.recreate = function (ctx) {\n        var scroller = this.bodyScroller;\n        var oldLeft = scroller.scrollLeft;\n        this.cell.recreate(oldLeft, scroller.clientWidth);\n        _super.prototype.recreate.call(this, ctx);\n        // restore left\n        scroller.scrollLeft = oldLeft;\n    };\n    ACellTableSection.prototype.clearPool = function () {\n        _super.prototype.clearPool.call(this);\n        this.cell.clearPool();\n    };\n    ACellTableSection.prototype.createRow = function (node, rowIndex) {\n        this.cell.createRow(node, rowIndex);\n        node.classList.add(this.style.cssClasses.tr);\n    };\n    ACellTableSection.prototype.updateRow = function (node, rowIndex) {\n        this.cell.updateRow(node, rowIndex);\n    };\n    return ACellTableSection;\n}(ARowRenderer));\nexport { ACellTableSection };\nexport default ACellTableSection;\n//# sourceMappingURL=ACellTableSection.js.map","import { defaultPhases, EAnimationMode, } from 'lineupengine';\nimport { isGroup } from '../model';\nfunction toGroupLookup(items) {\n    var item2groupIndex = new Map();\n    var group2firstItemIndex = new Map();\n    items.forEach(function (item, i) {\n        if (isGroup(item)) {\n            for (var o = 0; o < item.order.length; ++o) {\n                item2groupIndex.set(o, i);\n            }\n        }\n        else if (item.group && item.relativeIndex === 0) {\n            group2firstItemIndex.set(item.group.name, i);\n        }\n    });\n    return { item2groupIndex: item2groupIndex, group2firstItemIndex: group2firstItemIndex };\n}\nfunction toKey(item) {\n    if (isGroup(item)) {\n        return item.name;\n    }\n    return item.dataIndex.toString();\n}\n/** @internal */\nexport function lineupAnimation(previous, previousData, currentData) {\n    var previousKey = function (index) { return toKey(previousData[index]); };\n    var currentKey = function (index) { return toKey(currentData[index]); };\n    var previousGroupCount = previousData.reduce(function (acc, i) { return acc + (isGroup(i) ? 1 : 0); }, 0);\n    var currentGroupCount = currentData.reduce(function (acc, i) { return acc + (isGroup(i) ? 1 : 0); }, 0);\n    if (previousGroupCount === currentGroupCount) {\n        // reorder or filter only\n        return { currentKey: currentKey, previous: previous, previousKey: previousKey };\n    }\n    // try to appear where the group was uncollapsed and vice versa\n    var prevHelper;\n    var appearPosition = function (currentRowIndex, previousFinder, defaultValue) {\n        if (!prevHelper) {\n            prevHelper = toGroupLookup(previousData);\n        }\n        var item = currentData[currentRowIndex];\n        var referenceIndex = isGroup(item)\n            ? prevHelper.group2firstItemIndex.get(item.name)\n            : prevHelper.item2groupIndex.get(item.dataIndex);\n        if (referenceIndex === undefined) {\n            return defaultValue;\n        }\n        var pos = previousFinder.posByKey(previousKey(referenceIndex));\n        return pos.pos >= 0 ? pos.pos : defaultValue;\n    };\n    var currHelper;\n    var removePosition = function (previousRowIndex, currentFinder, defaultValue) {\n        if (!currHelper) {\n            currHelper = toGroupLookup(currentData);\n        }\n        var item = previousData[previousRowIndex];\n        var referenceIndex = isGroup(item)\n            ? currHelper.group2firstItemIndex.get(item.name)\n            : currHelper.item2groupIndex.get(item.dataIndex);\n        if (referenceIndex === undefined) {\n            return defaultValue;\n        }\n        var pos = currentFinder.posByKey(currentKey(referenceIndex));\n        return pos.pos >= 0 ? pos.pos : defaultValue;\n    };\n    var phases = [\n        Object.assign({}, defaultPhases[0], {\n            apply: function (item, previousFinder) {\n                defaultPhases[0].apply(item);\n                if (item.mode === EAnimationMode.SHOW) {\n                    item.node.style.transform = \"translate(0, \".concat(appearPosition(item.current.index, previousFinder, item.previous.y) - item.nodeY, \"px)\");\n                }\n            },\n        }),\n        Object.assign({}, defaultPhases[1], {\n            apply: function (item, _previousFinder, currentFinder) {\n                defaultPhases[1].apply(item);\n                if (item.mode === EAnimationMode.HIDE) {\n                    item.node.style.transform = \"translate(0, \".concat(removePosition(item.previous.index, currentFinder, item.current.y) - item.nodeY, \"px)\");\n                }\n            },\n        }),\n        defaultPhases[defaultPhases.length - 1],\n    ];\n    return { previous: previous, previousKey: previousKey, currentKey: currentKey, phases: phases };\n}\n//# sourceMappingURL=animation.js.map","import { isAbortAble } from 'lineupengine';\nimport { createHeader, updateHeader } from './header';\nimport { cssClass, engineCssClass } from '../styles';\nimport { isPromiseLike } from '../internal';\nvar RenderColumn = /** @class */ (function () {\n    function RenderColumn(c, index, ctx, flags) {\n        this.c = c;\n        this.index = index;\n        this.ctx = ctx;\n        this.flags = flags;\n        this.renderers = null;\n    }\n    Object.defineProperty(RenderColumn.prototype, \"width\", {\n        get: function () {\n            return this.c.getWidth();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderColumn.prototype, \"id\", {\n        get: function () {\n            return this.c.id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderColumn.prototype, \"frozen\", {\n        get: function () {\n            return this.flags.disableFrozenColumns ? false : this.c.frozen;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    RenderColumn.prototype.singleRenderer = function () {\n        if (!this.renderers || !this.renderers.single) {\n            return null;\n        }\n        if (this.renderers.singleTemplate) {\n            return this.renderers.singleTemplate.cloneNode(true);\n        }\n        var elem = this.ctx.asElement(this.renderers.single.template);\n        elem.classList.add(cssClass(\"renderer-\".concat(this.renderers.singleId)), cssClass('detail'));\n        elem.dataset.renderer = this.renderers.singleId;\n        elem.dataset.group = 'd';\n        this.renderers.singleTemplate = elem.cloneNode(true);\n        return elem;\n    };\n    RenderColumn.prototype.groupRenderer = function () {\n        if (!this.renderers || !this.renderers.group) {\n            return null;\n        }\n        if (this.renderers.groupTemplate) {\n            return this.renderers.groupTemplate.cloneNode(true);\n        }\n        var elem = this.ctx.asElement(this.renderers.group.template);\n        elem.classList.add(cssClass(\"renderer-\".concat(this.renderers.groupId)), cssClass('group'));\n        elem.dataset.renderer = this.renderers.groupId;\n        elem.dataset.group = 'g';\n        this.renderers.groupTemplate = elem.cloneNode(true);\n        return elem;\n    };\n    RenderColumn.prototype.summaryRenderer = function () {\n        if (!this.renderers || !this.renderers.summary) {\n            return null;\n        }\n        if (this.renderers.summaryTemplate) {\n            return this.renderers.summaryTemplate.cloneNode(true);\n        }\n        var elem = this.ctx.asElement(this.renderers.summary.template);\n        elem.classList.add(cssClass('summary'), cssClass('th-summary'), cssClass(\"renderer-\".concat(this.renderers.summaryId)));\n        elem.dataset.renderer = this.renderers.summaryId;\n        this.renderers.summaryTemplate = elem.cloneNode(true);\n        return elem;\n    };\n    RenderColumn.prototype.createHeader = function () {\n        var node = createHeader(this.c, this.ctx, {\n            extraPrefix: 'th',\n            dragAble: this.flags.advancedUIFeatures,\n            mergeDropAble: this.flags.advancedModelFeatures,\n            rearrangeAble: this.flags.advancedUIFeatures,\n            resizeable: this.flags.advancedUIFeatures,\n        });\n        node.classList.add(cssClass('header'));\n        if (!this.flags.disableFrozenColumns) {\n            node.classList.toggle(engineCssClass('frozen'), this.frozen);\n        }\n        if (this.renderers && this.renderers.summary) {\n            var summary = this.summaryRenderer();\n            node.appendChild(summary);\n        }\n        return this.updateHeader(node);\n    };\n    RenderColumn.prototype.hasSummaryLine = function () {\n        return Boolean(this.c.getMetaData().summary);\n    };\n    RenderColumn.prototype.updateHeader = function (node) {\n        updateHeader(node, this.c);\n        if (!this.renderers || !this.renderers.summary) {\n            return node;\n        }\n        var summary = node.getElementsByClassName(cssClass('summary'))[0];\n        summary.remove();\n        summary = this.summaryRenderer();\n        node.appendChild(summary);\n        var ready = this.renderers.summary.update(summary);\n        if (ready) {\n            return { item: node, ready: ready };\n        }\n        return node;\n    };\n    RenderColumn.prototype.createCell = function (index) {\n        var isGroup = this.ctx.isGroup(index);\n        var node = isGroup ? this.groupRenderer() : this.singleRenderer();\n        return this.updateCell(node, index);\n    };\n    RenderColumn.prototype.updateCell = function (node, index) {\n        var _this = this;\n        if (!this.flags.disableFrozenColumns) {\n            node.classList.toggle(engineCssClass('frozen'), this.frozen);\n        }\n        var isGroup = this.ctx.isGroup(index);\n        // assert that we have the template of the right mode\n        var oldRenderer = node.dataset.renderer;\n        var currentRenderer = isGroup ? this.renderers.groupId : this.renderers.singleId;\n        var oldGroup = node.dataset.group;\n        var currentGroup = isGroup ? 'g' : 'd';\n        if (oldRenderer !== currentRenderer || oldGroup !== currentGroup) {\n            node = isGroup ? this.groupRenderer() : this.singleRenderer();\n        }\n        var ready;\n        if (isGroup) {\n            var g = this.ctx.getGroup(index);\n            ready = this.renderers.group.update(node, g);\n        }\n        else {\n            var r_1 = this.ctx.getRow(index);\n            var row = this.ctx.provider.getRow(r_1.dataIndex);\n            if (!isPromiseLike(row)) {\n                ready = this.renderers.single.update(node, row, r_1.relativeIndex, r_1.group);\n            }\n            else {\n                ready = chainAbortAble(row, function (row) { return _this.renderers.single.update(node, row, r_1.relativeIndex, r_1.group); });\n            }\n        }\n        if (ready) {\n            return { item: node, ready: ready };\n        }\n        return node;\n    };\n    RenderColumn.prototype.renderCell = function (ctx, index) {\n        var r = this.ctx.getRow(index);\n        var s = this.renderers.single;\n        if (!s.render) {\n            return false;\n        }\n        var row = this.ctx.provider.getRow(r.dataIndex);\n        if (!isPromiseLike(row)) {\n            return s.render(ctx, row, r.relativeIndex, r.group) || false;\n        }\n        return chainAbortAble(row, function (row) { return s.render(ctx, row, r.relativeIndex, r.group) || false; });\n    };\n    return RenderColumn;\n}());\nexport default RenderColumn;\nfunction chainAbortAble(toWait, mapper) {\n    var aborted = false;\n    var p = new Promise(function (resolve) {\n        if (aborted) {\n            return;\n        }\n        toWait.then(function (r) {\n            if (aborted) {\n                return;\n            }\n            var mapped = mapper(r);\n            if (isAbortAble(mapped)) {\n                p.abort = mapped.abort.bind(mapped);\n                return p.then(resolve);\n            }\n            return resolve(mapped);\n        });\n    });\n    p.abort = function () {\n        aborted = true;\n    };\n    return p;\n}\n//# sourceMappingURL=RenderColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { abortAbleAll, isAsyncUpdate } from 'lineupengine';\nimport { round } from '../internal';\nimport { multiLevelGridCSSClass } from '../renderer/utils';\nimport { COLUMN_PADDING, cssClass } from '../styles';\nimport { createHeader, updateHeader } from './header';\nimport RenderColumn from './RenderColumn';\n/** @internal */\nvar MultiLevelRenderColumn = /** @class */ (function (_super) {\n    __extends(MultiLevelRenderColumn, _super);\n    function MultiLevelRenderColumn() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.summaries = [];\n        return _this;\n    }\n    Object.defineProperty(MultiLevelRenderColumn.prototype, \"mc\", {\n        get: function () {\n            return this.c;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MultiLevelRenderColumn.prototype, \"width\", {\n        get: function () {\n            return this.c.getWidth() + COLUMN_PADDING * this.mc.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MultiLevelRenderColumn.prototype.createHeader = function () {\n        var r = _super.prototype.createHeader.call(this);\n        var wrapper = this.ctx.document.createElement('div');\n        wrapper.classList.add(cssClass('nested'));\n        wrapper.classList.add(multiLevelGridCSSClass(this.ctx.idPrefix, this.c));\n        if (isAsyncUpdate(r)) {\n            r.item.appendChild(wrapper);\n        }\n        else {\n            r.appendChild(wrapper);\n        }\n        return this.updateNested(wrapper, r);\n    };\n    MultiLevelRenderColumn.prototype.matchChildren = function (wrapper, children) {\n        var _this = this;\n        function matches(col, i) {\n            //do both match?\n            var n = wrapper.children[i];\n            return n != null && n.dataset.colId === col.id;\n        }\n        if (children.every(matches) && children.length === wrapper.childElementCount) {\n            // 1:1 match\n            return;\n        }\n        var lookup = new Map(Array.from(wrapper.children).map(function (n, i) {\n            return [n.dataset.colId, { node: n, summary: _this.summaries[i] }];\n        }));\n        // reset summaries array\n        this.summaries = [];\n        children.forEach(function (cc, i) {\n            var existing = lookup.get(cc.id);\n            if (existing) {\n                // reuse existing\n                lookup.delete(cc.id);\n                var n_1 = existing.node;\n                n_1.style.gridColumnStart = (i + 1).toString();\n                wrapper.appendChild(n_1);\n                _this.summaries[i] = existing.summary;\n                return;\n            }\n            var n = createHeader(cc, _this.ctx, {\n                extraPrefix: 'th',\n                mergeDropAble: false,\n                dragAble: _this.flags.advancedModelFeatures,\n                rearrangeAble: _this.flags.advancedModelFeatures,\n                resizeable: _this.flags.advancedModelFeatures,\n            });\n            n.classList.add(cssClass('header'), cssClass('nested-th'));\n            n.style.gridColumnStart = (i + 1).toString();\n            wrapper.appendChild(n);\n            if (!_this.renderers || !_this.renderers.summary) {\n                return;\n            }\n            var summary = _this.ctx.summaryRenderer(cc, false);\n            var summaryNode = _this.ctx.asElement(summary.template);\n            summaryNode.classList.add(cssClass('summary'), cssClass('th-summary'), cssClass(\"renderer-\".concat(cc.getSummaryRenderer())));\n            summaryNode.dataset.renderer = cc.getSummaryRenderer();\n            n.appendChild(summaryNode);\n            _this.summaries[i] = summary;\n            summary.update(summaryNode);\n        });\n        // delete not used ones anymore\n        lookup.forEach(function (v) { return v.node.remove(); });\n    };\n    MultiLevelRenderColumn.prototype.updateHeader = function (node) {\n        var r = _super.prototype.updateHeader.call(this, node);\n        node = isAsyncUpdate(r) ? r.item : r;\n        var wrapper = node.getElementsByClassName(cssClass('nested'))[0];\n        if (!wrapper) {\n            return r; // too early\n        }\n        node.appendChild(wrapper); // ensure the last one\n        return this.updateNested(wrapper, r);\n    };\n    MultiLevelRenderColumn.prototype.hasSummaryLine = function () {\n        return _super.prototype.hasSummaryLine.call(this) || this.mc.children.some(function (c) { return Boolean(c.getMetaData().summary); });\n    };\n    MultiLevelRenderColumn.prototype.updateWidthRule = function (style) {\n        var mc = this.mc;\n        // need this for chrome to work properly\n        var widths = mc.children.map(function (c) { return \"minmax(0, \".concat(round(c.getWidth()), \"fr)\"); });\n        var clazz = multiLevelGridCSSClass(this.ctx.idPrefix, this.c);\n        style.updateRule(\"stacked-\".concat(this.c.id), \".\".concat(clazz), {\n            display: 'grid',\n            gridTemplateColumns: widths.join(' '),\n        });\n        return clazz;\n    };\n    MultiLevelRenderColumn.prototype.updateNested = function (wrapper, r) {\n        var _this = this;\n        var sub = this.mc.isShowNestedSummaries() ? this.mc.children : [];\n        this.matchChildren(wrapper, sub);\n        var children = Array.from(wrapper.children);\n        var toWait = [];\n        var header;\n        if (isAsyncUpdate(r)) {\n            toWait.push(r.ready);\n            header = r.item;\n        }\n        else {\n            header = r;\n        }\n        sub.forEach(function (c, i) {\n            var node = children[i];\n            updateHeader(node, c);\n            if (!_this.renderers || !_this.renderers.summary) {\n                return;\n            }\n            var summary = node.getElementsByClassName(cssClass('summary'))[0];\n            var oldRenderer = summary.dataset.renderer;\n            var currentRenderer = c.getSummaryRenderer();\n            if (oldRenderer !== currentRenderer) {\n                var renderer = _this.ctx.summaryRenderer(c, false);\n                summary.remove();\n                summary = _this.ctx.asElement(renderer.template);\n                summary.classList.add(cssClass('summary'), cssClass('th-summary'), cssClass(\"renderer-\".concat(currentRenderer)));\n                summary.dataset.renderer = currentRenderer;\n                _this.summaries[i] = renderer;\n                node.appendChild(summary);\n            }\n            var ready = _this.summaries[i].update(summary);\n            if (ready) {\n                toWait.push(ready);\n            }\n        });\n        if (toWait.length === 0) {\n            return header;\n        }\n        return {\n            item: header,\n            ready: abortAbleAll(toWait),\n        };\n    };\n    return MultiLevelRenderColumn;\n}(RenderColumn));\nexport default MultiLevelRenderColumn;\n//# sourceMappingURL=MultiLevelRenderColumn.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { OrderedSet, AEventDispatcher } from '../internal';\nimport { isGroup } from '../model';\nimport { cssClass, engineCssClass } from '../styles';\nimport { forEachIndices } from '../model/internal';\nimport { rangeSelection } from '../provider/utils';\n/** @internal */\nvar SelectionManager = /** @class */ (function (_super) {\n    __extends(SelectionManager, _super);\n    function SelectionManager(ctx, body) {\n        var _this = _super.call(this) || this;\n        _this.ctx = ctx;\n        _this.body = body;\n        _this.start = null;\n        var root = body.parentElement.parentElement;\n        var hr = root.querySelector('hr');\n        if (!hr) {\n            hr = root.ownerDocument.createElement('hr');\n            root.appendChild(hr);\n        }\n        _this.hr = hr;\n        _this.hr.classList.add(cssClass('hr'));\n        var mouseMove = function (evt) {\n            _this.showHint(evt);\n        };\n        var mouseUp = function (evt) {\n            _this.body.removeEventListener('mousemove', mouseMove);\n            _this.body.removeEventListener('mouseup', mouseUp);\n            _this.body.removeEventListener('mouseleave', mouseUp);\n            if (!_this.start) {\n                return;\n            }\n            var row = engineCssClass('tr');\n            var startNode = _this.start.node.classList.contains(row)\n                ? _this.start.node\n                : _this.start.node.closest(\".\".concat(row));\n            // somehow on firefox the mouseUp will be triggered on the original node\n            // thus search the node explicitly\n            var end = _this.body.ownerDocument.elementFromPoint(evt.clientX, evt.clientY);\n            var endNode = end.classList.contains(row) ? end : end.closest(\".\".concat(row));\n            _this.start = null;\n            _this.body.classList.remove(cssClass('selection-active'));\n            _this.hr.classList.remove(cssClass('selection-active'));\n            _this.select(evt.ctrlKey, startNode, endNode);\n        };\n        body.addEventListener('mousedown', function (evt) {\n            var r = root.getBoundingClientRect();\n            _this.start = { x: evt.clientX, y: evt.clientY, xShift: r.left, yShift: r.top, node: evt.target };\n            _this.body.classList.add(cssClass('selection-active'));\n            body.addEventListener('mousemove', mouseMove, {\n                passive: true,\n            });\n            body.addEventListener('mouseup', mouseUp, {\n                passive: true,\n            });\n            body.addEventListener('mouseleave', mouseUp, {\n                passive: true,\n            });\n        }, {\n            passive: true,\n        });\n        return _this;\n    }\n    SelectionManager.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([SelectionManager.EVENT_SELECT_RANGE]);\n    };\n    SelectionManager.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    SelectionManager.prototype.select = function (additional, startNode, endNode) {\n        var _this = this;\n        if (!startNode || !endNode || startNode === endNode) {\n            return; // no single\n        }\n        var startIndex = Number.parseInt(startNode.dataset.index, 10);\n        var endIndex = Number.parseInt(endNode.dataset.index, 10);\n        var from = Math.min(startIndex, endIndex);\n        var end = Math.max(startIndex, endIndex);\n        if (from === end) {\n            return; // no single\n        }\n        // bounce event end\n        requestAnimationFrame(function () { return _this.fire(SelectionManager.EVENT_SELECT_RANGE, from, end, additional); });\n    };\n    SelectionManager.prototype.showHint = function (end) {\n        var start = this.start;\n        var sy = start.y;\n        var ey = end.clientY;\n        var visible = Math.abs(sy - ey) > SelectionManager.MIN_DISTANCE;\n        this.hr.classList.toggle(cssClass('selection-active'), visible);\n        this.hr.style.transform = \"translate(\".concat(start.x - start.xShift, \"px,\").concat(sy - start.yShift, \"px)scale(1,\").concat(Math.abs(ey - sy), \")rotate(\").concat(ey > sy ? 90 : -90, \"deg)\");\n    };\n    SelectionManager.prototype.remove = function (node) {\n        node.onclick = undefined;\n    };\n    SelectionManager.prototype.add = function (node) {\n        var _this = this;\n        node.onclick = function (evt) {\n            var dataIndex = Number.parseInt(node.dataset.i, 10);\n            if (evt.shiftKey) {\n                var relIndex = Number.parseInt(node.dataset.index, 10);\n                var ranking = node.parentElement.dataset.ranking;\n                if (rangeSelection(_this.ctx.provider, ranking, dataIndex, relIndex, evt.ctrlKey)) {\n                    return;\n                }\n            }\n            _this.ctx.provider.toggleSelection(dataIndex, evt.ctrlKey);\n        };\n    };\n    SelectionManager.prototype.selectRange = function (rows, additional) {\n        if (additional === void 0) { additional = false; }\n        var current = new OrderedSet(additional ? this.ctx.provider.getSelection() : []);\n        var toggle = function (dataIndex) {\n            if (current.has(dataIndex)) {\n                current.delete(dataIndex);\n            }\n            else {\n                current.add(dataIndex);\n            }\n        };\n        rows.forEach(function (d) {\n            if (isGroup(d)) {\n                forEachIndices(d.order, toggle);\n            }\n            else {\n                toggle(d.dataIndex);\n            }\n        });\n        this.ctx.provider.setSelection(Array.from(current));\n    };\n    SelectionManager.prototype.updateState = function (node, dataIndex) {\n        if (this.ctx.provider.isSelected(dataIndex)) {\n            node.classList.add(cssClass('selected'));\n        }\n        else {\n            node.classList.remove(cssClass('selected'));\n        }\n    };\n    SelectionManager.prototype.update = function (node, selectedDataIndices) {\n        var dataIndex = Number.parseInt(node.dataset.i, 10);\n        if (selectedDataIndices.has(dataIndex)) {\n            node.classList.add(cssClass('selected'));\n        }\n        else {\n            node.classList.remove(cssClass('selected'));\n        }\n    };\n    SelectionManager.EVENT_SELECT_RANGE = 'selectRange';\n    SelectionManager.MIN_DISTANCE = 10;\n    return SelectionManager;\n}(AEventDispatcher));\nexport default SelectionManager;\n//# sourceMappingURL=SelectionManager.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { ACellTableSection, isAbortAble, isAsyncUpdate, isLoadingCell, nonUniformContext, PrefetchMixin, tableIds, uniformContext, } from 'lineupengine';\nimport { HOVER_DELAY_SHOW_DETAIL } from '../constants';\nimport { AEventDispatcher, clear, debounce, suffix } from '../internal';\nimport { Column, isGroup, isMultiLevelColumn, Ranking, StackColumn, defaultGroup, } from '../model';\nimport { CANVAS_HEIGHT, COLUMN_PADDING, cssClass, engineCssClass } from '../styles';\nimport { lineupAnimation } from './animation';\nimport MultiLevelRenderColumn from './MultiLevelRenderColumn';\nimport RenderColumn from './RenderColumn';\nimport SelectionManager from './SelectionManager';\nimport { groupRoots } from '../model/internal';\nimport { isAlwaysShowingGroupStrategy, toRowMeta } from '../provider/internal';\n/** @internal */\nvar RankingEvents = /** @class */ (function (_super) {\n    __extends(RankingEvents, _super);\n    function RankingEvents() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RankingEvents.prototype.fire = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        _super.prototype.fire.apply(this, __spreadArray([type], args, false));\n    };\n    RankingEvents.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([\n            RankingEvents.EVENT_WIDTH_CHANGED,\n            RankingEvents.EVENT_UPDATE_DATA,\n            RankingEvents.EVENT_RECREATE,\n            RankingEvents.EVENT_HIGHLIGHT_CHANGED,\n        ]);\n    };\n    RankingEvents.EVENT_WIDTH_CHANGED = 'widthChanged';\n    RankingEvents.EVENT_UPDATE_DATA = 'updateData';\n    RankingEvents.EVENT_RECREATE = 'recreate';\n    RankingEvents.EVENT_HIGHLIGHT_CHANGED = 'highlightChanged';\n    return RankingEvents;\n}(AEventDispatcher));\nvar PASSIVE = {\n    passive: false,\n};\nvar EngineRanking = /** @class */ (function (_super) {\n    __extends(EngineRanking, _super);\n    function EngineRanking(ranking, header, body, tableId, style, ctx, roptions) {\n        if (roptions === void 0) { roptions = {}; }\n        var _this = _super.call(this, header, body, tableId, style, { mixins: [PrefetchMixin], batchSize: 20 }) || this;\n        _this.ranking = ranking;\n        _this.ctx = ctx;\n        _this.loadingCanvas = new WeakMap();\n        _this.data = [];\n        _this.highlight = -1;\n        _this.canvasPool = [];\n        _this.currentCanvasShift = 0;\n        _this.currentCanvasWidth = 0;\n        _this.events = new RankingEvents();\n        _this.roptions = {\n            animation: true,\n            levelOfDetail: function () { return 'high'; },\n            customRowUpdate: function () { return undefined; },\n            flags: {\n                disableFrozenColumns: false,\n                advancedModelFeatures: true,\n                advancedRankingFeatures: true,\n                advancedUIFeatures: true,\n            },\n        };\n        _this.canvasMouseHandler = {\n            timer: new Set(),\n            hoveredRows: new Set(),\n            cleanUp: function () {\n                var c = _this.canvasMouseHandler;\n                c.timer.forEach(function (timer) {\n                    clearTimeout(timer);\n                });\n                c.timer.clear();\n                for (var _i = 0, _a = Array.from(c.hoveredRows); _i < _a.length; _i++) {\n                    var row = _a[_i];\n                    c.unhover(row);\n                }\n            },\n            enter: function (evt) {\n                var c = _this.canvasMouseHandler;\n                c.cleanUp();\n                var row = evt.currentTarget;\n                row.addEventListener('mouseleave', c.leave, PASSIVE);\n                c.timer.add(setTimeout(function () {\n                    c.hoveredRows.add(row);\n                    _this.updateHoveredRow(row, true);\n                }, HOVER_DELAY_SHOW_DETAIL));\n            },\n            leave: function (evt) {\n                // on row to survive canvas removal\n                var c = _this.canvasMouseHandler;\n                var row = (typeof evt.currentTarget !== 'undefined' ? evt.currentTarget : evt);\n                c.unhover(row);\n                c.cleanUp();\n            },\n            unhover: function (row) {\n                // remove self\n                var c = _this.canvasMouseHandler;\n                c.hoveredRows.delete(row);\n                row.removeEventListener('mouseleave', c.leave);\n                if (!EngineRanking.isCanvasRenderedRow(row) && row.parentElement) {\n                    // and part of dom\n                    setTimeout(function () { return _this.updateHoveredRow(row, false); });\n                }\n            },\n        };\n        _this.highlightHandler = {\n            enabled: false,\n            enter: function (evt) {\n                if (_this.highlight >= 0) {\n                    var old = _this.body.getElementsByClassName(engineCssClass('highlighted'))[0];\n                    if (old) {\n                        old.classList.remove(engineCssClass('highlighted'));\n                    }\n                    _this.highlight = -1;\n                }\n                var row = evt.currentTarget;\n                var dataIndex = Number.parseInt(row.dataset.i || '-1', 10);\n                _this.events.fire(EngineRanking.EVENT_HIGHLIGHT_CHANGED, dataIndex);\n            },\n            leave: function () {\n                if (_this.highlight >= 0) {\n                    var old = _this.body.getElementsByClassName(engineCssClass('highlighted'))[0];\n                    if (old) {\n                        old.classList.remove(engineCssClass('highlighted'));\n                    }\n                    _this.highlight = -1;\n                }\n                _this.events.fire(EngineRanking.EVENT_HIGHLIGHT_CHANGED, -1);\n            },\n        };\n        Object.assign(_this.roptions, roptions);\n        body.dataset.ranking = ranking.id;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var that = _this;\n        _this.delayedUpdate = debounce(function () {\n            if (this.type !== Ranking.EVENT_DIRTY_VALUES) {\n                that.events.fire(EngineRanking.EVENT_UPDATE_DATA);\n                return;\n            }\n            if (this.primaryType !== Column.EVENT_RENDERER_TYPE_CHANGED &&\n                this.primaryType !== Column.EVENT_GROUP_RENDERER_TYPE_CHANGED &&\n                this.primaryType !== Column.EVENT_LABEL_CHANGED) {\n                // just the single column will be updated\n                that.updateBody();\n            }\n        }, 50, function (current, next) {\n            var currentEvent = current.self.type;\n            // order changed is more important\n            return currentEvent === Ranking.EVENT_ORDER_CHANGED ? current : next;\n        });\n        _this.delayedUpdateAll = debounce(function () { return _this.updateAll(); }, 50);\n        _this.delayedUpdateColumnWidths = debounce(function () { return _this.updateColumnWidths(); }, 50);\n        ranking.on(\"\".concat(Ranking.EVENT_ADD_COLUMN, \".hist\"), function (col, index) {\n            // index doesn't consider the hidden columns\n            var hiddenOffset = _this.ranking.children.slice(0, index).reduce(function (acc, c) { return acc + (!c.isVisible() ? 1 : 0); }, 0);\n            var shiftedIndex = index - hiddenOffset;\n            _this.columns.splice(shiftedIndex, 0, _this.createCol(col, shiftedIndex));\n            _this.reindex();\n            _this.delayedUpdateAll();\n        });\n        ranking.on(\"\".concat(Ranking.EVENT_REMOVE_COLUMN, \".body\"), function (col, index) {\n            EngineRanking.disableListener(col);\n            // index doesn't consider the hidden columns\n            var hiddenOffset = _this.ranking.children.slice(0, index).reduce(function (acc, c) { return acc + (!c.isVisible() ? 1 : 0); }, 0);\n            var shiftedIndex = index - hiddenOffset;\n            _this.columns.splice(shiftedIndex, 1);\n            _this.reindex();\n            _this.delayedUpdateAll();\n        });\n        ranking.on(\"\".concat(Ranking.EVENT_MOVE_COLUMN, \".body\"), function (col, index) {\n            //delete first\n            var shiftedOld = _this.columns.findIndex(function (d) { return d.c === col; });\n            var c = _this.columns.splice(shiftedOld, 1)[0];\n            // adapt target index based on previous index, i.e shift by one\n            var hiddenOffset = _this.ranking.children.slice(0, index).reduce(function (acc, c) { return acc + (!c.isVisible() ? 1 : 0); }, 0);\n            var shiftedIndex = index - hiddenOffset;\n            _this.columns.splice(shiftedOld < shiftedIndex ? shiftedIndex - 1 : shiftedIndex, 0, c);\n            _this.reindex();\n            _this.delayedUpdateAll();\n        });\n        ranking.on(\"\".concat(Ranking.EVENT_COLUMN_VISIBILITY_CHANGED, \".body\"), function (col, _oldValue, newValue) {\n            if (newValue) {\n                // become visible\n                var index = ranking.children.indexOf(col);\n                var hiddenOffset = _this.ranking.children\n                    .slice(0, index)\n                    .reduce(function (acc, c) { return acc + (!c.isVisible() ? 1 : 0); }, 0);\n                var shiftedIndex = index - hiddenOffset;\n                _this.columns.splice(shiftedIndex, 0, _this.createCol(col, shiftedIndex));\n            }\n            else {\n                // hide\n                var index = _this.columns.findIndex(function (d) { return d.c === col; });\n                EngineRanking.disableListener(col);\n                _this.columns.splice(index, 1);\n            }\n            _this.reindex();\n            _this.delayedUpdateAll();\n        });\n        ranking.on(\"\".concat(Ranking.EVENT_ORDER_CHANGED, \".body\"), _this.delayedUpdate);\n        _this.selection = new SelectionManager(_this.ctx, body);\n        _this.selection.on(SelectionManager.EVENT_SELECT_RANGE, function (from, to, additional) {\n            _this.selection.selectRange(_this.data.slice(from, to + 1), additional);\n        });\n        _this.renderCtx = Object.assign({\n            isGroup: function (index) { return isGroup(_this.data[index]); },\n            getRow: function (index) { return _this.data[index]; },\n            getGroup: function (index) { return _this.data[index]; },\n        }, ctx);\n        // default context\n        _this.columns = ranking.children.filter(function (c) { return c.isVisible(); }).map(function (c, i) { return _this.createCol(c, i); });\n        _this._context = Object.assign({\n            columns: _this.columns,\n            column: nonUniformContext(_this.columns.map(function (w) { return w.width; }), 100, COLUMN_PADDING),\n        }, uniformContext(0, 20));\n        _this.columns.forEach(function (column) {\n            if (column instanceof MultiLevelRenderColumn) {\n                column.updateWidthRule(_this.style);\n            }\n            column.renderers = _this.ctx.createRenderer(column.c);\n        });\n        _this.style.updateRule(\"hoverOnly\".concat(_this.tableId), \"\\n      #\".concat(tableIds(_this.tableId).tbody, \":hover > .\").concat(engineCssClass('tr'), \":hover .\").concat(cssClass('hover-only'), \",\\n      #\").concat(tableIds(_this.tableId).tbody, \" > .\").concat(engineCssClass('tr'), \".\").concat(cssClass('selected'), \" .\").concat(cssClass('hover-only'), \",\\n      #\").concat(tableIds(_this.tableId).tbody, \" > .\").concat(engineCssClass('tr'), \".\").concat(engineCssClass('highlighted'), \" .\").concat(cssClass('hover-only')), {\n            visibility: 'visible',\n        });\n        _this.updateCanvasRule();\n        return _this;\n    }\n    EngineRanking.prototype.on = function (type, listener) {\n        this.events.on(type, listener);\n        return this;\n    };\n    Object.defineProperty(EngineRanking.prototype, \"id\", {\n        get: function () {\n            return this.ranking.id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EngineRanking.prototype.onVisibilityChanged = function (visible) {\n        _super.prototype.onVisibilityChanged.call(this, visible);\n        if (visible) {\n            this.delayedUpdate.call({ type: Ranking.EVENT_ORDER_CHANGED });\n        }\n    };\n    EngineRanking.prototype.updateHeaders = function () {\n        this.updateColumnSummaryFlag();\n        return _super.prototype.updateHeaders.call(this);\n    };\n    Object.defineProperty(EngineRanking.prototype, \"currentData\", {\n        get: function () {\n            return this.data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EngineRanking.prototype, \"context\", {\n        get: function () {\n            return this._context;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EngineRanking.prototype.createHeader = function (_document, column) {\n        return column.createHeader();\n    };\n    EngineRanking.prototype.updateColumnSummaryFlag = function () {\n        // updates the header flag depending on whether there are any sublabels\n        this.header.classList.toggle(cssClass('show-sublabel'), this.columns.some(function (c) { return c.hasSummaryLine(); }));\n    };\n    EngineRanking.prototype.updateHeader = function (node, column) {\n        if (column instanceof MultiLevelRenderColumn) {\n            column.updateWidthRule(this.style);\n        }\n        return column.updateHeader(node);\n    };\n    EngineRanking.prototype.createCell = function (_document, index, column) {\n        return column.createCell(index);\n    };\n    EngineRanking.prototype.createCellHandled = function (col, index) {\n        var r = col.createCell(index);\n        var item;\n        if (isAsyncUpdate(r)) {\n            item = this.handleCellReady(r.item, r.ready, col.index);\n        }\n        else {\n            item = r;\n        }\n        this.initCellClasses(item, col.id);\n        return item;\n    };\n    EngineRanking.prototype.updateCell = function (node, index, column) {\n        return column.updateCell(node, index);\n    };\n    EngineRanking.prototype.selectCanvas = function () {\n        if (this.canvasPool.length > 0) {\n            return this.canvasPool.pop();\n        }\n        var c = this.body.ownerDocument.createElement('canvas');\n        c.classList.add(cssClass(\"low-c\".concat(this.tableId)));\n        return c;\n    };\n    EngineRanking.prototype.rowFlags = function (row) {\n        var rowany = row;\n        var v = rowany.__lu__;\n        if (v == null) {\n            return (rowany.__lu__ = {});\n        }\n        return v;\n    };\n    EngineRanking.prototype.visibleRenderedWidth = function () {\n        var width = 0;\n        for (var _i = 0, _a = this.visibleColumns.frozen; _i < _a.length; _i++) {\n            var col = _a[_i];\n            width += this.columns[col].width + COLUMN_PADDING;\n        }\n        for (var col = this.visibleColumns.first; col <= this.visibleColumns.last; ++col) {\n            width += this.columns[col].width + COLUMN_PADDING;\n        }\n        if (width > 0) {\n            width -= COLUMN_PADDING; // for the last one\n        }\n        return width;\n    };\n    EngineRanking.prototype.pushLazyRedraw = function (canvas, x, column, render) {\n        var _this = this;\n        render.then(function (r) {\n            var l = _this.loadingCanvas.get(canvas) || [];\n            var pos = l.findIndex(function (d) { return d.render === render && d.col === column.index; });\n            if (pos < 0) {\n                // not part anymore ignore\n                return;\n            }\n            l.splice(pos, 1);\n            if (typeof r === 'function') {\n                // i.e not aborted\n                var ctx = canvas.getContext('2d');\n                ctx.clearRect(x - 1, 0, column.width + 2, canvas.height);\n                ctx.save();\n                ctx.translate(x, 0);\n                r(ctx);\n                ctx.restore();\n            }\n            if (l.length > 0) {\n                return;\n            }\n            _this.loadingCanvas.delete(canvas);\n            canvas.classList.remove(cssClass('loading-c'));\n        });\n        if (!this.loadingCanvas.has(canvas)) {\n            canvas.classList.add(cssClass('loading-c'));\n            this.loadingCanvas.set(canvas, [{ col: column.index, render: render }]);\n        }\n        else {\n            this.loadingCanvas.get(canvas).push({ col: column.index, render: render });\n        }\n    };\n    EngineRanking.prototype.renderRow = function (canvas, node, index) {\n        var _this = this;\n        if (this.loadingCanvas.has(canvas)) {\n            for (var _i = 0, _a = this.loadingCanvas.get(canvas); _i < _a.length; _i++) {\n                var a = _a[_i];\n                a.render.abort();\n            }\n            this.loadingCanvas.delete(canvas);\n        }\n        canvas.classList.remove(cssClass('loading-c'));\n        canvas.width = this.currentCanvasWidth;\n        canvas.height = CANVAS_HEIGHT;\n        var ctx = canvas.getContext('2d');\n        ctx.imageSmoothingEnabled = false;\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.save();\n        var domColumns = [];\n        var x = 0;\n        var renderCellImpl = function (col) {\n            var c = _this.columns[col];\n            var r = c.renderCell(ctx, index);\n            if (r === true) {\n                domColumns.push(c);\n            }\n            else if (r !== false && isAbortAble(r)) {\n                _this.pushLazyRedraw(canvas, x, c, r);\n            }\n            var shift = c.width + COLUMN_PADDING;\n            x += shift;\n            ctx.translate(shift, 0);\n        };\n        for (var _b = 0, _c = this.visibleColumns.frozen; _b < _c.length; _b++) {\n            var col = _c[_b];\n            renderCellImpl(col);\n        }\n        for (var col = this.visibleColumns.first; col <= this.visibleColumns.last; ++col) {\n            renderCellImpl(col);\n        }\n        ctx.restore();\n        var visibleElements = node.childElementCount - 1; // for canvas\n        if (domColumns.length === 0) {\n            while (node.lastElementChild !== node.firstElementChild) {\n                var n = node.lastElementChild;\n                node.removeChild(n);\n                this.recycleCell(n);\n            }\n            return;\n        }\n        if (domColumns.length === 1) {\n            var first = domColumns[0];\n            if (visibleElements === 0) {\n                var item = this.createCellHandled(first, index);\n                item.classList.add(cssClass('low'));\n                node.appendChild(item);\n                return;\n            }\n            var firstDOM = node.lastElementChild;\n            if (visibleElements === 1 && firstDOM.dataset.colId === first.id) {\n                var isLoading = isLoadingCell(firstDOM);\n                if (isLoading) {\n                    var item = this.createCellHandled(first, index);\n                    node.replaceChild(item, firstDOM);\n                    this.recycleCell(firstDOM, first.index);\n                    return;\n                }\n                this.updateCellImpl(first, node.lastElementChild, index);\n                return;\n            }\n        }\n        var existing = new Map(Array.from(node.children).slice(1).map(function (d) { return [d.dataset.id, d]; }));\n        for (var _d = 0, domColumns_1 = domColumns; _d < domColumns_1.length; _d++) {\n            var col = domColumns_1[_d];\n            var elem = existing.get(col.id);\n            if (elem && !isLoadingCell(elem)) {\n                existing.delete(col.id);\n                this.updateCellImpl(col, elem, index);\n            }\n            else {\n                var c = this.createCellHandled(col, index);\n                c.classList.add(cssClass('low'));\n                node.appendChild(c);\n            }\n        }\n        existing.forEach(function (v) {\n            v.remove();\n            _this.recycleCell(v);\n        });\n    };\n    EngineRanking.prototype.updateCanvasCell = function (canvas, node, index, column, x) {\n        // delete lazy that would render the same thing\n        if (this.loadingCanvas.has(canvas)) {\n            var l = this.loadingCanvas.get(canvas);\n            var me = l.filter(function (d) { return d.col === column.index; });\n            if (me.length > 0) {\n                this.loadingCanvas.set(canvas, l.filter(function (d) { return d.col !== column.index; }));\n                for (var _i = 0, me_1 = me; _i < me_1.length; _i++) {\n                    var a = me_1[_i];\n                    a.render.abort();\n                }\n            }\n        }\n        var ctx = canvas.getContext('2d');\n        ctx.clearRect(x - 1, 0, column.width + 2, canvas.height);\n        ctx.save();\n        ctx.translate(x, 0);\n        var needDOM = column.renderCell(ctx, index);\n        ctx.restore();\n        if (typeof needDOM !== 'boolean' && isAbortAble(needDOM)) {\n            this.pushLazyRedraw(canvas, x, column, needDOM);\n        }\n        if (needDOM !== true && node.childElementCount === 1) {\n            // just canvas\n            return;\n        }\n        var elem = node.querySelector(\"[data-id=\\\"\".concat(column.id, \"\\\"]\"));\n        if (elem && !needDOM) {\n            elem.remove();\n            this.recycleCell(elem, column.index);\n            return;\n        }\n        if (elem) {\n            return this.updateCellImpl(column, elem, index);\n        }\n        var c = this.createCellHandled(column, index);\n        c.classList.add(cssClass('low'));\n        node.appendChild(c);\n    };\n    EngineRanking.prototype.reindex = function () {\n        this.columns.forEach(function (c, i) {\n            c.index = i;\n        });\n    };\n    EngineRanking.prototype.updateAll = function () {\n        var _this = this;\n        this.columns.forEach(function (c, i) {\n            c.index = i;\n            c.renderers = _this.ctx.createRenderer(c.c);\n        });\n        this._context = Object.assign({}, this._context, {\n            column: nonUniformContext(this.columns.map(function (w) { return w.width; }), 100, COLUMN_PADDING),\n        });\n        this.updateColumnSummaryFlag();\n        this.events.fire(EngineRanking.EVENT_RECREATE);\n        _super.prototype.recreate.call(this);\n        this.events.fire(EngineRanking.EVENT_WIDTH_CHANGED);\n    };\n    EngineRanking.prototype.updateBody = function () {\n        var _this = this;\n        if (this.hidden) {\n            return;\n        }\n        this.events.fire(EngineRanking.EVENT_WIDTH_CHANGED);\n        _super.prototype.forEachRow.call(this, function (row, rowIndex) { return _this.updateRow(row, rowIndex); });\n    };\n    EngineRanking.prototype.updateHeaderOf = function (col) {\n        var i = this._context.columns.findIndex(function (d) { return d.c === col; });\n        if (i < 0) {\n            return false;\n        }\n        var node = this.header.children[i];\n        var column = this._context.columns[i];\n        if (node && column) {\n            this.updateHeader(node, column);\n        }\n        this.updateColumnSummaryFlag();\n        return node && column;\n    };\n    EngineRanking.prototype.createRow = function (node, rowIndex) {\n        node.classList.add(this.style.cssClasses.tr);\n        this.roptions.customRowUpdate(node, rowIndex);\n        if (this.highlightHandler.enabled) {\n            node.addEventListener('mouseenter', this.highlightHandler.enter, PASSIVE);\n            this.rowFlags(node).highlight = true;\n        }\n        var isGroup = this.renderCtx.isGroup(rowIndex);\n        var meta = this.toRowMeta(rowIndex);\n        if (!meta) {\n            delete node.dataset.meta;\n        }\n        else {\n            node.dataset.meta = meta;\n        }\n        if (isGroup) {\n            node.dataset.agg = 'group';\n            _super.prototype.createRow.call(this, node, rowIndex);\n            return;\n        }\n        var dataIndex = this.renderCtx.getRow(rowIndex).dataIndex;\n        node.classList.toggle(engineCssClass('highlighted'), this.highlight === dataIndex);\n        node.dataset.i = dataIndex.toString();\n        node.dataset.agg = 'detail'; //or 'group'\n        this.selection.updateState(node, dataIndex);\n        this.selection.add(node);\n        var low = this.roptions.levelOfDetail(rowIndex) === 'low';\n        node.classList.toggle(cssClass('low'), low);\n        if (!low || this.ctx.provider.isSelected(dataIndex)) {\n            _super.prototype.createRow.call(this, node, rowIndex);\n            return;\n        }\n        var canvas = this.selectCanvas();\n        node.appendChild(canvas);\n        node.addEventListener('mouseenter', this.canvasMouseHandler.enter, PASSIVE);\n        this.renderRow(canvas, node, rowIndex);\n    };\n    EngineRanking.prototype.updateRow = function (node, rowIndex, hoverLod) {\n        this.roptions.customRowUpdate(node, rowIndex);\n        var computedLod = this.roptions.levelOfDetail(rowIndex);\n        var low = (hoverLod ? hoverLod : computedLod) === 'low';\n        var wasLow = node.classList.contains(cssClass('low'));\n        var isGroup = this.renderCtx.isGroup(rowIndex);\n        var wasGroup = node.dataset.agg === 'group';\n        node.classList.toggle(cssClass('low'), computedLod === 'low');\n        if (this.highlightHandler.enabled && !this.rowFlags(node).highlight) {\n            node.addEventListener('mouseenter', this.highlightHandler.enter, PASSIVE);\n            this.rowFlags(node).highlight = true;\n        }\n        if (isGroup !== wasGroup) {\n            // change of mode clear the children to reinitialize them\n            clear(node);\n            // adapt body\n            node.dataset.agg = isGroup ? 'group' : 'detail';\n            if (isGroup) {\n                node.dataset.i = '';\n                this.selection.remove(node);\n            }\n            else {\n                this.selection.add(node);\n            }\n        }\n        if (wasLow && (!computedLod || isGroup)) {\n            node.removeEventListener('mouseenter', this.canvasMouseHandler.enter);\n        }\n        var meta = this.toRowMeta(rowIndex);\n        if (!meta) {\n            delete node.dataset.meta;\n        }\n        else {\n            node.dataset.meta = meta;\n        }\n        if (isGroup) {\n            node.classList.remove(engineCssClass('highlighted'));\n            _super.prototype.updateRow.call(this, node, rowIndex);\n            return;\n        }\n        var dataIndex = this.renderCtx.getRow(rowIndex).dataIndex;\n        node.classList.toggle(engineCssClass('highlighted'), this.highlight === dataIndex);\n        node.dataset.i = dataIndex.toString();\n        this.selection.updateState(node, dataIndex);\n        var canvas = wasLow && node.firstElementChild.nodeName.toLowerCase() === 'canvas'\n            ? node.firstElementChild\n            : null;\n        if (!low || this.ctx.provider.isSelected(dataIndex)) {\n            if (canvas) {\n                this.recycleCanvas(canvas);\n                clear(node);\n                node.removeEventListener('mouseenter', this.canvasMouseHandler.enter);\n            }\n            _super.prototype.updateRow.call(this, node, rowIndex);\n            return;\n        }\n        // use canvas\n        if (wasLow && canvas) {\n            this.renderRow(canvas, node, rowIndex);\n            return;\n        }\n        // clear old\n        clear(node);\n        node.dataset.agg = 'detail';\n        var canvas2 = this.selectCanvas();\n        node.appendChild(canvas2);\n        node.addEventListener('mouseenter', this.canvasMouseHandler.enter, PASSIVE);\n        this.renderRow(canvas2, node, rowIndex);\n    };\n    EngineRanking.prototype.updateCanvasBody = function () {\n        var _this = this;\n        this.updateCanvasRule();\n        _super.prototype.forEachRow.call(this, function (row, index) {\n            if (EngineRanking.isCanvasRenderedRow(row)) {\n                _this.renderRow(row.firstElementChild, row, index);\n            }\n        });\n    };\n    EngineRanking.prototype.toRowMeta = function (rowIndex) {\n        var _this = this;\n        var provider = this.renderCtx.provider;\n        var topNGetter = function (group) { return provider.getTopNAggregated(_this.ranking, group); };\n        return toRowMeta(this.renderCtx.getRow(rowIndex), provider.getAggregationStrategy(), topNGetter);\n    };\n    EngineRanking.prototype.updateCanvasRule = function () {\n        this.style.updateRule(\"renderCanvas\".concat(this.tableId), \".\".concat(cssClass(\"low-c\".concat(this.tableId))), {\n            transform: \"translateX(\".concat(this.currentCanvasShift, \"px)\"),\n            width: \"\".concat(this.currentCanvasWidth, \"px\"),\n        });\n    };\n    EngineRanking.prototype.updateShifts = function (top, left) {\n        _super.prototype.updateShifts.call(this, top, left);\n        var width = this.visibleRenderedWidth();\n        if (left === this.currentCanvasShift && width === this.currentCanvasWidth) {\n            return;\n        }\n        this.currentCanvasShift = left;\n        this.currentCanvasWidth = width;\n        this.updateCanvasBody();\n    };\n    EngineRanking.prototype.recycleCanvas = function (canvas) {\n        if (this.loadingCanvas.has(canvas)) {\n            for (var _i = 0, _a = this.loadingCanvas.get(canvas); _i < _a.length; _i++) {\n                var a = _a[_i];\n                a.render.abort();\n            }\n            this.loadingCanvas.delete(canvas);\n        }\n        else if (!canvas.classList.contains(cssClass('loading-c'))) {\n            this.canvasPool.push(canvas);\n        }\n    };\n    EngineRanking.prototype.enableHighlightListening = function (enable) {\n        var _this = this;\n        if (this.highlightHandler.enabled === enable) {\n            return;\n        }\n        this.highlightHandler.enabled = enable;\n        if (enable) {\n            this.body.addEventListener('mouseleave', this.highlightHandler.leave, PASSIVE);\n            _super.prototype.forEachRow.call(this, function (row) {\n                row.addEventListener('mouseenter', _this.highlightHandler.enter, PASSIVE);\n                _this.rowFlags(row).highlight = true;\n            });\n            return;\n        }\n        this.body.removeEventListener('mouseleave', this.highlightHandler.leave);\n        _super.prototype.forEachRow.call(this, function (row) {\n            row.removeEventListener('mouseenter', _this.highlightHandler.enter);\n            _this.rowFlags(row).highlight = false;\n        });\n    };\n    EngineRanking.prototype.updateHoveredRow = function (row, hover) {\n        var isCanvas = EngineRanking.isCanvasRenderedRow(row);\n        if (isCanvas !== hover) {\n            return; // good nothing to do\n        }\n        var index = Number.parseInt(row.dataset.index, 10);\n        this.updateRow(row, index, hover ? 'high' : 'low');\n    };\n    EngineRanking.prototype.forEachRow = function (callback, inplace) {\n        if (inplace === void 0) { inplace = false; }\n        var adapter = function (row, rowIndex) {\n            if (EngineRanking.isCanvasRenderedRow(row)) {\n                // skip canvas\n                return;\n            }\n            callback(row, rowIndex);\n        };\n        return _super.prototype.forEachRow.call(this, adapter, inplace);\n    };\n    EngineRanking.prototype.updateSelection = function (selectedDataIndices) {\n        var _this = this;\n        _super.prototype.forEachRow.call(this, function (node, rowIndex) {\n            if (_this.renderCtx.isGroup(rowIndex)) {\n                _this.updateRow(node, rowIndex);\n            }\n            else {\n                // fast pass for item\n                _this.selection.update(node, selectedDataIndices);\n            }\n        }, true);\n    };\n    EngineRanking.prototype.updateColumnWidths = function () {\n        var _this = this;\n        // update the column context in place\n        this._context.column = nonUniformContext(this._context.columns.map(function (w) { return w.width; }), 100, COLUMN_PADDING);\n        _super.prototype.updateColumnWidths.call(this);\n        var columns = this.context.columns;\n        //no data update needed since just width changed\n        columns.forEach(function (column) {\n            if (column instanceof MultiLevelRenderColumn) {\n                column.updateWidthRule(_this.style);\n            }\n            column.renderers = _this.ctx.createRenderer(column.c);\n        });\n        this.events.fire(EngineRanking.EVENT_WIDTH_CHANGED);\n    };\n    EngineRanking.prototype.computeShiftedIndex = function (index) {\n        var columns = this.context.columns;\n        // may not match if not all left columns are shown\n        var leftOffset = 0;\n        var indexOffset = 0;\n        // shift frozen ones\n        for (var _i = 0, _a = this.visibleColumns.frozen; _i < _a.length; _i++) {\n            var frozenIndex = _a[_i];\n            if (frozenIndex >= this.visibleColumns.first) {\n                break;\n            }\n            leftOffset += columns[frozenIndex].width + COLUMN_PADDING;\n            indexOffset--;\n        }\n        // shift visible before\n        indexOffset += this.visibleColumns.first;\n        for (var i = this.visibleColumns.first; i < index; ++i) {\n            leftOffset += columns[i].width + COLUMN_PADDING;\n        }\n        return {\n            leftOffset: leftOffset,\n            indexOffset: indexOffset,\n        };\n    };\n    EngineRanking.prototype.updateColumn = function (index) {\n        var _this = this;\n        var columns = this.context.columns;\n        var column = columns[index];\n        if (!column) {\n            return false;\n        }\n        var _a = this.computeShiftedIndex(index), leftOffset = _a.leftOffset, indexOffset = _a.indexOffset;\n        _super.prototype.forEachRow.call(this, function (row, rowIndex) {\n            if (EngineRanking.isCanvasRenderedRow(row)) {\n                _this.updateCanvasCell(row.firstElementChild, row, rowIndex, column, leftOffset);\n                return;\n            }\n            _this.updateCellImpl(column, row.children[index - indexOffset], rowIndex);\n        });\n        return true;\n    };\n    EngineRanking.prototype.updateCellImpl = function (column, before, rowIndex) {\n        if (!before) {\n            return; // race condition\n        }\n        var r = this.updateCell(before, rowIndex, column);\n        var after;\n        if (isAsyncUpdate(r)) {\n            after = this.handleCellReady(r.item, r.ready, column.index);\n        }\n        else {\n            after = r;\n        }\n        if (before === after || !after) {\n            return;\n        }\n        this.initCellClasses(after, column.id);\n        before.parentElement.replaceChild(after, before);\n    };\n    EngineRanking.prototype.initCellClasses = function (node, id) {\n        node.dataset.id = id;\n        node.classList.add(engineCssClass('td'), this.style.cssClasses.td, engineCssClass(\"td-\".concat(this.tableId)));\n    };\n    EngineRanking.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.style.deleteRule(\"hoverOnly\".concat(this.tableId));\n        this.style.deleteRule(\"renderCanvas\".concat(this.tableId));\n        this.ranking.flatColumns.forEach(function (c) { return EngineRanking.disableListener(c); });\n    };\n    EngineRanking.prototype.groupData = function () {\n        var _this = this;\n        var groups = this.ranking.getGroups();\n        var provider = this.ctx.provider;\n        var strategy = provider.getAggregationStrategy();\n        var alwaysShowGroup = isAlwaysShowingGroupStrategy(strategy);\n        var r = [];\n        if (groups.length === 0) {\n            return r;\n        }\n        var pushItem = function (group, dataIndex, i) {\n            r.push({\n                group: group,\n                dataIndex: dataIndex,\n                relativeIndex: i,\n            });\n        };\n        if (groups.length === 1 && groups[0].name === defaultGroup.name) {\n            var group = groups[0];\n            var l = group.order.length;\n            for (var i = 0; i < l; ++i) {\n                pushItem(group, group.order[i], i);\n            }\n            return r;\n        }\n        var roots = groupRoots(groups);\n        var pushGroup = function (group) {\n            var n = provider.getTopNAggregated(_this.ranking, group);\n            // all are IOrderedGroup since propagated\n            var ordered = group;\n            var groupParent = group;\n            if (n === 0 || alwaysShowGroup) {\n                r.push(ordered);\n            }\n            if (n !== 0 && Array.isArray(groupParent.subGroups) && groupParent.subGroups.length > 0) {\n                for (var _i = 0, _a = groupParent.subGroups; _i < _a.length; _i++) {\n                    var g = _a[_i];\n                    pushGroup(g);\n                }\n                return;\n            }\n            var l = n < 0 ? ordered.order.length : Math.min(n, ordered.order.length);\n            for (var i = 0; i < l; ++i) {\n                pushItem(ordered, ordered.order[i], i);\n            }\n        };\n        for (var _i = 0, roots_1 = roots; _i < roots_1.length; _i++) {\n            var root = roots_1[_i];\n            pushGroup(root);\n        }\n        return r;\n    };\n    EngineRanking.prototype.render = function (data, rowContext) {\n        var _this = this;\n        var previous = this._context;\n        var previousData = this.data;\n        this.data = data;\n        this.columns.forEach(function (c, i) {\n            c.index = i;\n            c.renderers = _this.ctx.createRenderer(c.c);\n        });\n        this._context = Object.assign({\n            columns: this.columns,\n            column: nonUniformContext(this.columns.map(function (w) { return w.width; }), 100, COLUMN_PADDING),\n        }, rowContext);\n        if (!this.bodyScroller) {\n            // somehow not part of dom\n            return;\n        }\n        this.events.fire(EngineRanking.EVENT_RECREATE);\n        return _super.prototype.recreate.call(this, this.roptions.animation ? lineupAnimation(previous, previousData, this.data) : undefined);\n    };\n    EngineRanking.prototype.setHighlight = function (dataIndex) {\n        this.highlight = dataIndex;\n        var old = this.body.querySelector(\"[data-i].\".concat(engineCssClass('highlighted')));\n        if (old) {\n            old.classList.remove(engineCssClass('highlighted'));\n        }\n        if (dataIndex < 0) {\n            return false;\n        }\n        var item = this.body.querySelector(\"[data-i=\\\"\".concat(dataIndex, \"\\\"]\"));\n        if (item) {\n            item.classList.add(engineCssClass('highlighted'));\n        }\n        return item != null;\n    };\n    EngineRanking.prototype.findNearest = function (dataIndices) {\n        var _this = this;\n        // find the nearest visible data index\n        // first check if already visible\n        var index = dataIndices.find(function (d) { return Boolean(_this.body.querySelectorAll(\"[data-i=\\\"\".concat(d, \"\\\"]\"))); });\n        if (index != null) {\n            return index; // visible one\n        }\n        var visible = this.visible;\n        var lookFor = new Set(dataIndices);\n        var firstBeforePos = -1;\n        var firstAfterPos = -1;\n        for (var i = visible.first; i >= 0; --i) {\n            var d = this.data[i];\n            if (!isGroup(d) && lookFor.has(d.dataIndex)) {\n                firstBeforePos = i;\n                break;\n            }\n        }\n        for (var i = visible.last; i < this.data.length; ++i) {\n            var d = this.data[i];\n            if (!isGroup(d) && lookFor.has(d.dataIndex)) {\n                firstAfterPos = i;\n                break;\n            }\n        }\n        if (firstBeforePos < 0 && firstBeforePos < 0) {\n            return -1; // not found at all\n        }\n        var nearestPos = firstBeforePos >= 0 && visible.first - firstBeforePos < firstAfterPos - visible.last\n            ? firstBeforePos\n            : firstAfterPos;\n        return this.data[nearestPos].dataIndex;\n    };\n    EngineRanking.prototype.scrollIntoView = function (dataIndex) {\n        var _this = this;\n        var item = this.body.querySelector(\"[data-i=\\\"\".concat(dataIndex, \"\\\"]\"));\n        if (item) {\n            item.scrollIntoView(true);\n            return true;\n        }\n        var index = this.data.findIndex(function (d) { return !isGroup(d) && d.dataIndex === dataIndex; });\n        if (index < 0) {\n            return false; // part of a group?\n        }\n        var posOf = function () {\n            var c = _this._context;\n            if (c.exceptions.length === 0 || index < c.exceptions[0].index) {\n                // fast pass\n                return index * c.defaultRowHeight;\n            }\n            var before = c.exceptions\n                .slice()\n                .reverse()\n                .find(function (d) { return d.index <= index; });\n            if (!before) {\n                return -1;\n            }\n            if (before.index === index) {\n                return before.y;\n            }\n            var regular = index - before.index - 1;\n            return before.y2 + regular * c.defaultRowHeight;\n        };\n        var pos = posOf();\n        if (pos < 0) {\n            return false;\n        }\n        var scroller = this.bodyScroller;\n        if (!scroller) {\n            return false;\n        }\n        var top = scroller.scrollTop;\n        scroller.scrollTop = Math.min(pos, scroller.scrollHeight - scroller.clientHeight);\n        this.onScrolledVertically(scroller.scrollTop, scroller.clientHeight, top < scroller.scrollTop);\n        var found = this.body.querySelector(\"[data-i=\\\"\".concat(dataIndex, \"\\\"]\"));\n        if (found) {\n            found.scrollIntoView(true);\n            return true;\n        }\n        return false;\n    };\n    EngineRanking.prototype.getHighlight = function () {\n        var item = this.body.querySelector(\"[data-i]:hover, [data-i].\".concat(engineCssClass('highlighted')));\n        if (item) {\n            return Number.parseInt(item.dataset.i, 10);\n        }\n        return this.highlight;\n    };\n    EngineRanking.prototype.createCol = function (c, index) {\n        var _this = this;\n        var col = isMultiLevelColumn(c) && !c.getCollapsed()\n            ? new MultiLevelRenderColumn(c, index, this.renderCtx, this.roptions.flags)\n            : new RenderColumn(c, index, this.renderCtx, this.roptions.flags);\n        c.on(\"\".concat(Column.EVENT_WIDTH_CHANGED, \".body\"), function () {\n            // replace myself upon width change since we renderers are allowed to\n            col.renderers = _this.ctx.createRenderer(c);\n            _this.delayedUpdateColumnWidths();\n        });\n        var debounceUpdate = debounce(function () {\n            var valid = _this.updateColumn(col.index);\n            if (!valid) {\n                EngineRanking.disableListener(c); // destroy myself\n            }\n        }, 25);\n        c.on([\"\".concat(Column.EVENT_RENDERER_TYPE_CHANGED, \".body\"), \"\".concat(Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, \".body\")], function () {\n            // replace myself upon renderer type change\n            col.renderers = _this.ctx.createRenderer(c);\n            debounceUpdate();\n        });\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var that = this;\n        c.on(\"\".concat(Column.EVENT_DIRTY_HEADER, \".body\"), function () {\n            var valid = that.updateHeaderOf(col.c);\n            if (!valid) {\n                EngineRanking.disableListener(c); // destroy myself\n            }\n        });\n        c.on(suffix('.body', Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_CACHES), function () {\n            // replace myself upon renderer type change\n            col.renderers = _this.ctx.createRenderer(c);\n            var valid = _this.updateHeaderOf(col.c);\n            if (!valid) {\n                EngineRanking.disableListener(c); // destroy myself\n            }\n        });\n        c.on(\"\".concat(Column.EVENT_DIRTY_VALUES, \".body\"), debounceUpdate);\n        if (isMultiLevelColumn(c)) {\n            c.on(\"\".concat(StackColumn.EVENT_COLLAPSE_CHANGED, \".body\"), function () {\n                // rebuild myself from scratch\n                EngineRanking.disableListener(c); // destroy myself\n                var index = col.index;\n                var replacement = _this.createCol(c, index);\n                replacement.index = index;\n                _this.columns.splice(index, 1, replacement);\n                _this.delayedUpdateAll();\n            });\n            if (!c.getCollapsed()) {\n                col.updateWidthRule(this.style);\n                c.on(\"\".concat(StackColumn.EVENT_MULTI_LEVEL_CHANGED, \".body\"), function () {\n                    col.updateWidthRule(_this.style);\n                });\n                c.on(\"\".concat(StackColumn.EVENT_MULTI_LEVEL_CHANGED, \".bodyUpdate\"), debounceUpdate);\n            }\n        }\n        return col;\n    };\n    EngineRanking.isCanvasRenderedRow = function (row) {\n        return (row.classList.contains(cssClass('low')) &&\n            row.childElementCount >= 1 &&\n            row.firstElementChild.nodeName.toLowerCase() === 'canvas');\n    };\n    EngineRanking.disableListener = function (c) {\n        c.on(\"\".concat(Column.EVENT_WIDTH_CHANGED, \".body\"), null);\n        c.on(suffix('.body', Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_CACHES, Column.EVENT_LABEL_CHANGED), null);\n        c.on(\"\".concat(Ranking.EVENT_DIRTY_HEADER, \".body\"), null);\n        c.on(\"\".concat(Ranking.EVENT_DIRTY_VALUES, \".body\"), null);\n        if (!isMultiLevelColumn(c)) {\n            return;\n        }\n        c.on(\"\".concat(StackColumn.EVENT_COLLAPSE_CHANGED, \".body\"), null);\n        c.on(\"\".concat(StackColumn.EVENT_MULTI_LEVEL_CHANGED, \".body\"), null);\n        c.on(\"\".concat(StackColumn.EVENT_MULTI_LEVEL_CHANGED, \".bodyUpdate\"), null);\n    };\n    EngineRanking.EVENT_WIDTH_CHANGED = RankingEvents.EVENT_WIDTH_CHANGED;\n    EngineRanking.EVENT_UPDATE_DATA = RankingEvents.EVENT_UPDATE_DATA;\n    EngineRanking.EVENT_RECREATE = RankingEvents.EVENT_RECREATE;\n    EngineRanking.EVENT_HIGHLIGHT_CHANGED = RankingEvents.EVENT_HIGHLIGHT_CHANGED;\n    return EngineRanking;\n}(ACellTableSection));\nexport default EngineRanking;\n//# sourceMappingURL=EngineRanking.js.map","export var EMode;\n(function (EMode) {\n    EMode[\"ITEM\"] = \"item\";\n    EMode[\"BAND\"] = \"band\";\n})(EMode || (EMode = {}));\n//# sourceMappingURL=interfaces.js.map","import { range } from 'lineupengine';\nimport { isGroup } from '../model';\nimport { aria, cssClass, engineCssClass, SLOPEGRAPH_WIDTH } from '../styles';\nimport { EMode } from './interfaces';\nimport { forEachIndices, filterIndices } from '../model/internal';\nvar ItemSlope = /** @class */ (function () {\n    function ItemSlope(left, right, dataIndices) {\n        this.left = left;\n        this.right = right;\n        this.dataIndices = dataIndices;\n    }\n    ItemSlope.prototype.isSelected = function (selection) {\n        return this.dataIndices.length === 1\n            ? selection.has(this.dataIndices[0])\n            : this.dataIndices.some(function (s) { return selection.has(s); });\n    };\n    ItemSlope.prototype.update = function (path, width) {\n        path.setAttribute('data-i', String(this.dataIndices[0]));\n        path.setAttribute('class', cssClass('slope'));\n        path.setAttribute('d', \"M0,\".concat(this.left, \"L\").concat(width, \",\").concat(this.right));\n    };\n    return ItemSlope;\n}());\nvar GroupSlope = /** @class */ (function () {\n    function GroupSlope(left, right, dataIndices) {\n        this.left = left;\n        this.right = right;\n        this.dataIndices = dataIndices;\n    }\n    GroupSlope.prototype.isSelected = function (selection) {\n        return this.dataIndices.some(function (s) { return selection.has(s); });\n    };\n    GroupSlope.prototype.update = function (path, width) {\n        path.setAttribute('class', cssClass('group-slope'));\n        path.setAttribute('d', \"M0,\".concat(this.left[0], \"L\").concat(width, \",\").concat(this.right[0], \"L\").concat(width, \",\").concat(this.right[1], \"L0,\").concat(this.left[1], \"Z\"));\n    };\n    return GroupSlope;\n}());\nvar SlopeGraph = /** @class */ (function () {\n    function SlopeGraph(header, body, id, ctx, options) {\n        if (options === void 0) { options = {}; }\n        this.header = header;\n        this.body = body;\n        this.id = id;\n        this.ctx = ctx;\n        this.leftSlopes = [];\n        // rendered row to one ore multiple slopes\n        this.rightSlopes = [];\n        this.pool = [];\n        this.scrollListener = null;\n        this.width = SLOPEGRAPH_WIDTH;\n        this.height = 0;\n        this.current = null;\n        this.chosen = new Set();\n        this.chosenSelectionOnly = new Set();\n        this._mode = EMode.ITEM;\n        this.node = header.ownerDocument.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        this.node.innerHTML = \"<g transform=\\\"translate(0,0)\\\"></g>\";\n        header.classList.add(cssClass('slopegraph-header'));\n        this._mode = options.mode === EMode.BAND ? EMode.BAND : EMode.ITEM;\n        this.initHeader(header);\n        body.classList.add(cssClass('slopegraph'));\n        this.body.style.height = \"1px\";\n        body.appendChild(this.node);\n    }\n    SlopeGraph.prototype.init = function () {\n        var _this = this;\n        this.hide(); // hide by default\n        var scroller = this.body.parentElement;\n        //sync scrolling of header and body\n        // use internals from lineup engine\n        var scroll = scroller.__le_scroller__;\n        var old = scroll.asInfo();\n        scroll.push('animation', (this.scrollListener = function (act) {\n            if (Math.abs(old.top - act.top) < 5) {\n                return;\n            }\n            old = act;\n            _this.onScrolledVertically(act.top, act.height);\n        }));\n    };\n    SlopeGraph.prototype.initHeader = function (header) {\n        var _this = this;\n        var active = cssClass('active');\n        header.innerHTML = \"<i title=\\\"Item\\\" class=\\\"\".concat(this._mode === EMode.ITEM ? active : '', \"\\\">\").concat(aria('Item'), \"</i>\\n        <i title=\\\"Band\\\" class=\\\"\").concat(this._mode === EMode.BAND ? active : '', \"\\\">\").concat(aria('Band'), \"</i>\");\n        var icons = Array.from(header.children);\n        icons.forEach(function (n, i) {\n            n.onclick = function (evt) {\n                evt.preventDefault();\n                evt.stopPropagation();\n                if (n.classList.contains(active)) {\n                    return;\n                }\n                _this.mode = i === 0 ? EMode.ITEM : EMode.BAND;\n                icons.forEach(function (d, j) { return d.classList.toggle(active, j === i); });\n            };\n        });\n    };\n    Object.defineProperty(SlopeGraph.prototype, \"mode\", {\n        get: function () {\n            return this._mode;\n        },\n        set: function (value) {\n            if (value === this._mode) {\n                return;\n            }\n            this._mode = value;\n            if (this.current) {\n                this.rebuild(this.current.leftRanking, this.current.left, this.current.leftContext, this.current.rightRanking, this.current.right, this.current.rightContext);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SlopeGraph.prototype, \"hidden\", {\n        get: function () {\n            return this.header.classList.contains(engineCssClass('loading'));\n        },\n        set: function (value) {\n            this.header.classList.toggle(engineCssClass('loading'), value);\n            this.body.classList.toggle(engineCssClass('loading'), value);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SlopeGraph.prototype.hide = function () {\n        this.hidden = true;\n    };\n    SlopeGraph.prototype.show = function () {\n        var was = this.hidden;\n        this.hidden = false;\n        if (was) {\n            this.revalidate();\n        }\n    };\n    SlopeGraph.prototype.destroy = function () {\n        this.header.remove();\n        if (this.scrollListener) {\n            //sync scrolling of header and body\n            // use internals from lineup engine\n            var scroll_1 = this.body.parentElement.__le_scroller__;\n            scroll_1.remove(this.scrollListener);\n        }\n        this.body.remove();\n    };\n    SlopeGraph.prototype.rebuild = function (leftRanking, left, leftContext, rightRanking, right, rightContext) {\n        this.current = { leftRanking: leftRanking, left: left, leftContext: leftContext, right: right, rightRanking: rightRanking, rightContext: rightContext };\n        var lookup = this.prepareRightSlopes(right, rightContext);\n        this.computeSlopes(left, leftContext, lookup);\n        this.revalidate();\n    };\n    SlopeGraph.prototype.computeSlopes = function (left, leftContext, lookup) {\n        var _this = this;\n        var mode = this.mode;\n        var fakeGroups = new Map();\n        var createFakeGroup = function (first, group) {\n            var count = 0;\n            var height = 0;\n            // find all items in this group, assuming that they are in order\n            for (var i = first; i < left.length; ++i) {\n                var item = left[i];\n                if (isGroup(item) || item.group !== group) {\n                    break;\n                }\n                count++;\n                height += leftContext.exceptionsLookup.get(i) || leftContext.defaultRowHeight;\n            }\n            var padded = height - leftContext.padding(first + count - 1);\n            var gr = group;\n            return { gr: gr, padded: padded, height: height };\n        };\n        var acc = 0;\n        this.leftSlopes = left.map(function (r, i) {\n            var height = leftContext.exceptionsLookup.get(i) || leftContext.defaultRowHeight;\n            var padded = height - 0; //leftContext.padding(i);\n            var slopes = [];\n            var start = acc;\n            // shift by item height\n            acc += height;\n            var offset = 0;\n            var push = function (s, right, common, heightPerRow) {\n                if (common === void 0) { common = 1; }\n                if (heightPerRow === void 0) { heightPerRow = 0; }\n                // store slope in both\n                slopes.push(s);\n                forEachIndices(right.ref, function (r) { return _this.rightSlopes[r].push(s); });\n                // update the offset of myself and of the right side\n                right.offset += common * right.heightPerRow;\n                offset += common * heightPerRow;\n            };\n            var gr;\n            if (isGroup(r)) {\n                gr = r;\n            }\n            else {\n                var item = r;\n                var dataIndex = item.dataIndex;\n                var right = lookup.get(dataIndex);\n                if (!right) {\n                    // no match\n                    return slopes;\n                }\n                if (mode === EMode.ITEM) {\n                    var s = new ItemSlope(start + padded / 2, right.start + right.offset + right.heightPerRow / 2, [dataIndex]);\n                    push(s, right);\n                    return slopes;\n                }\n                if (fakeGroups.has(item.group)) {\n                    // already handled by the first one, take the fake slopes\n                    return fakeGroups.get(item.group);\n                }\n                var fakeGroup = createFakeGroup(i, item.group);\n                gr = fakeGroup.gr;\n                height = fakeGroup.height;\n                padded = fakeGroup.padded;\n                fakeGroups.set(item.group, slopes);\n            }\n            // free group items to share\n            var free = new Set(gr.order);\n            var heightPerRow = padded / gr.order.length;\n            forEachIndices(gr.order, function (d) {\n                if (!free.has(d)) {\n                    return; // already handled\n                }\n                free.delete(d);\n                var right = lookup.get(d);\n                if (!right) {\n                    return; // no matching\n                }\n                // find all of this group\n                var intersection = filterIndices(right.rows, function (r) { return free.delete(r); });\n                intersection.push(d); //self\n                var common = intersection.length;\n                var s;\n                if (common === 1) {\n                    s = new ItemSlope(start + offset + heightPerRow / 2, right.start + right.offset + right.heightPerRow / 2, [\n                        d,\n                    ]);\n                }\n                else if (mode === EMode.ITEM) {\n                    // fake item\n                    s = new ItemSlope(start + offset + (heightPerRow * common) / 2, right.start + right.offset + (right.heightPerRow * common) / 2, intersection);\n                }\n                else {\n                    s = new GroupSlope([start + offset, start + offset + heightPerRow * common], [right.start + right.offset, right.start + right.offset + right.heightPerRow * common], intersection);\n                }\n                push(s, right, common, heightPerRow);\n            });\n            return slopes;\n        });\n    };\n    SlopeGraph.prototype.prepareRightSlopes = function (right, rightContext) {\n        var lookup = new Map();\n        var mode = this.mode;\n        var fakeGroups = new Map();\n        var acc = 0;\n        this.rightSlopes = right.map(function (r, i) {\n            var height = rightContext.exceptionsLookup.get(i) || rightContext.defaultRowHeight;\n            var padded = height - 0; //rightContext.padding(i);\n            var start = acc;\n            acc += height;\n            var slopes = [];\n            var base = {\n                start: start,\n                offset: 0,\n                ref: [i],\n            };\n            if (isGroup(r)) {\n                var p_1 = Object.assign(base, {\n                    rows: Array.from(r.order),\n                    heightPerRow: padded / r.order.length,\n                    group: r,\n                });\n                forEachIndices(r.order, function (ri) { return lookup.set(ri, p_1); });\n                return slopes;\n            }\n            // item\n            var item = r;\n            var dataIndex = r.dataIndex;\n            var p = Object.assign(base, {\n                rows: [dataIndex],\n                heightPerRow: padded,\n                group: item.group,\n            });\n            if (mode === EMode.ITEM) {\n                lookup.set(dataIndex, p);\n                return slopes;\n            }\n            // forced band mode\n            // merge with the 'ueber' band\n            if (!fakeGroups.has(item.group)) {\n                p.heightPerRow = height; // include padding\n                // TODO just support uniform item height\n                fakeGroups.set(item.group, p);\n            }\n            else {\n                // reuse old\n                p = fakeGroups.get(item.group);\n                p.rows.push(dataIndex);\n                p.ref.push(i);\n            }\n            lookup.set(dataIndex, p);\n            return slopes;\n        });\n        return lookup;\n    };\n    SlopeGraph.prototype.revalidate = function () {\n        if (!this.current || this.hidden) {\n            return;\n        }\n        var p = this.body.parentElement;\n        this.onScrolledVertically(p.scrollTop, p.clientHeight);\n    };\n    SlopeGraph.prototype.highlight = function (dataIndex) {\n        var highlight = engineCssClass('highlighted');\n        var old = this.body.querySelector(\"[data-i].\".concat(highlight));\n        if (old) {\n            old.classList.remove(highlight);\n        }\n        if (dataIndex < 0) {\n            return false;\n        }\n        var item = this.body.querySelector(\"[data-i=\\\"\".concat(dataIndex, \"\\\"]\"));\n        if (item) {\n            item.classList.add(highlight);\n        }\n        return item != null;\n    };\n    SlopeGraph.prototype.onScrolledVertically = function (scrollTop, clientHeight) {\n        if (!this.current) {\n            return;\n        }\n        // which lines are currently shown\n        var _a = this.current, leftContext = _a.leftContext, rightContext = _a.rightContext;\n        var left = range(scrollTop, clientHeight, leftContext.defaultRowHeight, leftContext.exceptions, leftContext.numberOfRows);\n        var right = range(scrollTop, clientHeight, rightContext.defaultRowHeight, rightContext.exceptions, rightContext.numberOfRows);\n        var start = Math.min(left.firstRowPos, right.firstRowPos);\n        var end = Math.max(left.endPos, right.endPos);\n        // move to right position\n        this.body.style.transform = \"translate(0, \".concat(start.toFixed(0), \"px)\");\n        this.body.style.height = \"\".concat((end - start).toFixed(0), \"px\");\n        this.node.firstElementChild.setAttribute('transform', \"translate(0,-\".concat(start.toFixed(0), \")\"));\n        this.chosen = this.choose(left.first, left.last, right.first, right.last);\n        this.render(this.chosen, this.chooseSelection(left.first, left.last, this.chosen));\n    };\n    SlopeGraph.prototype.choose = function (leftVisibleFirst, leftVisibleLast, rightVisibleFirst, rightVisibleLast) {\n        // assume no separate scrolling\n        var slopes = new Set();\n        for (var i = leftVisibleFirst; i <= leftVisibleLast; ++i) {\n            for (var _i = 0, _a = this.leftSlopes[i]; _i < _a.length; _i++) {\n                var s = _a[_i];\n                slopes.add(s);\n            }\n        }\n        for (var i = rightVisibleFirst; i <= rightVisibleLast; ++i) {\n            for (var _b = 0, _c = this.rightSlopes[i]; _b < _c.length; _b++) {\n                var s = _c[_b];\n                slopes.add(s);\n            }\n        }\n        return slopes;\n    };\n    SlopeGraph.prototype.chooseSelection = function (leftVisibleFirst, leftVisibleLast, alreadyVisible) {\n        var slopes = new Set();\n        // ensure selected slopes are always part of\n        var p = this.ctx.provider;\n        if (p.getSelection().length === 0) {\n            return slopes;\n        }\n        var selectionLookup = { has: function (dataIndex) { return p.isSelected(dataIndex); } };\n        // try all not visible ones\n        for (var i = 0; i < leftVisibleFirst; ++i) {\n            for (var _i = 0, _a = this.leftSlopes[i]; _i < _a.length; _i++) {\n                var s = _a[_i];\n                if (s.isSelected(selectionLookup) && !alreadyVisible.has(s)) {\n                    slopes.add(s);\n                }\n            }\n        }\n        for (var i = leftVisibleLast + 1; i < this.leftSlopes.length; ++i) {\n            for (var _b = 0, _c = this.leftSlopes[i]; _b < _c.length; _b++) {\n                var s = _c[_b];\n                if (s.isSelected(selectionLookup) && !alreadyVisible.has(s)) {\n                    slopes.add(s);\n                }\n            }\n        }\n        return slopes;\n    };\n    SlopeGraph.prototype.updatePath = function (p, g, s, width, selection) {\n        s.update(p, width);\n        p.__data__ = s; // data binding\n        var selected = s.isSelected(selection);\n        p.classList.toggle(cssClass('selected'), selected);\n        if (selected) {\n            g.appendChild(p); // to put it on top\n        }\n    };\n    SlopeGraph.prototype.render = function (visible, selectionSlopes) {\n        var _this = this;\n        var g = this.node.firstElementChild;\n        var width = g.ownerSVGElement.getBoundingClientRect().width;\n        var paths = this.matchLength(visible.size + selectionSlopes.size, g);\n        var p = this.ctx.provider;\n        var selectionLookup = { has: function (dataIndex) { return p.isSelected(dataIndex); } };\n        // update paths\n        var i = 0;\n        var updatePath = function (s) {\n            _this.updatePath(paths[i++], g, s, width, selectionLookup);\n        };\n        visible.forEach(updatePath);\n        selectionSlopes.forEach(updatePath);\n    };\n    SlopeGraph.prototype.addPath = function (g) {\n        var _this = this;\n        var elem = this.pool.pop();\n        if (elem) {\n            g.appendChild(elem);\n            return elem;\n        }\n        var path = g.ownerDocument.createElementNS('http://www.w3.org/2000/svg', 'path');\n        path.onclick = function (evt) {\n            // d3 style\n            var s = path.__data__;\n            var p = _this.ctx.provider;\n            var ids = s.dataIndices;\n            if (evt.ctrlKey) {\n                ids.forEach(function (id) { return p.toggleSelection(id, true); });\n            }\n            else {\n                // either unset or set depending on the first state\n                var isSelected = p.isSelected(ids[0]);\n                p.setSelection(isSelected ? [] : ids);\n            }\n        };\n        g.appendChild(path);\n        return path;\n    };\n    SlopeGraph.prototype.matchLength = function (slopes, g) {\n        var paths = Array.from(g.children);\n        for (var i = slopes; i < paths.length; ++i) {\n            var elem = paths[i];\n            this.pool.push(elem);\n            elem.remove();\n        }\n        for (var i = paths.length; i < slopes; ++i) {\n            paths.push(this.addPath(g));\n        }\n        return paths;\n    };\n    SlopeGraph.prototype.updateSelection = function (selectedDataIndices) {\n        var g = this.node.firstElementChild;\n        var paths = Array.from(g.children);\n        var openDataIndices = new Set(selectedDataIndices);\n        if (selectedDataIndices.size === 0) {\n            // clear\n            for (var _i = 0, paths_1 = paths; _i < paths_1.length; _i++) {\n                var p = paths_1[_i];\n                var s = p.__data__;\n                p.classList.toggle(cssClass('selected'), false);\n                if (this.chosenSelectionOnly.has(s)) {\n                    p.remove();\n                }\n            }\n            this.chosenSelectionOnly.clear();\n            return;\n        }\n        for (var _a = 0, paths_2 = paths; _a < paths_2.length; _a++) {\n            var p = paths_2[_a];\n            var s = p.__data__;\n            var selected = s.isSelected(selectedDataIndices);\n            p.classList.toggle(cssClass('selected'), selected);\n            if (!selected) {\n                if (this.chosenSelectionOnly.delete(s)) {\n                    // was only needed because of the selection\n                    p.remove();\n                }\n                continue;\n            }\n            g.appendChild(p); // to put it on top\n            // remove already handled\n            s.dataIndices.forEach(function (d) { return openDataIndices.delete(d); });\n        }\n        if (openDataIndices.size === 0) {\n            return;\n        }\n        // find and add missing slopes\n        var width = g.ownerSVGElement.getBoundingClientRect().width;\n        for (var _b = 0, _c = this.leftSlopes; _b < _c.length; _b++) {\n            var ss = _c[_b];\n            for (var _d = 0, ss_1 = ss; _d < ss_1.length; _d++) {\n                var s = ss_1[_d];\n                if (this.chosen.has(s) || this.chosenSelectionOnly.has(s) || !s.isSelected(openDataIndices)) {\n                    // not visible or not selected -> skip\n                    continue;\n                }\n                // create new path for it\n                this.chosenSelectionOnly.add(s);\n                var p = this.addPath(g);\n                this.updatePath(p, g, s, width, openDataIndices);\n            }\n        }\n    };\n    return SlopeGraph;\n}());\nexport default SlopeGraph;\n//# sourceMappingURL=SlopeGraph.js.map","import { isGroup } from '../model';\nimport { cssClass, SELECTED_COLOR } from '../styles';\nimport { everyIndices } from '../model/internal';\nfunction isGroupSelected(group, selection) {\n    var selected = 0;\n    var unselected = 0;\n    var total = group.order.length;\n    everyIndices(group.order, function (i) {\n        var s = selection.has(i);\n        if (s) {\n            selected++;\n        }\n        else {\n            unselected++;\n        }\n        if (selected * 2 > total || unselected * 2 > total) {\n            // more than half already, can abort already decided\n            return false;\n        }\n        return true;\n    });\n    // more than 50%\n    return selected * 2 > total;\n}\nvar INDICATOR_WIDTH = 4;\nvar SelectionIndicator = /** @class */ (function () {\n    function SelectionIndicator(scrollerNode) {\n        var _this = this;\n        this.scrollerNode = scrollerNode;\n        this.blocks = [];\n        var node = scrollerNode.ownerDocument.createElement('div');\n        this.node = node;\n        node.classList.add(cssClass('selection-indicator'));\n        var canvas = scrollerNode.ownerDocument.createElement('canvas');\n        node.appendChild(canvas);\n        this.canvas = canvas;\n        this.canvas.width = INDICATOR_WIDTH;\n        this.canvas.addEventListener('click', function (e) {\n            _this.onClick(e.clientY - _this.canvas.getBoundingClientRect().top);\n        });\n    }\n    SelectionIndicator.prototype.toSelectionBlocks = function (data, rowContext, selection, height) {\n        if (!data || !rowContext || !selection || selection.size === 0 || !height) {\n            return [];\n        }\n        if (height > rowContext.totalHeight) {\n            // all rows visible\n            return [];\n        }\n        var posOf = function (index) {\n            if (rowContext.exceptions.length === 0 || index < rowContext.exceptions[0].index) {\n                // fast pass\n                return index * rowContext.defaultRowHeight;\n            }\n            var before = rowContext.exceptions\n                .slice()\n                .reverse()\n                .find(function (d) { return d.index <= index; });\n            if (!before) {\n                return -1;\n            }\n            if (before.index === index) {\n                return before.y;\n            }\n            var regular = index - before.index - 1;\n            return before.y2 + regular * rowContext.defaultRowHeight;\n        };\n        var blocks = [];\n        var currentBlock = null;\n        var currentBlockLastIndex = -1;\n        data.forEach(function (row, i) {\n            var _a, _b;\n            var isSelected = isGroup(row) ? isGroupSelected(row, selection) : selection.has(row.dataIndex);\n            if (!isSelected) {\n                return;\n            }\n            if (currentBlock && currentBlockLastIndex + 1 === i) {\n                // concat the selection block\n                currentBlock.height += (_a = rowContext.exceptionsLookup.get(i)) !== null && _a !== void 0 ? _a : rowContext.defaultRowHeight;\n                currentBlockLastIndex = i;\n                return;\n            }\n            // create a new block\n            currentBlock = {\n                firstRow: row,\n                height: (_b = rowContext.exceptionsLookup.get(i)) !== null && _b !== void 0 ? _b : rowContext.defaultRowHeight,\n                y: 0,\n                rawY: posOf(i),\n            };\n            blocks.push(currentBlock);\n            currentBlockLastIndex = i;\n        });\n        // scale blocks\n        var scaleFactor = height / rowContext.totalHeight;\n        for (var _i = 0, blocks_1 = blocks; _i < blocks_1.length; _i++) {\n            var block = blocks_1[_i];\n            block.y = block.rawY * scaleFactor;\n            block.height = Math.max(1, block.height * scaleFactor);\n        }\n        return blocks;\n    };\n    SelectionIndicator.prototype.updateData = function (data, rowContext) {\n        this.data = data;\n        this.rowContext = rowContext;\n        this.render();\n    };\n    SelectionIndicator.prototype.updateSelection = function (selection) {\n        this.selection = selection;\n        this.render();\n    };\n    SelectionIndicator.prototype.onClick = function (y) {\n        if (!this.blocks || this.blocks.length === 0 || !this.rowContext) {\n            return;\n        }\n        var block = this.blocks.find(function (d) { return y >= d.y && y <= d.y + d.height; });\n        if (!block) {\n            return;\n        }\n        var targetY = block.rawY - this.rowContext.defaultRowHeight;\n        this.scrollerNode.scrollTo({\n            behavior: 'auto',\n            top: Math.max(targetY, 0),\n        });\n    };\n    SelectionIndicator.prototype.render = function () {\n        var height = this.scrollerNode.offsetHeight;\n        this.canvas.height = height;\n        if (!this.selection || !this.data || !this.rowContext) {\n            return;\n        }\n        this.blocks = this.toSelectionBlocks(this.data, this.rowContext, this.selection, height);\n        this.node.classList.toggle(cssClass('some-selection'), this.blocks.length > 0);\n        if (this.blocks.length === 0) {\n            return;\n        }\n        var ctx = this.canvas.getContext('2d');\n        ctx.resetTransform();\n        ctx.clearRect(0, 0, INDICATOR_WIDTH, height);\n        ctx.fillStyle = SELECTED_COLOR;\n        for (var _i = 0, _a = this.blocks; _i < _a.length; _i++) {\n            var block = _a[_i];\n            ctx.fillRect(0, block.y, INDICATOR_WIDTH, block.height);\n        }\n    };\n    return SelectionIndicator;\n}());\nexport default SelectionIndicator;\n//# sourceMappingURL=SelectionIndicator.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { MultiTableRowRenderer, nonUniformContext } from 'lineupengine';\nimport { AEventDispatcher, round, suffix } from '../internal';\nimport { isGroup, Ranking } from '../model';\nimport { DataProvider } from '../provider';\nimport { isSummaryGroup, groupEndLevel } from '../provider/internal';\nimport { chooseGroupRenderer, chooseRenderer, chooseSummaryRenderer, getPossibleRenderer } from '../renderer/renderers';\nimport { cssClass, engineCssClass } from '../styles';\nimport DialogManager from './dialogs/DialogManager';\nimport domElementCache, { createSanitizer } from './domElementCache';\nimport EngineRanking from './EngineRanking';\nimport { EMode } from './interfaces';\nimport SlopeGraph from './SlopeGraph';\nimport SelectionIndicator from './SelectionIndicator';\nvar EngineRenderer = /** @class */ (function (_super) {\n    __extends(EngineRenderer, _super);\n    function EngineRenderer(data, parent, options) {\n        var _this = _super.call(this) || this;\n        _this.data = data;\n        _this.rankings = [];\n        _this.slopeGraphs = [];\n        _this.updateAbles = [];\n        _this.zoomFactor = 1;\n        _this.enabledHighlightListening = false;\n        _this.options = options;\n        _this.idPrefix = _this.options.instanceId\n            ? \"lu-\".concat(_this.options.instanceId)\n            : \"lu-\".concat(Math.random().toString(36).slice(-8).substring(0, 3));\n        _this.node = parent.ownerDocument.createElement('main');\n        _this.node.id = _this.idPrefix;\n        // FIXME inline\n        _this.node.classList.toggle(cssClass('whole-hover'), options.expandLineOnHover);\n        parent.appendChild(_this.node);\n        var dialogManager = new DialogManager({\n            doc: parent.ownerDocument,\n            livePreviews: options.livePreviews,\n            onDialogBackgroundClick: options.onDialogBackgroundClick,\n        });\n        _this.forward.apply(_this, __spreadArray([dialogManager], suffix('.main', EngineRenderer.EVENT_DIALOG_OPENED, EngineRenderer.EVENT_DIALOG_CLOSED), false));\n        parent.appendChild(dialogManager.node);\n        _this.ctx = {\n            idPrefix: _this.idPrefix,\n            document: parent.ownerDocument,\n            provider: data,\n            tasks: data.getTaskExecutor(),\n            dialogManager: dialogManager,\n            resolveToolbarActions: function (col, keys) { return _this.options.resolveToolbarActions(col, keys, _this.options.toolbarActions); },\n            resolveToolbarDialogAddons: function (col, keys) {\n                return _this.options.resolveToolbarDialogAddons(col, keys, _this.options.toolbarDialogAddons);\n            },\n            flags: _this.options.flags,\n            asElement: domElementCache(parent.ownerDocument),\n            sanitize: createSanitizer(parent.ownerDocument),\n            renderer: function (col, imposer) {\n                var r = chooseRenderer(col, _this.options.renderers);\n                return r.create(col, _this.ctx, imposer);\n            },\n            groupRenderer: function (col, imposer) {\n                var r = chooseGroupRenderer(col, _this.options.renderers);\n                return r.createGroup(col, _this.ctx, imposer);\n            },\n            summaryRenderer: function (col, interactive, imposer) {\n                var r = chooseSummaryRenderer(col, _this.options.renderers);\n                return r.createSummary(col, _this.ctx, interactive, imposer);\n            },\n            createRenderer: function (col, imposer) {\n                var single = this.renderer(col, imposer);\n                var group = this.groupRenderer(col, imposer);\n                var summary = options.summaryHeader ? this.summaryRenderer(col, false, imposer) : null;\n                return {\n                    single: single,\n                    group: group,\n                    summary: summary,\n                    singleId: col.getRenderer(),\n                    groupId: col.getGroupRenderer(),\n                    summaryId: col.getSummaryRenderer(),\n                    singleTemplate: null,\n                    groupTemplate: null,\n                    summaryTemplate: null,\n                };\n            },\n            getPossibleRenderer: function (col) { return getPossibleRenderer(col, _this.options.renderers, _this.options.canRender); },\n            colWidth: function (col) { return (!col.isVisible() ? 0 : col.getWidth()); },\n            caches: {\n                toolbar: new Map(),\n                toolbarAddons: new Map(),\n            },\n        };\n        _this.table = new MultiTableRowRenderer(_this.node, _this.idPrefix);\n        {\n            // helper object for better resizing experience\n            var footer = _this.table.node.querySelector(\".\".concat(engineCssClass('body'), \" .\").concat(engineCssClass('footer')));\n            var copy = footer.cloneNode(true);\n            copy.classList.add(cssClass('resize-helper'));\n            footer.insertAdjacentElement('afterend', copy);\n        }\n        {\n            // selection indicator\n            var body = _this.table.node.querySelector(\".\".concat(engineCssClass('body')));\n            _this.selectionIndicator = new SelectionIndicator(body);\n            parent.insertBefore(_this.selectionIndicator.node, _this.node);\n        }\n        //apply rules\n        {\n            _this.style.addRule('lineup_rowPadding0', \"\\n        .\".concat(_this.style.cssClasses.tr), {\n                marginTop: \"\".concat(options.rowPadding, \"px\"),\n            });\n            for (var level = 0; level < 4; ++level) {\n                _this.style.addRule(\"lineup_groupPadding\".concat(level), \"\\n        .\".concat(_this.style.cssClasses.tr, \"[data-meta~=last\").concat(level === 0 ? '' : level, \"]\"), {\n                    marginBottom: \"\".concat(options.groupPadding * (level + 1), \"px\"),\n                });\n            }\n            _this.style.addRule('lineup_rowPaddingAgg0', \"\\n        .\".concat(cssClass('agg-level'), \"::after\"), {\n                top: \"-\".concat(options.rowPadding, \"px\"),\n            });\n            for (var level = 1; level <= 4; ++level) {\n                _this.style.addRule(\"lineup_rowPaddingAgg\".concat(level), \"\\n        .\".concat(cssClass('agg-level'), \"[data-level='\").concat(level, \"']::after\"), {\n                    top: \"-\".concat(options.rowPadding + options.groupPadding, \"px\"),\n                });\n            }\n            // FIXME flat\n            _this.style.addRule('lineup_rotation', \"\\n       #\".concat(_this.idPrefix, \".\").concat(cssClass('rotated-label'), \" .\").concat(cssClass('label'), \".\").concat(cssClass('rotated')), {\n                transform: \"rotate(\".concat(-_this.options.labelRotation, \"deg)\"),\n            });\n            var toDisable = [];\n            if (!_this.options.flags.advancedRankingFeatures) {\n                toDisable.push('ranking');\n            }\n            if (!_this.options.flags.advancedModelFeatures) {\n                toDisable.push('model');\n            }\n            if (!_this.options.flags.advancedUIFeatures) {\n                toDisable.push('ui');\n            }\n            if (toDisable.length > 0) {\n                _this.style.addRule('lineup_feature_disable', \"\\n        \".concat(toDisable.map(function (d) { return \".\".concat(cssClass('feature'), \"-\").concat(d, \".\").concat(cssClass('feature-advanced')); }).join(', ')), {\n                    display: 'none !important',\n                });\n            }\n        }\n        _this.initProvider(data);\n        return _this;\n    }\n    Object.defineProperty(EngineRenderer.prototype, \"style\", {\n        get: function () {\n            return this.table.style;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EngineRenderer.prototype.zoomOut = function () {\n        this.zoomFactor = Math.max(this.zoomFactor - 0.1, 0.5);\n        this.updateZoomFactor();\n        this.update();\n    };\n    EngineRenderer.prototype.zoomIn = function () {\n        this.zoomFactor = Math.min(this.zoomFactor + 0.1, 2.0);\n        this.updateZoomFactor();\n        this.update();\n    };\n    EngineRenderer.prototype.updateZoomFactor = function () {\n        var body = this.node.querySelector('main');\n        body.style.fontSize = \"\".concat(this.zoomFactor * 100, \"%\");\n    };\n    EngineRenderer.prototype.pushUpdateAble = function (updateAble) {\n        this.updateAbles.push(updateAble);\n    };\n    EngineRenderer.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([\n            EngineRenderer.EVENT_HIGHLIGHT_CHANGED,\n            EngineRenderer.EVENT_DIALOG_OPENED,\n            EngineRenderer.EVENT_DIALOG_CLOSED,\n        ]);\n    };\n    EngineRenderer.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    EngineRenderer.prototype.setDataProvider = function (data) {\n        this.takeDownProvider();\n        this.data = data;\n        this.ctx.provider = data;\n        this.ctx.tasks = data.getTaskExecutor();\n        this.initProvider(data);\n    };\n    EngineRenderer.prototype.takeDownProvider = function () {\n        var _this = this;\n        this.data.on(\"\".concat(DataProvider.EVENT_SELECTION_CHANGED, \".body\"), null);\n        this.data.on(\"\".concat(DataProvider.EVENT_ADD_RANKING, \".body\"), null);\n        this.data.on(\"\".concat(DataProvider.EVENT_REMOVE_RANKING, \".body\"), null);\n        this.data.on(\"\".concat(DataProvider.EVENT_GROUP_AGGREGATION_CHANGED, \".body\"), null);\n        this.data.on(\"\".concat(DataProvider.EVENT_SHOWTOPN_CHANGED, \".body\"), null);\n        this.data.on(\"\".concat(DataProvider.EVENT_JUMP_TO_NEAREST, \".body\"), null);\n        this.data.on(\"\".concat(DataProvider.EVENT_BUSY, \".body\"), null);\n        this.rankings.forEach(function (r) { return _this.table.remove(r); });\n        this.rankings.splice(0, this.rankings.length);\n        this.slopeGraphs.forEach(function (s) { return _this.table.remove(s); });\n        this.slopeGraphs.splice(0, this.slopeGraphs.length);\n    };\n    EngineRenderer.prototype.initProvider = function (data) {\n        var _this = this;\n        data.on(\"\".concat(DataProvider.EVENT_SELECTION_CHANGED, \".body\"), function () { return _this.updateSelection(data.getSelection()); });\n        data.on(\"\".concat(DataProvider.EVENT_ADD_RANKING, \".body\"), function (ranking) {\n            _this.addRanking(ranking);\n        });\n        data.on(\"\".concat(DataProvider.EVENT_REMOVE_RANKING, \".body\"), function (ranking) {\n            _this.removeRanking(ranking);\n        });\n        data.on(\"\".concat(DataProvider.EVENT_GROUP_AGGREGATION_CHANGED, \".body\"), function (ranking) {\n            _this.update(_this.rankings.filter(function (r) { return r.ranking === ranking; }));\n        });\n        data.on(\"\".concat(DataProvider.EVENT_SHOWTOPN_CHANGED, \".body\"), function () {\n            _this.update(_this.rankings);\n        });\n        data.on(\"\".concat(DataProvider.EVENT_JUMP_TO_NEAREST, \".body\"), function (indices) {\n            _this.setHighlightToNearest(indices, true);\n        });\n        this.ctx.provider = data;\n        this.data.getRankings().forEach(function (r) { return _this.addRanking(r); });\n    };\n    EngineRenderer.prototype.updateSelection = function (dataIndices) {\n        var s = new Set(dataIndices);\n        this.rankings.forEach(function (r) { return r.updateSelection(s); });\n        this.slopeGraphs.forEach(function (r) { return r.updateSelection(s); });\n        this.selectionIndicator.updateSelection(s);\n    };\n    EngineRenderer.prototype.updateHist = function (ranking, col) {\n        if (!this.options.summaryHeader) {\n            return;\n        }\n        var rankings = ranking ? [ranking] : this.rankings;\n        for (var _i = 0, rankings_1 = rankings; _i < rankings_1.length; _i++) {\n            var r = rankings_1[_i];\n            if (col) {\n                // single update\n                r.updateHeaderOf(col);\n            }\n            else {\n                r.updateHeaders();\n            }\n        }\n        this.updateUpdateAbles();\n    };\n    EngineRenderer.prototype.addRanking = function (ranking) {\n        var _this = this;\n        if (this.rankings.length > 0) {\n            // add slope graph first\n            var s = this.table.pushSeparator(function (header, body) {\n                return new SlopeGraph(header, body, \"\".concat(ranking.id, \"S\"), _this.ctx, {\n                    mode: _this.options.defaultSlopeGraphMode === 'band' ? EMode.BAND : EMode.ITEM,\n                });\n            });\n            this.slopeGraphs.push(s);\n        }\n        var r = this.table.pushTable(function (header, body, tableId, style) {\n            return new EngineRanking(ranking, header, body, tableId, style, _this.ctx, {\n                animation: _this.options.animated,\n                customRowUpdate: _this.options.customRowUpdate || (function () { return undefined; }),\n                levelOfDetail: _this.options.levelOfDetail || (function () { return 'high'; }),\n                flags: _this.options.flags,\n            });\n        });\n        r.on(EngineRanking.EVENT_WIDTH_CHANGED, function () {\n            _this.updateRotatedHeaderState();\n            _this.table.widthChanged();\n        });\n        r.on(EngineRanking.EVENT_UPDATE_DATA, function () { return _this.update([r]); });\n        r.on(EngineRanking.EVENT_RECREATE, function () { return _this.updateUpdateAbles(); });\n        this.forward(r, EngineRanking.EVENT_HIGHLIGHT_CHANGED);\n        if (this.enabledHighlightListening) {\n            r.enableHighlightListening(true);\n        }\n        ranking.on(suffix('.renderer', Ranking.EVENT_ORDER_CHANGED), function () { return _this.updateHist(r); });\n        this.rankings.push(r);\n        this.update([r]);\n    };\n    EngineRenderer.prototype.updateRotatedHeaderState = function () {\n        if (this.options.labelRotation === 0) {\n            return;\n        }\n        var l = this.node.querySelector(\".\".concat(cssClass('label'), \".\").concat(cssClass('rotated')));\n        this.node.classList.toggle(cssClass('rotated-label'), Boolean(l));\n    };\n    EngineRenderer.prototype.removeRanking = function (ranking) {\n        if (!ranking) {\n            // remove all\n            this.rankings.splice(0, this.rankings.length);\n            this.slopeGraphs.splice(0, this.slopeGraphs.length);\n            this.table.clear();\n            return;\n        }\n        var index = this.rankings.findIndex(function (r) { return r.ranking === ranking; });\n        if (index < 0) {\n            return; // error\n        }\n        var section = this.rankings.splice(index, 1)[0];\n        var slope = this.slopeGraphs.splice(index === 0 ? index : index - 1, 1)[0];\n        this.table.remove(section);\n        if (slope) {\n            this.table.remove(slope);\n        }\n    };\n    EngineRenderer.prototype.update = function (rankings) {\n        var _this = this;\n        if (rankings === void 0) { rankings = this.rankings; }\n        // visible and has parent = part of dom\n        rankings = rankings.filter(function (d) { return !d.hidden && d.body.parentElement; });\n        if (rankings.length === 0) {\n            return;\n        }\n        var round2 = function (v) { return round(v, 2); };\n        var rowPadding = round2(this.zoomFactor * this.options.rowPadding);\n        var groupPadding = round2(this.zoomFactor * this.options.groupPadding);\n        var heightsFor = function (ranking, data) {\n            if (_this.options.dynamicHeight) {\n                var impl_1 = _this.options.dynamicHeight(data, ranking);\n                var f_1 = function (v, d) { return (typeof v === 'number' ? v : v(d)); };\n                if (impl_1) {\n                    return {\n                        defaultHeight: round2(_this.zoomFactor * impl_1.defaultHeight),\n                        height: function (d) { return round2(_this.zoomFactor * f_1(impl_1.height, d)); },\n                        padding: function (d) { return round2(_this.zoomFactor * f_1(impl_1.padding, d)); },\n                    };\n                }\n            }\n            var item = round2(_this.zoomFactor * _this.options.rowHeight);\n            var group = round2(_this.zoomFactor * _this.options.groupHeight);\n            return {\n                defaultHeight: item,\n                height: function (d) { return (isGroup(d) ? group : item); },\n                padding: rowPadding,\n            };\n        };\n        var _loop_1 = function (r) {\n            var grouped = r.groupData();\n            // inline with creating the groupData\n            var _a = heightsFor(r.ranking, grouped), height = _a.height, defaultHeight = _a.defaultHeight, padding = _a.padding;\n            var strategy = this_1.data.getAggregationStrategy();\n            var topNGetter = function (group) { return _this.data.getTopNAggregated(r.ranking, group); };\n            // inline and create manually for better performance\n            var rowContext = nonUniformContext(grouped.map(height), defaultHeight, function (index) {\n                var pad = typeof padding === 'number' ? padding : padding(grouped[index] || null);\n                var v = grouped[index];\n                if (index < 0 || !v || (isGroup(v) && isSummaryGroup(v, strategy, topNGetter))) {\n                    return pad;\n                }\n                return pad + groupPadding * groupEndLevel(v, topNGetter);\n            });\n            r.render(grouped, rowContext);\n            if (r === this_1.rankings[0]) {\n                // first ranking\n                this_1.selectionIndicator.updateData(grouped, rowContext);\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, rankings_2 = rankings; _i < rankings_2.length; _i++) {\n            var r = rankings_2[_i];\n            _loop_1(r);\n        }\n        this.updateSlopeGraphs(rankings);\n        this.updateUpdateAbles();\n        this.updateRotatedHeaderState();\n        this.table.widthChanged();\n    };\n    EngineRenderer.prototype.updateUpdateAbles = function () {\n        for (var _i = 0, _a = this.updateAbles; _i < _a.length; _i++) {\n            var u = _a[_i];\n            u(this.ctx);\n        }\n    };\n    EngineRenderer.prototype.updateSlopeGraphs = function (rankings) {\n        var _this = this;\n        if (rankings === void 0) { rankings = this.rankings; }\n        var indices = new Set(rankings.map(function (d) { return _this.rankings.indexOf(d); }));\n        for (var i = 0; i < this.slopeGraphs.length; ++i) {\n            var s = this.slopeGraphs[i];\n            if (s.hidden) {\n                return;\n            }\n            var left = i;\n            var right = i + 1;\n            if (!indices.has(left) && !indices.has(right)) {\n                return;\n            }\n            var leftRanking = this.rankings[left];\n            var rightRanking = this.rankings[right];\n            s.rebuild(leftRanking.ranking, leftRanking.currentData, leftRanking.context, rightRanking.ranking, rightRanking.currentData, rightRanking.context);\n        }\n    };\n    EngineRenderer.prototype.setHighlight = function (dataIndex, scrollIntoView) {\n        var found = this.rankings.map(function (r) { return r.setHighlight(dataIndex); });\n        this.fire(EngineRenderer.EVENT_HIGHLIGHT_CHANGED, dataIndex);\n        if (this.rankings.length === 0 || dataIndex < 0) {\n            return false;\n        }\n        if (!scrollIntoView) {\n            return found[0];\n        }\n        return this.rankings[0].scrollIntoView(dataIndex);\n    };\n    EngineRenderer.prototype.setHighlightToNearest = function (dataIndices, scrollIntoView) {\n        if (this.rankings.length === 0) {\n            return false;\n        }\n        var nearest = this.rankings[0].findNearest(dataIndices);\n        if (nearest >= 0) {\n            return this.setHighlight(nearest, scrollIntoView);\n        }\n        return false;\n    };\n    EngineRenderer.prototype.getHighlight = function () {\n        for (var _i = 0, _a = this.rankings; _i < _a.length; _i++) {\n            var ranking = _a[_i];\n            var h = ranking.getHighlight();\n            if (h >= 0) {\n                return h;\n            }\n        }\n        return -1;\n    };\n    EngineRenderer.prototype.enableHighlightListening = function (enable) {\n        for (var _i = 0, _a = this.rankings; _i < _a.length; _i++) {\n            var ranking = _a[_i];\n            ranking.enableHighlightListening(enable);\n        }\n        this.enabledHighlightListening = enable;\n    };\n    EngineRenderer.prototype.destroy = function () {\n        this.takeDownProvider();\n        this.table.destroy();\n        this.node.remove();\n    };\n    EngineRenderer.EVENT_HIGHLIGHT_CHANGED = EngineRanking.EVENT_HIGHLIGHT_CHANGED;\n    EngineRenderer.EVENT_DIALOG_OPENED = DialogManager.EVENT_DIALOG_OPENED;\n    EngineRenderer.EVENT_DIALOG_CLOSED = DialogManager.EVENT_DIALOG_CLOSED;\n    return EngineRenderer;\n}(AEventDispatcher));\nexport default EngineRenderer;\n//# sourceMappingURL=EngineRenderer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { cssClass } from '../../styles';\nimport APopup from './APopup';\n/** @internal */\nvar ChooseRankingDialog = /** @class */ (function (_super) {\n    __extends(ChooseRankingDialog, _super);\n    function ChooseRankingDialog(items, dialog) {\n        var _this = _super.call(this, dialog) || this;\n        _this.items = items;\n        return _this;\n    }\n    ChooseRankingDialog.prototype.build = function (node) {\n        node.classList.add(cssClass('more-options'), cssClass('choose-options'));\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            node.appendChild(item);\n        }\n    };\n    return ChooseRankingDialog;\n}(APopup));\nexport default ChooseRankingDialog;\n//# sourceMappingURL=ChooseRankingDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { clear, AEventDispatcher } from '../../internal';\nimport { cssClass } from '../../styles';\nfunction isItem(v) {\n    return v.id !== undefined;\n}\nvar SearchBox = /** @class */ (function (_super) {\n    __extends(SearchBox, _super);\n    function SearchBox(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.options = {\n            formatItem: function (item, node) {\n                node.textContent = item.text;\n            },\n            doc: document,\n            placeholder: 'Select...',\n        };\n        _this.values = [];\n        Object.assign(_this.options, options);\n        _this.node = _this.options.doc.createElement('div');\n        _this.node.classList.add(cssClass('search'));\n        _this.node.innerHTML = \"<input class=\\\"\".concat(cssClass('search-input'), \"\\\" type=\\\"search\\\">\\n    <ul class=\\\"\").concat(cssClass('search-list'), \"\\\"></ul>\");\n        _this.search = _this.node.firstElementChild;\n        _this.search.placeholder = _this.options.placeholder;\n        _this.body = _this.node.lastElementChild;\n        _this.search.onfocus = function () { return _this.focus(); };\n        _this.search.onblur = function () { return _this.blur(); };\n        _this.search.oninput = function () { return _this.filter(); };\n        _this.search.onkeydown = function (evt) { return _this.handleKey(evt); };\n        _this.itemTemplate = _this.options.doc.createElement('li');\n        _this.itemTemplate.classList.add(cssClass('search-item'));\n        _this.itemTemplate.innerHTML = \"<span></span>\";\n        _this.groupTemplate = _this.options.doc.createElement('li');\n        _this.groupTemplate.classList.add(cssClass('search-group'));\n        _this.groupTemplate.innerHTML = \"<span></span><ul></ul>\";\n        return _this;\n    }\n    Object.defineProperty(SearchBox.prototype, \"data\", {\n        get: function () {\n            return this.values;\n        },\n        set: function (data) {\n            this.values = data;\n            clear(this.body);\n            this.buildDialog(this.body, this.values);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SearchBox.prototype.buildDialog = function (node, values) {\n        var _this = this;\n        var _loop_1 = function (v) {\n            var li;\n            if (isItem(v)) {\n                li = this_1.itemTemplate.cloneNode(true);\n                li.onmousedown = function (evt) {\n                    // see https://stackoverflow.com/questions/10652852/jquery-fire-click-before-blur-event#10653160\n                    evt.preventDefault();\n                };\n                li.onclick = function () { return _this.select(v); };\n                li.onmouseenter = function () { return (_this.highlighted = li); };\n                li.onmouseleave = function () { return (_this.highlighted = null); };\n                node.appendChild(li);\n            }\n            else {\n                li = this_1.groupTemplate.cloneNode(true);\n                this_1.buildDialog(li.lastElementChild, v.children);\n                node.appendChild(li);\n            }\n            var item = li.firstElementChild;\n            this_1.options.formatItem(v, item);\n        };\n        var this_1 = this;\n        for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n            var v = values_1[_i];\n            _loop_1(v);\n        }\n    };\n    SearchBox.prototype.handleKey = function (evt) {\n        switch (evt.key) {\n            case 'Escape':\n                this.search.blur();\n                break;\n            case 'Enter':\n                var h = this.highlighted;\n                if (h) {\n                    h.click();\n                }\n                else {\n                    evt.preventDefault();\n                }\n                break;\n            case 'ArrowUp':\n                this.highlightPrevious();\n                break;\n            case 'ArrowDown':\n                this.highlightNext();\n                break;\n        }\n    };\n    SearchBox.prototype.select = function (item) {\n        this.search.value = ''; // reset\n        this.search.blur();\n        this.fire(SearchBox.EVENT_SELECT, item);\n    };\n    SearchBox.prototype.focus = function () {\n        this.body.style.width = \"\".concat(this.search.offsetWidth, \"px\");\n        this.highlighted = this.body.querySelector(SearchBox.SEARCH_ITEM_SELECTOR) || null;\n        this.node.classList.add(cssClass('search-open'));\n    };\n    Object.defineProperty(SearchBox.prototype, \"highlighted\", {\n        get: function () {\n            var _a;\n            return (_a = this.body.getElementsByClassName(cssClass('search-highlighted'))[0]) !== null && _a !== void 0 ? _a : null;\n        },\n        set: function (value) {\n            var old = this.highlighted;\n            if (old === value) {\n                return;\n            }\n            if (old) {\n                old.classList.remove(cssClass('search-highlighted'));\n            }\n            if (value) {\n                value.classList.add(cssClass('search-highlighted'));\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SearchBox.prototype.highlightNext = function () {\n        var h = this.highlighted;\n        if (!h || h.classList.contains(cssClass('hidden'))) {\n            this.highlighted = this.body.querySelector(SearchBox.SEARCH_ITEM_SELECTOR) || null;\n            return;\n        }\n        var items = Array.from(this.body.querySelectorAll(SearchBox.SEARCH_ITEM_SELECTOR));\n        var index = items.indexOf(h);\n        this.highlighted = items[index + 1] || null;\n    };\n    SearchBox.prototype.highlightPrevious = function () {\n        var h = this.highlighted;\n        var items = Array.from(this.body.querySelectorAll(SearchBox.SEARCH_ITEM_SELECTOR));\n        if (!h || h.classList.contains(cssClass('hidden'))) {\n            this.highlighted = items[items.length - 1] || null;\n            return;\n        }\n        var index = items.indexOf(h);\n        this.highlighted = items[index - 1] || null;\n    };\n    SearchBox.prototype.blur = function () {\n        this.search.value = '';\n        // clear filter\n        this.filterResults(this.body, '');\n        this.node.classList.remove(cssClass('search-open'));\n    };\n    SearchBox.prototype.filter = function () {\n        var empty = this.filterResults(this.body, this.search.value.toLowerCase());\n        this.body.classList.toggle(cssClass('search-empty'), empty);\n    };\n    SearchBox.prototype.filterResults = function (node, text) {\n        var _this = this;\n        if (text === '') {\n            // show all\n            Array.from(node.getElementsByClassName(cssClass('hidden'))).forEach(function (d) {\n                return d.classList.remove(cssClass('hidden'));\n            });\n            return false;\n        }\n        var children = Array.from(node.children);\n        children.forEach(function (d) {\n            var content = d.firstElementChild.innerHTML.toLowerCase();\n            var hidden = !content.includes(text);\n            if (d.classList.contains(cssClass('search-group'))) {\n                var ul = d.lastElementChild;\n                var allChildrenHidden = _this.filterResults(ul, text);\n                hidden = hidden && allChildrenHidden;\n            }\n            d.classList.toggle(cssClass('hidden'), hidden);\n        });\n        return children.every(function (d) { return d.classList.contains(cssClass('hidden')); });\n    };\n    SearchBox.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this).concat([SearchBox.EVENT_SELECT]);\n    };\n    SearchBox.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    SearchBox.EVENT_SELECT = 'select';\n    SearchBox.SEARCH_ITEM_SELECTOR = \".\".concat(cssClass('search-item'), \":not(.\").concat(cssClass('hidden'), \")\");\n    return SearchBox;\n}(AEventDispatcher));\nexport default SearchBox;\n//# sourceMappingURL=SearchBox.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ADialog from './ADialog';\nimport { cssClass } from '../../styles';\n/** @internal */\nvar RenameRankingDialog = /** @class */ (function (_super) {\n    __extends(RenameRankingDialog, _super);\n    function RenameRankingDialog(ranking, dialog) {\n        var _this = _super.call(this, dialog, {\n            livePreview: 'rename',\n        }) || this;\n        _this.ranking = ranking;\n        _this.before = ranking.getLabel();\n        return _this;\n    }\n    RenameRankingDialog.prototype.build = function (node) {\n        node.classList.add(cssClass('dialog-rename'));\n        node.insertAdjacentHTML('beforeend', \"\\n      <input type=\\\"text\\\" value=\\\"\".concat(this.dialog.sanitize(this.ranking.getLabel()), \"\\\" required autofocus placeholder=\\\"name\\\">\"));\n    };\n    RenameRankingDialog.prototype.reset = function () {\n        this.findInput('input[type=\"text\"]').value = this.before;\n    };\n    RenameRankingDialog.prototype.cancel = function () {\n        this.ranking.setLabel(this.before);\n    };\n    RenameRankingDialog.prototype.submit = function () {\n        var newValue = this.findInput('input[type=\"text\"]').value;\n        this.ranking.setLabel(newValue);\n        return true;\n    };\n    return RenameRankingDialog;\n}(ADialog));\nexport default RenameRankingDialog;\n//# sourceMappingURL=RenameRankingDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { dialogContext } from './ADialog';\nimport RenameRankingDialog from './RenameRankingDialog';\nimport { cssClass } from '../../styles';\nimport { actionCSSClass } from '../header';\nimport APopup from './APopup';\n/** @internal */\nvar MoreRankingOptionsDialog = /** @class */ (function (_super) {\n    __extends(MoreRankingOptionsDialog, _super);\n    function MoreRankingOptionsDialog(ranking, dialog, ctx) {\n        var _this = _super.call(this, dialog, {\n            autoClose: true,\n        }) || this;\n        _this.ranking = ranking;\n        _this.ctx = ctx;\n        return _this;\n    }\n    MoreRankingOptionsDialog.prototype.addIcon = function (node, title, onClick) {\n        var sanitized = this.ctx.sanitize(title);\n        node.insertAdjacentHTML('beforeend', \"<i title=\\\"\".concat(sanitized, \"\\\" class=\\\"\").concat(actionCSSClass(title), \"\\\"><span>\").concat(sanitized, \"</span> </i>\"));\n        var i = node.lastElementChild;\n        i.onclick = function (evt) {\n            evt.stopPropagation();\n            onClick(evt);\n        };\n    };\n    MoreRankingOptionsDialog.prototype.build = function (node) {\n        var _this = this;\n        node.classList.add(cssClass('more-options'));\n        this.addIcon(node, 'Rename', function (evt) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            var dialog = new RenameRankingDialog(_this.ranking, dialogContext(_this.ctx, _this.level + 1, evt));\n            dialog.open();\n        });\n        this.addIcon(node, 'Remove', function (evt) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            _this.destroy('confirm');\n            _this.ctx.provider.removeRanking(_this.ranking);\n        });\n    };\n    return MoreRankingOptionsDialog;\n}(APopup));\nexport default MoreRankingOptionsDialog;\n//# sourceMappingURL=MoreRankingOptionsDialog.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ADialog from './ADialog';\n/** @internal */\nvar AddonDialog = /** @class */ (function (_super) {\n    __extends(AddonDialog, _super);\n    function AddonDialog(column, addons, dialog, ctx, onClick) {\n        var _this = _super.call(this, dialog) || this;\n        _this.column = column;\n        _this.addons = addons;\n        _this.ctx = ctx;\n        _this.onClick = onClick;\n        _this.handlers = [];\n        return _this;\n    }\n    AddonDialog.prototype.build = function (node) {\n        for (var _i = 0, _a = this.addons; _i < _a.length; _i++) {\n            var addon = _a[_i];\n            this.node.insertAdjacentHTML('beforeend', \"<strong>\".concat(this.ctx.sanitize(addon.title), \"</strong>\"));\n            this.handlers.push(addon.append(this.column, node, this.dialog, this.ctx));\n        }\n    };\n    AddonDialog.prototype.submit = function () {\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\n            var handler = _a[_i];\n            if (handler.submit() === false) {\n                return false;\n            }\n        }\n        if (this.onClick) {\n            this.onClick();\n        }\n        return true;\n    };\n    AddonDialog.prototype.cancel = function () {\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\n            var handler = _a[_i];\n            handler.cancel();\n        }\n    };\n    AddonDialog.prototype.reset = function () {\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\n            var handler = _a[_i];\n            handler.reset();\n        }\n    };\n    return AddonDialog;\n}(ADialog));\nexport default AddonDialog;\n//# sourceMappingURL=AddonDialog.js.map","import { clear } from '../../internal';\nimport { categoryOf, isSortingAscByDefault, isSupportType } from '../../model';\nimport { aria, cssClass } from '../../styles';\nimport AddonDialog from '../dialogs/AddonDialog';\nimport { actionCSSClass, updateHeader } from '../header';\nimport { getToolbarDialogAddons, isGroupAble, isGroupSortAble, isSortAble } from '../toolbarResolvers';\nimport SearchBox from './SearchBox';\nimport { dialogContext } from '../dialogs';\n/**\n * @internal\n */\nvar Hierarchy = /** @class */ (function () {\n    function Hierarchy(ctx, document) {\n        this.ctx = ctx;\n        this.node = document.createElement('aside');\n        this.node.classList.add(cssClass('hierarchy'), cssClass('feature-advanced'), cssClass('feature-ranking'));\n        this.node.innerHTML = \"\\n      <section class=\\\"\".concat(cssClass('group-hierarchy'), \"\\\">\\n      </section>\\n      <section class=\\\"\").concat(cssClass('sort-hierarchy'), \"\\\">\\n      </section>\\n      <section class=\\\"\").concat(cssClass('sort-groups-hierarchy'), \"\\\">\\n      </section>\\n    \");\n        var options = {\n            doc: document,\n            placeholder: 'Add Sort Criteria...',\n            formatItem: function (item, node) {\n                node.classList.add(cssClass('typed-icon'));\n                node.dataset.typeCat = categoryOf(item.col).name;\n                node.dataset.type = item.col.desc.type;\n                var summary = item.col.getMetaData().summary || item.col.description;\n                node.classList.toggle(cssClass('searchbox-summary-entry'), Boolean(summary));\n                if (summary) {\n                    var label = node.ownerDocument.createElement('span');\n                    if (item.col.desc.labelAsHTML) {\n                        label.innerHTML = item.text;\n                    }\n                    else {\n                        label.textContent = item.text;\n                    }\n                    node.appendChild(label);\n                    var desc = node.ownerDocument.createElement('span');\n                    if (item.col.desc.summaryAsHTML) {\n                        label.innerHTML = summary;\n                    }\n                    else {\n                        label.textContent = summary;\n                    }\n                    node.appendChild(desc);\n                }\n                else if (item.col.desc.labelAsHTML) {\n                    node.innerHTML = item.text;\n                }\n                else {\n                    node.textContent = item.text;\n                }\n            },\n        };\n        this.groupAdder = new SearchBox(Object.assign({}, options, {\n            placeholder: 'Add Grouping Criteria...',\n        }));\n        this.groupSortAdder = new SearchBox(Object.assign({}, options, {\n            placeholder: 'Add Grouping Sort Criteria...',\n        }));\n        this.sortAdder = new SearchBox(options);\n    }\n    Hierarchy.prototype.update = function (ranking) {\n        if (!ranking) {\n            this.node.style.display = 'none';\n            return;\n        }\n        this.node.style.display = null;\n        this.renderGroups(ranking, this.node.firstElementChild);\n        this.renderSorting(ranking, this.node.children[1]);\n        this.renderGroupSorting(ranking, this.node.lastElementChild);\n    };\n    Hierarchy.prototype.render = function (node, items, toColumn, extras, addonKey, onChange) {\n        var _this = this;\n        var cache = new Map(Array.from(node.children).map(function (d) { return [d.dataset.id, d]; }));\n        clear(node);\n        items.forEach(function (d) {\n            var col = toColumn(d);\n            var item = cache.get(col.id);\n            if (item) {\n                node.appendChild(item);\n                updateHeader(item, col, 0);\n                return;\n            }\n            var addons = getToolbarDialogAddons(col, addonKey, _this.ctx);\n            node.insertAdjacentHTML('beforeend', \"<div data-id=\\\"\".concat(col.id, \"\\\" class=\\\"\").concat(cssClass('toolbar'), \" \").concat(cssClass('hierarchy-entry'), \"\\\">\\n      <div class=\\\"\").concat(cssClass('label'), \" \").concat(cssClass('typed-icon'), \"\\\"> </div>\\n      \").concat(addons.length > 0 ? \"<i title=\\\"Customize\\\" class=\\\"\".concat(actionCSSClass('customize'), \"\\\">\").concat(aria('Customize'), \"</i>\") : '', \"\\n      <i title=\\\"Move Up\\\" class=\\\"\").concat(actionCSSClass('Move Up'), \"\\\">\").concat(aria('Move Up'), \"</i>\\n      <i title=\\\"Move Down\\\" class=\\\"\").concat(actionCSSClass('Move Down'), \"\\\">\").concat(aria('Move Down'), \"</i>\\n      <i title=\\\"Remove from hierarchy\\\" class=\\\"\").concat(actionCSSClass('Remove'), \"\\\">\").concat(aria('Remove from hierarchy'), \"</i>\\n      </div>\"));\n            var last = node.lastElementChild;\n            last.firstElementChild.textContent = col.label;\n            function prevent(evt) {\n                evt.preventDefault();\n                evt.stopPropagation();\n            }\n            last.querySelector('i[title=\"Move Down\"]').onclick = function (evt) {\n                prevent(evt);\n                onChange(d, +1);\n            };\n            last.querySelector('i[title=\"Move Up\"]').onclick = function (evt) {\n                prevent(evt);\n                onChange(d, -1);\n            };\n            last.querySelector('i[title^=Remove]').onclick = function (evt) {\n                prevent(evt);\n                onChange(d, 0);\n            };\n            if (addons.length > 0) {\n                last.querySelector('i[title=Customize]').onclick = function (evt) {\n                    prevent(evt);\n                    _this.customize(col, addons, evt);\n                };\n            }\n            extras(d, last);\n            updateHeader(last, col, 0);\n        });\n    };\n    Hierarchy.prototype.renderGroups = function (ranking, node) {\n        var groups = ranking.getGroupCriteria();\n        if (groups.length === 0) {\n            clear(node);\n            return;\n        }\n        var click = function (col, delta) {\n            if (delta === 0) {\n                col.groupByMe();\n                return;\n            }\n            var current = col.isGroupedBy();\n            col.findMyRanker().groupBy(col, current + delta);\n        };\n        var addButton = function (_, last) {\n            last.insertAdjacentHTML('afterbegin', \"<i title=\\\"Group\\\" class=\\\"\".concat(actionCSSClass('group'), \"\\\" data-group=\\\"true\\\">\").concat(aria('Group'), \"</i>\"));\n        };\n        this.render(node, groups, function (d) { return d; }, addButton, 'group', click);\n        this.addGroupAdder(ranking, groups, node);\n    };\n    Hierarchy.prototype.renderSorting = function (ranking, node) {\n        var sortCriterias = ranking.getSortCriteria();\n        if (sortCriterias.length === 0) {\n            clear(node);\n            return;\n        }\n        var click = function (_a, delta) {\n            var col = _a.col;\n            var current = col.isSortedByMe();\n            if (!isFinite(delta)) {\n                col.sortByMe(current.asc === 'desc', current.priority);\n                return;\n            }\n            if (delta === 0) {\n                col.sortByMe(current.asc === 'asc', -1);\n                return;\n            }\n            col.sortByMe(current.asc === 'asc', current.priority + delta);\n        };\n        var addButton = function (s, last) {\n            last.insertAdjacentHTML('afterbegin', \"\\n      <i title=\\\"Sort\\\" class=\\\"\".concat(actionCSSClass('sort'), \"\\\" data-sort=\\\"\").concat(s.asc ? 'asc' : 'desc', \"\\\">\").concat(aria('Toggle Sorting'), \"</i>\"));\n            last.querySelector('i[title=Sort]').onclick = function (evt) {\n                evt.preventDefault();\n                evt.stopPropagation();\n                click(s, Number.POSITIVE_INFINITY);\n            };\n        };\n        this.render(node, sortCriterias, function (d) { return d.col; }, addButton, 'sort', click);\n        this.addSortAdder(ranking, sortCriterias, node);\n    };\n    Hierarchy.prototype.renderGroupSorting = function (ranking, node) {\n        var sortCriterias = ranking.getGroupSortCriteria();\n        if (sortCriterias.length === 0) {\n            clear(node);\n            return;\n        }\n        var click = function (_a, delta) {\n            var col = _a.col;\n            var current = col.isGroupSortedByMe();\n            if (!isFinite(delta)) {\n                col.groupSortByMe(current.asc === 'desc', current.priority);\n                return;\n            }\n            if (delta === 0) {\n                col.groupSortByMe(current.asc === 'asc', -1);\n                return;\n            }\n            col.groupSortByMe(current.asc === 'asc', current.priority + delta);\n        };\n        var addButton = function (s, last) {\n            last.insertAdjacentHTML('afterbegin', \"\\n      <i title=\\\"Sort Group\\\" class=\\\"\".concat(actionCSSClass('sort-groups'), \"\\\" data-sort=\\\"\").concat(s.asc ? 'asc' : 'desc', \"\\\">\").concat(aria('Toggle Sorting'), \"</i>\"));\n            last.querySelector('i[title=\"Sort Group\"]').onclick = function (evt) {\n                evt.preventDefault();\n                evt.stopPropagation();\n                click(s, Number.POSITIVE_INFINITY);\n            };\n        };\n        this.render(node, sortCriterias, function (d) { return d.col; }, addButton, 'sortGroup', click);\n        this.addGroupSortAdder(ranking, sortCriterias, node);\n    };\n    Hierarchy.prototype.addAdder = function (adder, ranking, addonKey, current, node, check, onSelect) {\n        var _this = this;\n        var used = new Set(current);\n        adder.data = ranking.children\n            .filter(function (col) { return !isSupportType(col) && !used.has(col) && check(col); })\n            .map(function (col) { return ({ col: col, id: col.id, text: col.label }); });\n        adder.on(SearchBox.EVENT_SELECT, function (item) {\n            var addons = getToolbarDialogAddons(item.col, addonKey, _this.ctx);\n            if (addons.length > 0) {\n                _this.customize(item.col, addons, adder.node, function () { return onSelect(item.col); });\n            }\n            else {\n                onSelect(item.col);\n            }\n        });\n        if (adder.data.length <= 0) {\n            return;\n        }\n        var wrapper = node.ownerDocument.createElement('footer');\n        wrapper.appendChild(adder.node);\n        wrapper.classList.add(cssClass('hierarchy-adder'));\n        node.appendChild(wrapper);\n    };\n    Hierarchy.prototype.addSortAdder = function (ranking, sortCriterias, node) {\n        var _this = this;\n        this.addAdder(this.sortAdder, ranking, 'sort', sortCriterias.map(function (d) { return d.col; }), node, function (d) { return isSortAble(d, _this.ctx); }, function (col) {\n            ranking.sortBy(col, isSortingAscByDefault(col), sortCriterias.length);\n        });\n    };\n    Hierarchy.prototype.addGroupAdder = function (ranking, groups, node) {\n        var _this = this;\n        this.addAdder(this.groupAdder, ranking, 'group', groups, node, function (d) { return isGroupAble(d, _this.ctx); }, function (col) {\n            ranking.groupBy(col, groups.length);\n        });\n    };\n    Hierarchy.prototype.addGroupSortAdder = function (ranking, sortCriterias, node) {\n        var _this = this;\n        this.addAdder(this.groupSortAdder, ranking, 'sortGroup', sortCriterias.map(function (d) { return d.col; }), node, function (d) { return isGroupSortAble(d, _this.ctx); }, function (col) {\n            ranking.groupSortBy(col, isSortingAscByDefault(col), sortCriterias.length);\n        });\n    };\n    Hierarchy.prototype.customize = function (col, addons, attachment, onClick) {\n        var dialog = new AddonDialog(col, addons, dialogContext(this.ctx, 0, attachment), this.ctx, onClick);\n        dialog.open();\n    };\n    return Hierarchy;\n}());\nexport default Hierarchy;\n//# sourceMappingURL=Hierarchy.js.map","import { Column, isMapAbleColumn, NumberColumn } from '../../model';\nimport { cssClass, engineCssClass } from '../../styles';\nimport { createShortcutMenuItems, updateHeader } from '../header';\nimport { suffix } from '../../internal';\n/** @internal */\nvar SidePanelEntryVis = /** @class */ (function () {\n    function SidePanelEntryVis(column, ctx, document) {\n        var _this = this;\n        this.column = column;\n        this.ctx = ctx;\n        this.summaryUpdater = null;\n        this.node = document.createElement('article');\n        this.node.classList.add(cssClass('side-panel-entry'));\n        this.node.dataset.colId = column.id;\n        this.node.dataset.type = column.desc.type;\n        this.summary = ctx.summaryRenderer(column, true);\n        this.column.on(suffix('.panel', NumberColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_HEADER), function () {\n            _this.update();\n        });\n        this.column.on(suffix('.panel', Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_CACHES), function () {\n            _this.recreateSummary();\n        });\n        this.init();\n        this.update();\n    }\n    SidePanelEntryVis.prototype.init = function () {\n        this.node.innerHTML = \"\\n      <header class=\\\"\".concat(cssClass('side-panel-entry-header'), \"\\\">\\n        <div class=\\\"\").concat(cssClass('side-panel-labels'), \"\\\">\\n          <span class=\\\"\").concat(cssClass('label'), \" \").concat(cssClass('typed-icon'), \" \").concat(cssClass('side-panel-label'), \"\\\"></span>\\n          <span class=\\\"\").concat(cssClass('sublabel'), \" \").concat(cssClass('side-panel-sublabel'), \"\\\"></span>\\n        </div>\\n        <div class=\\\"\").concat(cssClass('toolbar'), \" \").concat(cssClass('side-panel-toolbar'), \"\\\"></div>\\n      </header>\");\n        createShortcutMenuItems(this.node.querySelector(\".\".concat(cssClass('toolbar'))), 0, this.column, this.ctx, 'sidePanel', false);\n        this.appendSummary();\n    };\n    SidePanelEntryVis.prototype.update = function (ctx) {\n        if (ctx === void 0) { ctx = this.ctx; }\n        this.ctx = ctx;\n        updateHeader(this.node, this.column);\n        this.updateSummary();\n    };\n    SidePanelEntryVis.prototype.updateSummary = function () {\n        var summaryNode = this.node.querySelector(\".\".concat(cssClass('summary')));\n        if (this.summaryUpdater) {\n            this.summaryUpdater.abort();\n            summaryNode.classList.remove(engineCssClass('loading'));\n            this.summaryUpdater = null;\n        }\n        var r = this.summary.update(summaryNode);\n        if (!r) {\n            return;\n        }\n        this.summaryUpdater = r;\n        summaryNode.classList.add(engineCssClass('loading'));\n        r.then(function (a) {\n            if (typeof a === 'symbol') {\n                return;\n            }\n            summaryNode.classList.remove(engineCssClass('loading'));\n        });\n    };\n    SidePanelEntryVis.prototype.appendSummary = function () {\n        var summary = this.ctx.asElement(this.summary.template);\n        summary.classList.add(cssClass('summary'), cssClass('side-panel-summary'), cssClass('renderer'), cssClass(\"renderer-\".concat(this.column.getSummaryRenderer())));\n        summary.dataset.renderer = this.column.getSummaryRenderer();\n        summary.dataset.interactive = isMapAbleColumn(this.column).toString();\n        this.node.appendChild(summary);\n    };\n    SidePanelEntryVis.prototype.recreateSummary = function () {\n        // remove old summary\n        this.node.removeChild(this.node.querySelector(\".\".concat(cssClass('summary'))));\n        this.summary = this.ctx.summaryRenderer(this.column, true);\n        this.appendSummary();\n        this.updateSummary();\n    };\n    SidePanelEntryVis.prototype.destroy = function () {\n        this.column.on(suffix('.panel', NumberColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_CACHES), null);\n        this.node.remove();\n    };\n    return SidePanelEntryVis;\n}());\nexport default SidePanelEntryVis;\n//# sourceMappingURL=SidePanelEntryVis.js.map","import { clear, suffix } from '../../internal';\nimport { Ranking, isSupportType } from '../../model';\nimport { aria, cssClass } from '../../styles';\nimport MoreRankingOptionsDialog from '../dialogs/MoreRankingOptionsDialog';\nimport { actionCSSClass } from '../header';\nimport { dialogContext } from '../dialogs';\nimport Hierarchy from './Hierarchy';\nimport SidePanelEntryVis from './SidePanelEntryVis';\n/** @internal */\nvar SidePanelRanking = /** @class */ (function () {\n    function SidePanelRanking(ranking, ctx, document, options) {\n        this.ranking = ranking;\n        this.ctx = ctx;\n        this.options = options;\n        this.entries = new Map();\n        this.node = document.createElement('section');\n        this.header = document.createElement('div');\n        this.dropdown = document.createElement('div');\n        this.node.classList.add(cssClass('side-panel-ranking'));\n        this.header.classList.add(cssClass('side-panel-ranking-header'), cssClass('side-panel-ranking-label'));\n        this.dropdown.classList.add(cssClass('side-panel-ranking-label'));\n        this.dropdown.innerHTML = \"<span></span><i class=\\\"\".concat(actionCSSClass('more'), \"\\\" title=\\\"More \\u2026\\\">\").concat(aria('More '), \"</i>\");\n        this.header.innerHTML = this.dropdown.innerHTML;\n        this.header.firstElementChild.textContent = ranking.getLabel();\n        this.header.lastElementChild.onclick = this.dropdown.lastElementChild.onclick =\n            function (evt) {\n                evt.stopPropagation();\n                evt.preventDefault();\n                var dialog = new MoreRankingOptionsDialog(ranking, dialogContext(ctx, 1, evt), ctx);\n                dialog.open();\n            };\n        this.hierarchy = this.options.hierarchy ? new Hierarchy(ctx, document) : null;\n        this.init();\n    }\n    SidePanelRanking.prototype.init = function () {\n        var _this = this;\n        this.node.innerHTML = \"<main class=\\\"\".concat(cssClass('side-panel-ranking-main'), \"\\\"></main>\");\n        if (this.hierarchy) {\n            this.node.insertBefore(this.hierarchy.node, this.node.firstChild);\n        }\n        if (this.hierarchy) {\n            this.ranking.on(suffix('.panel', Ranking.EVENT_GROUP_CRITERIA_CHANGED, Ranking.EVENT_SORT_CRITERIA_CHANGED, Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED), function () {\n                _this.updateHierarchy();\n            });\n        }\n        this.ranking.on(suffix('.panel', Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_MOVE_COLUMN), function () {\n            _this.updateList();\n            _this.updateHierarchy();\n        });\n        this.ranking.on(suffix('.panel', Ranking.EVENT_LABEL_CHANGED), function () {\n            _this.dropdown.firstElementChild.textContent = _this.header.firstElementChild.textContent =\n                _this.ranking.getLabel();\n        });\n    };\n    Object.defineProperty(SidePanelRanking.prototype, \"active\", {\n        get: function () {\n            return this.node.classList.contains(cssClass('active'));\n        },\n        set: function (value) {\n            this.node.classList.toggle(cssClass('active'), value);\n            this.header.classList.toggle(cssClass('active'), value);\n            this.dropdown.classList.toggle(cssClass('active'), value);\n            if (value) {\n                return;\n            }\n            this.updateList();\n            this.updateHierarchy();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SidePanelRanking.prototype.update = function (ctx) {\n        this.ctx = ctx;\n        this.updateList();\n        this.updateHierarchy();\n    };\n    SidePanelRanking.prototype.updateHierarchy = function () {\n        if (!this.hierarchy || !this.active) {\n            return;\n        }\n        this.hierarchy.update(this.ranking);\n    };\n    SidePanelRanking.prototype.updateList = function () {\n        var _this = this;\n        if (!this.active) {\n            return;\n        }\n        var node = this.node.querySelector('main');\n        var columns = this.ranking.flatColumns.filter(function (d) { return !isSupportType(d); });\n        if (columns.length === 0) {\n            clear(node);\n            this.entries.forEach(function (d) { return d.destroy(); });\n            this.entries.clear();\n            return;\n        }\n        var currentEntries = new Map(this.entries);\n        this.entries.clear();\n        columns.forEach(function (col, i) {\n            var existing = currentEntries.get(col.id);\n            if (existing) {\n                existing.update(_this.ctx);\n                if (node.children[i] !== existing.node) {\n                    // change node order if it doesn't match\n                    node.appendChild(existing.node);\n                }\n                _this.entries.set(col.id, existing);\n                currentEntries.delete(col.id);\n                return;\n            }\n            var entry = new SidePanelEntryVis(col, _this.ctx, node.ownerDocument);\n            node.insertBefore(entry.node, node.children[i]);\n            _this.entries.set(col.id, entry);\n        });\n        currentEntries.forEach(function (d) {\n            d.node.remove();\n            d.destroy();\n        });\n    };\n    SidePanelRanking.prototype.destroy = function () {\n        this.header.remove();\n        this.node.remove();\n        this.ranking.on(suffix('.panel', Ranking.EVENT_GROUP_CRITERIA_CHANGED, Ranking.EVENT_SORT_CRITERIA_CHANGED, Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED, Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_MOVE_COLUMN, Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_LABEL_CHANGED), null);\n        this.entries.forEach(function (d) { return d.destroy(); });\n        this.entries.clear();\n    };\n    return SidePanelRanking;\n}());\nexport default SidePanelRanking;\n//# sourceMappingURL=SidePanelRanking.js.map","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { suffix } from '../../internal';\nimport { categoryOfDesc, createAggregateDesc, createGroupDesc, createImpositionDesc, createNestedDesc, createRankDesc, createReduceDesc, createScriptDesc, createSelectionDesc, createStackDesc, } from '../../model';\nimport { DataProvider } from '../../provider';\nimport { aria, cssClass } from '../../styles';\nimport ChooseRankingDialog from '../dialogs/ChooseRankingDialog';\nimport { dialogContext } from '../dialogs';\nimport SearchBox from './SearchBox';\nimport SidePanelRanking from './SidePanelRanking';\nimport { format } from 'd3-format';\nimport { setText } from '../../renderer/utils';\nfunction isWrapper(item) {\n    return item.desc != null;\n}\nvar SidePanel = /** @class */ (function () {\n    function SidePanel(ctx, document, options) {\n        if (options === void 0) { options = {}; }\n        this.ctx = ctx;\n        this.options = {\n            additionalDescs: [\n                createStackDesc('Weighted Sum'),\n                createScriptDesc('Scripted Formula'),\n                createNestedDesc('Nested'),\n                createReduceDesc(),\n                createImpositionDesc(),\n                createRankDesc(),\n                createSelectionDesc(),\n                createGroupDesc(),\n                createAggregateDesc(),\n            ],\n            chooser: true,\n            hierarchy: true,\n            placeholder: 'Add Column...',\n            formatItem: function (item, node) {\n                var w = isWrapper(item) ? item : item.children[0];\n                node.dataset.typeCat = w.category.name;\n                node.classList.add(cssClass('typed-icon'));\n                if (isWrapper(item)) {\n                    node.dataset.type = w.desc.type;\n                }\n                if (node.parentElement) {\n                    node.parentElement.classList.add(cssClass('feature-model'));\n                    node.parentElement.classList.toggle(cssClass('feature-advanced'), w.category.featureLevel === 'advanced');\n                    node.parentElement.classList.toggle(cssClass('feature-basic'), w.category.featureLevel === 'basic');\n                    if (isWrapper(item)) {\n                        var summary = w.desc.summary || w.desc.description;\n                        node.classList.toggle(cssClass('searchbox-summary-entry'), Boolean(summary));\n                        if (summary) {\n                            var label = node.ownerDocument.createElement('span');\n                            if (w.desc.labelAsHTML) {\n                                label.innerHTML = w.desc.label;\n                            }\n                            else {\n                                label.textContent = w.desc.label;\n                            }\n                            node.appendChild(label);\n                            var desc = node.ownerDocument.createElement('span');\n                            if (w.desc.summaryAsHTML) {\n                                desc.innerHTML = summary;\n                            }\n                            else {\n                                desc.textContent = summary;\n                            }\n                            node.appendChild(desc);\n                            return undefined;\n                        }\n                    }\n                }\n                if (isWrapper(item) && item.desc.labelAsHTML) {\n                    node.innerHTML = item.text;\n                }\n                else {\n                    setText(node, item.text);\n                }\n            },\n            collapseable: true,\n        };\n        this.chooser = null;\n        this.descs = [];\n        this.rankings = [];\n        Object.assign(this.options, options);\n        this.node = document.createElement('aside');\n        this.node.classList.add(cssClass('side-panel'));\n        this.search = this.options.chooser ? new SearchBox(this.options) : null;\n        this.data = ctx.provider;\n        this.init();\n        this.update(ctx);\n    }\n    SidePanel.prototype.init = function () {\n        var _this = this;\n        this.node.innerHTML = \"\\n      <aside class=\\\"\".concat(cssClass('stats'), \"\\\"></aside>\\n      <header class=\\\"\").concat(cssClass('side-panel-rankings'), \"\\\">\\n        <i class=\\\"\").concat(cssClass('action'), \"\\\" title=\\\"Choose \\u2026\\\">\").concat(aria('Choose '), \"</i>\\n      </header>\\n      <main class=\\\"\").concat(cssClass('side-panel-main'), \"\\\"></main>\\n    \");\n        {\n            var choose = this.node.querySelector('header > i');\n            choose.onclick = function (evt) {\n                evt.stopPropagation();\n                var dialog = new ChooseRankingDialog(_this.rankings.map(function (d) { return d.dropdown; }), dialogContext(_this.ctx, 1, evt));\n                dialog.open();\n            };\n        }\n        if (this.options.collapseable) {\n            this.node.insertAdjacentHTML('beforeend', \"<div class=\\\"\".concat(cssClass('collapser'), \"\\\" title=\\\"Collapse Panel\\\">\").concat(aria('Collapse Panel'), \"</div>\"));\n            var last = this.node.lastElementChild;\n            last.onclick = function () { return (_this.collapsed = !_this.collapsed); };\n            this.collapsed = this.options.collapseable === 'collapsed';\n        }\n        this.initChooser();\n        this.changeDataStorage(null, this.data);\n    };\n    SidePanel.prototype.initChooser = function () {\n        var _this = this;\n        if (!this.search) {\n            return;\n        }\n        this.chooser = this.node.ownerDocument.createElement('header');\n        this.chooser.appendChild(this.chooser.ownerDocument.createElement('form'));\n        this.chooser.classList.add(cssClass('side-panel-chooser'));\n        this.chooser.firstElementChild.appendChild(this.search.node);\n        this.search.on(SearchBox.EVENT_SELECT, function (panel) {\n            var col = _this.data.create(panel.desc);\n            if (!col) {\n                return;\n            }\n            var a = _this.active;\n            if (a) {\n                a.ranking.push(col);\n            }\n        });\n    };\n    Object.defineProperty(SidePanel.prototype, \"active\", {\n        get: function () {\n            return this.rankings.find(function (d) { return d.active; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SidePanel.prototype.changeDataStorage = function (old, data) {\n        var _a;\n        var _this = this;\n        if (old) {\n            old.on(suffix('.panel', DataProvider.EVENT_ADD_RANKING, DataProvider.EVENT_REMOVE_RANKING, DataProvider.EVENT_ADD_DESC, DataProvider.EVENT_REMOVE_DESC, DataProvider.EVENT_CLEAR_DESC, DataProvider.EVENT_ORDER_CHANGED, DataProvider.EVENT_SELECTION_CHANGED), null);\n        }\n        this.data = data;\n        var wrapDesc = function (desc) { return ({\n            desc: desc,\n            category: categoryOfDesc(desc, data.columnTypes),\n            id: \"\".concat(desc.type, \"@\").concat(desc.label),\n            text: desc.label,\n        }); };\n        (_a = this.descs).splice.apply(_a, __spreadArray([0,\n            this.descs.length], data\n            .getColumns()\n            .filter(function (d) { return d.visible !== false; })\n            .concat(this.options.additionalDescs)\n            .map(wrapDesc), false));\n        data.on(\"\".concat(DataProvider.EVENT_ADD_DESC, \".panel\"), function (desc) {\n            if (desc.visible !== false) {\n                _this.descs.push(wrapDesc(desc));\n                _this.updateChooser();\n            }\n        });\n        data.on(\"\".concat(DataProvider.EVENT_CLEAR_DESC, \".panel\"), function () {\n            _this.descs.splice(0, _this.descs.length);\n            _this.updateChooser();\n        });\n        data.on(\"\".concat(DataProvider.EVENT_REMOVE_DESC, \".panel\"), function (desc) {\n            if (desc.visible !== false) {\n                var index = _this.descs.findIndex(function (d) { return d.desc === desc; });\n                if (index >= 0) {\n                    _this.descs.splice(index, 1);\n                    _this.updateChooser();\n                }\n            }\n        });\n        data.on(suffix('.panel', DataProvider.EVENT_SELECTION_CHANGED, DataProvider.EVENT_ORDER_CHANGED), function () {\n            _this.updateStats();\n        });\n        data.on(suffix('.panel', DataProvider.EVENT_ADD_RANKING), function (ranking, index) {\n            _this.createEntry(ranking, index);\n            _this.makeActive(index);\n        });\n        data.on(suffix('.panel', DataProvider.EVENT_REMOVE_RANKING), function (_, index) {\n            if (index < 0) {\n                // remove all\n                _this.rankings.splice(0, _this.rankings.length).forEach(function (d) { return d.destroy(); });\n                _this.node.querySelector('header').dataset.count = '0';\n                _this.makeActive(-1);\n                return;\n            }\n            var r = _this.rankings.splice(index, 1)[0];\n            _this.node.querySelector('header').dataset.count = String(_this.rankings.length);\n            r.destroy();\n            if (r.active) {\n                _this.makeActive(_this.rankings.length === 0 ? -1 : Math.max(index - 1, 0));\n            }\n        });\n        this.rankings.splice(0, this.rankings.length).forEach(function (d) { return d.destroy(); });\n        data.getRankings().forEach(function (d, i) {\n            _this.createEntry(d, i);\n        });\n        if (this.rankings.length > 0) {\n            this.makeActive(0);\n        }\n        this.updateStats();\n    };\n    SidePanel.prototype.createEntry = function (ranking, index) {\n        var _this = this;\n        var entry = new SidePanelRanking(ranking, this.ctx, this.node.ownerDocument, this.options);\n        var header = this.node.querySelector('header');\n        var main = this.node.querySelector('main');\n        header.insertBefore(entry.header, header.children[index + 1]); // for the action\n        header.dataset.count = String(this.rankings.length + 1);\n        entry.header.onclick = function (evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            _this.makeActive(_this.rankings.indexOf(entry));\n        };\n        entry.dropdown.onclick = entry.header.onclick = function (evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            _this.ctx.dialogManager.removeAboveLevel(0);\n            _this.makeActive(_this.rankings.indexOf(entry));\n        };\n        main.insertBefore(entry.node, main.children[index]);\n        this.rankings.splice(index, 0, entry);\n    };\n    Object.defineProperty(SidePanel.prototype, \"collapsed\", {\n        get: function () {\n            return this.node.classList.contains(cssClass('collapsed'));\n        },\n        set: function (value) {\n            this.node.classList.toggle(cssClass('collapsed'), value);\n            if (value) {\n                return;\n            }\n            this.updateChooser();\n            this.updateStats();\n            this.updateRanking();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SidePanel.prototype.makeActive = function (index) {\n        this.rankings.forEach(function (d, i) { return (d.active = index === i); });\n        var active = this.active;\n        if (active && this.chooser) {\n            active.node.insertAdjacentElement('afterbegin', this.chooser);\n            // scroll to body\n            var parent_1 = this.node.closest(\".\".concat(cssClass()));\n            var body = parent_1 ? parent_1.querySelector(\"article[data-ranking=\\\"\".concat(active.ranking.id, \"\\\"]\")) : null;\n            if (body) {\n                body.scrollIntoView();\n            }\n        }\n        this.updateRanking();\n    };\n    SidePanel.prototype.updateRanking = function () {\n        var active = this.active;\n        if (active && !this.collapsed) {\n            active.update(this.ctx);\n        }\n    };\n    SidePanel.prototype.update = function (ctx) {\n        var bak = this.data;\n        this.ctx = ctx;\n        if (ctx.provider !== bak) {\n            this.changeDataStorage(bak, ctx.provider);\n        }\n        this.updateChooser();\n        this.updateStats();\n        var active = this.active;\n        if (active) {\n            active.update(ctx);\n        }\n    };\n    SidePanel.prototype.updateStats = function () {\n        var _this = this;\n        if (this.collapsed) {\n            return;\n        }\n        var stats = this.node.querySelector(\".\".concat(cssClass('stats')));\n        var s = this.data.getSelection();\n        var r = this.data.getFirstRanking();\n        var f = format(',d');\n        var visible = r ? r.getGroups().reduce(function (a, b) { return a + b.order.length; }, 0) : 0;\n        var total = this.data.getTotalNumberOfRows();\n        stats.innerHTML = \"Showing <strong>\".concat(f(visible), \"</strong> of \").concat(f(total), \" items\").concat(s.length > 0 ? \"; <span>\".concat(f(s.length), \" selected</span>\") : '').concat(visible < total\n            ? \" <i class=\\\"\".concat(cssClass('action'), \" \").concat(cssClass('action-filter'), \" \").concat(cssClass('stats-reset'), \"\\\" title=\\\"Reset filters\\\"><span>Reset</span></i>\")\n            : '');\n        var resetButton = stats.querySelector(\".\".concat(cssClass('stats-reset')));\n        if (!resetButton) {\n            return;\n        }\n        resetButton.onclick = function (evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            _this.data.clearFilters();\n        };\n    };\n    SidePanel.prototype.destroy = function () {\n        this.node.remove();\n        if (!this.data) {\n            return;\n        }\n        this.rankings.forEach(function (d) { return d.destroy(); });\n        this.rankings.length = 0;\n        this.data.on(suffix('.panel', DataProvider.EVENT_ADD_RANKING, DataProvider.EVENT_REMOVE_RANKING, DataProvider.EVENT_ADD_DESC), null);\n    };\n    SidePanel.groupByType = function (entries) {\n        var map = new Map();\n        entries.forEach(function (entry) {\n            if (!map.has(entry.category)) {\n                map.set(entry.category, [entry]);\n            }\n            else {\n                map.get(entry.category).push(entry);\n            }\n        });\n        return Array.from(map)\n            .map(function (_a) {\n            var key = _a[0], value = _a[1];\n            return {\n                text: key.label,\n                order: key.order,\n                children: value.sort(function (a, b) { return a.text.localeCompare(b.text); }),\n            };\n        })\n            .sort(function (a, b) { return a.order - b.order; });\n    };\n    SidePanel.prototype.updateChooser = function () {\n        if (!this.search || this.collapsed) {\n            return;\n        }\n        this.search.data = SidePanel.groupByType(this.descs);\n    };\n    return SidePanel;\n}());\nexport default SidePanel;\n//# sourceMappingURL=SidePanel.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { defaultOptions } from '../config';\nimport { merge, suffix } from '../internal';\nimport { cssClass } from '../styles';\nimport { ALineUp } from './ALineUp';\nimport EngineRenderer from './EngineRenderer';\nimport SidePanel from './panel/SidePanel';\nvar LineUp = /** @class */ (function (_super) {\n    __extends(LineUp, _super);\n    function LineUp(node, data, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, node, data, options && options.ignoreUnsupportedBrowser === true) || this;\n        _this.options = defaultOptions();\n        merge(_this.options, options);\n        if (_this.options.copyableRows) {\n            _this.addCopyListener();\n        }\n        if (!_this.isBrowserSupported) {\n            _this.renderer = null;\n            _this.panel = null;\n            return _this;\n        }\n        _this.node.classList.add(cssClass());\n        _this.renderer = new EngineRenderer(data, _this.node, _this.options);\n        if (_this.options.sidePanel) {\n            _this.panel = new SidePanel(_this.renderer.ctx, _this.node.ownerDocument, {\n                collapseable: _this.options.sidePanelCollapsed ? 'collapsed' : true,\n                hierarchy: _this.options.hierarchyIndicator && _this.options.flags.advancedRankingFeatures,\n            });\n            _this.renderer.pushUpdateAble(function (ctx) { return _this.panel.update(ctx); });\n            _this.node.insertBefore(_this.panel.node, _this.node.firstChild);\n        }\n        else {\n            _this.panel = null;\n        }\n        _this.forward.apply(_this, __spreadArray([_this.renderer], suffix('.main', EngineRenderer.EVENT_HIGHLIGHT_CHANGED, EngineRenderer.EVENT_DIALOG_OPENED, EngineRenderer.EVENT_DIALOG_CLOSED), false));\n        return _this;\n    }\n    LineUp.prototype.destroy = function () {\n        this.node.classList.remove(cssClass());\n        if (this.renderer) {\n            this.renderer.destroy();\n        }\n        if (this.panel) {\n            this.panel.destroy();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    LineUp.prototype.update = function () {\n        if (this.renderer) {\n            this.renderer.update();\n        }\n    };\n    LineUp.prototype.setDataProvider = function (data, dump) {\n        _super.prototype.setDataProvider.call(this, data, dump);\n        if (!this.renderer) {\n            return;\n        }\n        this.renderer.setDataProvider(data);\n        this.update();\n        if (this.panel) {\n            this.panel.update(this.renderer.ctx);\n        }\n    };\n    LineUp.prototype.setHighlight = function (dataIndex, scrollIntoView) {\n        if (scrollIntoView === void 0) { scrollIntoView = true; }\n        return this.renderer != null && this.renderer.setHighlight(dataIndex, scrollIntoView);\n    };\n    LineUp.prototype.getHighlight = function () {\n        return this.renderer ? this.renderer.getHighlight() : -1;\n    };\n    LineUp.prototype.enableHighlightListening = function (enable) {\n        if (this.renderer) {\n            this.renderer.enableHighlightListening(enable);\n        }\n    };\n    LineUp.EVENT_SELECTION_CHANGED = ALineUp.EVENT_SELECTION_CHANGED;\n    LineUp.EVENT_DIALOG_OPENED = ALineUp.EVENT_DIALOG_OPENED;\n    LineUp.EVENT_DIALOG_CLOSED = ALineUp.EVENT_DIALOG_CLOSED;\n    LineUp.EVENT_HIGHLIGHT_CHANGED = ALineUp.EVENT_HIGHLIGHT_CHANGED;\n    return LineUp;\n}(ALineUp));\nexport default LineUp;\n//# sourceMappingURL=LineUp.js.map","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { createAggregateDesc, createGroupDesc, createImpositionBoxPlotDesc, createImpositionDesc, createImpositionsDesc, createNestedDesc, createRankDesc, createReduceDesc, createScriptDesc, createSelectionDesc, createStackDesc, } from '../model';\n/**\n * builder for a ranking\n */\nvar RankingBuilder = /** @class */ (function () {\n    function RankingBuilder() {\n        this.columns = [];\n        this.sort = [];\n        this.groupSort = [];\n        this.groups = [];\n    }\n    /**\n     * specify another sorting criteria\n     * @param {string} column the column name optionally with encoded sorting separated by colon, e.g. a:desc\n     * @param {boolean | \"asc\" | \"desc\"} asc ascending or descending order\n     */\n    RankingBuilder.prototype.sortBy = function (column, asc) {\n        if (asc === void 0) { asc = true; }\n        if (column.includes(':')) {\n            // encoded sorting order\n            var index = column.indexOf(':');\n            asc = column.slice(index + 1);\n            column = column.slice(0, index);\n        }\n        this.sort.push({ column: column, asc: asc === true || String(asc)[0] === 'a' });\n        return this;\n    };\n    /**\n     * specify grouping criteria\n     * @returns {this}\n     */\n    RankingBuilder.prototype.groupBy = function () {\n        var _a;\n        var columns = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            columns[_i] = arguments[_i];\n        }\n        for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n            var col = columns_1[_b];\n            if (Array.isArray(col)) {\n                (_a = this.groups).push.apply(_a, col);\n            }\n            else {\n                this.groups.push(col);\n            }\n        }\n        return this;\n    };\n    /**\n     * specify another grouping sorting criteria\n     * @param {string} column the column name optionally with encoded sorting separated by colon, e.g. a:desc\n     * @param {boolean | \"asc\" | \"desc\"} asc ascending or descending order\n     */\n    RankingBuilder.prototype.groupSortBy = function (column, asc) {\n        if (asc === void 0) { asc = true; }\n        if (column.includes(':')) {\n            // encoded sorting order\n            var index = column.indexOf(':');\n            asc = column.slice(index + 1);\n            column = column.slice(0, index);\n        }\n        this.groupSort.push({ column: column, asc: asc === true || String(asc)[0] === 'a' });\n        return this;\n    };\n    /**\n     * add another column to this ranking, identified by column name or label. magic names are used for special columns:\n     * <ul>\n     *     <li>'*' = all columns</li>\n     *     <li>'_*' = all support columns</li>\n     *     <li>'_aggregate' = aggregate column</li>\n     *     <li>'_selection' = selection column</li>\n     *     <li>'_group' = group column</li>\n     *     <li>'_rank' = rank column</li>\n     * </ul>\n     * In addition build objects for combined columns are supported.\n     * @param {string | IImposeColumnBuilder | INestedBuilder | IWeightedSumBuilder | IReduceBuilder | IScriptedBuilder} column\n     */\n    RankingBuilder.prototype.column = function (column) {\n        if (typeof column === 'string') {\n            switch (column) {\n                case '_aggregate':\n                    return this.aggregate();\n                case '_selection':\n                    return this.selection();\n                case '_group':\n                    return this.group();\n                case '_rank':\n                    return this.rank();\n                case '_*':\n                    return this.supportTypes();\n                case '*':\n                    return this.allColumns();\n            }\n            this.columns.push(column);\n            return this;\n        }\n        var label = column.label || null;\n        // builder ish\n        switch (column.type) {\n            case 'impose':\n                return this.impose(label, column.column, column.colorColumn);\n            case 'min':\n            case 'max':\n            case 'median':\n            case 'mean':\n                console.assert(column.columns.length >= 2);\n                return this.reduce.apply(this, __spreadArray([label, column.type, column.columns[0], column.columns[1]], column.columns.slice(2), false));\n            case 'nested':\n                console.assert(column.columns.length >= 1);\n                return this.nested.apply(this, __spreadArray([label, column.columns[0]], column.columns.slice(1), false));\n            case 'script':\n                return this.scripted.apply(this, __spreadArray([label, column.code], column.columns, false));\n            case 'weightedSum':\n                console.assert(column.columns.length >= 2);\n                console.assert(column.columns.length === column.weights.length);\n                var mixed_1 = [];\n                column.columns.slice(2).forEach(function (c, i) {\n                    mixed_1.push(c);\n                    mixed_1.push(column.weights[i + 2]);\n                });\n                return this.weightedSum.apply(this, __spreadArray([label,\n                    column.columns[0],\n                    column.weights[0],\n                    column.columns[1],\n                    column.weights[1]], mixed_1, false));\n        }\n    };\n    /**\n     * add an imposed column (numerical column colored by categorical column) to this ranking\n     * @param {string | null} label optional label\n     * @param {string} numberColumn numerical column reference\n     * @param {string} colorColumn categorical column reference\n     */\n    RankingBuilder.prototype.impose = function (label, numberColumn, colorColumn) {\n        this.columns.push({\n            desc: function (data) {\n                var base = data.getColumns().find(function (d) { return d.label === numberColumn || d.column === numberColumn; });\n                switch (base ? base.type : '') {\n                    case 'boxplot':\n                        return createImpositionBoxPlotDesc(label ? label : undefined);\n                    case 'numbers':\n                        return createImpositionsDesc(label ? label : undefined);\n                    default:\n                        return createImpositionDesc(label ? label : undefined);\n                }\n            },\n            columns: [numberColumn, colorColumn],\n        });\n        return this;\n    };\n    /**\n     * add a nested / group composite column\n     * @param {string | null} label optional label\n     * @param {string} column first element of the group enforcing not empty ones\n     * @param {string} columns additional columns\n     */\n    RankingBuilder.prototype.nested = function (label, column) {\n        var columns = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            columns[_i - 2] = arguments[_i];\n        }\n        this.columns.push({\n            desc: createNestedDesc(label ? label : undefined),\n            columns: [column].concat(columns),\n        });\n        return this;\n    };\n    /**\n     * @param {IColumnDesc} desc the composite column description\n     * @param {string} columns additional columns to add as children\n     */\n    RankingBuilder.prototype.composite = function (desc) {\n        var columns = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            columns[_i - 1] = arguments[_i];\n        }\n        this.columns.push({\n            desc: desc,\n            columns: columns,\n        });\n        return this;\n    };\n    /**\n     * add a weighted sum / stack column\n     * @param {string | null} label optional label\n     * @param {string} numberColumn1 the first numerical column\n     * @param {number} weight1 its weight (0..1)\n     * @param {string} numberColumn2 the second numerical column\n     * @param {number} weight2 its weight (0..1)\n     * @param {string | number} numberColumnAndWeights alternating column weight references\n     */\n    RankingBuilder.prototype.weightedSum = function (label, numberColumn1, weight1, numberColumn2, weight2) {\n        var numberColumnAndWeights = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            numberColumnAndWeights[_i - 5] = arguments[_i];\n        }\n        var weights = [weight1, weight2].concat(numberColumnAndWeights.filter(function (_, i) { return i % 2 === 1; }));\n        this.columns.push({\n            desc: createStackDesc(label ? label : undefined),\n            columns: [numberColumn1, numberColumn2].concat(numberColumnAndWeights.filter(function (_, i) { return i % 2 === 0; })),\n            post: function (col) {\n                col.setWeights(weights);\n            },\n        });\n        return this;\n    };\n    /**\n     * add reducing column (min, max, median, mean, ...)\n     * @param {string | null} label optional label\n     * @param {EAdvancedSortMethod} operation operation to apply (min, max, median, mean, ...)\n     * @param {string} numberColumn1 first numerical column\n     * @param {string} numberColumn2 second numerical column\n     * @param {string} numberColumns additional numerical columns\n     */\n    RankingBuilder.prototype.reduce = function (label, operation, numberColumn1, numberColumn2) {\n        var numberColumns = [];\n        for (var _i = 4; _i < arguments.length; _i++) {\n            numberColumns[_i - 4] = arguments[_i];\n        }\n        this.columns.push({\n            desc: createReduceDesc(label ? label : undefined),\n            columns: [numberColumn1, numberColumn2].concat(numberColumns),\n            post: function (col) {\n                col.setReduce(operation);\n            },\n        });\n        return this;\n    };\n    /**\n     * add a scripted / formula column\n     * @param {string | null} label optional label\n     * @param {string} code the JS code see ScriptColumn for details\n     * @param {string} numberColumns additional script columns\n     */\n    RankingBuilder.prototype.scripted = function (label, code) {\n        var numberColumns = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            numberColumns[_i - 2] = arguments[_i];\n        }\n        this.columns.push({\n            desc: Object.assign(createScriptDesc(label ? label : undefined), { script: code }),\n            columns: numberColumns,\n        });\n        return this;\n    };\n    /**\n     * add a selection column for easier multi selections\n     */\n    RankingBuilder.prototype.selection = function () {\n        this.columns.push({\n            desc: createSelectionDesc(),\n            columns: [],\n        });\n        return this;\n    };\n    /**\n     * add a group column to show the current group name\n     */\n    RankingBuilder.prototype.group = function () {\n        this.columns.push({\n            desc: createGroupDesc(),\n            columns: [],\n        });\n        return this;\n    };\n    /**\n     * add an aggregate column to this ranking to collapse/expand groups\n     */\n    RankingBuilder.prototype.aggregate = function () {\n        this.columns.push({\n            desc: createAggregateDesc(),\n            columns: [],\n        });\n        return this;\n    };\n    /**\n     * add a ranking column\n     */\n    RankingBuilder.prototype.rank = function () {\n        this.columns.push({\n            desc: createRankDesc(),\n            columns: [],\n        });\n        return this;\n    };\n    /**\n     * add suporttypes (aggregate, rank, selection) to the ranking\n     */\n    RankingBuilder.prototype.supportTypes = function () {\n        return this.aggregate().rank().selection();\n    };\n    /**\n     * add all columns to this ranking\n     */\n    RankingBuilder.prototype.allColumns = function () {\n        this.columns.push(RankingBuilder.ALL_MAGIC_FLAG);\n        return this;\n    };\n    RankingBuilder.prototype.build = function (data) {\n        var r = data.pushRanking();\n        var cols = data.getColumns();\n        var findDesc = function (c) { return cols.find(function (d) { return d.label === c || d.column === c; }); };\n        var addColumn = function (c) {\n            var desc = findDesc(c);\n            if (desc) {\n                return data.push(r, desc) != null;\n            }\n            console.warn('invalid column: ', c);\n            return false;\n        };\n        this.columns.forEach(function (c) {\n            if (c === RankingBuilder.ALL_MAGIC_FLAG) {\n                cols.forEach(function (col) { return data.push(r, col); });\n                return;\n            }\n            if (typeof c === 'string') {\n                addColumn(c);\n                return;\n            }\n            var col = data.create(typeof c.desc === 'function' ? c.desc(data) : c.desc);\n            r.push(col);\n            c.columns.forEach(function (ci) {\n                var d = findDesc(ci);\n                var child = d ? data.create(d) : null;\n                if (!child) {\n                    console.warn('invalid column: ', ci);\n                    return;\n                }\n                col.push(child);\n            });\n            if (c.post) {\n                c.post(col);\n            }\n        });\n        var children = r.children;\n        {\n            var groups_1 = [];\n            this.groups.forEach(function (column) {\n                var col = children.find(function (d) { return d.desc.label === column || d.desc.column === column; });\n                if (col) {\n                    groups_1.push(col);\n                    return;\n                }\n                var desc = findDesc(column);\n                if (!desc) {\n                    console.warn('invalid group criteria column: ', column);\n                    return;\n                }\n                var col2 = data.push(r, desc);\n                if (col2) {\n                    groups_1.push(col2);\n                    return;\n                }\n                console.warn('invalid group criteria column: ', column);\n            });\n            if (groups_1.length > 0) {\n                r.setGroupCriteria(groups_1);\n            }\n        }\n        {\n            var sorts_1 = [];\n            this.sort.forEach(function (_a) {\n                var column = _a.column, asc = _a.asc;\n                var col = children.find(function (d) { return d.desc.label === column || d.desc.column === column; });\n                if (col) {\n                    sorts_1.push({ col: col, asc: asc });\n                    return;\n                }\n                var desc = findDesc(column);\n                if (!desc) {\n                    console.warn('invalid sort criteria column: ', column);\n                    return;\n                }\n                var col2 = data.push(r, desc);\n                if (col2) {\n                    sorts_1.push({ col: col2, asc: asc });\n                    return;\n                }\n                console.warn('invalid sort criteria column: ', column);\n            });\n            if (sorts_1.length > 0) {\n                r.setSortCriteria(sorts_1);\n            }\n        }\n        {\n            var sorts_2 = [];\n            this.groupSort.forEach(function (_a) {\n                var column = _a.column, asc = _a.asc;\n                var col = children.find(function (d) { return d.desc.label === column || d.desc.column === column; });\n                if (col) {\n                    sorts_2.push({ col: col, asc: asc });\n                    return;\n                }\n                var desc = findDesc(column);\n                if (!desc) {\n                    console.warn('invalid group sort criteria column: ', column);\n                    return;\n                }\n                var col2 = data.push(r, desc);\n                if (col2) {\n                    sorts_2.push({ col: col2, asc: asc });\n                    return;\n                }\n                console.warn('invalid group sort criteria column: ', column);\n            });\n            if (sorts_2.length > 0) {\n                r.setGroupSortCriteria(sorts_2);\n            }\n        }\n        return r;\n    };\n    RankingBuilder.ALL_MAGIC_FLAG = '*';\n    return RankingBuilder;\n}());\nexport { RankingBuilder };\n/**\n * creates a new instance of a ranking builder\n * @returns {RankingBuilder}\n */\nexport function buildRanking() {\n    return new RankingBuilder();\n}\n//# sourceMappingURL=RankingBuilder.js.map","import { buildRanking as buildRankingImpl, } from '../RankingBuilder';\n/*\n * build the column description\n */\nexport function buildRanking(props, data) {\n    var r = buildRankingImpl();\n    if (props.sortBy) {\n        var s = Array.isArray(props.sortBy) ? props.sortBy : [props.sortBy];\n        s.forEach(function (si) {\n            if (typeof si === 'string') {\n                r.sortBy(si);\n            }\n            else {\n                r.sortBy(si.column, si.asc);\n            }\n        });\n    }\n    if (props.groupBy) {\n        var s = Array.isArray(props.groupBy) ? props.groupBy : [props.groupBy];\n        r.groupBy.apply(r, s);\n    }\n    if (props.columns) {\n        props.columns.forEach(function (c) { return r.column(c); });\n    }\n    return r.build(data);\n}\nexport function buildGeneric(props) {\n    return props.column;\n}\nexport function buildImposeRanking(props) {\n    return Object.assign({\n        type: 'impose',\n    }, props);\n}\nexport function buildNestedRanking(props, children) {\n    var r = {\n        type: 'nested',\n        columns: children,\n    };\n    if (props.label) {\n        r.label = props.label;\n    }\n    return r;\n}\nexport function buildWeightedSumRanking(props, children) {\n    var r = {\n        type: 'weightedSum',\n        columns: children.map(function (d) { return d.column; }),\n        weights: children.map(function (d) { return d.weight; }),\n    };\n    if (props.label) {\n        r.label = props.label;\n    }\n    return r;\n}\nexport function buildReduceRanking(props, children) {\n    var r = {\n        type: props.type,\n        columns: children,\n    };\n    if (props.label) {\n        r.label = props.label;\n    }\n    return r;\n}\nexport function buildScriptRanking(props, children) {\n    var r = {\n        type: 'script',\n        code: props.code,\n        columns: children,\n    };\n    if (props.label) {\n        r.label = props.label;\n    }\n    return r;\n}\nexport function buildSupportRanking(props) {\n    return \"_\".concat(props.type);\n}\nexport function buildAllColumnsRanking() {\n    return '*';\n}\n//# sourceMappingURL=ranking.js.map","export { equal } from '../../internal';\nexport function isTypeInstance(clazz, superClass) {\n    var c = clazz;\n    while (c && c !== superClass) {\n        c = c.__proto__;\n    }\n    return c === superClass;\n}\nexport function pick(obj, keys) {\n    var r = {};\n    keys.forEach(function (k) {\n        if (obj.hasOwnProperty(k)) {\n            r[k] = obj[k];\n        }\n    });\n    return r;\n}\nexport function isSame(current, changed, props) {\n    if (props.every(function (p) { return !changed(p); })) {\n        return null;\n    }\n    return pick(current, props);\n}\n//# sourceMappingURL=utils.js.map","import { deriveColors, deriveColumnDescriptions, LocalDataProvider, } from '../../provider';\nimport { LineUp } from '../../ui';\nimport { buildRanking } from './ranking';\nimport { equal, isSame, pick } from './utils';\nvar providerOptions = [\n    'singleSelection',\n    'filterGlobally',\n    'columnTypes',\n    'taskExecutor',\n    'jumpToSearchResult',\n];\nvar lineupOptions = [\n    'animated',\n    'sidePanel',\n    'sidePanelCollapsed',\n    'hierarchyIndicator',\n    'defaultSlopeGraphMode',\n    'summaryHeader',\n    'expandLineOnHover',\n    'overviewMode',\n    'renderers',\n    'canRender',\n    'toolbarActions',\n    'toolbarDialogAddons',\n    'rowHeight',\n    'rowPadding',\n    'groupHeight',\n    'groupPadding',\n    'dynamicHeight',\n    'labelRotation',\n    'ignoreUnsupportedBrowser',\n    'livePreviews',\n];\nvar Adapter = /** @class */ (function () {\n    function Adapter(adapter) {\n        var _this = this;\n        this.adapter = adapter;\n        this.data = null;\n        this.instance = null;\n        this.prevRankings = null;\n        this.prevColumns = null;\n        this.prevHighlight = null;\n        this.onSelectionChanged = function (indices) {\n            if (_this.props.onSelectionChanged && !equal(_this.props.selection, indices)) {\n                _this.props.onSelectionChanged(indices);\n            }\n        };\n        this.onHighlightChanged = function (highlight) {\n            var prev = _this.prevHighlight != null ? _this.prevHighlight : -1;\n            if (prev === highlight) {\n                return;\n            }\n            _this.prevHighlight = highlight;\n            if (_this.props.onHighlightChanged) {\n                _this.props.onHighlightChanged(highlight);\n            }\n        };\n    }\n    Object.defineProperty(Adapter.prototype, \"props\", {\n        get: function () {\n            return this.adapter.props();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Adapter.prototype.componentDidMount = function () {\n        this.data = this.buildProvider();\n        this.instance = this.adapter.createInstance(this.data, pick(this.props, lineupOptions));\n        this.instance.on(LineUp.EVENT_HIGHLIGHT_CHANGED, this.onHighlightChanged);\n    };\n    Adapter.prototype.resolveColumnDescs = function (data) {\n        var columns = this.adapter.columnDescs(data);\n        var deriveColumns = columns.length === 0 || Boolean(this.props.deriveColumns);\n        var deriveColumnNames = Array.isArray(this.props.deriveColumns) ? this.props.deriveColumns : [];\n        var deriveColors = Boolean(this.props.deriveColors);\n        return {\n            columns: columns,\n            deriveColors: deriveColors,\n            deriveColumns: deriveColumns,\n            deriveColumnNames: deriveColumnNames,\n        };\n    };\n    Adapter.prototype.resolveRankings = function () {\n        var builders = this.adapter.rankingBuilders();\n        return {\n            builders: builders,\n            restore: this.props.restore,\n            derive: (builders.length === 0 && !this.props.restore) || Boolean(this.props.defaultRanking),\n            supportTypes: this.props.defaultRanking !== 'noSupportTypes',\n        };\n    };\n    Adapter.prototype.buildColumns = function (data, ctx) {\n        this.prevColumns = ctx;\n        var columns = ctx.columns.map(function (d) { return Object.assign({}, d); }); // work on copy\n        if (ctx.deriveColumns) {\n            var labels = new Set(columns.map(function (d) { return \"\".concat(d.type, \"@\").concat(d.label); }));\n            var derived = deriveColumnDescriptions(data, { columns: ctx.deriveColumnNames });\n            for (var _i = 0, derived_1 = derived; _i < derived_1.length; _i++) {\n                var derive = derived_1[_i];\n                if (labels.has(\"\".concat(derive.type, \"@\").concat(derive.label))) {\n                    // skip same name\n                    continue;\n                }\n                columns.push(derive);\n            }\n        }\n        if (ctx.deriveColors) {\n            deriveColors(columns);\n        }\n        return columns;\n    };\n    Adapter.prototype.buildRankings = function (data, rankings) {\n        data.clearRankings();\n        this.prevRankings = rankings;\n        if (rankings.derive) {\n            data.deriveDefault(rankings.supportTypes);\n        }\n        if (rankings.restore) {\n            data.restore(rankings.restore);\n        }\n        rankings.builders.forEach(function (b) { return buildRanking(b, data); });\n    };\n    Adapter.prototype.buildProvider = function () {\n        var columns = this.buildColumns(this.props.data, this.resolveColumnDescs(this.props.data));\n        var data = new LocalDataProvider(this.props.data, columns, pick(this.props, providerOptions));\n        this.buildRankings(data, this.resolveRankings());\n        data.setSelection(this.props.selection || []);\n        data.on(LocalDataProvider.EVENT_SELECTION_CHANGED, this.onSelectionChanged);\n        return data;\n    };\n    Adapter.prototype.updateLineUp = function (changeDetector, providerChanged) {\n        // check lineup instance properties\n        var changedLineUpOptions = isSame(this.props, changeDetector, lineupOptions);\n        if (!changedLineUpOptions) {\n            if (providerChanged) {\n                this.instance.setDataProvider(this.data);\n            }\n            if (providerChanged || (this.props.highlight != null && this.prevHighlight !== this.props.highlight)) {\n                this.prevHighlight = this.props.highlight == null ? -1 : this.props.highlight;\n                this.instance.on(LineUp.EVENT_HIGHLIGHT_CHANGED, null);\n                this.instance.setHighlight(this.prevHighlight);\n                this.instance.on(LineUp.EVENT_HIGHLIGHT_CHANGED, this.onHighlightChanged);\n                return true;\n            }\n            return false;\n        }\n        // recreate lineup\n        if (this.instance) {\n            this.instance.destroy();\n        }\n        this.instance = this.adapter.createInstance(this.data, changedLineUpOptions);\n        this.prevHighlight = this.props.highlight == null ? -1 : this.props.highlight;\n        this.instance.setHighlight(this.prevHighlight);\n        this.instance.on(LineUp.EVENT_HIGHLIGHT_CHANGED, this.onHighlightChanged);\n        return true;\n    };\n    Adapter.prototype.updateProvider = function (changeDetector) {\n        var _this = this;\n        var changedProviderOptions = isSame(this.props, changeDetector, providerOptions);\n        if (changedProviderOptions || !this.data || changeDetector('data')) {\n            // big change start from scratch\n            this.data = this.buildProvider();\n            return true;\n        }\n        var rankings = this.resolveRankings();\n        var columns = this.resolveColumnDescs(this.props.data);\n        var columnsChanged = !equal(this.prevColumns, columns);\n        if (columnsChanged) {\n            var descs = this.buildColumns(this.props.data, columns);\n            this.data.clearColumns();\n            descs.forEach(function (d) { return _this.data.pushDesc(d); });\n        }\n        if (columnsChanged || !equal(rankings, this.prevRankings)) {\n            this.buildRankings(this.data, rankings);\n        }\n        this.data.on(LocalDataProvider.EVENT_SELECTION_CHANGED, null);\n        this.data.setSelection(this.props.selection || []);\n        this.data.on(LocalDataProvider.EVENT_SELECTION_CHANGED, this.onSelectionChanged);\n        return false;\n    };\n    Adapter.prototype.componentDidUpdate = function (changeDetector) {\n        var providerChanged = this.updateProvider(changeDetector);\n        this.updateLineUp(changeDetector, providerChanged);\n        // this.instance!.update();\n    };\n    Adapter.prototype.componentWillUnmount = function () {\n        if (this.instance) {\n            this.instance.destroy();\n            this.instance = null;\n        }\n        this.data = null;\n    };\n    return Adapter;\n}());\nexport { Adapter };\n//# sourceMappingURL=lineup.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { extent, resolveValue } from '../../internal';\nexport function build(props, _data) {\n    var column = props.column;\n    var desc = {\n        column: column,\n        type: props.type,\n        label: column ? column[0].toUpperCase() + column.slice(1) : props.type,\n    };\n    [\n        'label',\n        'description',\n        'frozen',\n        'width',\n        'renderer',\n        'groupRenderer',\n        'summaryRenderer',\n        'visible',\n        'fixed',\n    ].forEach(function (key) {\n        if (props.hasOwnProperty(key)) {\n            desc[key] = props[key];\n        }\n    });\n    if (props.custom) {\n        // merge custom attributes\n        Object.assign(desc, props.custom);\n    }\n    if (props.asMap) {\n        console.assert(['categorical', 'date', 'number', 'string', 'link'].includes(desc.type));\n        desc.type += 'Map';\n    }\n    if (props.asArray != null) {\n        console.assert(['boolean', 'categorical', 'date', 'number', 'string', 'link'].includes(desc.type));\n        desc.type += 's';\n        var a = desc;\n        var labels = props.asArray;\n        if (Array.isArray(labels)) {\n            a.labels = labels;\n            a.dataLength = labels.length;\n        }\n        else if (typeof labels === 'number') {\n            a.dataLength = labels;\n        }\n    }\n    return desc;\n}\nexport function buildCategorical(props, data) {\n    var desc = build(__assign(__assign({}, props), { type: 'categorical' }));\n    if (props.asOrdinal) {\n        desc.type = 'ordinal';\n    }\n    if (props.missingCategory) {\n        desc.missingCategory = props.missingCategory;\n    }\n    if (props.asSet) {\n        if (typeof props.asSet === 'string') {\n            desc.separator = props.asSet;\n        }\n        desc.type = 'set';\n    }\n    if (!props.categories) {\n        // derive categories\n        var categories = new Set(data.map(function (d) { return resolveValue(d, desc.column); }));\n        desc.categories = Array.from(categories).sort();\n    }\n    else {\n        desc.categories = props.categories;\n    }\n    return desc;\n}\nexport function buildDate(props) {\n    var desc = build(__assign(__assign({}, props), { type: 'date' }));\n    ['dateFormat', 'dateParse'].forEach(function (key) {\n        if (props.hasOwnProperty(key)) {\n            desc[key] = props[key];\n        }\n    });\n    return desc;\n}\nexport function buildHierarchy(props) {\n    var desc = build(__assign(__assign({}, props), { type: 'hierarchy' }));\n    ['hierarchy', 'hierarchySeparator'].forEach(function (key) {\n        if (props.hasOwnProperty(key)) {\n            desc[key] = props[key];\n        }\n    });\n    return desc;\n}\nexport function buildNumber(props, data) {\n    var desc = build(__assign(__assign({}, props), { type: 'number' }));\n    var domain = props.domain ? props.domain : extent(data, function (d) { return resolveValue(d, desc.column); });\n    if (props.hasOwnProperty('color')) {\n        desc.colorMapping = props.color;\n    }\n    ['sort', 'colorMapping'].forEach(function (key) {\n        if (props.hasOwnProperty(key)) {\n            desc[key] = props[key];\n        }\n    });\n    if (props.scripted) {\n        desc.map = { domain: domain, code: props.scripted, type: 'script' };\n    }\n    else if (!props.mapping || props.mapping === 'linear') {\n        desc.domain = domain;\n        if (props.range) {\n            desc.range = props.range;\n        }\n    }\n    else {\n        desc.map = {\n            type: props.mapping,\n            domain: domain,\n            range: props.range || [0, 1],\n        };\n    }\n    return desc;\n}\nexport function buildString(props) {\n    var desc = build(__assign(__assign({}, props), { type: 'string' }));\n    ['pattern', 'patternTemplate', 'alignment'].forEach(function (key) {\n        if (props.hasOwnProperty(key)) {\n            desc[key] = props[key];\n        }\n    });\n    if (props.editable) {\n        desc.type = 'annotate';\n    }\n    if (props.pattern) {\n        desc.type = 'link';\n    }\n    if (props.html) {\n        desc.escape = false;\n    }\n    return desc;\n}\nexport function buildBoolean(props) {\n    var desc = build(__assign(__assign({}, props), { type: 'boolean' }));\n    ['trueMarker', 'falseMarker'].forEach(function (key) {\n        if (props.hasOwnProperty(key)) {\n            desc[key] = props[key];\n        }\n    });\n    return desc;\n}\nexport function buildActions(props) {\n    var desc = build(__assign(__assign({}, props), { type: 'actions' }));\n    ['actions', 'groupActions'].forEach(function (key) {\n        if (props.hasOwnProperty(key)) {\n            desc[key] = props[key];\n        }\n    });\n    return desc;\n}\n//# sourceMappingURL=column.js.map","import {\n  builderAdapter,\n  IBuilderAdapterCategoricalColumnDescProps,\n  IBuilderAdapterColumnDescProps,\n  IBuilderAdapterDateColumnDescProps,\n  IBuilderAdapterHierarchyColumnDescProps,\n  IBuilderAdapterNumberColumnDescProps,\n  IBuilderAdapterStringColumnDescProps,\n  IBuilderAdapterActionsColumnDescProps,\n  IBuilderAdapterBooleanColumnDescProps,\n  ICategoricalColumnDesc,\n  IColumnDesc,\n  IDateColumnDesc,\n  IHierarchyColumnDesc,\n  INumberColumnDesc,\n  IActionColumnDesc,\n  ILinkColumnDesc,\n  IBooleanColumnDesc,\n} from 'lineupjs';\nimport * as React from 'react';\n\nexport declare type ILineUpColumnDescProps = IBuilderAdapterColumnDescProps;\nexport declare type ILineUpCategoricalColumnDescProps = IBuilderAdapterCategoricalColumnDescProps;\nexport declare type ILineUpBooleanColumnDescProps = IBuilderAdapterBooleanColumnDescProps;\nexport declare type ILineUpDateColumnDescProps = IBuilderAdapterDateColumnDescProps;\nexport declare type ILineUpNumberColumnDescProps = IBuilderAdapterNumberColumnDescProps;\nexport declare type ILineUpHierarchyColumnDescProps = IBuilderAdapterHierarchyColumnDescProps;\nexport declare type ILineUpStringColumnDescProps = IBuilderAdapterStringColumnDescProps;\nexport declare type ILineUpActionsColumnDescProps = IBuilderAdapterActionsColumnDescProps;\n\nexport class LineUpColumnDesc<P extends ILineUpColumnDescProps = ILineUpColumnDescProps> extends React.PureComponent<\n  Readonly<P>,\n  unknown\n> {\n  static build<P extends ILineUpColumnDescProps>(props: P, _data: any[]): IColumnDesc {\n    return builderAdapter.build(props);\n  }\n}\n\nexport class LineUpCategoricalColumnDesc extends LineUpColumnDesc<ILineUpCategoricalColumnDescProps> {\n  static build(props: ILineUpCategoricalColumnDescProps, data: any[]): ICategoricalColumnDesc {\n    return builderAdapter.buildCategorical(props, data);\n  }\n}\n\nexport class LineUpBooleanColumnDesc extends LineUpColumnDesc<ILineUpBooleanColumnDescProps> {\n  static build(props: ILineUpBooleanColumnDescProps, _data: any[]): IBooleanColumnDesc {\n    return builderAdapter.buildBoolean(props);\n  }\n}\n\nexport class LineUpDateColumnDesc extends LineUpColumnDesc<ILineUpDateColumnDescProps> {\n  static build(props: ILineUpDateColumnDescProps): IDateColumnDesc {\n    return builderAdapter.buildDate(props);\n  }\n}\n\nexport class LineUpHierarchyColumnDesc extends LineUpColumnDesc<ILineUpHierarchyColumnDescProps> {\n  static build(props: any): IHierarchyColumnDesc {\n    return builderAdapter.buildHierarchy(props);\n  }\n}\n\nexport class LineUpNumberColumnDesc extends LineUpColumnDesc<ILineUpNumberColumnDescProps> {\n  static build(props: ILineUpNumberColumnDescProps, data: any[]): INumberColumnDesc {\n    return builderAdapter.buildNumber(props, data);\n  }\n}\n\nexport class LineUpStringColumnDesc extends LineUpColumnDesc<ILineUpStringColumnDescProps> {\n  static build(props: ILineUpStringColumnDescProps): ILinkColumnDesc {\n    return builderAdapter.buildString(props);\n  }\n}\n\nexport class LineUpActionsColumnDesc extends LineUpColumnDesc<ILineUpActionsColumnDescProps> {\n  static build(props: ILineUpActionsColumnDescProps): IActionColumnDesc {\n    return builderAdapter.buildActions(props);\n  }\n}\n","import { builderAdapter } from 'lineupjs';\nimport * as React from 'react';\n\nexport class ChildWrapper<T, P> {\n  constructor(public readonly props: P, public readonly type: any) {}\n\n  create() {\n    return new this.type(this.props, null) as T;\n  }\n}\n\nexport function filterChildrenProps<T, P = any>(children: React.ReactNode, clazz: any): ChildWrapper<T, P>[] {\n  return React.Children.toArray(children)\n    .filter((d: any) => React.isValidElement(d) && builderAdapter.isTypeInstance(d.type, clazz))\n    .map((d: any) => {\n      return new ChildWrapper<T, P>(d.props, d.type);\n    });\n}\n","import {\n  builderAdapter,\n  IBuilderAdapterImposeColumnProps,\n  IBuilderAdapterNestedColumnProps,\n  IBuilderAdapterRankingProps,\n  IBuilderAdapterReduceColumnProps,\n  IBuilderAdapterScriptColumnProps,\n  IBuilderAdapterSupportColumnProps,\n  IBuilderAdapterWeightedSumColumnProps,\n  IImposeColumnBuilder,\n  INestedBuilder,\n  IReduceBuilder,\n  IScriptedBuilder,\n  IWeightedSumBuilder,\n  LocalDataProvider,\n  Ranking,\n} from 'lineupjs';\nimport * as React from 'react';\nimport { filterChildrenProps } from './utils';\n\nexport declare type ILineUpRankingProps = IBuilderAdapterRankingProps;\n\nexport abstract class ALineUpColumnBuilder<T> extends React.PureComponent<React.PropsWithChildren<Readonly<T>>> {}\n\nexport interface IReactChildren {\n  children: React.ReactNode;\n}\n\nexport default class LineUpRanking extends React.PureComponent<React.PropsWithChildren<Readonly<ILineUpRankingProps>>> {\n  static merge(props: ILineUpRankingProps & IReactChildren): ILineUpRankingProps {\n    const inline: (\n      | string\n      | IImposeColumnBuilder\n      | INestedBuilder\n      | IWeightedSumBuilder\n      | IReduceBuilder\n      | IScriptedBuilder\n    )[] = filterChildrenProps<ALineUpColumnBuilder<any>>(props.children, ALineUpColumnBuilder).map((c) =>\n      c.type.build(c.props)\n    );\n\n    const columns = (props.columns || []).concat(inline);\n\n    const r = { ...props, columns };\n    delete r.children;\n    return r;\n  }\n\n  /*\n   * build the column description\n   */\n  static build(props: ILineUpRankingProps, data: LocalDataProvider): Ranking {\n    return builderAdapter.buildRanking(props, data);\n  }\n}\n\nexport class LineUpColumn extends ALineUpColumnBuilder<{ column: '*' | string }> {\n  static readonly build = builderAdapter.buildGeneric;\n}\n\nexport declare type ILineUpImposeColumnProps = IBuilderAdapterImposeColumnProps;\n\nexport class LineUpImposeColumn extends ALineUpColumnBuilder<ILineUpImposeColumnProps> {\n  static readonly build = builderAdapter.buildImposeRanking;\n}\n\nexport declare type ILineUpNestedColumnProps = IBuilderAdapterNestedColumnProps;\n\nexport class LineUpNestedColumn extends ALineUpColumnBuilder<ILineUpNestedColumnProps> {\n  static build(props: ILineUpNestedColumnProps & IReactChildren): INestedBuilder {\n    return builderAdapter.buildNestedRanking(\n      props,\n      filterChildrenProps<LineUpColumn>(props.children, LineUpColumn).map((d) => d.type.build(d.props))\n    );\n  }\n}\n\nexport class LineUpWeightedColumn extends ALineUpColumnBuilder<{ column: string; weight: number }> {\n  static build(props: { column: string }) {\n    return props.column;\n  }\n\n  get weight() {\n    return this.props.weight;\n  }\n}\n\nexport declare type ILineUpWeightedSumColumnProps = IBuilderAdapterWeightedSumColumnProps & IReactChildren;\n\nexport class LineUpWeightedSumColumn extends ALineUpColumnBuilder<ILineUpWeightedSumColumnProps> {\n  static build(props: ILineUpWeightedSumColumnProps & IReactChildren): IWeightedSumBuilder {\n    const children = filterChildrenProps(props.children, LineUpWeightedColumn);\n    return builderAdapter.buildWeightedSumRanking(\n      props,\n      children.map((d) => ({\n        weight: d.props.weight,\n        column: d.type.build(d.props),\n      }))\n    );\n  }\n}\n\nexport declare type ILineUpReduceColumnProps = IBuilderAdapterReduceColumnProps & { children: React.ReactNode };\n\nexport class LineUpReduceColumn extends ALineUpColumnBuilder<ILineUpReduceColumnProps> {\n  static build(props: ILineUpReduceColumnProps & IReactChildren): IReduceBuilder {\n    return builderAdapter.buildReduceRanking(\n      props,\n      filterChildrenProps<LineUpColumn>(props.children, LineUpColumn).map((d) => d.type.build(d.props))\n    );\n  }\n}\n\nexport declare type ILineUpScriptColumnProps = IBuilderAdapterScriptColumnProps & { children: React.ReactNode };\n\nexport class LineUpScriptedColumn extends ALineUpColumnBuilder<ILineUpScriptColumnProps> {\n  static build(props: ILineUpScriptColumnProps): IScriptedBuilder {\n    return builderAdapter.buildScriptRanking(\n      props,\n      filterChildrenProps<LineUpColumn>(props.children, LineUpColumn).map((d) => d.type.build(d.props))\n    );\n  }\n}\n\nexport declare type ILineUpSupportColumnProps = IBuilderAdapterSupportColumnProps;\n\nexport class LineUpSupportColumn extends ALineUpColumnBuilder<ILineUpSupportColumnProps> {\n  static readonly build = builderAdapter.buildSupportRanking;\n}\n\nexport class LineUpAllColumns extends ALineUpColumnBuilder<Record<string, never>> {\n  static readonly build = builderAdapter.buildAllColumnsRanking;\n}\n","import {\n  builderAdapter,\n  IBuilderAdapterProps,\n  ILineUpOptions,\n  ITaggleOptions,\n  LineUp as LineUpImpl,\n  LocalDataProvider,\n  Taggle,\n} from 'lineupjs';\nimport * as React from 'react';\nimport { LineUpColumnDesc } from './column';\nimport LineUpRanking from './LineUpRanking';\nimport { filterChildrenProps } from './utils';\n\nexport declare type ILineUpProps = IBuilderAdapterProps & { style?: React.CSSProperties; className?: string };\n\nexport class LineUp extends React.PureComponent<React.PropsWithChildren<Readonly<ILineUpProps>>> {\n  private node: HTMLElement | null = null;\n\n  private readonly adapter = new builderAdapter.Adapter({\n    props: () => this.props,\n    createInstance: (data: LocalDataProvider, options: Partial<ILineUpOptions>) =>\n      this.createInstance(this.node!, data, options),\n    columnDescs: (data: any[]) =>\n      filterChildrenProps<LineUpColumnDesc, any>(this.props.children, LineUpColumnDesc).map((d) =>\n        d.type.build(d.props, data)\n      ),\n    rankingBuilders: () =>\n      filterChildrenProps<LineUpRanking>(this.props.children, LineUpRanking).map((d) => LineUpRanking.merge(d.props)),\n  });\n\n  protected createInstance(\n    node: HTMLElement,\n    data: LocalDataProvider,\n    options: Partial<ITaggleOptions>\n  ): LineUpImpl | Taggle {\n    return new LineUpImpl(node, data, options);\n  }\n\n  componentDidMount() {\n    this.adapter.componentDidMount();\n  }\n\n  componentDidUpdate(prevProps: Readonly<ILineUpProps>) {\n    const props = this.props;\n    this.adapter.componentDidUpdate((key: keyof ILineUpProps) => !builderAdapter.equal(props[key], prevProps[key]));\n  }\n\n  componentWillUnmount() {\n    this.adapter.componentWillUnmount();\n  }\n\n  render() {\n    const className = this.props.className ? `lu-wrapper ${this.props.className}` : 'lu-wrapper';\n    return (\n      <div className={className} style={this.props.style || {}}>\n        <div ref={(d) => (this.node = d as HTMLElement)} />\n      </div>\n    );\n  }\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { debounce, AEventDispatcher, suffix } from '../../internal';\nimport { isGroup } from '../../model';\nimport { DataProvider } from '../../provider';\nimport EngineRenderer from '../EngineRenderer';\nvar TaggleRenderer = /** @class */ (function (_super) {\n    __extends(TaggleRenderer, _super);\n    function TaggleRenderer(data, parent, options) {\n        var _this = _super.call(this) || this;\n        _this.data = data;\n        _this.isDynamicLeafHeight = false;\n        _this.rule = null;\n        _this.levelOfDetail = null;\n        _this.resizeListener = function () { return debounce(function () { return _this.update(); }, 100); };\n        _this.options = {\n            violationChanged: function () { return undefined; },\n            rowPadding: 2,\n        };\n        Object.assign(_this.options, options);\n        _this.renderer = new EngineRenderer(data, parent, Object.assign({}, options, {\n            dynamicHeight: function (data, ranking) {\n                var r = _this.dynamicHeight(data, ranking);\n                if (r) {\n                    return r;\n                }\n                return options.dynamicHeight ? options.dynamicHeight(data, ranking) : null;\n            },\n            levelOfDetail: function (rowIndex) { return (_this.levelOfDetail ? _this.levelOfDetail(rowIndex) : 'high'); },\n        }));\n        _this.data.on(\"\".concat(DataProvider.EVENT_SELECTION_CHANGED, \".rule\"), function () {\n            if (_this.isDynamicLeafHeight) {\n                _this.update();\n            }\n        });\n        _this.forward.apply(_this, __spreadArray([_this.renderer], suffix('.main', EngineRenderer.EVENT_HIGHLIGHT_CHANGED, EngineRenderer.EVENT_DIALOG_OPENED, EngineRenderer.EVENT_DIALOG_CLOSED), false));\n        window.addEventListener('resize', _this.resizeListener, {\n            passive: true,\n        });\n        return _this;\n    }\n    Object.defineProperty(TaggleRenderer.prototype, \"style\", {\n        get: function () {\n            return this.renderer.style;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TaggleRenderer.prototype, \"ctx\", {\n        get: function () {\n            return this.renderer.ctx;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    TaggleRenderer.prototype.pushUpdateAble = function (updateAble) {\n        this.renderer.pushUpdateAble(updateAble);\n    };\n    TaggleRenderer.prototype.dynamicHeight = function (data, ranking) {\n        var _this = this;\n        if (!this.rule) {\n            this.levelOfDetail = null;\n            this.options.violationChanged(null, '');\n            return null;\n        }\n        var availableHeight = this.renderer ? this.renderer.node.querySelector('main').clientHeight : 100;\n        var topNGetter = function (group) { return _this.data.getTopNAggregated(ranking, group); };\n        var instance = this.rule.apply(data, availableHeight, new Set(this.data.getSelection()), topNGetter);\n        this.isDynamicLeafHeight = typeof instance.item === 'function';\n        this.options.violationChanged(this.rule, instance.violation || '');\n        var height = function (item) {\n            if (isGroup(item)) {\n                return typeof instance.group === 'number' ? instance.group : instance.group(item);\n            }\n            return typeof instance.item === 'number' ? instance.item : instance.item(item);\n        };\n        this.levelOfDetail = function (rowIndex) {\n            var item = data[rowIndex];\n            return _this.rule ? _this.rule.levelOfDetail(item, height(item)) : 'high';\n        };\n        // padding is always 0 since included in height\n        // const padding = (item: IGroupData | IGroupItem | null) => {\n        //   if (!item) {\n        //     item = data[0];\n        //   }\n        //   const lod = this.rule ? this.rule.levelOfDetail(item, height(item)) : 'high';\n        //   return lod === 'high' ? 0 : 0; // always 0 since\n        // };\n        return {\n            defaultHeight: typeof instance.item === 'number' ? instance.item : NaN,\n            height: height,\n            padding: 0,\n        };\n    };\n    TaggleRenderer.prototype.createEventList = function () {\n        return _super.prototype.createEventList.call(this)\n            .concat([\n            TaggleRenderer.EVENT_HIGHLIGHT_CHANGED,\n            TaggleRenderer.EVENT_DIALOG_OPENED,\n            TaggleRenderer.EVENT_DIALOG_CLOSED,\n        ]);\n    };\n    TaggleRenderer.prototype.on = function (type, listener) {\n        return _super.prototype.on.call(this, type, listener);\n    };\n    TaggleRenderer.prototype.zoomOut = function () {\n        this.renderer.zoomOut();\n    };\n    TaggleRenderer.prototype.zoomIn = function () {\n        this.renderer.zoomIn();\n    };\n    TaggleRenderer.prototype.switchRule = function (rule) {\n        if (this.rule === rule) {\n            return;\n        }\n        this.rule = rule;\n        this.update();\n    };\n    TaggleRenderer.prototype.getRule = function () {\n        return this.rule;\n    };\n    TaggleRenderer.prototype.destroy = function () {\n        this.renderer.destroy();\n        window.removeEventListener('resize', this.resizeListener);\n    };\n    TaggleRenderer.prototype.update = function () {\n        this.renderer.update();\n    };\n    TaggleRenderer.prototype.setDataProvider = function (data) {\n        var _this = this;\n        if (this.data) {\n            this.data.on(\"\".concat(DataProvider.EVENT_SELECTION_CHANGED, \".rule\"), null);\n        }\n        this.data = data;\n        this.data.on(\"\".concat(DataProvider.EVENT_SELECTION_CHANGED, \".rule\"), function () {\n            if (_this.isDynamicLeafHeight) {\n                _this.update();\n            }\n        });\n        this.renderer.setDataProvider(data);\n        this.update();\n    };\n    TaggleRenderer.prototype.setHighlight = function (dataIndex, scrollIntoView) {\n        return this.renderer.setHighlight(dataIndex, scrollIntoView);\n    };\n    TaggleRenderer.prototype.getHighlight = function () {\n        return this.renderer.getHighlight();\n    };\n    TaggleRenderer.prototype.enableHighlightListening = function (enable) {\n        this.renderer.enableHighlightListening(enable);\n    };\n    TaggleRenderer.EVENT_HIGHLIGHT_CHANGED = EngineRenderer.EVENT_HIGHLIGHT_CHANGED;\n    TaggleRenderer.EVENT_DIALOG_OPENED = EngineRenderer.EVENT_DIALOG_OPENED;\n    TaggleRenderer.EVENT_DIALOG_CLOSED = EngineRenderer.EVENT_DIALOG_CLOSED;\n    return TaggleRenderer;\n}(AEventDispatcher));\nexport default TaggleRenderer;\n//# sourceMappingURL=TaggleRenderer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { defaultOptions } from '../../config';\nimport { merge, suffix } from '../../internal';\nimport { cssClass, engineCssClass } from '../../styles';\nimport { ALineUp } from '../ALineUp';\nimport SidePanel from '../panel/SidePanel';\nimport { spaceFillingRule } from './rules';\nimport TaggleRenderer from './TaggleRenderer';\nvar Taggle = /** @class */ (function (_super) {\n    __extends(Taggle, _super);\n    function Taggle(node, data, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, node, data, options && options.ignoreUnsupportedBrowser === true) || this;\n        _this.options = defaultOptions();\n        merge(_this.options, options);\n        merge(_this.options, {\n            violationChanged: function (_rule, violation) { return _this.setViolation(violation); },\n        });\n        if (_this.options.copyableRows) {\n            _this.addCopyListener();\n        }\n        _this.spaceFillingRule = spaceFillingRule(_this.options);\n        if (!_this.isBrowserSupported) {\n            _this.spaceFilling = null;\n            _this.renderer = null;\n            _this.panel = null;\n            return _this;\n        }\n        _this.node.classList.add(cssClass(), cssClass('taggle'));\n        _this.renderer = new TaggleRenderer(data, _this.node, _this.options);\n        if (_this.options.sidePanel) {\n            _this.panel = new SidePanel(_this.renderer.ctx, _this.node.ownerDocument, {\n                collapseable: _this.options.sidePanelCollapsed ? 'collapsed' : true,\n                hierarchy: _this.options.hierarchyIndicator && _this.options.flags.advancedRankingFeatures,\n            });\n            _this.renderer.pushUpdateAble(function (ctx) { return _this.panel.update(ctx); });\n            _this.node.insertBefore(_this.panel.node, _this.node.firstChild);\n            _this.panel.node.insertAdjacentHTML('afterbegin', \"<div class=\\\"\".concat(cssClass('rule-button-chooser'), \" \").concat(cssClass('feature-advanced'), \" \").concat(cssClass('feature-ui'), \"\\\"><label>\\n            <input type=\\\"checkbox\\\">\\n            <span>Overview</span>\\n            <div class=\\\"\").concat(cssClass('rule-violation'), \"\\\"></div>\\n          </label></div>\"));\n            _this.spaceFilling = _this.panel.node.querySelector(\".\".concat(cssClass('rule-button-chooser')));\n            var input = _this.spaceFilling.querySelector('input');\n            input.onchange = function () {\n                setTimeout(function () {\n                    _this.setOverviewMode(!_this.isOverviewMode());\n                });\n            };\n        }\n        else {\n            _this.panel = null;\n            _this.spaceFilling = null;\n        }\n        if (_this.options.overviewMode) {\n            _this.setOverviewMode(true);\n        }\n        _this.forward.apply(_this, __spreadArray([_this.renderer], suffix('.main', TaggleRenderer.EVENT_HIGHLIGHT_CHANGED, TaggleRenderer.EVENT_DIALOG_OPENED, TaggleRenderer.EVENT_DIALOG_CLOSED), false));\n        return _this;\n    }\n    Taggle.prototype.isOverviewMode = function () {\n        var _a;\n        return ((_a = this.renderer) === null || _a === void 0 ? void 0 : _a.getRule()) === this.spaceFillingRule;\n    };\n    Taggle.prototype.setOverviewMode = function (overviewMode) {\n        if (!this.renderer) {\n            return;\n        }\n        this.updateLodRules(overviewMode);\n        this.renderer.switchRule(overviewMode ? this.spaceFillingRule : null);\n        if (this.spaceFilling) {\n            this.spaceFilling.classList.toggle(cssClass('chosen'), overviewMode);\n            this.spaceFilling.querySelector('input').checked = overviewMode;\n        }\n    };\n    Taggle.prototype.updateLodRules = function (overviewMode) {\n        if (!this.renderer) {\n            return;\n        }\n        updateLodRules(this.renderer.style, overviewMode, this.options);\n    };\n    Taggle.prototype.setViolation = function (violation) {\n        violation = violation || '';\n        if (!this.spaceFilling) {\n            return;\n        }\n        this.spaceFilling.classList.toggle(cssClass('violated'), Boolean(violation));\n        var elem = this.spaceFilling.querySelector(\".\".concat(cssClass('rule-violation')));\n        if (!violation) {\n            elem.textContent = '';\n        }\n        else {\n            elem.innerHTML = violation.replace(/\\n/g, '<br>');\n        }\n    };\n    Taggle.prototype.destroy = function () {\n        this.node.classList.remove(cssClass(), cssClass('taggle'));\n        if (this.renderer) {\n            this.renderer.destroy();\n        }\n        if (this.panel) {\n            this.panel.destroy();\n        }\n        _super.prototype.destroy.call(this);\n    };\n    Taggle.prototype.update = function () {\n        if (this.renderer) {\n            this.renderer.update();\n        }\n    };\n    Taggle.prototype.setHighlight = function (dataIndex, scrollIntoView) {\n        if (scrollIntoView === void 0) { scrollIntoView = true; }\n        return this.renderer != null && this.renderer.setHighlight(dataIndex, scrollIntoView);\n    };\n    Taggle.prototype.getHighlight = function () {\n        return this.renderer ? this.renderer.getHighlight() : -1;\n    };\n    Taggle.prototype.enableHighlightListening = function (enable) {\n        if (this.renderer) {\n            this.renderer.enableHighlightListening(enable);\n        }\n    };\n    Taggle.prototype.setDataProvider = function (data, dump) {\n        _super.prototype.setDataProvider.call(this, data, dump);\n        if (!this.renderer) {\n            return;\n        }\n        this.renderer.setDataProvider(data);\n        this.update();\n        this.panel.update(this.renderer.ctx);\n    };\n    Taggle.EVENT_SELECTION_CHANGED = ALineUp.EVENT_SELECTION_CHANGED;\n    Taggle.EVENT_DIALOG_OPENED = ALineUp.EVENT_DIALOG_OPENED;\n    Taggle.EVENT_DIALOG_CLOSED = ALineUp.EVENT_DIALOG_CLOSED;\n    Taggle.EVENT_HIGHLIGHT_CHANGED = ALineUp.EVENT_HIGHLIGHT_CHANGED;\n    return Taggle;\n}(ALineUp));\nexport default Taggle;\nexport function updateLodRules(style, overviewMode, options) {\n    if (!overviewMode) {\n        style.deleteRule('taggle_lod_rule');\n        style.deleteRule('lineup_rowPadding1');\n        style.deleteRule('lineup_rowPadding2');\n        return;\n    }\n    style.updateRule('taggle_lod_rule', \"\\n  .\".concat(engineCssClass('tr'), \".\").concat(cssClass('low'), \"[data-agg=detail]:hover\"), {\n        /* show regular height for hovered rows in low + medium LOD */\n        height: \"\".concat(options.rowHeight, \"px !important\"),\n    });\n    style.updateRule('lineup_rowPadding1', \"\\n  .\".concat(engineCssClass('tr'), \".\").concat(cssClass('low')), {\n        marginTop: '0',\n    });\n    // no margin for hovered low level row otherwise everything will be shifted down and the hover is gone again\n    // .${engineCssClass('tr')}.${cssClass('low')}:hover,\n    // padding in general and for hovered low detail rows + their afterwards\n    style.updateRule('lineup_rowPadding2', \"\\n  .\".concat(engineCssClass('tr'), \".\").concat(cssClass('low'), \".\").concat(engineCssClass('highlighted'), \",\\n  .\").concat(engineCssClass('tr'), \".\").concat(cssClass('selected'), \",\\n  .\").concat(engineCssClass('tr'), \".\").concat(cssClass('low'), \":hover + .\").concat(engineCssClass('tr'), \".\").concat(cssClass('low'), \",\\n  .\").concat(engineCssClass('tr'), \".\").concat(cssClass('low'), \".\").concat(engineCssClass('highlighted'), \" + .\").concat(engineCssClass('tr'), \".\").concat(cssClass('low'), \",\\n  .\").concat(engineCssClass('tr'), \".\").concat(cssClass('selected'), \" + .\").concat(engineCssClass('tr'), \".\").concat(cssClass('low')), {\n        marginTop: \"\".concat(options.rowPadding, \"px !important\"),\n    });\n}\n//# sourceMappingURL=Taggle.js.map","import { isGroup } from '../../model';\nimport { groupEndLevel } from '../../provider/internal';\nexport function spaceFillingRule(config) {\n    function levelOfDetail(item, height) {\n        var group = isGroup(item);\n        var maxHeight = group ? config.groupHeight : config.rowHeight;\n        if (height >= maxHeight * 0.9) {\n            return 'high';\n        }\n        return 'low';\n    }\n    function itemHeight(data, availableHeight, selection, topNGetter) {\n        var visibleHeight = availableHeight - config.rowHeight - 5; // some padding for hover\n        var items = data.filter(function (d) { return !isGroup(d); });\n        var groups = data.length - items.length;\n        var selected = items.reduce(function (a, d) { return a + (selection.has(d.dataIndex) ? 1 : 0); }, 0);\n        var unselected = items.length - selected;\n        var groupSeparators = items.reduce(function (a, d) { return a + groupEndLevel(d, topNGetter); }, 0);\n        if (unselected <= 0) {\n            // doesn't matter since all are selected anyhow\n            return { height: config.rowHeight, violation: '' };\n        }\n        var available = visibleHeight - groups * config.groupHeight - groupSeparators * config.groupPadding - selected * config.rowHeight;\n        var height = Math.floor(available / unselected); // round to avoid sub pixel issues\n        if (height < 1) {\n            return {\n                height: 1,\n                violation: \"Not possible to fit all rows on the screen.\",\n            };\n        }\n        // clamp to max height\n        if (height > config.rowHeight) {\n            return {\n                height: config.rowHeight,\n                violation: '',\n            };\n        }\n        return { height: height, violation: '' };\n    }\n    return {\n        apply: function (data, availableHeight, selection, topNGetter) {\n            var _a = itemHeight(data, availableHeight, selection, topNGetter), violation = _a.violation, height = _a.height;\n            var item = function (item) {\n                if (selection.has(item.dataIndex)) {\n                    return config.rowHeight;\n                }\n                return height;\n            };\n            return { item: item, group: config.groupHeight, violation: violation };\n        },\n        levelOfDetail: levelOfDetail,\n    };\n}\n//# sourceMappingURL=rules.js.map","import { LineUp } from './LineUp';\nimport { LocalDataProvider, ITaggleOptions, Taggle as TaggleImpl } from 'lineupjs';\n\nexport default class Taggle extends LineUp {\n  protected createInstance(node: HTMLElement, data: LocalDataProvider, options: Partial<ITaggleOptions>) {\n    return new TaggleImpl(node, data, options);\n  }\n}\n","import 'lineupjs/build/LineUpJS.css';\nimport './style.scss';\n\nexport * from './';\nexport { default } from './';\n\ndeclare const __VERSION__: string;\ndeclare const __BUILD_ID__: string;\ndeclare const __LICENSE__: string;\n/**\n * LineUp version\n * @type {string}\n */\nexport const version = __VERSION__;\n/**\n * LineUp unique build id\n * @type {string}\n */\nexport const buildId = __BUILD_ID__;\n/**\n * LineUp license type\n * @type {string}\n */\nexport const license = __LICENSE__;\n"],"names":["root","factory","exports","module","require","define","amd","globalThis","__WEBPACK_EXTERNAL_MODULE__672__","equal","a","b","constructor","length","i","keys","Array","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key","uid","HASH_UNDEFINED","reIsDeepProp","reIsPlainProp","reLeadingDot","rePropName","reEscapeChar","reIsHostCtor","freeGlobal","global","freeSelf","self","Function","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","exec","IE_PROTO","funcToString","objectToString","reIsNative","replace","Symbol","splice","Map","getNative","nativeCreate","symbolProto","undefined","symbolToString","Hash","entries","index","this","clear","entry","set","ListCache","MapCache","assocIndexOf","array","value","other","getMapData","map","type","data","__data__","object","getValue","isObject","pattern","tag","isFunction","result","e","isHostObject","test","func","toSource","baseIsNative","has","get","pop","push","stringToPath","memoize","string","isSymbol","baseToString","match","number","quote","toKey","resolver","TypeError","memoized","args","arguments","apply","cache","Cache","isObjectLike","path","defaultValue","isKey","baseGet","Reflect","exporter","makeExporter","target","previous","defineProperty","configurable","writable","hasOwn","supportsSymbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","iterator","supportsCreate","create","supportsProto","__proto__","downLevel","HashMap","MakeDictionary","functionPrototype","getPrototypeOf","usePolyfill","process","env","_Map","cacheSentinel","arraySentinel","MapIterator","values","selector","_index","_keys","_values","_selector","next","done","throw","error","return","_cacheKey","_cacheIndex","enumerable","_find","delete","size","getKey","getEntry","insert","indexOf","_","CreateMapPolyfill","_Set","Set","_map","add","Metadata","WeakMap","rootKey","CreateUniqueKey","_key","table","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","buffer","Math","random","Uint8Array","crypto","getRandomValues","msCrypto","offset","byte","toLowerCase","CreateWeakMapPolyfill","GetOrCreateMetadataMap","O","P","Create","targetMetadata","IsUndefined","metadataMap","OrdinaryHasMetadata","MetadataKey","OrdinaryHasOwnMetadata","parent","OrdinaryGetPrototypeOf","IsNull","OrdinaryGetMetadata","OrdinaryGetOwnMetadata","OrdinaryDefineOwnMetadata","MetadataValue","OrdinaryMetadataKeys","ownKeys","OrdinaryOwnMetadataKeys","parentKeys","_i","ownKeys_1","_a","parentKeys_1","obj","method","GetMethod","IsCallable","IsObject","GetIterator","k","IteratorStep","nextValue","IteratorClose","Type","x","ToPrimitive","input","PreferredType","hint","exoticToPrim","toString_1","toString_2","OrdinaryToPrimitive","ToPropertyKey","argument","ToString","IsArray","IsConstructor","V","f","proto","prototypeProto","__","decorators","propertyKey","attributes","decorated","decorator","DecorateConstructor","descriptor","DecorateProperty","metadataKey","metadataValue","IsPropertyKey","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","definition","o","prop","r","toStringTag","equalArrays","every","ai","fixCSS","id","node","lastChild","removeChild","concat","arrs","arrs_1","a_1","getSortLabel","String","extendStatics","__extends","setPrototypeOf","p","isSeqEmpty","seq","isIndicesAble","it","Uint16Array","Uint32Array","Float32Array","Int8Array","Int16Array","Int32Array","Float64Array","LazyFilter","filters","_length","l","forEach","filter","callback","LazyMap1","outer","i_1","v_1","valid","v","_b","_c","_this","some","i_2","v_2","i_3","v_3","reduce","initial","acc","j","i_4","v_4","ALazyMap","mapV","acc_1","_super","map12","LazyMap2","map23","LazyMap3","map34","LazySeq","iterable","_arr","from","arr","acc_2","lazySeq","ConcatSequence","seqs","shift","s","MAX_WORKER_THREADS","max","navigator","hardwareConcurrency","WorkerTaskScheduler","blob","workers","cleanUpWorkerTimer","workerTaskCounter","cleanUpWorker","toFree","findIndex","tasks","worker","terminate","finishedTask","w","Worker","refs","checkOutWorker","clearTimeout","emptyWorker","find","setTimeout","pushStats","refData","refIndices","indices","Promise","resolve","receiver","msg","removeEventListener","stats","addEventListener","assign","postMessage","transferAbles","toResult","setRef","ref","broadCast","deleteRef","startsWith","deleteRefs","getNumberOfBins","ceil","log","LN2","extent","Number","NEGATIVE_INFINITY","min","POSITIVE_INFINITY","values_3","empty","fill","quantile","NaN","floor","median","slice","sort","pushAll","vs","GAUSSIAN_CONST","sqrt","PI","boxplotBuilder","fixedLength","kdePoints","sum","missing","kdePointCount","isNaN","pushAndSave","invalid","mean","count","whiskerHigh","whiskerLow","outlier","q1","q3","buildImpl","iqr","left","right","variance","len","computeVariance","reversedOutliers","reverse","points","bandwidth","toSampleVariance","pow","nrd","computePoint","u","exp","step","computeKDE","build","buildArr","numberStatsBuilder","domain","numberOfBins","hist","x0","binWidth","x1","bin1","binN","low","high","center","toBin","maxBin","computeGranularity","histGranularity","getFullYear","minYear","maxYear","Date","getTime","x0_1","getMonth","getDate","setDate","setMonth","pushDateHist","dateStatsBuilder","template","byDay","templateHist","h","categoricalStatsBuilder","categories","m","cat","name","stringStatsBuilder","topN","topN_1","t","byFrequency","localeCompare","unique","round","precision","scale","similar","delta","abs","isPromiseLike","then","createIndexArray","dataSize","toIndexArray","maxDataIndex","joinIndexArrays","groups","total","createLike","groups_1","g","asc","desc","sortComplex","comparators","c_1","cLookup_1","lookup","c1_1","c1Lookup_1","c2_1","c2Lookup_1","l_1","fs_1","l_2","dateValueCache2Value","categoricalValueCache2Value","sortWorkerMain","workerSelf","resolveRefs","msgHandlers","sortOrders","order","dateStats","ii","categoricalStats","cats","numberStats","boxplotStats","stringStats","evt","createWorkerBlob","sources","lastIndexOf","join","Blob","URL","createObjectURL","noop","dispatch","Error","Dispatch","parseTypenames","typenames","types","trim","split","c","on","typename","T","copy","that","__spreadArray","to","pack","ar","suffix","prefix","AEventDispatcher","events","createEventList","listenerEvents","listeners","forwarder","fireImpl","primaryType","origin","listener","listenersChanged","Boolean","_type","_active","fire","context","forward","unforward","supportType","for","category","SupportType","metadata","SortByDefault","isSortingAscByDefault","col","clazz","hasMetadata","label","featureLevel","categorical","date","composite","support","Category","getSortType","categoryOf","toolbar","dialogAddons","isSupportType","getMetadata","ECompareValueType","defaultGroup","color","othersGroup","isGroup","item","group","isMultiLevelColumn","getCollapsed","Column","width","renderer","groupRenderer","summaryRenderer","visible","summary","description","fixed","frozen","assignNewId","idGenerator","fqid","fqpath","EVENT_WIDTH_CHANGED","EVENT_LABEL_CHANGED","EVENT_METADATA_CHANGED","EVENT_VISIBILITY_CHANGED","EVENT_SUMMARY_RENDERER_TYPE_CHANGED","EVENT_RENDERER_TYPE_CHANGED","EVENT_GROUP_RENDERER_TYPE_CHANGED","EVENT_DIRTY","EVENT_DIRTY_HEADER","EVENT_DIRTY_VALUES","EVENT_DIRTY_CACHES","getWidth","hide","setVisible","show","isVisible","getVisible","flatten","_levelsToGo","_padding","setWidth","setWidthImpl","setMetaData","bak","getMetaData","sortByMe","ascending","priority","findMyRanker","sortBy","groupByMe","toggleGrouping","isGroupedBy","getGroupCriteria","toggleMySorting","toggleSorting","isSortedByMeImpl","ranker","criterias","isSortedByMe","getSortCriteria","groupSortByMe","groupSortBy","toggleMyGroupSorting","toggleGroupSorting","isGroupSortedByMe","getGroupSortCriteria","removeMe","remove","attach","detach","insertAfterMe","insertAfter","insertBeforeMe","insertBefore","nextSibling","at","previousSibling","dump","toDescRef","getRenderer","getGroupRenderer","getSummaryRenderer","restore","_factory","rendererType","getLabel","row","_row","getExportValue","format","getColor","toCompareValue","_valueCache","toCompareValueType","UINT8","toCompareGroupValue","_rows","toCompareGroupValueType","STRING","isFiltered","clearFilter","setRenderer","setGroupRenderer","setSummaryRenderer","markDirty","FLAT_ALL_COLUMNS","isMapAbleColumn","getMapping","isNumberColumn","getNumber","ESortMethod","EAdvancedSortMethod","isBoxPlotColumn","getBoxPlotData","isNumbersColumn","getNumbers","ValueColumn","accessor","loaded","lazyLoaded","onDataUpdate","EVENT_DATA_LOADED","isLoaded","getRaw","setLoaded","RENDERER_LOADING","CompositeColumn","_children","CompositeColumn_1","EVENT_FILTER_CHANGED","EVENT_ADD_COLUMN","EVENT_MOVE_COLUMN","EVENT_REMOVE_COLUMN","levelsToGo","padding","children","child","canJustAddNumbers","insertImpl","move","old","moveImpl","oldIndex","moveAfter","moveBefore","removeImpl","getOwnPropertyDescriptor","decorate","__decorate","specifier","colors","OrderedSet","list","addAll","console","assert","deleteAll","act","callbackfn","thisArg","__assign","integrateDefaults","defaults","typed","patternFunction","bind","joinGroups","parents","gparents","unshift","subGroups","duplicateGroup","clone","isGroupParent","toGroupID","groupRoots","roots","groups_2","MAX_COLORS","colorPool","mapIndices","everyIndices","forEachIndices","chooseUIntByDataLength","dataLength","UINT32","UINT16","styles","getStyle","SELECTED_COLOR","COLUMN_PADDING","parseInt","FILTERED_OPACITY","parseFloat","DASH","height","UPSET","inactive","DOT","opacity","opacitySingle","TICK","BOX_PLOT","box","stroke","AGGREGATE","strokeWidth","levelOffset","levelWidth","SLOPEGRAPH_WIDTH","CSS_PREFIX","RESIZE_SPACE","RESIZE_ANIMATION_DURATION","AGGREGATION_LEVEL_WIDTH","engineCssClass","aria","text","EAggregationState","createAggregateDesc","AggregateGroupColumn","AggregateGroupColumn_1","EVENT_AGGREGATE","isAggregated","ranking","setAggregated","EXPAND","COLLAPSE","DEFAULT_CATEGORICAL_COLOR_FUNCTION","toJSON","eq","ReplacementColorMappingFunction","restoreCategoricalColorMapping","isMissingValue","isUnknown","missingGroup","toCategory","nextColor","compareCategory","aNull","bNull","toCategories","isEmptyFilter","filterMissing","isEqualCategoricalFilter","al","arrayEquals","isCategoryIncluded","filterObj","includes","CategoricalColumn","currentFilter","categoryOrder","colorMapping","CategoricalColumn_1","rows","sValue","categoryNames","sortCategories","_d","_e","_f","EVENT_COLOR_MAPPING_CHANGED","getCategory","getCategories","getValues","getLabels","getMap","getMapLabel","getSet","iterCategory","categoricalColorMappingFunction","getColorMapping","setColorMapping","mapping","valueCache","getFilter","setFilter","was","FLOAT_ASC","_group","mostFrequent","topCat","topCount","findMostFrequent","toGroupCompareCategoryValue","FLOAT","current","SetColumn","separator","SetColumn_1","getSortedSet","normalize","sv","getColors","mode","BINARY","cardinality","EDirtyReason","Ranking","sortCriteria","groupColumns","groupSortCriteria","columns","dirtyOrder","reason","EVENT_DIRTY_ORDER","dirtyOrderSortDirty","SORT_CRITERIA_DIRTY","dirtyOrderGroupDirty","GROUP_CRITERIA_DIRTY","dirtyOrderGroupSortDirty","GROUP_SORT_CRITERIA_DIRTY","dirtyOrderFiltering","FILTER_CHANGED","index2pos","EVENT_GROUPS_CHANGED","EVENT_GROUP_CRITERIA_CHANGED","EVENT_GROUP_SORT_CRITERIA_CHANGED","EVENT_COLUMN_VISIBILITY_CHANGED","EVENT_SORT_CRITERIA_CHANGED","EVENT_ORDER_CHANGED","setLabel","setGroups","dirtyReason","oldGroups","unifyGroups","offsets","subarray","subs","gi","roots_1","getRank","dataIndex","getOrder","getOrderLength","getGroups","getFlatGroups","traverse","sortColumn","help","setGroupCriteria","restoreSortCriteria","dumped","setSortCriteria","setGroupSortCriteria","getPrimarySortCriteria","toggleSortingLogic","newSort","defaultAsc","newGroupings","hierarchyLogic","groupBy","equalCriteria","COLUMN_SORT_DIRTY","triggerResort","column","cols","groupColumn","COLUMN_GROUP_DIRTY","autoAdaptAggregationColumn","targetWidth","COLUMN_GROUP_SORT_DIRTY","triggerGroupResort","sortCriterias","bakMulti","FORWARD_COLUMN_EVENTS","oldValue","newValue","reference","findByPath","isSortCriteria","sortCriteriaChanged","isGroupSortCriteria","groupSortCriteriaChanged","newGrouping","isGroupColumn","removed","idOrFilter","r_1","flatColumns","clearFilters","bi","isComplexAccessor","resolveValue","rowComplexGetter","rowGetter","rowGuessGetter","t0","t1","newInterval","floori","offseti","field","interval","d0","d1","range","start","stop","setTime","end","isFinite","durationSecond","durationMinute","durationHour","durationDay","durationWeek","utcWeekday","setUTCDate","getUTCDate","getUTCDay","setUTCHours","utcSunday","utcMonday","utcTuesday","utcWednesday","utcThursday","utcFriday","utcSaturday","utcDay","weekday","getDay","setHours","getTimezoneOffset","sunday","monday","tuesday","wednesday","thursday","friday","saturday","day","year","setFullYear","utcYear","setUTCMonth","setUTCFullYear","getUTCFullYear","localDate","y","H","M","S","L","utcDate","UTC","newDate","locale","timeFormat","timeParse","pads","numberRe","percentRe","requoteRe","pad","sign","requote","formatRe","names","formatLookup","parseWeekdayNumberSunday","parseWeekdayNumberMonday","parseWeekNumberSunday","U","parseWeekNumberISO","parseWeekNumberMonday","W","parseFullYear","parseYear","parseZone","Z","parseQuarter","q","parseMonthNumber","parseDayOfMonth","parseDayOfYear","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseMicroseconds","parseLiteralPercent","parseUnixTimestamp","Q","parseUnixTimestampSeconds","formatDayOfMonth","formatHour24","getHours","formatHour12","formatDayOfYear","formatMilliseconds","getMilliseconds","formatMicroseconds","formatMonthNumber","formatMinutes","getMinutes","formatSeconds","getSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","dISO","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","formatYear","formatYearISO","formatFullYear","formatFullYearISO","formatZone","z","formatUTCDayOfMonth","formatUTCHour24","getUTCHours","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","getUTCMilliseconds","formatUTCMicroseconds","formatUTCMonthNumber","getUTCMonth","formatUTCMinutes","getUTCMinutes","formatUTCSeconds","getUTCSeconds","formatUTCWeekdayNumberMonday","dow","formatUTCWeekNumberSunday","UTCdISO","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCYearISO","formatUTCFullYear","formatUTCFullYearISO","formatUTCZone","formatLiteralPercent","formatUnixTimestamp","formatUnixTimestampSeconds","cleanCategories","isEmpty","deriveBaseType","all","options","warn","formats_1","datePattern","dateParse","treatAsCategorical","categoricalThreshold","alt","href","deriveColumnDescriptions","config","first","existing","exclude","selectColumns","foundRow","base","primitive","cats_1","value_1","vi","mapAll","vii","values_1","sameLength","hasDifferentSizes","values_2","vi_1","p_1","_loop_1","deriveType","toUpperCase","toLabel","locale_dateTime","dateTime","locale_date","locale_time","time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","utcFormats","parses","parseSpecifier","newFormat","charCodeAt","charAt","newParse","week","parse","X","utcFormat","utcParse","formatLocale","DEFAULT_EXPORT_OPTIONS","newline","header","quoteChar","verboseColumnHeaders","createCSVExporter","escape","addHeader","addRow","exportRanking","opts","exportTable","columnsOrRanking","map2Object","rangeSelection","provider","rankingId","relIndex","ctrlKey","getRankings","selection","getSelection","nearest","distance","setSelection","promiseLike","debounce","timeToDelay","choose","tm","ctx","createRankDesc","RankColumn","createSelectionDesc","SelectionColumn","SelectionColumn_1","EVENT_SELECT","setValue","setImpl","setValues","setterAll","setter","toggleValue","isSelected","SELECTED_GROUP","NOT_SELECTED_GROUP","aL","bL","ActionColumn","actions","groupActions","compare","EAlignment","EStringGroupCriteriaType","StringColumn","currentGroupCriteria","alignment","StringColumn_1","EVENT_GROUPING_CHANGED","type_1","groupCriteria","regex","FILTER_MISSING","type_2","ff","groupValue","AnnotateColumn","annotations","EVENT_VALUE_CHANGED","BooleanColumn","trueMarker","BooleanColumn_1","GROUP_TRUE","falseMarker","GROUP_FALSE","getCategoryOfBoolean","ArrayColumn","_dataLength","originalLabels","labels","BooleansColumn","BooleansColumn_1","formatDecimalParts","toExponential","coefficient","prefixExponent","re","formatSpecifier","FormatSpecifier","align","symbol","zero","comma","exponent","toFixed","toLocaleString","toPrecision","formatRounded","formatPrefix","prefixes","grouping","thousands","identity","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","percent","minus","nan","formatTypes","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","i1","i0","formatTrim","Infinity","e10","e5","e2","ticks","tickIncrement","r0","r1","power","LN10","lo","hi","mid","ascendingComparator","ascendingBisect","bisector","bisectRight","extend","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","rgbn","Rgb","rgba","hsla","rgbConvert","rgb_formatHex","hex","rgb_formatRgb","Hsl","hslConvert","hsl","hsl2rgb","m1","m2","basis","v0","v1","v2","v3","t2","t3","channels","displayable","formatHsl","linear","nogamma","constant","rgbGamma","exponential","gamma","rgbSpline","spline","rgbBasis","genericArray","nb","na","reA","reB","am","bm","bs","lastIndex","one","ArrayBuffer","isView","DataView","unit","bimap","interpolate","polymap","bisect","clamp","unknown","transformer","transform","untransform","piecewise","output","rescale","invert","rangeRound","continuous","initRange","transformLog","transformExp","transformLogn","transformExpn","pow10","reflect","loggish","logs","pows","E","log10","log2","logp","powp","tickFormat","nice","linearish","step0","step1","tickStep","precisionPrefix","precisionRound","precisionFixed","prestep","maxIter","transformPow","transformSqrt","transformSquare","powish","toScale","isSame","fixDomain","ScaleMappingFunction","getRange","ScriptMappingFunction","code","value_min","value_max","value_range","value_domain","mi","ma","restoreMapping","mappingFunction","DEFAULT_FORMATTER","toCompareBoxPlotValue","getSortMethod","getBoxPlotNumber","getRawBoxPlotData","noNumberFilter","isEqualNumberFilter","isNumberIncluded","isDummyNumberFilter","restoreNumberFilter","NumberColumn","filterAccuracy","numberFormat","currentGroupThresholds","groupSortMethod","original","deriveMapping","colorMappingFunction","NumberColumn_1","getNumberFormat","minMax","getRawValue","stratifyThresholds","stratifyThreshholds","EVENT_MAPPING_CHANGED","EVENT_SORTMETHOD_CHANGED","raw","iterNumber","iterRawNumber","getRawNumber","sortMethod","getOriginalMapping","setMapping","getGroupThresholds","setGroupThresholds","threshold","thresholdIndex","setSortMethod","BoxPlotColumn","BoxPlotColumn_1","MapColumn","byKey","CategoricalMapColumn","CategoricalMapColumn_1","kv","parseValue","getCategoryMap","CategoricalsColumn","CategoricalsColumn_1","month","hour","minute","second","shiftFilterDateDay","setMinutes","setSeconds","setMilliseconds","toDateGroup","grouper","granularity","centuryP","circular","century","decadeP","decade","chooseAggregatedDate","dates","DateColumn","currentGrouper","dateFormat","DateColumn_1","DEFAULT_DATE_FORMAT","getFormatter","iterDate","isDateIncluded","DOUBLE_ASC","getDateGrouper","setDateGrouper","EDateSort","DatesColumn","DatesColumn_1","getDates","av","compute","DatesMapColumn","DatesMapColumn_1","getDateMap","EGroupSortMethod","createGroupDesc","GroupColumn","GroupColumn_1","COUNT","HierarchyColumn","currentMaxDepth","currentLeaves","currentLeavesNameCache","currentLeavesPathCache","hierarchySeparator","hierarchy","initHierarchy","currentNode","computeLeaves","updateCaches","HierarchyColumn_1","path_1","EVENT_CUTOFF_CHANGED","maxDepth","cutOffNode","findName","getCutOff","setCutOff","leaves","visit","depth","scheme","ramp","radians","degrees","A","B","C","D","ED","EB","BC_DA","cubehelixConvert","Cubehelix","bl","atan2","cubehelix","hue","cubehelixGamma","cosh","cos","sinh","sin","cubehelixLong","warm","cool","ts","magma","inferno","plasma","SequentialColorFunction","FUNCTIONS","interpolateBlues","interpolateGreens","interpolateGreys","interpolateOranges","interpolatePurples","interpolateReds","interpolateCool","interpolateCubehelixDefault","interpolateWarm","interpolatePlasma","interpolateMagma","interpolateViridis","interpolateInferno","interpolateYlOrRd","interpolateYlOrBr","interpolateBuGn","interpolateBuPu","interpolateGnBu","interpolateOrRd","interpolatePuBuGn","interpolatePuBu","interpolatePuRd","interpolateRdPu","interpolateYlGnBu","interpolateYlGn","interpolateRainbow","DivergentColorFunction","interpolateBrBG","interpolatePRGn","interpolatePiYG","interpolatePuOr","interpolateRdBu","interpolateRdGy","interpolateRdYlBu","interpolateRdYlGn","interpolateSpectral","UnknownColorFunction","SolidColorFunction","QuantizedColorFunction","steps","perStep","quantize","CustomColorMappingFunction","DEFAULT_COLOR_FUNCTION","createImpositionDesc","ImpositionCompositeColumn","ImpositionCompositeColumn_1","wrapper","rest","NumbersColumn","NumbersColumn_1","getRawNumbers","data_1","data_2","CENTER","createImpositionBoxPlotDesc","ImpositionBoxPlotColumn","ImpositionBoxPlotColumn_1","createImpositionsDesc","ImpositionCompositesColumn","ImpositionCompositesColumn_1","CompositeNumberColumn","createReduceDesc","ReduceColumn","ReduceColumn_1","selected","EVENT_REDUCE_CHANGED","getReduce","setReduce","createStackDesc","showNestedSummaries","StackColumn","collapsed","adaptChange","adaptWidthChange","StackColumn_1","weights","getWeights","EVENT_COLLAPSE_CHANGED","EVENT_WEIGHTS_CHANGED","EVENT_MULTI_LEVEL_CHANGED","setCollapsed","isShowNestedSummaries","weight","full","oldWeight","factor","widths","guess","setWeights","COLLAPSED_RENDERER","MultiLevelCompositeColumn","MultiLevelCompositeColumn_1","createNestedDesc","NestedColumn","NumberMapColumn","NumberMapColumn_1","OrdinalColumn","OrdinalColumn_1","DEFAULT_SCRIPT","createScriptDesc","script","ColumnWrapper","LazyColumnWrapper","ColumnContext","allFactory","_all","byName","byID","byIndex","ScriptColumn","ScriptColumn_1","EVENT_SCRIPT_CHANGED","setScript","getScript","clean","raws","StringMapColumn","getMapValue","StringsColumn","LinkColumn","patternTemplates","LinkColumn_1","setPattern","EVENT_PATTERN_CHANGED","getPattern","getLink","transformValue","LinkMapColumn","getLinkMap","LinksColumn","LinksColumn_1","getLinks","isAlwaysShowingGroupStrategy","strategy","toItemMeta","relativeIndex","groupParents","meta","prev","prevMeta","groupEndLevel","topNGetter","last","isSummaryGroup","toDirtyReason","UNKNOWN","SORT_CRITERIA_CHANGED","GROUP_CRITERIA_CHANGED","GROUP_SORT_CRITERIA_CHANGED","mergeDirtyOrderContext","currentReason","nextReason","combined","nextReason_1","ADataProvider","rankings","aggregations","columnTypes","colorMappingFunctionTypes","mappingFunctionTypes","singleSelection","showTopN","aggregationStrategy","propagateAggregationState","aggregate","annotate","boolean","booleans","boxplot","categoricalMap","categoricals","dateMap","imposition","impositionBoxPlot","impositions","nested","numbers","numberMap","ordinal","rank","stack","stringMap","strings","link","linkMap","links","quantized","custom","colorMappingFunctions","pow2","pow3","typeFactory","createTypeFactory","fromDescRef","fixDesc","instantiateColumn","patchColumn","typeName","createColorMappingFunction","getTypeFactory","EVENT_DATA_CHANGED","EVENT_BUSY","EVENT_SHOWTOPN_CHANGED","EVENT_ADD_RANKING","EVENT_REMOVE_RANKING","EVENT_SELECTION_CHANGED","EVENT_ADD_DESC","EVENT_CLEAR_DESC","EVENT_JUMP_TO_NEAREST","EVENT_GROUP_AGGREGATION_CHANGED","pushRanking","cloneRanking","insertRanking","fireBusy","busy","takeSnapshot","hasString","hasColumn","toClone","FORWARD_RANKING_EVENTS","triggerReorder","paths","removeDuplicates","level","real","unifyParents","initAggregateState","removeRanking","cleanUpRanking","clearRankings","getFirstRanking","getLastRanking","ensureOneRanking","destroy","_ranking","nextId","select","deselect","selectAll","deselectAll","getAggregationState","setAggregationState","cleanDesc","dumpColumn","restoreColumn","$schema","descRef","restoreRanking","object2Map","deriveDefault","addSupportType","getColumns","getTopNAggregated","EXPAND_TOP_N","setTopNAggregated","unaggregateParents","changed","getAggregationStrategy","changedParents","group_1","aggregateAllOf","aggregateAll","state","getShowTopN","setShowTopN","jumpToNearest","selectAllOf","clearSelection","toggleSelection","additional","selectedRows","view","dataImpl","exportSelection","getRow","EVENT_REMOVE_DESC","injectAccessor","ACommonDataProvider","rankingIndex","nextRankingId","pushDesc","clearColumns","removeDesc","ignoreBeingUsed","isUsed","findDesc","missingInt32","missingFloat","missingFloatAsc","toCompareLookUp","rawLength","INT8","INT16","INT32","DOUBLE","createSetter","missingCount","CompareLookup","isSorting","valueCaches","criteria","ri","pushValues","free","ABORTED","thenFactory","loader","isAborted","abort","onfulfilled","_onrejected","loadedOrAborted","res","abortAble","aborted","aborter","race","abortAbleAll","isAbortAble","candidate","isAsyncUpdate","update","ready","ANOTHER_ROUND","oneShotIterator","calc","wrappee","onrejected","TaskScheduler","taskId","runTasks","deadline","task","didTimeout","timeRemaining","requestAnimationFrame","reSchedule","ww","requestIdleCallback","pushMulti","abortOrDummy","isAbortedOrDummy","abortAll","abort_1","clearIdleCallback","TaskNow","onfullfilled","taskNow","TaskLater","taskLater","tasksAll","MultiIndices","_joined","ARenderTasks","valueCacheData","stringTopNCount","byOrder","byOrderAcc","builder","orders","currentChunkSize","chunkCounter","actOrder","builderForEach","resolveDomain","statsBuilder","key_1","dacc","vs_1","setValueCacheData","cache_1","vs_2","cache_2","vs_3","name2index","categoricalValueCacheBuilder","cache_3","vs_4","dirtyColumn","sortDirect","lookups","DirectRenderTasks","setData","dirtyRanking","preCompute","preComputeData","preComputeCol","copyData2Summary","copyCache","fromPrefix","cacheKey","_singleCall","groupCompare","rg","rg_1","groupRows","_col","groupExampleRows","groupBoxPlotStats","summaryBoxPlotStatsD","groupNumberStats","summaryNumberStatsD","groupCategoricalStats","summaryCategoricalStatsD","groupDateStats","summaryDateStatsD","groupStringStats","summaryStringStatsD","summaryBoxPlotStats","summaryNumberStats","summaryCategoricalStats","summaryDateStats","summaryStringStats","cached","dataNumberStats","dataBoxPlotStats","dataCategoricalStats","dataDateStats","dataStringStats","creator","dontCache","isMapColumn","endsWith","isArrayColumn","isCategoricalLikeColumn","isSetColumn","isCategoricalColumn","isDateColumn","ScheduleRenderTasks","checker","this_1","cols_1","orderedGroups","cols_3","orderedGroups_1","orderedGroups_2","orderedGroups_3","orderedGroups_4","multi","cols_2","chainCopy","_g","chainKey","_loop_2","chain","joined","canAbort","isValidCacheEntry","subTask","created","subTask_1","valueCacheKey","singleCall","indexArray","toTransfer","LocalDataProvider","_data","ooptions","filterGlobally","jumpToSearchResult","taskExecutor","mapToDataRow","_dataRows","toRows","reorderAll","getTotalNumberOfRows","getTaskExecutor","dataChanged","clearData","appendData","trackRanking","addKey","removeKey","loadedKey","removeCol","addCol","dataLoaded","resolveFilter","noSorting","createSorter","needsFiltering","needsGrouping","needsSorting","groupOrder","pushGroup","groupKey","groupCaches","filterCaches","toGroup","fc","before","sortGroup","groupLookup","singleGroup","sortTask","groupSortTask","groupC","sortGroups","enforceSorting","groupIndices","reasons","needsGroupSorting","isSortedBy","isGroupedSortedBy","sortedGroups","viewRaw","viewRawRows","mappingSample","searchAndJump","search","ERenderMode","DENSE_HISTOGRAM","MIN_LABEL_WIDTH","GUESSED_ROW_HEIGHT","noRenderer","setText","textContent","querySelectorAll","forEachChild","matchColumns","childElementCount","dataset","columnId","rendererId","idsAndRenderer","idAndRenderer","childNode","querySelector","asElement","classList","appendChild","innerHTML","children_1","wideEnough","adaptTextColorToBgColorCache","adaptTextColorToBgColor","bgColor","uniqueId","idCounter","exampleText","examples","multiLevelGridCSSClass","idPrefix","colorOf","adaptColorCache","BIG_MARK_LIGHTNESS_FACTOR","SMALL_MARK_LIGHTNESS_FACTOR","adaptColor","lightnessFactor","saturationFactor","hslColor","ActionRenderer","title","canRender","SUMMARY","sanitize","className","icon","ni","onclick","event","preventDefault","stopPropagation","action","createGroup","createSummary","matchNodes","addTopN","doc","ownerDocument","createElement","renderGroups","isRow","isLeafGroup","alwaysShowGroup","isSummary","hasTopN","hasTopNStrategy","lastParent","parent_1","isLastGroup","toggle","isCollapsed","isFirst","isShowAll","childTopN","nextState","isDummyGroup","AggregateGroupRenderer","render","fillStyle","fillRect","filterMissingMarkup","bakMissing","filterMissingNumberMarkup","findFilterMissing","getElementsByClassName","previousElementSibling","updateFilterMissingNumberMarkup","element","getElementsByTagName","disabled","lastElementChild","renderMissingValue","dashX","dashY","renderMissingDOM","renderMissingCanvas","StringCellRenderer","interactiveSummary","form","isRegex","isInputFocused","checked","onchange","oninput","onfocus","onblur","onsubmit","actCol","interactive","filterToString","dl","matchDataList","matches","AnnotationRenderer","firstElementChild","imposer","valueHint","BarCellRenderer","renderValue","CELL","colWidth","bar","style","backgroundColor","adapt","innerText","span","adaptDynamicColorToBgColor","DefaultCellRenderer","groupTitle","summaryTitle","_mode","BooleanCellRenderer","BOXPLOT","MAPPED_BOXPLOT","computeLabel","BoxplotCellRenderer","sortedByMe","renderDOMBoxPlot","scaled","topPadding","strokeStyle","beginPath","rect","moveTo","lineTo","renderBoxPlot","isMissing","_interactive","mappedSummary","rawSummary","range_1","hasRange","whiskers","nextElementSibling","leftWhisker","rightWhisker","display","outliers","numOutliers","insertAdjacentElement","toHeatMapColor","valueColor","BrightnessCellRenderer","CategoricalCellRenderer","matchBins","filterUpdate","matchedBins","interactiveHist","staticSummary","showLabels","bins","createBin","lastBin","categories_1","bin","insertAdjacentHTML","bins_1","gHist","inner","gCount","relY","background","inner_1","setCategoricalFilter","markFilter","included","contained","parentElement","CategoricalHeatmapCellRenderer","isCategoricalsColumn","createContext","cellDimension","mover","offsetX","getContext","canvas","clearRect","onmousemove","onmouseleave","maps","toMostFrequentCategoricals","templateRows","labels_1","CategoricalStackedDistributionlCellRenderer","stackedBar","selectedCol","gBins","flexGrow","total_1","CircleCellRenderer","_context","radiusPercentage","availableHeight","DotCellRenderer","getCanvasRenderer","pi2","radius","GUESSES_GROUP_HEIGHT","save","globalAlpha","arc","getDOMRenderer","dots","tmp","top","getSingleDOMRenderer","sanitizedLabel","dot","formatter","template_1","render_1","update_1","seq1","seq2","concatSeq","GroupCellRenderer","_ctx","ANumbersCellRenderer","normalized","bbn_1","bbr_1","templateRow","HeatmapCellRenderer","_hist","getWindow","window","defaultView","isElement","Element","isHTMLElement","HTMLElement","isShadowRoot","ShadowRoot","getBoundingClientRect","includeScale","scaleX","scaleY","offsetHeight","offsetWidth","bottom","getWindowScroll","win","scrollLeft","pageXOffset","scrollTop","pageYOffset","getNodeName","nodeName","getDocumentElement","document","documentElement","getWindowScrollBarX","getComputedStyle","isScrollParent","_getComputedStyle","overflow","overflowX","overflowY","getCompositeRect","elementOrVirtualElement","offsetParent","isFixed","isOffsetParentAnElement","offsetParentIsScaled","isElementScaled","scroll","clientLeft","clientTop","getLayoutRect","clientRect","offsetLeft","offsetTop","getParentNode","assignedSlot","parentNode","host","getScrollParent","body","listScrollParents","_element$ownerDocumen","scrollParent","isBody","visualViewport","updatedList","isTableElement","getTrueOffsetParent","position","getOffsetParent","isFirefox","userAgent","css","perspective","contain","willChange","getContainingBlock","auto","basePlacements","viewport","popper","variationPlacements","placement","modifierPhases","modifiers","visited","modifier","requires","requiresIfExists","dep","depModifier","DEFAULT_OPTIONS","areValidElements","_len","popperGenerator","generatorOptions","_generatorOptions","_generatorOptions$def","defaultModifiers","_generatorOptions$def2","defaultOptions","fn","pending","orderedModifiers","modifiersData","elements","effectCleanupFns","isDestroyed","instance","setOptions","setOptionsAction","cleanupModifierEffects","scrollParents","contextElement","merged","phase","orderModifiers","enabled","_ref3","_ref3$options","effect","cleanupFn","forceUpdate","_state$elements","rects","reset","_state$orderedModifie","_state$orderedModifie2","_options","onFirstUpdate","passive","getBasePlacement","getVariation","getMainAxisFromPlacement","computeOffsets","_ref","basePlacement","variation","commonX","commonY","mainAxis","unsetSides","mapToStyles","_ref2","_Object$assign2","popperRect","gpuAcceleration","adaptive","roundOffsets","_offsets$x","_offsets$y","hasX","hasY","sideX","sideY","heightProp","widthProp","_Object$assign","commonStyles","_ref4","dpr","devicePixelRatio","roundOffsetsByDPR","removeAttribute","setAttribute","initialStyles","margin","arrow","property","attribute","hash","getOppositePlacement","matched","getOppositeVariationPlacement","contains","rootNode","getRootNode","isSameNode","rectToClientRect","getClientRectFromMixedType","clippingParent","html","clientWidth","clientHeight","getViewportRect","getInnerBoundingClientRect","winScroll","scrollWidth","scrollHeight","direction","getDocumentRect","mergePaddingObject","paddingObject","expandToHashMap","hashMap","detectOverflow","_options$placement","_options$boundary","boundary","_options$rootBoundary","rootBoundary","_options$elementConte","elementContext","_options$altBoundary","altBoundary","_options$padding","altContext","clippingClientRect","mainClippingParents","clippingParents","clipperElement","getClippingParents","firstClippingParent","clippingRect","accRect","getClippingRect","referenceClientRect","popperOffsets","popperClientRect","elementClientRect","overflowOffsets","offsetData","multiply","axis","within","_options$mainAxis","checkMainAxis","_options$altAxis","altAxis","checkAltAxis","_options$tether","tether","_options$tetherOffset","tetherOffset","isBasePlacement","referenceRect","tetherOffsetValue","normalizedTetherOffsetValue","offsetModifierState","_offsetModifierState$","mainSide","altSide","additive","minLen","maxLen","arrowElement","arrowRect","arrowPaddingObject","arrowPaddingMin","arrowPaddingMax","arrowLen","minOffset","maxOffset","arrowOffsetParent","clientOffset","offsetModifierValue","tetherMax","preventedOffset","_offsetModifierState$2","_mainSide","_altSide","_offset","_min","_max","isOriginSide","_offsetModifierValue","_tetherMin","_tetherMax","_preventedOffset","withinMaxClamp","getSideOffsets","preventedOffsets","isAnySideFullyClipped","side","_options$scroll","_options$resize","resize","_ref5","_options$gpuAccelerat","_options$adaptive","_options$roundOffsets","_options$offset","invertDistance","skidding","distanceAndSkiddingToXY","_data$state$placement","_skip","specifiedFallbackPlacements","fallbackPlacements","_options$flipVariatio","flipVariations","allowedAutoPlacements","preferredPlacement","oppositePlacement","getExpandedFallbackPlacements","placements","_options$allowedAutoP","allowedPlacements","overflows","computeAutoPlacement","checksMap","makeFallbackChecks","firstFittingPlacement","_basePlacement","isStartVariation","isVertical","mainVariationSide","altVariationSide","checks","check","_loop","fittingPlacement","_state$modifiersData$","toPaddingObject","minProp","maxProp","endDiff","startDiff","clientSize","centerToReference","axisProp","centerOffset","_options$element","preventOverflow","referenceOverflow","popperAltOverflow","referenceClippingOffsets","popperEscapeOffsets","isReferenceHidden","hasPopperEscaped","dialogContext","attachment","currentTarget","manager","dialogManager","ADialog","dialog","livePreview","popup","toggleDialog","cancelSubDialogs","autoClose","showLivePreviews","livePreviews","enableLivePreviews","submitter","submit","equals","appendDialogButtons","open","removeLike","closest","boundariesElement","focus","triggerSubmit","cancel","removeAboveLevel","checkValidity","findInput","cleanUp","triggerDialogClosed","APopup","InputNumberDialog","ioptions","valueAsNumber","dragHandle","handle","container","onStart","onDrag","onEnd","minDelta","ueberElement","toContainerRelative","elem","handleShift","mouseMove","clientX","mouseUp","onmousedown","filteredColor","histogramTemplate","guessedBins","histogramUpdate","unfiltered","nodes","mappingHintTemplate","mappingHintUpdate","filteredHistTemplate","filterMin","filterMax","formatRaw","initFilter","minHint","maxHint","minValue","parseRaw","maxValue","minImpl","edit","shiftKey","ondblclick","maxImpl","button","px","unpercent","HistogramCellRenderer","getHistDOMRenderer","n_1","updateFilter","fContext","createFilterContext","createFilterInfo","dialogCtx","maxLevel","ImageCellRenderer","backgroundImage","src","image","Image","onload","AAggregatedGroupRenderer","single","aggregatedIndex","createData","stacked","GROUP","MultiLevelCellRenderer","toWait","missingWeight","ci","cNode","gridColumnStart","stackShift","col_1","cr","translate","callbacks","sorted","aMissing","bMissing","numberCompare","medianIndex","InterleavingCellRenderer","rr","summaries","grouped","sample","stats_1","dummyBin","groupedHist","LinkCellRenderer","more","updateLinkList","createTextNode","rel","insertAdjacentText","MapBarCellRenderer","renderTable","arr_1","keyNode","valueNode","TableCellRenderer","createFixed","createFixedGroup","groupByKey","LinkMapCellRenderer","valueA","example","LoadingCellRenderer","RankCellRenderer","fromTSpan","toTSpan","SelectionRenderer","unselected","unchecked","SetCellRenderer","createDOMContext","posX","wideEnoughCat","categories_2","line","moveNext","SparklineCellRenderer","yPos","repeat","matchRows","UpSetCellRenderer","calculateSetPath","catindexes","hasTrueValues","CANVAS_HEIGHT","VerticalBarCellRenderer","tooltipPrefix","xpos","DateCellRenderer","chosen","InputDateDialog","valueAsDate","DateHistogramCellRenderer","isDatesColumn","dummyDomain","now","DEFAULT_FILTERED_COLOR","StringHistogramCellRenderer","updateBin","dataBins","dd","ViolinPlotCellRenderer","createViolinTemplate","fillColor","renderViolin","isMapped","mappedHelper","_sort","svg","xScale","yScale","halfH","pathF","pathB","point","computePath","iqrLine","medianLine","meanLine","TickCellRenderer","tick","CategoricalTickCellRenderer","perElem","defaultCellRenderer","renderers","brightness","catdistributionbar","circle","default","heatmap","catheatmap","histogram","datehistogram","interleaving","loading","mapbars","sparkline","stringhist","upset","verticalbar","violin","cattick","sets","schemeCategory10","schemeAccent","schemeDark2","schemePastel1","schemePastel2","schemeSet1","schemeSet2","schemeSet3","CategoricalColorMappingDialog","CategoricalFilterDialog","updateStats","someMode","noFilter","CategoricalMappingFilterDialog","joint","items","ChangeRendererDialog","currentGroup","currentSummary","getPossibleRenderer","ColorMappingDialog","createTemplate","wrapped","refColor_1","has_1","renderColor_1","name_1","gradient","isCustom","name_2","applyColor","s0","s1","dm1","toColor","content","toggles","toggles_2","toggles_1","customs","updateColor","customs_1","updateSelectedColor","continuouos","continuouos2","quantized2","steps2","updateGradients","steppedGradient","di","stepSize","half","hasDnDType","typesToCheck","available","dataTransfer","dndTransferStorage","isEdgeDnD","updateDropEffect","dT","effectAllowed","copyDnD","dropEffect","dropAble","mimeTypes","onDrop","onDragOver","canDrop","getData","mime","sortActions","getFullToolbar","caches","toolbarIcon","getOwnMetadata","m_1","getAllToolbarActions","possible","resolveToolbarActions","getToolbar","advancedModelFeatures","featureCategory","advancedRankingFeatures","advancedUIFeatures","getToolbarDialogAddons","cacheAddon","toolbarAddons","m_2","getAllToolbarDialogAddons","resolveToolbarDialogAddons","actionCSSClass","addIconDOM","showLabel","isActionMode","setHighlightColumn","onClick","updateIconState","groupedBy","active","MoreColumnOptionsDialog","colId","addIcon","createToolbarMenuItems","setTextOrEmpty","condition","asHTML","createHeader","dragAble","mergeDropAble","rearrangeAble","resizeable","extraPrefix","extra","labelAsHTML","summaryAsHTML","createShortcutMenuItems","toggleToolbarIcons","onDragStart","onDragEnd","draggable","payload","over","JSON","stringify","MIMETYPE_PREFIX","dragAbleColumn","merger","resolveDrop","alternative","mergeImpl","mergeWith","numberlike","draginfo","placer","widthFactor","toInsertParent","rearrangeDropAble","sizeHelper","currentFooterTransformation","originalWidth","dragWidth","updateHeader","minWidth","subLabel","typeCat","updateMoreDialogIcons","willAutoHide","shortcuts","hybrids","moreEntries","defaultVisibleClientWidth","rotated","toggleRotatedHeader","availableWidth","shortCuts","moreIcon","needMore","actions_1","CompositeChildrenDialog","createChildren","summaryNode","CutOffHierarchyDialog","innerNodes","queue","resolveInnerNodes","innerNodePaths","setCustomValidity","newNode","newNodeIndex","maxDepthText","DateFilterDialog","handler","applyFilter","rerender","createDateFilter","EditPatternDialog","templates","GroupDialog","handlers","addons_1","addon","strong","append","updateDisabled","disable","elems","sortOrder","MappingLineDialog","adapter","unnormalizeRaw","normalizeRaw","MappingLine","beforeDomain_1","beforeRange_1","shiftDomain_1","shiftRange_1","normalize_1","common","updated","openDialog","handled","destroyed","trigger","MappingDialog","mappingLines","mappingAdapter","updateLines","computeScale","rawDomain","scaleType","others","bb","textarea_1","copyMapping","createMappings","scaleType_1","selectedIndex","updateDomainWarning","patchedDomain","warningNode","originalDomain","showWarning","getAttribute","NumberFilterDialog","createNumberFilter","sortMethods","methods","ReduceDialog","RenameDialog","ScriptEditDialog","SearchDialog","checkbox","ShowTopNDialog","SortDialog","StringFilterDialog","toInput","WeightsEditDialog","inputs","updateBar","distributeWeights","missingIndices","sum_1","missingIndices_1","missingIndices_2","validWeights","inputs_1","buttons","inputs_2","reportValidity","SelectionFilterDialog","guessRemoveFilter","filtered","guessedRemoved","ui","uiDialog","dialogClass","extraArgs","isAscByDefault","sortGroupBy","rename","vis","_evt","removeAll","toggleCompressExpand","mcol","toolbarActions","compress","expand","filterNumber","filterDate","filterString","filterSelection","filterCategorical","filterOrdinal","colorMapped","colorMappedCategorical","cutoff","editMapping","editPattern","editWeights","compositeContained","splitCombined","invertSelection","ss","uiSortMethod","toolbarDialogAddons","sortNumber","sortNumbers","sortBoxPlot","sortDates","groupNumber","isThreshold","thresholds","groupString","valueRadioButton","startsWithRadioButton","regexRadioButton","showOrHideTextarea","newType","groupDate","labelRotation","summaryHeader","animated","expandLineOnHover","sidePanel","sidePanelCollapsed","hierarchyIndicator","defaultSlopeGraphMode","overviewMode","groupSort","onDialogBackgroundClick","rowHeight","groupHeight","groupPadding","rowPadding","levelOfDetail","customRowUpdate","dynamicHeight","disableFrozenColumns","ignoreUnsupportedBrowser","copyableRows","instanceId","merge","bKeys","bKeys_1","BrowserInfo","version","os","NodeInfo","platform","SearchBotDeviceInfo","bot","BotInfo","ReactNativeInfo","SEARCHBOT_OS_REGEX","userAgentRules","operatingSystemRules","parseUserAgent","ua","matchedRule","browser","uaMatch","matchUserAgent","versionParts","createVersionParts","detectOS","searchBotMatch","getUnsupportedBrowserError","info","product","fVersion","DialogManager","escKeyListener","which","removeLast","openDialogs","backdrop","EVENT_DIALOG_CLOSED","EVENT_DIALOG_OPENED","setHighlight","mask","area","clipPath","webkitClipPath","clearHighlight","takeDown","setUp","EAnimationMode","ALineUp","ignoreIncompatibleBrowser","highlightListeners","isBrowserSupported","EVENT_HIGHLIGHT_CHANGED","setDataProvider","dataIndices","enableHighlightListening","_enable","addCopyListener","csv","clipboardData","defaultPhases","delay","nodeY","actNode","animation","SHOW","HIDE","UPDATE_REMOVE","KeyFinder","lastFilled","key2index","exceptions","findValidStart","posByKey","pos","fillCacheTillKey","defaultRowHeight","fillCache","heightOf","exceptionsLookup","exceptionHeightOf","returnDefault","numberOfRows","positions","defaultMode","ScrollHandler","sync","timer","handleAnimationImpl","handleAnimation","handleTimeouts","asInfo","isWaiting","addScroll","scrollElement","__le_scroller__","isScrollEventWaiting","scroller","EScrollResult","RowHeightException","nonUniformContext","rowHeights","actualDefaultRowHeight","mostFrequentValue","totalHeight","paddedHeight","between","heightExceptions","firstRowPos","endPos","y2","offset2","indexShift","offsetShift","shifted2","lastPos","heightExceptions_1","firstException","lastException","updateFrozen","oldLast","added","PREFIX","CSS_CLASS_LOADING","CSS_CLASS_FROZEN","CSS_CLASS_HIDDEN","CSS_CLASS_MULTI","CSS_CLASS_EVEN","CSS_CLASS_SHIFTED","CSS_CLASS_SCROLLBAR_TESTER","CSS_CLASS_TR","CSS_CLASS_TH","CSS_CLASS_TD","CSS_CLASS_SCROLLING","CSS_CLASS_ROW_ANIMATION","isLoadingCell","ARowRenderer","pool","loadingPool","forcedFirst","forcedLast","visibleFirstRowPos","scrollListener","lastScrollInfo","abortAnimation","async","minScrollDelta","mixins","scrollingHint","batchSize","striped","viewportOversize","createAdapter","MixinClass","fragment","createDocumentFragment","addMixin","addAtBeginning","addAtBottom","removeFromBeginning","removeFromBottom","updateOffset","bodyScroller","scrollOffset","scrollTotal","sizer","tagName","firstChild","init","isGoingDown","onScrolledVertically","recreate","removeScroll","updateRow","createRow","selectProxy","proxy","recycle","abortResult","replaceChild","ex","exceptionHeight","perform","toRecycle","forEachRow","inPlace","fromBeginning","updateSizer","setTransform","bodySizer","recreateAnimated","recreatePure","clearPool","previousKey","cur","currentKey","rows_1","UPDATE","UPDATE_CREATE","nodeYCurrentHeight","nextPos","prevHeight","animate","phases","previousFinder","currentFinder","activeAnimation","currentTimer","actPhase","executePhase","anim","run","dummyAnimation","previousHeight","currentHeight","curr","noAnimationChange","revalidate","shiftTop","scrollResult","onScrolledImpl","onScrolled","shiftLast","currentDelta","shiftFirst","currentFirstRow","NONE","toAdd","SOME","toAddBottom","ALL","SOME_TOP","SOME_BOTTOM","manipulate","toRecycle_1","anyElem","__transform__","assignStyles","targetObj","plain","hyphen","setProperty","StyleManager","rules","testVerifyTimeout","verifySheet","sheet","cssRules","selectorText","deleteRule","rule","insertRule","cssRule","getSheetRule","addRule","updateRule","stored","tableIds","tableId","thead","tbody","tr","th","td","tableCSSClasses","ids","GridStyleManager","cssClasses","headerScroller","measureScrollbar","borderRight","frozenShift","selectors","updateColumns","ruleNames","cssSelectors","thStyles","tdStyles","MultiTableRowRenderer","htmlId","sections","columnPadding","cleanHTMLId","main","isGoingRight","onScrolledHorizontally","scrollEnd","headerFooter","bodyFooter","maxHeight","pushTable","extras","pushSeparator","section","widthChanged","createSanitizer","textNode","nodeValue","PrefetchMixin","prefetchTimeout","cleanupTimeout","prefetchRows","cleanUpRows","prefetchDown","nextLast","prefetchUp","syncFrozen","triggerPrefetch","prefetchDownPossible","prefetchUpPossible","isLast","op","cleanUpTop","newFirst","cleanUpBottom","newLast","triggerCleanUp","ACellAdapter","mixinClasses","cellPool","visibleColumns","visibleFirstColumnPos","horizontallyShifted","columnAdapter","createColumnAdapter","columnMixins","columnFragment","leftShift","addColumnMixin","addColumnAtStart","addColumnAtEnd","removeColumnFromStart","removeColumnFromEnd","updateColumnOffset","onScrolledHorizontallyImpl","removeCellFromStart","recycleCell","removeCellFromEnd","removeFrozenCells","columnIndices","columnIndices_1","columnIndex","removeFrozenColumns","removeAllColumns","includingFrozen","removeAllCells","frozen_1","selectProxyCell","columnObj","pooled","updateCell","createCell","updateShiftedState","handleCellReady","selectCell","rowIndex","addCellAtStart","cell","insertFrozenCells","columnIndices_2","insertFrozenColumns","addCellAtEnd","updateHeaders","fragment_1","document_1","ids_1","firstColumnPos","id_1","mergeColumns","updateImpl","cell_1","byId","idNode","updateShiftedStates","shifted","headers","bodies","headers_1","bodies_1","headers_2","bodies_2","shiftingChanged","ACellTableSection","LocalCell","mixinClass","hidden","onVisibilityChanged","updateShifts","_left","_visible","wasHidden","updateColumnWidths","oldLeft","toGroupLookup","item2groupIndex","group2firstItemIndex","RenderColumn","singleRenderer","singleTemplate","cloneNode","singleId","groupTemplate","groupId","summaryTemplate","summaryId","hasSummaryLine","oldRenderer","currentRenderer","oldGroup","getGroup","chainAbortAble","renderCell","mapper","mapped","MultiLevelRenderColumn","mc","updateNested","matchChildren","cc","updateWidthRule","gridTemplateColumns","sub","SelectionManager","hr","showHint","startNode","elementFromPoint","clientY","endNode","xShift","yShift","EVENT_SELECT_RANGE","startIndex","endIndex","sy","ey","MIN_DISTANCE","selectRange","updateState","selectedDataIndices","RankingEvents","EVENT_UPDATE_DATA","EVENT_RECREATE","PASSIVE","EngineRanking","roptions","loadingCanvas","highlight","canvasPool","currentCanvasShift","currentCanvasWidth","canvasMouseHandler","hoveredRows","unhover","enter","leave","updateHoveredRow","isCanvasRenderedRow","highlightHandler","delayedUpdate","updateBody","delayedUpdateAll","updateAll","delayedUpdateColumnWidths","hiddenOffset","shiftedIndex","createCol","reindex","disableListener","shiftedOld","_oldValue","renderCtx","currentRowHeight","uniformContext","createRenderer","visibility","updateCanvasRule","updateColumnSummaryFlag","_document","createCellHandled","initCellClasses","selectCanvas","rowFlags","rowany","__lu__","visibleRenderedWidth","pushLazyRedraw","renderRow","imageSmoothingEnabled","domColumns","renderCellImpl","visibleElements","firstDOM","updateCellImpl","domColumns_1","updateCanvasCell","me","me_1","needDOM","updateHeaderOf","toRowMeta","agg","hoverLod","computedLod","wasLow","wasGroup","recycleCanvas","canvas2","updateCanvasBody","level_1","enable","hover","inplace","updateSelection","computeShiftedIndex","leftOffset","indexOffset","frozenIndex","updateColumn","after","groupData","pushItem","ordered","groupParent","rowContext","previousData","currentData","prevHelper","currHelper","currentRowIndex","referenceIndex","appearPosition","_previousFinder","previousRowIndex","removePosition","lineupAnimation","findNearest","lookFor","firstBeforePos","firstAfterPos","nearestPos","scrollIntoView","regular","posOf","found","getHighlight","debounceUpdate","replacement","EMode","ItemSlope","GroupSlope","SlopeGraph","leftSlopes","rightSlopes","chosenSelectionOnly","ITEM","createElementNS","BAND","initHeader","icons","rebuild","leftRanking","leftContext","rightRanking","rightContext","prepareRightSlopes","computeSlopes","fakeGroups","padded","slopes","gr","heightPerRow","fakeGroup","createFakeGroup","intersection","filterIndices","chooseSelection","leftVisibleFirst","leftVisibleLast","rightVisibleFirst","rightVisibleLast","alreadyVisible","selectionLookup","updatePath","selectionSlopes","ownerSVGElement","matchLength","addPath","openDataIndices","paths_2","ss_1","paths_1","SelectionIndicator","scrollerNode","blocks","toSelectionBlocks","currentBlock","currentBlockLastIndex","isGroupSelected","firstRow","rawY","scaleFactor","blocks_1","block","updateData","targetY","scrollTo","behavior","resetTransform","EngineRenderer","slopeGraphs","updateAbles","zoomFactor","enabledHighlightListening","helper","chooseRenderer","chooseGroupRenderer","chooseSummaryRenderer","footer","selectionIndicator","marginTop","marginBottom","toDisable","initProvider","zoomOut","updateZoomFactor","zoomIn","fontSize","pushUpdateAble","updateAble","takeDownProvider","addRanking","setHighlightToNearest","updateHist","rankings_1","updateUpdateAbles","updateRotatedHeaderState","slope","round2","impl_1","f_1","defaultHeight","heightsFor","rankings_2","updateSlopeGraphs","ChooseRankingDialog","SearchBox","formatItem","placeholder","blur","onkeydown","handleKey","itemTemplate","buildDialog","li","isItem","onmouseenter","highlighted","click","highlightPrevious","highlightNext","SEARCH_ITEM_SELECTOR","filterResults","ul","allChildrenHidden","RenameRankingDialog","MoreRankingOptionsDialog","sanitized","AddonDialog","addons","Hierarchy","groupAdder","groupSortAdder","sortAdder","renderSorting","renderGroupSorting","toColumn","addonKey","onChange","prevent","customize","addGroupAdder","addSortAdder","addGroupSortAdder","addAdder","adder","onSelect","used","SidePanelEntryVis","summaryUpdater","recreateSummary","appendSummary","updateSummary","SidePanelRanking","dropdown","updateHierarchy","updateList","currentEntries","isWrapper","SidePanel","additionalDescs","chooser","collapseable","descs","initChooser","changeDataStorage","panel","wrapDesc","models","updateChooser","createEntry","makeActive","updateRanking","resetButton","groupByType","LineUp","RankingBuilder","columns_1","supportTypes","allColumns","impose","colorColumn","scripted","mixed_1","weightedSum","numberColumn","numberColumn1","weight1","numberColumn2","weight2","numberColumnAndWeights","post","operation","numberColumns","ALL_MAGIC_FLAG","addColumn","col2","sorts_1","sorts_2","props","si","buildGeneric","buildImposeRanking","buildSupportRanking","buildAllColumnsRanking","pick","providerOptions","lineupOptions","Adapter","prevRankings","prevColumns","prevHighlight","onSelectionChanged","onHighlightChanged","componentDidMount","buildProvider","createInstance","resolveColumnDescs","columnDescs","deriveColumns","deriveColumnNames","deriveColors","resolveRankings","builders","rankingBuilders","derive","defaultRanking","buildColumns","derived_1","buildRankings","updateLineUp","changeDetector","providerChanged","changedLineUpOptions","updateProvider","columnsChanged","componentDidUpdate","componentWillUnmount","asMap","asArray","asOrdinal","missingCategory","asSet","LineUpColumnDesc","editable","filterChildrenProps","superClass","ChildWrapper","inline","ALineUpColumnBuilder","LineUpColumn","LineUpWeightedColumn","prevProps","TaggleRenderer","isDynamicLeafHeight","resizeListener","violationChanged","violation","switchRule","getRule","Taggle","_rule","setViolation","spaceFillingRule","visibleHeight","groupSeparators","itemHeight","spaceFilling","setOverviewMode","isOverviewMode","updateLodRules","buildId","license"],"sourceRoot":""}