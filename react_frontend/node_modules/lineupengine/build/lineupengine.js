/*! For license information please see lineupengine.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.lineupengine=e():t.lineupengine=e()}(globalThis,(()=>(()=>{"use strict";var t={d:(e,o)=>{for(var i in o)t.o(o,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:o[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{ABORTED:()=>n,ACellRenderer:()=>at,ACellTableSection:()=>ht,ARowRenderer:()=>Z,EAnimationMode:()=>f,EScrollResult:()=>x,GridStyleManager:()=>nt,KeyFinder:()=>u,MultiTableRowRenderer:()=>ut,PrefetchMixin:()=>lt,StyleManager:()=>J,abortAble:()=>s,abortAbleAll:()=>l,abortAbleFetch:()=>a,abortAbleResolveNow:()=>d,buildId:()=>pt,defaultPhases:()=>y,frozenDelta:()=>E,isAbortAble:()=>c,isAsyncUpdate:()=>h,isLoadingCell:()=>X,isPromiseLike:()=>i,noAnimationChange:()=>p,nonUniformContext:()=>R,randomContext:()=>O,range:()=>P,setTemplate:()=>et,setTransform:()=>G,tableCSSClasses:()=>it,tableIds:()=>ot,uniformContext:()=>S,updateFrozen:()=>A,version:()=>ft});var o=function(){return o=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},o.apply(this,arguments)};function i(t){return null!=t&&"function"==typeof t.then}var n=Symbol("aborted");function r(t,e,o){return function(s,a){return{then:r(t.then((function(t){var o=e()?n:t,r=s?s(o):o;return i(r)?r.then((function(t){return e()?n:t})):e()?n:r})),e,o),abort:o,isAborted:e}}}function s(t){var e=null,o=function(){return null===e},i=new Promise((function(t){e=t})),s=function(){null!=e&&(e(n),e=null)};return{then:r(Promise.race([i,t]),o,s),abort:s,isAborted:o}}function a(t,e){var i=new AbortController,s=new Promise((function(r,s){var a=fetch(t,o({signal:i.signal},e||{}));a.then(r),a.catch((function(t){t instanceof DOMException?r(n):s(t)}))})),a=i.abort.bind(i),l=function(){return i.signal.aborted};return{then:r(s,l,a),abort:a,isAborted:l}}function l(t){var e=Promise.all(t),o=null,i=function(){return null===o},s=new Promise((function(t){o=t})),a=function(){if(null!=o){o(n);for(var e=0,i=t;e<i.length;e++){var r=i[e];c(r)&&r.abort()}o=null}};return{then:r(Promise.race([s,e]),i,a),abort:a,isAborted:i}}function c(t){return null!=t&&t&&"function"==typeof t.then&&"function"==typeof t.abort}function h(t){return null!=t&&t&&c(t.ready)}function d(t){return{then:function(e,o){var n=e?e(t):t;return c(n)?n:i(n)?s(n):{then:d(n),abort:function(){},isAborted:function(){return!1}}},abort:function(){},isAborted:function(){return!1}}}const u=function(){function t(t,e){var o=this;this.context=t,this.key=e,this.cache=[],this.lastFilled=0,this.key2index=new Map,this.context.exceptions.forEach((function(t){o.cache[t.index]=t.y,o.key2index.set(e(t.index),t.index)}))}return t.prototype.findValidStart=function(t){for(var e=t-1;e>=0;e-=1)if(void 0!==this.cache[e])return e;return-1},t.prototype.posByKey=function(t){var e=this.key2index.get(t);return null!=e?{index:e,pos:this.pos(e)}:this.fillCacheTillKey(t)},t.prototype.pos=function(t){if(0===this.context.exceptions.length)return t*this.context.defaultRowHeight;var e=this.cache[t];if(void 0!==e)return e;var o=this.findValidStart(t);return o<0?this.fillCache(0,t,0):this.fillCache(o+1,t,this.cache[o]+this.heightOf(o)),this.cache[t]},t.prototype.fillCache=function(t,e,o,i){if(e<=this.lastFilled){if(!i)return;for(var n=t;n<=e;n+=1)i(n,this.key(n),this.cache[n])}else{var r=o;for(n=t;n<=e;n+=1){this.cache[n]=r;var s=this.key(n);this.key2index.set(s,n),i&&i(n,s,r),r+=this.heightOf(n)}}},t.prototype.heightOf=function(t){var e;return null!==(e=this.context.exceptionsLookup.get(t))&&void 0!==e?e:this.context.defaultRowHeight},t.prototype.exceptionHeightOf=function(t,e){void 0===e&&(e=!1);var o=this.context.padding(t),i=this.context.exceptionsLookup.get(t);return null!=i?i-o:e?this.context.defaultRowHeight-o:null},t.prototype.padding=function(t){return this.context.padding(t)},t.prototype.fillCacheTillKey=function(t){for(var e=0,o=this.lastFilled;o<this.context.numberOfRows;o+=1,this.lastFilled+=1){var i=this.cache[o];if(void 0===i){var n=this.key(o);if(this.cache[o]=e,this.key2index.set(n,o),n===t)return{index:o,pos:e};e+=this.heightOf(o)}else e=i+this.heightOf(o)}return{index:-1,pos:-1}},t.prototype.positions=function(t,e,o,i){this.fillCache(t,e,o,i)},t}();var f;function p(t,e,o){var i=t.previous,n=t.mode,r=t.nodeY,s=t.current,a=null==i.height?e:i.height,l=null==s.height?o:s.height;return n===f.UPDATE&&Math.abs(i.y-r)<=1&&Math.abs(a-l)<=1}!function(t){t[t.UPDATE=0]="UPDATE",t[t.UPDATE_CREATE=1]="UPDATE_CREATE",t[t.UPDATE_REMOVE=2]="UPDATE_REMOVE",t[t.SHOW=3]="SHOW",t[t.HIDE=4]="HIDE"}(f||(f={}));var y=[{delay:0,apply:function(t){var e=t.mode,o=t.previous,i=t.nodeY,n=t.current,r=t.node;r.dataset.animation=f[e].toLowerCase(),r.style.transform="translate(0, ".concat(o.y-i,"px)"),e===f.SHOW?r.style.height=null!==n.height?"".concat(n.height,"px"):"":r.style.height="".concat(o.height,"px"),e===f.SHOW?r.style.opacity="0":e===f.HIDE?r.style.opacity="1":r.style.opacity=""}},{delay:10,apply:function(t){var e=t.mode,o=t.current,i=t.nodeY,n=t.node;n.style.transform=e===f.HIDE||e===f.UPDATE_REMOVE?"translate(0, ".concat(o.y-i,"px)"):"",e!==f.HIDE&&(n.style.height=null!==o.height?"".concat(o.height,"px"):""),e===f.SHOW?n.style.opacity="1":e===f.HIDE?n.style.opacity="0":n.style.opacity=""}},{delay:1100,apply:function(t){var e=t.node;delete e.dataset.animation,e.style.opacity="",e.style.transform=""}}];function m(t){for(;t.lastChild;)t.removeChild(t.lastChild);return t}var v="animation",g=function(){function t(t){var e=this;this.node=t,this.sync={handler:[],prev:null,timer:-1},this.animation={handler:[],prev:null,timer:-1},this.numbers=new Map,this.handleAnimationImpl=function(){1===e.animation.timer&&(e.handle(e.animation),e.animation.timer=-1)},t.addEventListener("scroll",(function(){e.sync.handler.length>0&&e.handle(e.sync),e.handleAnimation(),e.handleTimeouts()}),{passive:!0})}return Object.defineProperty(t.prototype,"current",{get:function(){return this.asInfo()},enumerable:!1,configurable:!0}),t.prototype.handle=function(t){var e=this.current;if(!(t.prev&&Math.abs(e.left-t.prev.left)+Math.abs(e.top-t.prev.top)<4)){t.prev=e;for(var o=0,i=t.handler;o<i.length;o++)(0,i[o])(e)}},t.prototype.handleAnimation=function(){-1===this.animation.timer&&0!==this.animation.handler.length&&(this.animation.timer=1,requestAnimationFrame(this.handleAnimationImpl))},t.prototype.handleTimeouts=function(){var t=this;0!==this.numbers.size&&this.numbers.forEach((function(e,o){0!==e.handler.length&&(e.timer=self.setTimeout((function(){t.handle(e),e.timer=-1}),o))}))},t.prototype.asInfo=function(){return{left:this.node.scrollLeft,top:this.node.scrollTop,width:this.node.clientWidth,height:this.node.clientHeight}},t.prototype.push=function(t,e){var o;if("number"==typeof t){var i=null!==(o=this.numbers.get(t))&&void 0!==o?o:{handler:[],prev:null,timer:-1};i.handler.push(e),this.numbers.set(t,i)}switch(t){case"sync":this.sync.handler.push(e);break;case"animation":this.animation.handler.push(e)}},t.prototype.remove=function(t){return[this.sync,this.animation].concat(Array.from(this.numbers.values())).some((function(e){var o=e.handler.indexOf(t);return o>=0&&e.handler.splice(o,1),o>=0}))},t.prototype.isWaiting=function(t){var e,o;switch(t){case"animation":return this.animation.timer>=0;case"sync":return!1;default:return(null!==(o=null===(e=this.numbers.get(t))||void 0===e?void 0:e.timer)&&void 0!==o?o:-1)>=0}},t}();function b(t,e,o){var i=t;i.__le_scroller__||(i.__le_scroller__=new g(t));var n=i.__le_scroller__;return n.push(e,o),n.asInfo()}function C(t,e){var o=t;return!!o.__le_scroller__&&o.__le_scroller__.isWaiting(e)}var x,w=function(){function t(t,e,o){this.index=t,this.y=e,this.height=o}return Object.defineProperty(t.prototype,"y2",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),t}();function S(t,e,o){void 0===o&&(o=0);var i=e+o;return{exceptions:[],exceptionsLookup:{keys:function(){return[].values()},get:function(){return i},has:function(){return!1},size:0},totalHeight:t*i,numberOfRows:t,defaultRowHeight:i,padding:function(){return o}}}function R(t,e,o){void 0===e&&(e=Number.NaN),void 0===o&&(o=0);var i=new Map,n=[],r="function"==typeof o?o:function(){return o},s=e;Number.isNaN(s)&&(s=function(t){var e=new Map;if(t.forEach((function(t){e.set(t,(e.get(t)||0)+1)})),0===e.size)return 20;var o=Array.from(e).sort((function(t,e){return t[1]!==e[1]?e[1]-t[1]:t[0]-e[0]})),i=o[0][0];return 0===i?o.length>1?o[1][0]:20:i}(t)),s+=r(-1);var a=-1,l=0,c=0,h=0;return t.forEach((function(t,e){var o=t+r(e);if(c+=o,h+=1,o!==s){i.set(e,o);var d=(e-a-1)*s;a=e;var u=l+d;l=u+o,n.push(new w(e,u,o))}})),{exceptionsLookup:i,exceptions:n,totalHeight:c,defaultRowHeight:s,numberOfRows:h,padding:r}}function O(t,e,o,i,n,r){void 0===o&&(o=2),void 0===i&&(i=10*e),void 0===n&&(n=.2),void 0===r&&(r=Date.now());var s=r,a=function(){var t=1e4*Math.sin(s);return s+=1,t-Math.floor(t)};return R({forEach:function(r){for(var s=0;s<t;s+=1)r(a()<n?o+Math.round(a()*(i-o)):e,s)}},e)}function P(t,e,o,i,n){if(0===n)return{first:0,last:-1,firstRowPos:0,endPos:0};if(1===n)return{first:0,last:0,firstRowPos:0,endPos:0===i.length?o:i[0].y2};var r=t,s=r+e;function a(t,e){return Math.min(n-1,e+Math.max(0,Math.floor(t/o)))}function l(t,e){var i=s-t,n=a(r-t,e),l=a(i,e);return{first:n,last:l,firstRowPos:t+(n-e)*o,endPos:t+(l+1-e)*o}}var c=l(0,0);if(0===i.length)return c;if(c.last<i[0].index)return c;if(c.last===i[0].index&&i[0].height>o)return Object.assign(c,{endPos:i[0].y2});var h=i[i.length-1];if(r>=h.y){var d=l(h.y2,h.index+1);return r<h.y2?Object.assign(d,{first:h.index,firstRowPos:h.y}):d}for(var u=[],f=i[0],p=0,y=i;p<y.length;p++){var m=y[p],v=m.y,g=m.y2;if(v>=s)break;g<=r?f=m:u.push(m)}if(0===u.length)return l(f.y2,f.index+1);var b=u[0],C=u[u.length-1],x=Math.max(0,b.index-Math.max(0,Math.ceil((b.y-r)/o))),w=C.index;return s>=C.y2&&(w=a(s-C.y2,C.index+1)),{first:x,last:w,firstRowPos:b.y-(b.index-x)*o,endPos:C.y2+(w-C.index)*o}}function E(t,e){var o=t.length,i=e.length;if(0===o)return{added:e,removed:[],common:0};if(0===i)return{added:[],removed:t,common:0};if(o===i)return{added:[],removed:[],common:o};var n=t.slice(Math.min(i,o));return{added:e.slice(Math.min(i,o)),removed:n,common:o-n.length}}function A(t,e,o){for(var i=0===t.length?0:t[t.length-1]+1,n=[],r=[],s=t.length-1;s>=0&&t[s]>=o;s-=1)r.push(t.pop());for(s=i;s<o;s+=1)e[s].frozen&&(n.push(s),t.push(s));return{target:t,added:n,removed:r}}function _(t){return t?"".concat("le","-").concat(t):"le"}!function(t){t[t.NONE=0]="NONE",t[t.ALL=1]="ALL",t[t.SOME=2]="SOME",t[t.SOME_BOTTOM=3]="SOME_BOTTOM",t[t.SOME_TOP=4]="SOME_TOP"}(x||(x={}));var T=_("loading"),F=_("frozen"),H=_("hidden"),z=_("multi"),L=_("even"),M=_("shifted"),j=_("scrollbar-tester"),B=_("header"),I=_("body"),D=_("footer"),U=_("thead"),W=_("tbody"),N=_("tr"),k=_("th"),V=_("td"),K=_("scrolling"),q=_("row-animation"),Y=function(){return Y=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Y.apply(this,arguments)};function X(t){return t.classList.contains(T)}var Z=function(){function t(t,e){void 0===e&&(e={});var o=this;this.body=t,this.pool=[],this.loadingPool=[],this.loading=new WeakMap,this.visible={first:0,forcedFirst:0,last:-1,forcedLast:-1},this.visibleFirstRowPos=0,this.scrollListener=null,this.lastScrollInfo=null,this.abortAnimation=function(){},this.options={async:v,minScrollDelta:10,mixins:[],scrollingHint:!1,batchSize:10,striped:!1,viewportOversize:200},this.adapter=this.createAdapter(),Object.assign(this.options,e),this.mixins=this.options.mixins.map((function(t){return new t(o.adapter)})),this.fragment=t.ownerDocument.createDocumentFragment()}return t.prototype.addMixin=function(t,e){this.mixins.push(new t(this.adapter,e))},t.prototype.createAdapter=function(){var t=this,e=this;return{visible:this.visible,addAtBeginning:function(e,o){return t.addAtBeginning(e,o)},addAtBottom:this.addAtBottom.bind(this),removeFromBeginning:function(e,o){return t.removeFromBeginning(e,o)},removeFromBottom:this.removeFromBottom.bind(this),updateOffset:this.updateOffset.bind(this),isScrollEventWaiting:function(){return C(t.bodyScroller,t.options.async)},get visibleFirstRowPos(){return e.visibleFirstRowPos},get context(){return e.context},get scrollOffset(){return e.lastScrollInfo?e.lastScrollInfo.top:0},get scrollTotal(){return e.lastScrollInfo?e.lastScrollInfo.height:e.bodyScroller.clientHeight}}},Object.defineProperty(t.prototype,"bodyScroller",{get:function(){return this.body.parentElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodySizer",{get:function(){var t=this.bodyScroller,e=Array.from(t.children).find((function(t){return"footer"===t.tagName.toLowerCase()}));if(e)return e;var o=t.ownerDocument.createElement("footer");return o.classList.add(D,_("footer-".concat(this.idPrefix))),t.insertBefore(o,t.firstChild),o},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=this,e=this.bodyScroller,o=b(e,this.options.async,this.scrollListener=function(e){if(t.lastScrollInfo=e,!(Math.abs(o.top-e.top)<t.options.minScrollDelta&&Math.abs(o.height-e.height)<t.options.minScrollDelta)){var i=e.top>o.top;o=e,t.onScrolledVertically(e.top,e.height,i),t.options.scrollingHint&&t.body.classList.remove(K)}});this.options.scrollingHint&&b(e,"animation",(function(){return t.body.classList.add(K)})),this.recreate()},t.prototype.destroy=function(){var t,e,o;this.scrollListener&&(t=this.bodyScroller,e=this.scrollListener,(o=t).__le_scroller__&&o.__le_scroller__.remove(e)),this.body.remove()},t.cleanUp=function(t){t.style.height=""},t.prototype.select=function(t){var e,o=this.pool.pop();return null!=o?e=this.updateRow(o,t):null!=(o=this.loadingPool.pop())?(o.classList.remove(T),e=this.createRow(o,t)):((o=this.body.ownerDocument.createElement("div")).classList.add(N,_("tr-".concat(this.idPrefix))),e=this.createRow(o,t)),o.dataset.index=String(t),this.options.striped&&o.classList.toggle(L,t%2==0),{item:o,result:e}},t.prototype.selectProxy=function(){var t=this.loadingPool.pop();return null==t&&(t=this.body.ownerDocument.createElement("div")).classList.add(T,N,_("tr-".concat(this.idPrefix))),t},t.prototype.recycle=function(e){t.cleanUp(e);var o=this.loading.get(e);null!=o?o.abort():this.pool.push(e)},t.prototype.proxy=function(e,o){var i=this;if(!c(o))return e;var r=o,s=e,a=this.selectProxy();return a.dataset.index=s.dataset.index,a.style.height=s.style.height,this.loading.set(a,r),r.then((function(e){e===n?(t.cleanUp(s),i.pool.push(s)):i.body.replaceChild(s,a),i.loading.delete(a),t.cleanUp(a),i.loadingPool.push(a)}),(function(){t.cleanUp(s),i.pool.push(s),i.loading.delete(a),t.cleanUp(a),i.loadingPool.push(a)})),a},t.prototype.create=function(t){var e=this.select(t),o=e.item,i=e.result,n=this.context,r=n.exceptionsLookup,s=n.padding,a=r.get(t);return null!=a&&(o.style.height="".concat(a-s(t),"px")),this.proxy(o,i)},t.prototype.removeAll=function(t){void 0===t&&(t=!0);var e=this.body;if(!t)return Array.from(e.children);for(var o=[];e.lastElementChild;){var i=e.lastElementChild;e.removeChild(i),this.recycle(i),o.push(i)}return o},t.prototype.update=function(){var t=this,e=this.visible.first,o=this.fragment,i=Array.from(this.body.children);m(this.body),i.forEach((function(i,n){if(t.loading.has(i))o.appendChild(i);else{var r=t.updateRow(i,n+e);o.appendChild(t.proxy(i,r))}})),this.body.appendChild(o)},t.prototype.forEachRow=function(t,e){var o=this;void 0===e&&(e=!1);var i=Array.from(this.body.children),n=this.fragment;e||m(this.body),i.forEach((function(i,r){X(i)||"update_remove"===i.dataset.animation||"hide"===i.dataset.animation||t(i,r+o.visible.first),e||n.appendChild(i)})),e||this.body.appendChild(n)},t.prototype.removeFromBeginning=function(t,e,o){return void 0===o&&(o=!0),this.remove(t,e,!0,o)},t.prototype.removeFromBottom=function(t,e,o){return void 0===o&&(o=!0),this.remove(t,e,!1,o)},t.prototype.remove=function(t,e,o,i){if(void 0===i&&(i=!0),e<t)return[];for(var n=this.body,r=[],s=o?n.firstChild:n.lastChild,a=t;a<=e;a+=1){var l=s;s=o?s.nextSibling:s.previousSibling,i&&(n.removeChild(l),this.recycle(l)),r.push(l)}return r},t.prototype.addAtBeginning=function(t,e,o){if(void 0===o&&(o=!0),e<t)return null;var i=this.fragment;if(t===e&&o)return this.body.insertBefore(this.create(t),this.body.firstChild),null;for(var n=t;n<=e;n+=1)i.appendChild(this.create(n));return o&&this.body.insertBefore(i,this.body.firstChild),i},t.prototype.addAtBottom=function(t,e,o){if(void 0===o&&(o=!0),e<t)return null;if(t===e&&o)return this.body.appendChild(this.create(t)),null;for(var i=this.fragment,n=t;n<=e;n+=1)i.appendChild(this.create(n));return o&&this.body.appendChild(i),i},t.prototype.updateOffset=function(t){this.visibleFirstRowPos=t,this.updateSizer(t)},t.prototype.updateSizer=function(t){var e=this.context.totalHeight;G(this.body,0,t.toFixed(0)),G(this.bodySizer,0,Math.max(0,e-1).toFixed(0))},t.prototype.recreate=function(t){return this.abortAnimation(),t?this.recreateAnimated(t):this.recreatePure()},t.prototype.recreatePure=function(){var t=this.context,e=this.bodyScroller;this.updateOffset(0),this.removeAll(),this.clearPool();var o=P(e.scrollTop,e.clientHeight,t.defaultRowHeight,t.exceptions,t.numberOfRows),i=o.first,n=o.last,r=o.firstRowPos;this.visible.first=i,this.visible.forcedFirst=i,this.visible.last=n,this.visible.forcedLast=n,i<0?this.updateOffset(0):(this.addAtBottom(i,n),this.updateOffset(r))},t.prototype.recreateAnimated=function(t){var e=this,o=new Map,i=new u(t.previous,t.previousKey),n=new u(this.context,t.currentKey),r=P(this.bodyScroller.scrollTop,this.bodyScroller.clientHeight,n.context.defaultRowHeight,n.context.exceptions,n.context.numberOfRows),s=Array.from(this.body.children),a=Y({},this.visible);m(this.body),i.positions(a.first,Math.min(a.last,a.first+s.length),this.visibleFirstRowPos,(function(t,e,i){var n=s[t];n&&o.set(e,{n,pos:i,i:t})})),this.visible.first=r.first,this.visible.forcedFirst=r.first,this.visible.last=r.last,this.visible.forcedLast=r.last;var l=this.fragment,c=[],h=r.firstRowPos;n.positions(r.first,r.last,r.firstRowPos,(function(t,r,s){var a,d,u=f.UPDATE,p=o.get(r);if(null!=p)o.delete(r),p.n.dataset.index=String(t),a=e.proxy(p.n,e.updateRow(p.n,t)),d={index:p.i,y:p.pos,height:i.exceptionHeightOf(p.i,!0)};else{var y=i.posByKey(r);a=e.create(t),u=y.index<0?f.SHOW:f.UPDATE_CREATE,d={index:y.index,y:y.pos>=0?y.pos:s,height:y.index<0?n.exceptionHeightOf(t,!0):i.exceptionHeightOf(y.index,!0)}}c.push({node:a,key:r,mode:u,previous:d,nodeY:h,nodeYCurrentHeight:s,current:{index:t,y:s,height:n.exceptionHeightOf(t)}}),a.style.transform="translate(0, ".concat(h-s,"px)"),h+=d.height+(d.index<0?n.padding(t):i.padding(d.index)),l.appendChild(a)}));var d=r.endPos;o.forEach((function(t,e){var o=n.posByKey(e),r=o.pos>=0?o.pos:t.pos,s=t.n;s.style.transform="translate(0, ".concat(t.pos-h,"px)"),l.appendChild(s);var a=i.exceptionHeightOf(t.i,!0);c.push({node:t.n,key:e,mode:o.index<0?f.HIDE:f.UPDATE_REMOVE,previous:{index:t.i,y:t.pos,height:a},nodeY:h,nodeYCurrentHeight:d,current:{index:o.index,y:r,height:o.index<0?null:n.exceptionHeightOf(o.index)}}),d+=o.index<0?n.context.defaultRowHeight:n.exceptionHeightOf(o.index,!0)+n.padding(o.index),h+=a+i.padding(t.i)})),this.updateOffset(r.firstRowPos),this.animate(c,t.phases||y,i,n,l)},t.prototype.animate=function(t,e,o,i,n){var r=this,s=t;if(s.length<=0)this.body.appendChild(n);else{for(var a=-1,l=0,c=function(t,e){void 0===e&&(e=s),e.forEach((function(e){return t.apply(e,o,i)}))},h=function(){if(console.assert(s[0].node.offsetTop>=0,"dummy log for forcing dom update"),c(e[l]),(l+=1)<e.length){var t=e[l];a=self.setTimeout(h,t.delay)}else{var o=r.body.classList;Array.from(o).forEach((function(t){t.startsWith(_())&&t.endsWith("-animation")&&o.remove(t)})),s.forEach((function(t){var e=t.node,o=t.mode;o!==f.UPDATE_REMOVE&&o!==f.HIDE||(e.remove(),e.style.transform="",r.recycle(e))})),r.abortAnimation=function(){},a=-1}};0===e[l].delay;)c(e[l]),l+=1;var d=this.body;this.body.appendChild(n);var u=[];s=s.filter((function(t){return!p(t,o.context.defaultRowHeight,i.context.defaultRowHeight)||(u.push(t),!1)})),u.length>0&&e.slice(l).forEach((function(t){return c(t,u)})),0!==s.length&&(d.classList.add(q),new Set(s.map((function(t){return t.mode}))).forEach((function(t){d.classList.add(_("".concat(f[t].toLowerCase().split("_")[0],"-animation")))})),this.abortAnimation=function(){a<=0||(clearTimeout(a),a=-1,l=e.length-1,h())},a=self.setTimeout(h,e[l].delay))}},t.prototype.clearPool=function(){this.pool.splice(0,this.pool.length)},t.prototype.revalidate=function(){var t=this.bodyScroller;this.onScrolledVertically(t.scrollTop,t.clientHeight,!0),this.updateOffset(this.visibleFirstRowPos)},t.prototype.onScrolledVertically=function(t,e,o){for(var i=this.options.viewportOversize,n=Math.max(0,t-i),r=this.onScrolledImpl(n,e+i+(t-n)),s=0,a=this.mixins;s<a.length;s++)a[s].onScrolled(o,r);return r},t.prototype.shiftLast=function(t,e){if(e>=this.options.batchSize)return t;var o=this.context.numberOfRows;return Math.min(o-1,t+(this.options.batchSize-e))},t.prototype.shiftFirst=function(t,e,o){var i;if(o>=this.options.batchSize||t<=0)return{first:t,firstRowPos:e};for(var n=Math.max(0,t-(this.options.batchSize-o)),r=this.context,s=r.exceptionsLookup,a=r.defaultRowHeight,l=e,c=n;c<t;c+=1)l-=null!==(i=s.get(c))&&void 0!==i?i:a;return{first:n,firstRowPos:l}},t.prototype.onScrolledImpl=function(t,e){var o=this.context,i=P(t,e,o.defaultRowHeight,o.exceptions,o.numberOfRows),n=i.first,r=i.last,s=i.firstRowPos,a=this.visible;if(a.forcedFirst=n,a.forcedLast=r,n-a.first>=0&&r-a.last<=0)return x.NONE;var l,c,h=x.SOME,d=!1;if(n>a.last||r<a.first)l=this.removeAll(!1),c=this.addAtBottom(n,r,!1),d=!0,h=x.ALL;else if(n<a.first){a.last-(r+1)>=this.options.batchSize?l=this.removeFromBottom(r+1,a.last,!1):r=a.last;var u=this.shiftFirst(n,s,a.first-1-n);n=u.first,s=u.firstRowPos,c=this.addAtBeginning(n,a.first-1,!1),d=!1,h=x.SOME_TOP}else n-1-a.first>=this.options.batchSize?l=this.removeFromBeginning(a.first,n-1,!1):(n=a.first,s=this.visibleFirstRowPos),r=this.shiftLast(r,r-a.last+1),c=this.addAtBottom(a.last+1,r,!1),d=!0,h=x.SOME_BOTTOM;return a.first=n,a.last=r,this.updateOffset(s),this.manipulate(l,c,d),h},t.prototype.manipulate=function(t,e,o){if(t)for(var i=0,n=t;i<n.length;i++){var r=n[i];r.remove(),this.recycle(r)}e&&(o?this.body.appendChild(e):this.body.insertBefore(e,this.body.firstChild))},t}();function G(t,e,o){var i="translate(".concat(e,"px, ").concat(o,"px)"),n=t;n.__transform__!==i&&(n.__transform__=i,t.style.transform=i)}function $(t,e){for(var o=t,i=0,n=Object.keys(e);i<n.length;i++){var r=n[i],s=e[r];if(s.endsWith(" !important")){var a=s.slice(0,-" !important".length);if(o[r]!==a){o[r]=a;var l=r.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase();t.setProperty(l,a,"important")}}else o[r]!==s&&(o[r]=s)}}const J=function(){function t(t){this.rules=[],this.testVerifyTimeout=-1,this.node=t.ownerDocument.createElement("style"),this.node.appendChild(t.ownerDocument.createTextNode("")),t.appendChild(this.node)}return t.prototype.destroy=function(){this.node.remove()},t.prototype.verifySheet=function(){var t=this,e=this.sheet;if(e){var o=e.cssRules;if(o.length!==this.rules.length||!this.rules.every((function(t,e){return o[e].selectorText===t.selector}))){for(var i=o.length-1;i>=0;i-=1)e.deleteRule(i);for(var n=0,r=this.rules;n<r.length;n++){var s=r[n],a=e.insertRule("".concat(s.selector," {}"),e.cssRules.length),l=e.cssRules[a];s.selector=l.selectorText,$(l.style,s.style)}}}else{if(this.testVerifyTimeout>=0)return;this.testVerifyTimeout=self.setTimeout((function(){t.testVerifyTimeout=-1,t.verifySheet()}),20)}},Object.defineProperty(t.prototype,"sheet",{get:function(){return this.node.sheet},enumerable:!1,configurable:!0}),t.prototype.getSheetRule=function(t){var e=this.sheet;return e?e.cssRules[t]:null},t.prototype.addRule=function(t,e,o){this.verifySheet();var i=this.sheet;if(!i)return this.rules.push({id:t,selector:e,style:o}),null;var n=i.insertRule("".concat(e," {}"),i.cssRules.length),r=i.cssRules[n];return this.rules.push({id:t,selector:r.selectorText,style:o}),$(r.style,o),t},t.prototype.updateRule=function(t,e,o){this.verifySheet();var i=this.rules.findIndex((function(e){return e.id===t}));if(i<0)return this.addRule(t,e,o);var n=this.rules[i];n.selector=e,n.style=o;var r=this.getSheetRule(i);return r&&(r.selectorText.replace(/\s/gm,"")!==e.replace(/\s/gm,"")&&(r.selectorText=e,n.selector=r.selectorText),$(r.style,o)),t},t.prototype.deleteRule=function(t){this.verifySheet();var e=this.rules.findIndex((function(e){return e.id===t}));if(!(e<0)){this.rules.splice(e,1);var o=this.sheet;o&&o.deleteRule(e)}},Object.defineProperty(t.prototype,"ruleNames",{get:function(){return this.rules.map((function(t){return t.id}))},enumerable:!1,configurable:!0}),t}();var Q,tt=(Q=function(t,e){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},Q(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}Q(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});function et(t,e){var o=e.startsWith("#")?e.slice(1):e;return t.innerHTML='\n  <header id="header-'.concat(o,'" class="').concat(B," ").concat(_("header-".concat(o)),'">\n    <article class="').concat(U," ").concat(_("thead-".concat(o)),'"></article>\n  </header>\n  <main id="body-').concat(o,'" class="').concat(I," ").concat(_("body-".concat(o)),'">\n    <footer class="').concat(D,'">&nbsp;</footer>\n    <article class="').concat(W," ").concat(_("tbody-".concat(o)),'"></article>\n  </main>'),t}function ot(t){return{thead:"thead-".concat(t),tbody:"tbody-".concat(t),tr:"tr-".concat(t),th:"th-".concat(t),td:"td-".concat(t)}}function it(t){var e=ot(t);return{thead:_(e.thead),tbody:_(e.tbody),tr:_(e.tr),th:_(e.th),td:_(e.td)}}const nt=function(t){function e(e,o){var i=t.call(this,e)||this;i.id=o.startsWith("#")?o.slice(1):o,i.ids=ot(i.id),i.cssClasses=it(i.id);var n=e.getElementsByTagName("header")[0],r=e.getElementsByTagName("main")[0];self.setTimeout((function(){var t=function(t){var e,o=null===(e=t.ownerDocument)||void 0===e?void 0:e.body;if(!o)return{width:10,height:10};o.insertAdjacentHTML("beforeend",'<div class="'.concat(j,'"><div></div></div>'));var i=o.lastElementChild,n=i.offsetWidth-i.clientWidth,r=i.offsetHeight-i.clientHeight;return i.remove(),{width:n,height:r}}(e).width;i.updateRule("__scrollBarFix2","#header-".concat(i.id," > article:last-of-type"),{borderRight:"".concat(t,"px solid transparent")})}),20);var s=n.scrollLeft;return b(r,"animation",(function(t){var o=t.left;s!==o&&(n.scrollLeft=o,s=o),e.classList.toggle(M,t.left>0)})),i}return tt(e,t),e.prototype.update=function(t,e,o,i,n,r){void 0===r&&(r="px");var s=ot(n),a=it(n),l="".concat(e.reduce((function(t,e,i){return t+e.width+o(i)}),0)).concat(r);this.updateRule("__heightsRule".concat(a.tr),".".concat(a.tr),{height:"".concat(t,"px"),width:l}),this.updateRule("__heightsRule".concat(a.tbody),"#".concat(s.tbody),{width:l}),this.updateColumns(e,o,a,i,r)},e.prototype.remove=function(t){var e=it(t);this.deleteRule("__heightsRule".concat(e.tr)),this.deleteRule("__heightsRule".concat(e.tbody));for(var o="__col".concat(e.td,"_"),i=this.ruleNames.reduce((function(t,e){return t+(e.startsWith(o)?1:0)}),0),n=0;n<i;n+=1)this.deleteRule("".concat(o).concat(n))},e.prototype.updateColumns=function(t,e,o,i,n){var r=this;void 0===n&&(n="px");var s="__col".concat(o.td,"_"),a=new Set(this.ruleNames.filter((function(t){return t.startsWith(s)}))),l=0;t.forEach((function(t,c){var h=".".concat(o.th,'[data-id="').concat(t.id,'"]'),d={width:"".concat(t.width).concat(n)},u=".".concat(o.td,'[data-id="').concat(t.id,'"]'),f={transform:"translateX(".concat(l).concat(n,")"),width:"".concat(t.width).concat(n)};t.frozen&&(d.left="".concat(l,"px"),r.updateRule("".concat(s).concat(u,"F"),".".concat(o.td,".").concat(M,'[data-id="').concat(t.id,'"]'),{transform:"translateX(0)",left:"".concat(l+i).concat(n)}),a.delete("".concat(s).concat(u,"F"))),r.updateRule("".concat(s).concat(h),h,d),a.delete("".concat(s).concat(h)),r.updateRule("".concat(s).concat(u),u,f),a.delete("".concat(s).concat(u)),l+=t.width+e(c)})),a.forEach((function(t){return r.deleteRule(t)}))},e}(J);var rt=function(){function t(t,e,o,i){void 0===i&&(i=[]);var n=this;this.header=t,this.style=e,this.tableId=o,this.cellPool=[],this.loading=new WeakMap,this.visibleColumns={frozen:[],first:0,forcedFirst:0,last:-1,forcedLast:-1},this.visibleFirstColumnPos=0,this.horizontallyShifted=!1,this.columnAdapter=this.createColumnAdapter(),this.columnMixins=i.map((function(t){return new t(n.columnAdapter)})),this.columnFragment=t.ownerDocument.createDocumentFragment()}return t.prototype.leftShift=function(){var t=this.context,e=this.visibleColumns.frozen.reduce((function(e,o){return e+t.columns[o].width+t.column.padding(o)}),0);return this.visibleFirstColumnPos-e},Object.defineProperty(t.prototype,"headerScroller",{get:function(){return this.header.parentElement},enumerable:!1,configurable:!0}),t.prototype.addColumnMixin=function(t,e){this.columnMixins.push(new t(this.columnAdapter,e))},t.prototype.createColumnAdapter=function(){var t=this,e=this;return{visible:this.visibleColumns,addAtBeginning:this.addColumnAtStart.bind(this),addAtBottom:this.addColumnAtEnd.bind(this),removeFromBeginning:this.removeColumnFromStart.bind(this),removeFromBottom:this.removeColumnFromEnd.bind(this),updateOffset:this.updateColumnOffset.bind(this),scroller:this.headerScroller,syncFrozen:this.syncFrozen.bind(this),isScrollEventWaiting:function(){return C(t.headerScroller,"animation")},get visibleFirstRowPos(){return e.visibleFirstColumnPos},get context(){return e.context.column},get scrollOffset(){return e.lastScrollInfo?e.lastScrollInfo.left:0},get scrollTotal(){return e.lastScrollInfo?e.lastScrollInfo.width:e.headerScroller.clientWidth}}},t.prototype.init=function(){var t=this,e=this.context;this.style.update(e.defaultRowHeight-e.padding(-1),e.columns,e.column.padding,0,this.tableId),e.columns.forEach((function(){t.cellPool.push([])}))},t.prototype.onScrolledHorizontally=function(t,e,o){for(var i=this.onScrolledHorizontallyImpl(t,e),n=0,r=this.columnMixins;n<r.length;n++)r[n].onScrolled(o,i);return i},t.prototype.removeColumnFromStart=function(t,e,o){var i=this;void 0===o&&(o=this.visibleColumns.frozen.length),this.forEachRow((function(n){i.removeCellFromStart(n,t,e,o)}))},t.prototype.removeCellFromStart=function(t,e,o,i){for(var n=e;n<=o;n+=1){var r=0===i?t.firstElementChild:t.children[i];r.remove(),this.recycleCell(r,n)}},t.prototype.removeColumnFromEnd=function(t,e){var o=this;this.forEachRow((function(i){o.removeCellFromEnd(i,t,e)}))},t.prototype.removeCellFromEnd=function(t,e,o){for(var i=o;i>=e;i-=1){var n=t.lastElementChild;n.remove(),this.recycleCell(n,i)}},t.prototype.removeFrozenCells=function(t,e,o){for(var i=0,n=e;i<n.length;i++){var r=n[i],s=t.children[o];s.remove(),this.recycleCell(s,r)}},t.prototype.removeFrozenColumns=function(t,e){var o=this;this.forEachRow((function(i){o.removeFrozenCells(i,t,e)}))},t.prototype.removeAllColumns=function(t){var e=this;this.forEachRow((function(o){e.removeAllCells(o,t)}))},t.prototype.removeAllCells=function(t,e,o){var i=this;void 0===o&&(o=this.visibleColumns.first);var n=Array.from(t.children),r=this.visibleColumns.frozen;if(m(t),e||0===r.length)for(var s=0,a=r;s<a.length;s++){var l=a[s];this.recycleCell(n.shift(),l)}else for(l=0;l<r.length;l+=1)t.appendChild(n.shift());n.forEach((function(t,e){i.recycleCell(t,e+o)}))},t.prototype.selectProxyCell=function(t,e,o){var i,n,r=this.cellPool[e],s=o[e],a=r.pop(),l=a?this.updateCell(a,t,s)||a:this.createCell(this.header.ownerDocument,t,s);return h(l)?(i=l.item,n=l.ready):i=l,i!==a&&(i.dataset.id=s.id,i.classList.add(V,this.style.cssClasses.td,_("td-".concat(this.tableId)))),this.updateShiftedState(i,s),{item:i,ready:n}},t.prototype.handleCellReady=function(t,e,o){var i=this;void 0===o&&(o=-1),t.classList.add(T);var r=e;return this.loading.set(t,r),r.then((function(e){i.loading.delete(t),t.classList.remove(T),e===n&&o>=0&&i.cellPool[o].push(t)})),t},t.prototype.selectCell=function(t,e,o){var i=this.selectProxyCell(t,e,o),n=i.item,r=i.ready;return c(r)?this.handleCellReady(n,r,e):n},t.prototype.updateShiftedState=function(t,e){t.classList.toggle(M,e.frozen&&this.horizontallyShifted)},t.prototype.recycleCell=function(t,e){void 0===e&&(e=-1);var o=this.loading.get(t);null!=o?o.abort():!X(t)&&e>=0&&this.cellPool[e].push(t)},t.prototype.addColumnAtStart=function(t,e,o){var i=this;void 0===o&&(o=this.visibleColumns.frozen.length);var n=this.context.columns;this.forEachRow((function(r,s){i.addCellAtStart(r,s,t,e,o,n)}))},t.prototype.addCellAtStart=function(t,e,o,i,n,r){for(var s=i;s>=o;s-=1){var a=this.selectCell(e,s,r);t.insertBefore(a,n>0?t.children[n]:t.firstChild)}},t.prototype.insertFrozenCells=function(t,e,o,i,n){for(var r=t.children[i],s=0,a=o;s<a.length;s++){var l=a[s],c=this.selectCell(e,l,n);r?t.insertBefore(c,r):t.appendChild(c)}},t.prototype.insertFrozenColumns=function(t,e){var o=this,i=this.context.columns;this.forEachRow((function(n,r){o.insertFrozenCells(n,r,t,e,i)}))},t.prototype.addColumnAtEnd=function(t,e){var o=this,i=this.context.columns;this.forEachRow((function(n,r){o.addCellAtEnd(n,r,t,e,i)}))},t.prototype.addCellAtEnd=function(t,e,o,i,n){for(var r=o;r<=i;r+=1){var s=this.selectCell(e,r,n);t.appendChild(s)}},t.prototype.updateHeaders=function(){var t=this,e=this.context.columns;Array.from(this.header.children).forEach((function(o,i){var n,r=o,s=e[i],a=t.updateHeader(r,s);(n=h(a)?t.handleCellReady(a.item,a.ready,-1):a||r)!==r&&(n.dataset.id=s.id,n.classList.add(k,t.style.cssClasses.th,_("th-".concat(t.tableId))),t.header.replaceChild(r,n))}))},t.prototype.recreate=function(t,e){var o,i=this,n=this.context;this.style.update(n.defaultRowHeight-n.padding(-1),n.columns,n.column.padding,0,this.tableId),this.clearPool();for(var r=this.cellPool.length;r<n.columns.length;r+=1)this.cellPool.push([]);for(var s=this.columnFragment,a=s.ownerDocument,l=new Map;this.header.lastChild;){var c=this.header.lastChild;this.header.removeChild(c),l.set(null!==(o=c.dataset.id)&&void 0!==o?o:"",c)}n.columns.forEach((function(t){var e,o=l.get(t.id),n=o?i.updateHeader(o,t)||o:i.createHeader(a,t);(e=h(n)?i.handleCellReady(n.item,n.ready,-1):n)!==o&&(e.dataset.id=t.id,e.classList.add(k,i.style.cssClasses.th,_("th-".concat(i.tableId)))),s.appendChild(e)})),this.header.appendChild(s);var d=P(t,e,n.column.defaultRowHeight,n.column.exceptions,n.column.numberOfRows),u=d.first,f=d.last,p=d.firstRowPos;if(this.visibleColumns.first=u,this.visibleColumns.forcedFirst=u,this.visibleColumns.last=f,this.visibleColumns.forcedLast=f,n.columns.some((function(t){return t.frozen}))){var y=A([],n.columns,u).target;this.visibleColumns.frozen=y}else this.visibleColumns.frozen=[];this.updateColumnOffset(p)},t.prototype.clearPool=function(){this.cellPool.forEach((function(t){return t.splice(0,t.length)}))},t.prototype.updateColumnOffset=function(t){var e=t!==this.visibleFirstColumnPos;if(this.visibleFirstColumnPos=t,e){var o=this.context;this.style.update(o.defaultRowHeight-o.padding(-1),o.columns,o.column.padding,0,this.tableId)}},t.prototype.createRow=function(t,e){var o=this.context.columns,i=this.visibleColumns;if(i.frozen.length>0)for(var n=0,r=i.frozen;n<r.length;n++){var s=r[n],a=this.selectCell(e,s,o);t.appendChild(a)}for(s=i.first;s<=i.last;s+=1)a=this.selectCell(e,s,o),t.appendChild(a)},t.prototype.updateRow=function(t,e){var o,i=this.context.columns,n=this.visibleColumns;switch(t.childElementCount){case 0:n.frozen.length>0&&this.insertFrozenCells(t,e,n.frozen,0,i),this.addCellAtEnd(t,e,n.first,n.last,i);break;case 1:var r=t.firstElementChild,s=null!==(o=r.dataset.id)&&void 0!==o?o:"",a=i.findIndex((function(t){return t.id===s}));t.removeChild(r),a>=0&&this.recycleCell(r,a),n.frozen.length>0&&this.insertFrozenCells(t,e,n.frozen,0,i),this.addCellAtEnd(t,e,n.first,n.last,i);break;default:this.mergeColumns(t,e)}},t.prototype.mergeColumns=function(t,e){for(var o=this,i=this.context.columns,n=this.visibleColumns,r=new Map;t.lastChild;){var s=t.lastChild;t.removeChild(s),r.set(s.dataset.id,s)}for(var a=function(n){var s=i[n],a=r.get(s.id);if(a){r.delete(s.id);var l,c=o.updateCell(a,e,s)||a;(l=h(c)?o.handleCellReady(c.item,c.ready,n):c)&&l!==a&&(l.dataset.id=s.id,l.classList.add(V,o.style.cssClasses.td,_("td-".concat(o.tableId)))),o.updateShiftedState(l,s),t.appendChild(l)}else{var d=o.selectCell(e,n,i);t.appendChild(d)}},l=0,c=n.frozen;l<c.length;l++)a(c[l]);for(var d=n.first;d<=n.last;d+=1)a(d);if(0!==r.size){var u=new Map(i.map((function(t,e){return[t.id,e]})));r.forEach((function(t,e){var i=u.get(e);null!=i&&i>=0&&o.recycleCell(t,i)}))}},t.prototype.updateShiftedStates=function(){if(this.context.columns.some((function(t){return t.frozen}))){var t=this.horizontallyShifted,e=M;if(t){for(var o=Array.from(this.header.querySelectorAll(".".concat(F,":not(.").concat(e,")"))),i=Array.from(this.body.querySelectorAll(".".concat(F,":not(.").concat(e,")"))),n=0,r=o;n<r.length;n++)r[n].classList.add(e);for(var s=0,a=i;s<a.length;s++)a[s].classList.add(e)}else{o=Array.from(this.header.querySelectorAll(".".concat(F,".").concat(e))),i=Array.from(this.body.querySelectorAll(".".concat(F,".").concat(e)));for(var l=0,c=o;l<c.length;l++)c[l].classList.remove(e);for(var h=0,d=i;h<d.length;h++)d[h].classList.remove(e)}}},t.prototype.syncFrozen=function(t){var e=this.context.columns,o=this.visibleColumns;if(!e.some((function(t){return t.frozen})))return 0;if(0===t)return o.frozen.length>0&&(this.removeFrozenColumns(o.frozen,0),o.frozen=[]),0;var i=o.frozen.length,n=A(o.frozen,e,t),r=n.target,s=n.added,a=n.removed;return a.length>0&&this.removeFrozenColumns(a,i-a.length),s.length>0&&this.insertFrozenColumns(s,i-a.length),o.frozen=r,r.length},t.prototype.onScrolledHorizontallyImpl=function(t,e){var o=this.horizontallyShifted!==t>0;this.horizontallyShifted=t>0;var i=this.context.column,n=P(t,e,i.defaultRowHeight,i.exceptions,i.numberOfRows),r=n.first,s=n.last,a=n.firstRowPos,l=this.visibleColumns;if(l.forcedFirst=r,l.forcedLast=s,r-l.first>=0&&s-l.last<=0)return o&&this.updateShiftedStates(),x.NONE;var c=x.SOME,h=this.syncFrozen(r);return r>l.last||s<l.first?(this.removeAllColumns(!1),this.addColumnAtEnd(r,s),c=x.ALL):r<l.first?(this.removeColumnFromEnd(s+1,l.last),this.updateShiftedStates(),this.addColumnAtStart(r,l.first-1,h),c=x.SOME_TOP):(this.removeColumnFromStart(l.first,r-1,h),this.updateShiftedStates(),this.addColumnAtEnd(l.last+1,s),c=x.SOME_BOTTOM),l.first=r,l.last=s,this.updateColumnOffset(a),c},t}(),st=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),at=function(t){function e(e,o,i){void 0===i&&(i={});var n=t.call(this,et(e,o).querySelector("main > article"),i)||this;n.root=e,e.classList.add(_(),"lineup-engine"),n.style=new nt(n.root,o);var r=n,s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),Object.defineProperty(e.prototype,"context",{get:function(){return r.context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return r.body},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastScrollInfo",{get:function(){return r.lastScrollInfo},enumerable:!1,configurable:!0}),e.prototype.createHeader=function(t,e){return r.createHeader(t,e)},e.prototype.updateHeader=function(t,e){return r.updateHeader(t,e)},e.prototype.createCell=function(t,e,o){return r.createCell(t,e,o)},e.prototype.updateCell=function(t,e,o){return r.updateCell(t,e,o)},e.prototype.updateColumnOffset=function(e){t.prototype.updateColumnOffset.call(this,e),r.updateOffset(r.visibleFirstRowPos)},e.prototype.forEachRow=function(t){return r.forEachRow(t)},e}(rt);return n.cell=new s(n.header,n.style,n.style.id,i.mixins||[]),n}return st(e,t),Object.defineProperty(e.prototype,"idPrefix",{get:function(){return this.style.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this.root.querySelector("header > article")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerScroller",{get:function(){return this.root.getElementsByTagName("header")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleColumns",{get:function(){return this.cell.visibleColumns},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleFirstColumnPos",{get:function(){return this.cell.visibleFirstColumnPos},enumerable:!1,configurable:!0}),e.prototype.addColumnMixin=function(t,e){this.cell.addColumnMixin(t,e)},e.prototype.init=function(){var e=this;this.cell.init();var o=b(this.body.parentElement,this.options.async,(function(t){if(!(Math.abs(o.left-t.left)<e.options.minScrollDelta&&Math.abs(o.width-t.width)<e.options.minScrollDelta)){var i=t.left>o.left;o=t,e.onScrolledHorizontally(t.left,t.width,i)}}));t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.root.remove()},e.prototype.onScrolledHorizontally=function(t,e,o){return this.cell.onScrolledHorizontally(t,e,o)},e.prototype.updateHeaders=function(){this.cell.updateHeaders()},e.prototype.handleCellReady=function(t,e,o){return void 0===o&&(o=-1),this.cell.handleCellReady(t,e,o)},e.prototype.recycleCell=function(t,e){void 0===e&&(e=-1),this.cell.recycleCell(t,e)},e.prototype.updateColumnWidths=function(){var t=this.context;this.style.update(t.defaultRowHeight-t.padding(-1),t.columns,t.column.padding,0,this.idPrefix)},e.prototype.updateSizer=function(t){var e=this.context,o=e.totalHeight,i=e.column.totalHeight;this.updateShifts(t,this.cell.leftShift()),this.bodySizer.style.transform="translate(".concat(Math.max(0,i-1).toFixed(0),"px, ").concat(Math.max(0,o-1).toFixed(0),"px)")},e.prototype.updateShifts=function(t,e){G(this.body,0,t.toFixed(0))},e.prototype.recreate=function(e){var o=this.bodyScroller,i=o.scrollLeft;this.cell.recreate(i,o.clientWidth),t.prototype.recreate.call(this,e),o.scrollLeft=i},e.prototype.clearPool=function(){t.prototype.clearPool.call(this),this.cell.clearPool()},e.prototype.createRow=function(t,e){this.cell.createRow(t,e)},e.prototype.updateRow=function(t,e){this.cell.updateRow(t,e)},e}(Z);const lt=function(){function t(t,e){return this.adapter=t,this.prefetchTimeout=-1,this.cleanupTimeout=-1,this.options={prefetchRows:20,cleanUpRows:10,delay:200},Object.assign(this.options,e),this}return t.prototype.prefetchDown=function(){if(this.prefetchTimeout=-1,!this.adapter.isScrollEventWaiting()){var t=this.adapter.context,e=Math.min(this.adapter.visible.forcedLast+this.options.prefetchRows,t.numberOfRows-1);this.adapter.visible.last===e&&this.adapter.visible.last>=this.adapter.visible.forcedLast+this.options.prefetchRows||(this.adapter.addAtBottom(this.adapter.visible.last+1,e),this.adapter.visible.last=e)}},t.prototype.prefetchUp=function(){if(this.prefetchTimeout=-1,!(this.adapter.isScrollEventWaiting()||this.adapter.visible.first<=this.adapter.visible.forcedFirst-this.options.prefetchRows)){var t=this.adapter.context,e=P(Math.max(this.adapter.scrollOffset-this.options.prefetchRows*t.defaultRowHeight,0),this.adapter.scrollTotal,t.defaultRowHeight,t.exceptions,t.numberOfRows),o=e.first,i=e.firstRowPos;if(o!==this.adapter.visible.first){var n=this.adapter.syncFrozen?this.adapter.syncFrozen(o):0;this.adapter.addAtBeginning(o,this.adapter.visible.first-1,n),this.adapter.visible.first=o,this.adapter.updateOffset(i)}}},t.prototype.triggerPrefetch=function(t){this.prefetchTimeout>=0&&clearTimeout(this.prefetchTimeout);var e=this.adapter.visible.last<this.adapter.visible.forcedLast+this.options.prefetchRows,o=this.adapter.visible.first>this.adapter.visible.forcedFirst-this.options.prefetchRows,i=this.adapter.visible.last===this.adapter.context.numberOfRows,n=0===this.adapter.visible.first;if((!t||e||i)&&(t||o||n)){var r=t||n?this.prefetchDown.bind(this):this.prefetchUp.bind(this);this.prefetchTimeout=self.setTimeout(r,this.options.delay)}},t.prototype.cleanUpTop=function(t){if(this.cleanupTimeout=-1,!this.adapter.isScrollEventWaiting()){var e=Math.max(0,t-this.options.cleanUpRows);if(!(e<=this.adapter.visible.first)){var o=this.adapter.syncFrozen?this.adapter.syncFrozen(e):0;this.adapter.removeFromBeginning(this.adapter.visible.first,e-1,o);var i=this.adapter.context,n=(e-this.adapter.visible.first)*i.defaultRowHeight;if(i.exceptions.length>0)for(var r=this.adapter.visible.first;r<e;r+=1){var s=i.exceptionsLookup.get(r);null!=s&&(n+=s-i.defaultRowHeight)}this.adapter.visible.first=e,this.adapter.updateOffset(this.adapter.visibleFirstRowPos+n),this.prefetchDown()}}},t.prototype.cleanUpBottom=function(t){this.cleanupTimeout=-1;var e=t+this.options.cleanUpRows;this.adapter.visible.last<=e||(this.adapter.removeFromBottom(e+1,this.adapter.visible.last),this.adapter.visible.last=e,this.prefetchUp())},t.prototype.triggerCleanUp=function(t,e,o){this.cleanupTimeout>=0&&clearTimeout(this.cleanupTimeout),o&&t-this.options.cleanUpRows<=this.adapter.visible.first||!o&&this.adapter.visible.last<=e+this.options.cleanUpRows||(this.cleanupTimeout=self.setTimeout(o?this.cleanUpTop.bind(this):this.cleanUpBottom.bind(this),this.options.delay,o?t:e))},t.prototype.onScrolled=function(t,e){this.adapter.isScrollEventWaiting()||(e!==x.ALL&&this.options.cleanUpRows>0&&this.triggerCleanUp(this.adapter.visible.forcedFirst,this.adapter.visible.forcedLast,t),e!==x.NONE&&this.options.prefetchRows>0&&this.triggerPrefetch(t))},t}();var ct=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),ht=function(t){function e(e,o,i,n,r){void 0===r&&(r={});var s=t.call(this,o,r)||this;s.header=e,s.body=o,s.tableId=i,s.style=n;var a=s,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ct(e,t),Object.defineProperty(e.prototype,"context",{get:function(){return a.context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return a.body},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastScrollInfo",{get:function(){return a.lastScrollInfo},enumerable:!1,configurable:!0}),e.prototype.createHeader=function(t,e){return a.createHeader(t,e)},e.prototype.updateHeader=function(t,e){return a.updateHeader(t,e)},e.prototype.createCell=function(t,e,o){return a.createCell(t,e,o)},e.prototype.updateColumnOffset=function(e){t.prototype.updateColumnOffset.call(this,e),a.updateOffset(a.visibleFirstRowPos)},e.prototype.updateCell=function(t,e,o){return a.updateCell(t,e,o)},e.prototype.forEachRow=function(t){return a.forEachRow(t)},e}(rt);return s.cell=new l(s.header,s.style,i,r.mixins||[]),s}return ct(e,t),e.prototype.addColumnMixin=function(t,e){this.cell.addColumnMixin(t,e)},Object.defineProperty(e.prototype,"idPrefix",{get:function(){return this.tableId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.context.column.totalHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleColumns",{get:function(){return this.cell.visibleColumns},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleFirstColumnPos",{get:function(){return this.cell.visibleFirstColumnPos},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.context.totalHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return this.header.classList.contains(T)},set:function(t){this.hidden!==t&&(this.header.classList.toggle(T,t),this.body.classList.toggle(T,t),this.header.classList.toggle(H,t),this.body.classList.toggle(H,t),this.onVisibilityChanged(!t))},enumerable:!1,configurable:!0}),e.prototype.updateSizer=function(t){this.updateShifts(t,this.cell.leftShift())},e.prototype.updateShifts=function(t,e){G(this.body,0,t.toFixed(0))},e.prototype.onVisibilityChanged=function(t){},e.prototype.hide=function(){this.hidden=!0},e.prototype.show=function(t,e,o){var i=this.hidden;this.hidden=!1,i?this.revalidate():this.onScrolledHorizontally(t,e,o)},e.prototype.init=function(){this.hide(),this.cell.init(),t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.header.remove(),this.style.remove(this.tableId)},e.prototype.onScrolledVertically=function(e,o,i){return this.hidden?x.NONE:t.prototype.onScrolledVertically.call(this,e,o,i)},e.prototype.onScrolledHorizontally=function(t,e,o){var i=this.cell.onScrolledHorizontally(t,e,o);return this.updateSizer(this.visibleFirstRowPos),i},e.prototype.updateHeaders=function(){this.cell.updateHeaders()},e.prototype.handleCellReady=function(t,e,o){return void 0===o&&(o=-1),this.cell.handleCellReady(t,e,o)},e.prototype.recycleCell=function(t,e){void 0===e&&(e=-1),this.cell.recycleCell(t,e)},e.prototype.updateColumnWidths=function(){var t=this.context;this.style.update(t.defaultRowHeight-t.padding(-1),t.columns,t.column.padding,0,this.tableId)},e.prototype.recreate=function(e){var o=this.bodyScroller,i=o.scrollLeft;this.cell.recreate(i,o.clientWidth),t.prototype.recreate.call(this,e),o.scrollLeft=i},e.prototype.clearPool=function(){t.prototype.clearPool.call(this),this.cell.clearPool()},e.prototype.createRow=function(t,e){this.cell.createRow(t,e),t.classList.add(this.style.cssClasses.tr)},e.prototype.updateRow=function(t,e){this.cell.updateRow(t,e)},e}(Z),dt=function(t,e,o){if(o||2===arguments.length)for(var i,n=0,r=e.length;n<r;n++)!i&&n in e||(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))};const ut=function(){function t(t,e,o){void 0===o&&(o={});var i=this;this.node=t,this.tableId=0,this.sections=[],this.options={columnPadding:0,async:v,minScrollDelta:30},Object.assign(this.options,o);var n=e.startsWith("#")?e.slice(1):e;t.id=n,t.innerHTML='<header id="header-'.concat(n,'" class="').concat(B," ").concat(_("header-".concat(n)),'">\n      <footer class="').concat(D," ").concat(_("footer-".concat(n)),'">&nbsp;</footer>\n    </header>\n    <main id="body-').concat(n,'" class="').concat(I," ").concat(_("body-".concat(n)),'">\n      <footer class="').concat(D,'">&nbsp;</footer>\n    </main>'),t.classList.add(_(),z,"lineup-engine"),this.style=new nt(this.node,n);var r=b(this.main,this.options.async,(function(t){if(!(Math.abs(r.left-t.left)<i.options.minScrollDelta&&Math.abs(r.width-t.width)<i.options.minScrollDelta)){var e=t.left>r.left;r=t,i.onScrolledHorizontally(t.left,t.width,e)}}))}return t.prototype.update=function(){var t=this;this.onScrolledHorizontally(this.main.scrollLeft,this.main.clientWidth,!1);var e=0;this.sections.forEach((function(o){o.body.style.left="".concat(e,"px"),o.header.style.left="".concat(e,"px"),e+=o.width+t.options.columnPadding}))},t.prototype.onScrolledHorizontally=function(t,e,o){var i=this,n=0,r=t+e;this.sections.forEach((function(e){var s=n+e.width;s<t||n>r?e.hide():e.show(Math.max(0,t-n),Math.min(r-n,e.width),o),n=s+i.options.columnPadding})),this.updateOffset()},t.prototype.updateOffset=function(){var t=this,e=this.header.getElementsByTagName("footer")[0],o=this.main.getElementsByTagName("footer")[0],i=this.sections.reduce((function(t,e){return Math.max(t,e.height)}),0),n=this.sections.reduce((function(e,o){return e+o.width+t.options.columnPadding}),0);G(e,n,0),G(o,n,i)},t.prototype.destroy=function(){this.sections.forEach((function(t){return t.destroy()})),this.node.remove()},Object.defineProperty(t.prototype,"doc",{get:function(){return this.node.ownerDocument},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this.node.getElementsByTagName("header")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"main",{get:function(){return this.node.getElementsByTagName("main")[0]},enumerable:!1,configurable:!0}),t.prototype.pushTable=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var i=this.doc.createElement("article"),n=this.doc.createElement("article"),r="".concat(this.node.id,"T").concat(this.tableId);this.tableId+=1;var s=ot(r),a=it(r);i.id=s.thead,i.classList.add(U,a.thead),n.id=s.tbody,n.classList.add(W,a.tbody),this.header.insertBefore(i,this.header.lastElementChild),this.main.appendChild(n);var l=t.call.apply(t,dt([this,i,n,r,this.style],e,!1));return l.init(),this.sections.push(l),this.update(),l},t.prototype.pushSeparator=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var i=this.doc.createElement("section"),n=this.doc.createElement("section");i.classList.add(_("header-separator")),n.classList.add(_("separator")),this.header.insertBefore(i,this.header.lastElementChild),this.main.appendChild(n);var r=t.call.apply(t,dt([this,i,n,this.style],e,!1));return r.init(),this.sections.push(r),this.update(),r},t.prototype.remove=function(t){var e=this.sections.indexOf(t);return!(e<0||(this.sections.splice(e,1),t.destroy(),this.update(),0))},t.prototype.clear=function(){this.sections.splice(0,this.sections.length).forEach((function(t){return t.destroy()})),this.update()},t.prototype.widthChanged=function(){this.update()},t}();var ft="2.5.0",pt="20220728-014222";return e})()));
//# sourceMappingURL=lineupengine.js.map